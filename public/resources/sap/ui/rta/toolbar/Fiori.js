/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/Image","./Adaptation","../Utils","sap/base/Log"],function(i,t,e,o){"use strict";var r="sapUiRtaFioriHeaderInvisible";var n=t.extend("sap.ui.rta.toolbar.Fiori",{metadata:{library:"sap.ui.rta"},renderer:"sap.ui.rta.toolbar.AdaptationRenderer",type:"fiori"});n.prototype.init=function(){this._oRenderer=e.getFiori2Renderer();this._oFioriHeader=this._oRenderer.getRootControl().getOUnifiedShell().getHeader();t.prototype.init.apply(this,arguments)};n.prototype.show=function(){this._oFioriHeader.addStyleClass(r);return t.prototype.show.apply(this,arguments)};n.prototype.buildControls=function(){return t.prototype.buildControls.apply(this,arguments).then(function(t){var e=this._oFioriHeader.getLogo();if(this._oFioriHeader.getShowLogo()&&e){var o=this._oFioriHeader.$().find("#shell-header-icon").get(0);var r;var n;if(o){r=o.getBoundingClientRect().width;n=o.getBoundingClientRect().height;this._checkLogoSize(o,r,n)}this.getControl("iconSpacer").setWidth("8px");this._iLogoWidth=r+8;this.getControl("iconBox").addItem(new i(this.getId()+"_fragment--sapUiRta_icon",{src:e,width:r?r+"px":r,height:n?n+"px":n}))}return t}.bind(this))};n.prototype.hide=function(){return t.prototype.hide.apply(this,arguments).then(function(){this._oFioriHeader.removeStyleClass(r)}.bind(this))};n.prototype._checkLogoSize=function(i,t,e){var r=i.naturalWidth;var n=i.naturalHeight;if(t!==r||e!==n){o.error(["sap.ui.rta: please check Fiori Launchpad logo, expected size is",t+"x"+e+",","but actual is "+r+"x"+n].join(" "))}};n.prototype._restoreHiddenElements=function(){if(this._iLogoVisibilityLimit&&window.innerWidth>this._iLogoVisibilityLimit){this._setLogoVisibility(true);delete this._iLogoVisibilityLimit}t.prototype._restoreHiddenElements.apply(this)};n.prototype._hideElementsOnIntersection=function(i,e){var o;if(e[0].intersectionRatio===0){this.adjustToolbarSectionWidths();this._observeIntersections();return}if(e[0].intersectionRatio<1){if(!this._iLogoVisibilityLimit&&i===t.LEFT_SECTION){var r=e[0].boundingClientRect.width-e[0].intersectionRect.width;o=r>this._iLogoWidth;this._iLogoVisibilityLimit=this._calculateWindowWidth(e);this._setLogoVisibility(false);if(o){t.prototype._hideElementsOnIntersection.apply(this,arguments)}return}}t.prototype._hideElementsOnIntersection.apply(this,arguments)};n.prototype._setLogoVisibility=function(i){var t=this.getControl("iconBox");var e=this.getControl("iconSpacer");t.setVisible(i);e.setVisible(i)};n.prototype.destroy=function(){this._oFioriHeader.removeStyleClass(r);t.prototype.destroy.apply(this,arguments)};return n});
//# sourceMappingURL=Fiori.js.map