/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/rta/command/BaseCommand","sap/ui/rta/library","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/api/ControlVariantApplyAPI","sap/ui/fl/Utils"],function(e,t,n,a,r){"use strict";var i=e.extend("sap.ui.rta.command.ControlVariantConfigure",{metadata:{library:"sap.ui.rta",properties:{control:{type:"any"},changes:{type:"array"}},associations:{},events:{}}});i.prototype.prepare=function(e){this.sLayer=e.layer;return true};i.prototype.getPreparedChange=function(){if(!this._aPreparedChanges){return undefined}return this._aPreparedChanges};i.prototype.execute=function(){var e=this.getControl();this.oAppComponent=r.getAppComponentForControl(e);this.oModel=this.oAppComponent.getModel(a.getVariantModelName());this.sVariantManagementReference=n.getSelector(e,this.oAppComponent).id;this._aPreparedChanges=[];this.getChanges().forEach(function(e){e.appComponent=this.oAppComponent;e.generator=t.GENERATOR_NAME;this._aPreparedChanges.push(this.oModel.addVariantChange(this.sVariantManagementReference,e))}.bind(this));return Promise.resolve().then(function(){this.oModel.checkUpdate(true)}.bind(this))};i.prototype.undo=function(){var e;this.getChanges().forEach(function(t,n){e={};Object.keys(t).forEach(function(n){var a="original"+n.charAt(0).toUpperCase()+n.substr(1);if(n==="visible"){e[n]=true}else if(t[a]){e[n]=t[a];e[a]=t[n]}else if(n.indexOf("original")===-1){e[n]=t[n]}});var a=this._aPreparedChanges[n];this.oModel.deleteVariantChange(this.sVariantManagementReference,e,a)}.bind(this));return Promise.resolve().then(function(){this.oModel.checkUpdate(true);this._aPreparedChanges=null}.bind(this))};return i});
//# sourceMappingURL=ControlVariantConfigure.js.map