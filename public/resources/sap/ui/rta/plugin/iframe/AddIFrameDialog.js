/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/core/Fragment","sap/ui/core/library","sap/ui/core/Core","sap/ui/model/json/JSONModel","sap/ui/rta/Utils","sap/ui/rta/plugin/iframe/AddIFrameDialogController","sap/ui/fl/util/getContainerUserInfo"],function(e,t,a,i,A,_,l,n,r){"use strict";var o=i.ValueState;var E=A.getLibraryResourceBundle("sap.ui.rta");var I="https://help.sap.com/docs/search?q=Embedding%20Content%20%28Object%20Pages%29";var T=E.getText("IFRAME_ADDIFRAME_DIALOG_URL_WARNING_TEXT")+" ("+"<a href="+I+">"+E.getText("IFRAME_ADDIFRAME_DIALOG_URL_WARNING_LINKTEXT")+"</a>"+")";var D={dialogTitle:E.getText("IFRAME_ADDIFRAME_DIALOG_TITLE"),dialogCreateTitle:E.getText("IFRAME_ADDIFRAME_DIALOG_TITLE"),dialogUpdateTitle:E.getText("IFRAME_ADDIFRAME_DIALOG_UPDATE_TITLE"),sizeTitle:E.getText("IFRAME_ADDIFRAME_DIALOG_SIZE_TITLE"),widthLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_WIDTH_LABEL"),widthUnitLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_WIDTH_UNITLABEL"),heightLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_HEIGHT_LABEL"),heightUnitLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_HEIGHT_UNITLABEL"),saveText:E.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SAVE"),cancelText:E.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_CANCEL"),previewUrlLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_PREVIEW_URL_LABEL"),previewUrlMessage:E.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_PREVIEW_MESSAGE"),previewButtonText:E.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SHOW_PREVIEW"),showPreviewButton:E.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SHOW_PREVIEW"),updatePreviewButton:E.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_UPDATE_PREVIEW"),previewFrameLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_PREVIEW_FRAME_LABEL"),parameterSearchLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_PARAMETER_SEARCH_LABEL"),editUrlLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_EDIT_URL_LABEL"),parametersLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_PARAMETERS_LABEL"),columnParameterLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_TABLE_PARAMETER_LABEL"),columnUiValueLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_TABLE_UI_VALUE_LABEL"),containerTitleLabel:E.getText("IFRAME_ADDIFRAME_DIALOG_CONTAINER_TITLE_LABEL"),containerTitleDefaultValue:E.getText("IFRAME_ADDIFRAME_DIALOG_CONTAINER_TITLE_DEFAULT_VALUE_TEXT"),selectAdditionalTextPercentSection:E.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_PERCENT_SECTION"),selectAdditionalTextPercentHeader:E.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_PERCENT_HEADER"),selectAdditionalTextVh:E.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_VH"),selectAdditionalTextPx:E.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_PX"),selectAdditionalTextRem:E.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_REM")};function s(e,t,a,i){D.dialogTitle=e?D.dialogUpdateTitle:D.dialogCreateTitle;var A=t?D.selectAdditionalTextPercentSection:D.selectAdditionalTextPercentHeader;return new _({text:D,asContainer:{value:t},title:{value:D.containerTitleDefaultValue,valueState:o.None,id:"sapUiRtaAddIFrameDialog_ContainerTitle_TitleInput"},frameWidth:{value:parseFloat(a)||100,valueState:o.None,id:"sapUiRtaAddIFrameDialog_WidthInput"},frameWidthUnit:{value:"%"},frameHeight:{value:parseFloat(i)||50,valueState:o.None,id:"sapUiRtaAddIFrameDialog_HeightInput"},frameHeightUnit:{value:"%"},frameUrl:{value:"",valueState:o.None},previewUrl:{value:""},documentationLink:{HTML:T},parameters:{value:[]},unitsOfWidthMeasure:[{unit:"%",descriptionText:A},{unit:"px",descriptionText:D.selectAdditionalTextPx},{unit:"rem",descriptionText:D.selectAdditionalTextRem}],unitsOfHeightMeasure:[{unit:"vh",descriptionText:D.selectAdditionalTextVh},{unit:"px",descriptionText:D.selectAdditionalTextPx},{unit:"rem",descriptionText:D.selectAdditionalTextRem}]})}var d=t.extend("sap.ui.rta.plugin.iframe.AddIFrameDialog",{metadata:{library:"sap.ui.rta",events:{opened:{}}}});d.prototype.open=function(e){return new Promise(function(t){this._fnResolve=t;this._createDialog(e)}.bind(this))};d.prototype._createDialog=function(t){var i;var A;var _;var r;if(t){i=!!t.updateMode;A=!!t.asContainer;_=t.frameWidth;r=t.frameHeight}this._oJSONModel=s(i,A,_,r);this._oController=new n(this._oJSONModel,t);a.load({name:"sap.ui.rta.plugin.iframe.AddIFrameDialog",controller:this._oController}).then(function(e){this._oDialog=e;this._oDialog.addStyleClass(l.getRtaStyleClassName());this._oDialog.setModel(this._oJSONModel);this._openDialog()}.bind(this)).catch(function(t){e.error("Error loading fragment sap.ui.rta.plugin.iframe.AddIFrameDialog: ",t)})};d.prototype._openDialog=function(){this._oDialog.attachAfterOpen(function(){this._disablePanelExpand();this.fireOpened()}.bind(this));this._oDialog.attachAfterClose(function(){this._oDialog.destroy();this._oDialog=null;this._fnResolve(this._oController.getSettings());this._oController=null}.bind(this));this._oDialog.open()};d.prototype._disablePanelExpand=function(){var e=A.byId("sapUiRtaAddIFrameDialog_PreviewLinkPanel").getDependents()[0];if(e){e.setEnabled(false)}};d.buildUrlBuilderParametersFor=function(e){return r().then(function(t){var a=Object.keys(t).map(function(e){return{label:e,key:"{$user>/"+e+"}",value:t[e]}});var i=e.getBindingContext();var A;if(i){var _=i.getObject();A=Object.keys(_).filter(function(e){return typeof _[e]!=="object"}).map(function(e){return{label:e,key:"{"+e+"}",value:_[e]}})}else{A=[]}return a.concat(A)})};return d});
//# sourceMappingURL=AddIFrameDialog.js.map