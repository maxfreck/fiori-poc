//@ui5-bundle sap/ui/mdc/library-preload.js
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/ActionToolbar", ["sap/m/OverflowToolbar","sap/m/OverflowToolbarRenderer","sap/m/ToolbarSpacer","sap/m/ToolbarSeparator","sap/m/library","sap/ui/mdc/enum/ActionToolbarActionAlignment","sap/ui/mdc/p13n/subcontroller/ActionToolbarController","sap/m/p13n/Engine"],function(t,e,o,n,r,i,a,s){"use strict";var g=r.OverflowToolbarPriority;var p=t.extend("sap.ui.mdc.ActionToolbar",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/actiontoolbar/ActionToolbar.designtime",defaultAggregation:"actions",properties:{useAsHeader:{type:"boolean",group:"Behavior",defaultValue:true}},aggregations:{begin:{type:"sap.ui.core.Control",multiple:true},between:{type:"sap.ui.core.Control",multiple:true},actions:{type:"sap.ui.mdc.actiontoolbar.ActionToolbarAction",multiple:true},end:{type:"sap.ui.core.Control",multiple:true}}},renderer:e});var l=["begin","between","actions","end"];var h=function(){var t={canOverflow:true,getCustomImportance:function(){return g.NeverOverflow}};return t};p.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oBeginSeparator=new n({visible:false});this._oBeginSeparator.getOverflowToolbarConfig=h;this._oEndActionsBeginSeparator=new n({visible:false});this._oEndActionsBeginSeparator.getOverflowToolbarConfig=h;this._oEndActionsEndSeparator=new n({visible:false});this._oEndActionsEndSeparator.getOverflowToolbarConfig=h;this._oSpacer=new o;this.setUseAsHeader(true);s.getInstance().register(this,{controller:{actionsKey:new a({control:this})}})};p.prototype.exit=function(){t.prototype.exit.apply(this,arguments);if(this._oBeginSeparator){this._oBeginSeparator.destroy()}if(this._oEndActionsBeginSeparator){this._oEndActionsBeginSeparator.destroy()}if(this._oEndActionsEndSeparator){this._oEndActionsEndSeparator.destroy()}if(this._oSpacer){this._oSpacer.destroy()}};p.prototype.addAggregation=function(e,o){if(e==="content"){throw new Error("Mutator functions of the content aggregation of the ActionToolbar '"+this.getId()+"' must not be used.")}var n=arguments;if(l.includes(e)){this._registerControlListener(o);this._resetAndInvalidateToolbar(false);if(o){this._moveControlInSuitableCollection(o,this._getControlPriority(o))}this._informNewFlexibleContentAdded(o);var r=this._callToolbarMethod("addAggregation",n);this._updateSeparators();return r}return t.prototype.addAggregation.apply(this,arguments)};p.prototype.destroyAggregation=function(e){if(e==="content"){throw new Error("Mutator functions of the content aggregation of the ActionToolbar '"+this.getId()+"' must not be used.")}if(l.includes(e)){var o=this.removeAllAggregation(e);for(var n=0;n<o.length;n++){o[n].destroy()}this._updateSeparators();return this}return t.prototype.destroyAggregation.apply(this,arguments)};p.prototype.insertAggregation=function(e,o,n){if(e==="content"){throw new Error("Mutator functions of the content aggregation of the ActionToolbar '"+this.getId()+"' must not be used.")}if(l.includes(e)){this._registerControlListener(o);this._resetAndInvalidateToolbar(false);if(o){this._moveControlInSuitableCollection(o,this._getControlPriority(o))}this._informNewFlexibleContentAdded(o);var r=this._callToolbarMethod("insertAggregation",arguments);this._updateSeparators();return r}return t.prototype.insertAggregation.apply(this,arguments)};p.prototype.removeAllAggregation=function(e){if(e==="content"){throw new Error("Mutator functions of the content aggregation of the ActionToolbar '"+this.getId()+"' must not be used.")}return t.prototype.removeAllAggregation.apply(this,arguments)};p.prototype.removeAggregation=function(e,o){if(e==="content"){throw new Error("Mutator functions of the content aggregation of the ActionToolbar '"+this.getId()+"' must not be used.")}if(l.includes(e)){var n=this._callToolbarMethod("removeAggregation",arguments);if(n){this._getPopover().removeAssociatedContent(n.getId())}this._resetAndInvalidateToolbar(false);this._deregisterControlListener(n);this._removeContentFromControlsCollections(n);this._updateSeparators();return n}return t.prototype.removeAggregation.apply(this,arguments)};p.prototype.setUseAsHeader=function(t){this.setProperty("useAsHeader",t,true);this.toggleStyleClass("sapMTBHeader-CTX",!!t);return this};p.prototype.getEndActionsBegin=function(){return this.getActionsWithLayoutInformation({aggregationName:"end",alignment:i.Begin})};p.prototype.getEndActionsEnd=function(){return this.getActionsWithLayoutInformation({aggregationName:"end",alignment:i.End})};p.prototype.getActionsWithLayoutInformation=function(t){return this.getActions().filter(function(e){var o=e.getLayoutInformation();return o.aggregationName===t.aggregationName&&o.alignment===t.alignment})};p.prototype.onAfterRendering=function(){t.prototype.onAfterRendering.apply(this,arguments);this._updateSeparators()};p.prototype._onContentPropertyChangedOverflowToolbar=function(e){if(this._bIsBeingDestroyed){return}t.prototype._onContentPropertyChangedOverflowToolbar.apply(this,arguments);if(e.getParameter("name")==="visible"||e.getParameter("name")==="width"&&e.getSource()!=this._oBeginSeparator){this._updateSeparators()}};p.prototype._hasVisible=function(t){var e=this.getAggregation("_popover")?this.getAggregation("_popover")._getAllContent():[];var o=t.filter(function(t){return e.indexOf(t)===-1});return o.some(function(t){var e=t.getWidth?t.getWidth()!=="0px":true;return t.getVisible()&&e})};p.prototype._updateSeparators=function(){var t=this._hasVisible(this.getEnd());if(this._oBeginSeparator){var e=this._hasVisible(this.getBegin());var o=this._hasVisible(this.getBetween());this._oBeginSeparator.setVisible(e&&o)}if(this._oEndActionsBeginSeparator){var n=this._hasVisible(this.getEndActionsBegin());this._oEndActionsBeginSeparator.setVisible(t&&n)}if(this._oEndActionsEndSeparator){var r=this._hasVisible(this.getEndActionsEnd());this._oEndActionsEndSeparator.setVisible(t&&r)}};p.prototype.indexOfContent=function(t){return this.getContent().indexOf(t)};p.prototype.getContent=function(){var t=this.getBegin();t.push(this._oBeginSeparator);t=t.concat(this.getBetween());t.push(this._oSpacer);t=t.concat(this.getEndActionsBegin());t.push(this._oEndActionsBeginSeparator);t=t.concat(this.getEnd());t.push(this._oEndActionsEndSeparator);t=t.concat(this.getEndActionsEnd());return t};p.prototype.getCurrentState=function(){var t=[],e;this.getActions().forEach(function(o,n){e=o&&o.getId();if(o.getVisible()){t.push({name:e,alignment:o.getLayoutInformation().alignment})}});return{items:t}};p.prototype.initPropertyHelper=function(){return Promise.resolve({getProperties:function(){var t=[];this.getActions().forEach(function(e){t.push({name:e.getId(),alignment:e.getLayoutInformation().alignment,label:e.getLabel(),visible:true})});return t}.bind(this)})};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/AggregationBaseDelegate", ["sap/ui/mdc/BaseDelegate","sap/ui/core/library"],function(e,t){"use strict";var n=Object.assign(e,{fetchProperties:function(e){return Promise.resolve([])},addItem:function(e,t,n){return Promise.resolve()},removeItem:function(e,t,n){return Promise.resolve(true)},validateState:function(e,n){var i=t.MessageType.None;return{validation:i,message:undefined}},onAfterXMLChangeProcessing:function(e,t){},determineValidationState:function(e){return e.checkValidationState?e.checkValidationState():-1},visualizeValidationState:function(e,t){}});return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/BaseDelegate", ["sap/ui/mdc/util/TypeUtil"],function(t){"use strict";var i={getTypeUtil:function(i){return t}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Chart", ["sap/ui/core/Core","sap/ui/mdc/Control","./chart/ChartSettings","./ChartRenderer","sap/base/Log","./chart/ChartToolbar","./chart/PropertyHelper","sap/ui/mdc/mixin/FilterIntegrationMixin","sap/ui/model/base/ManagedObjectModel","sap/ui/mdc/p13n/subcontroller/ChartItemController","sap/ui/mdc/p13n/subcontroller/FilterController","sap/ui/mdc/p13n/subcontroller/SortController","sap/ui/mdc/p13n/subcontroller/ChartTypeController","sap/ui/base/ManagedObjectObserver","sap/ui/mdc/chart/DrillBreadcrumbs","sap/ui/mdc/actiontoolbar/ActionToolbarAction","sap/ui/core/library","sap/ui/events/KeyCodes","sap/ui/mdc/util/InfoBar","sap/ui/core/format/ListFormat","sap/ui/mdc/enum/ProcessingStrategy"],function(t,e,i,r,o,n,a,s,l,h,p,u,g,c,d,f,y,b,C,m,_){"use strict";var v;var I=y.TitleLevel;var D=e.extend("sap.ui.mdc.Chart",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/chart/Chart.designtime",interfaces:["sap.ui.mdc.IFilterSource","sap.ui.mdc.IxState"],defaultAggregation:"items",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%",invalidate:true},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%",invalidate:true},delegate:{type:"object",group:"Data",defaultValue:{name:"sap/ui/mdc/ChartDelegate"}},header:{type:"string",group:"Misc",defaultValue:null},noDataText:{type:"string",defaultValue:"No data"},p13nMode:{type:"sap.ui.mdc.ChartP13nMode[]",defaultValue:[]},legendVisible:{type:"boolean",group:"Misc",defaultValue:true},ignoreToolbarActions:{type:"sap.ui.mdc.ChartToolbarActionType[]",defaultValue:[]},minWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"240px",invalidate:true},minHeight:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"400px",invalidate:true},sortConditions:{type:"object"},filterConditions:{type:"object",defaultValue:{}},showChartTooltip:{type:"boolean",group:"Misc",defaultValue:true},autoBindOnInit:{type:"boolean",group:"Misc",defaultValue:true},chartType:{type:"string",group:"Misc",defaultValue:"column"},showSelectionDetails:{type:"boolean",group:"Misc",defaultValue:true},propertyInfo:{type:"object",defaultValue:[]},headerLevel:{type:"sap.ui.core.TitleLevel",group:"Appearance",defaultValue:I.Auto},headerVisible:{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{items:{type:"sap.ui.mdc.chart.Item",multiple:true},actions:{type:"sap.ui.core.Control",multiple:true,forwarding:{getter:"_getToolbar",aggregation:"actions"}},_toolbar:{type:"sap.ui.mdc.chart.ChartToolbar",multiple:false,visibility:"hidden"},_breadcrumbs:{type:"sap.m.Breadcrumbs",multiple:false,visibility:"hidden"},_innerChart:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},selectionDetailsActions:{type:"sap.ui.mdc.chart.SelectionDetailsActions",multiple:false},_infoToolbar:{type:"sap.ui.mdc.util.InfoBar",multiple:false,visibility:"hidden"},variant:{type:"sap.ui.fl.variants.VariantManagement",multiple:false},noData:{type:"sap.ui.core.Control",multiple:false}},associations:{filter:{type:"sap.ui.mdc.IFilter",multiple:false}},events:{selectionDetailsActionPressed:{parameters:{action:{type:"sap.ui.core.Item"},itemContexts:{type:"sap.ui.model.Context"},level:{type:"sap.m.SelectionDetailsActionLevel"}}}}},renderer:r});var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");s.call(D.prototype);D.prototype.init=function(){this._oManagedObjectModel=new l(this);this.setModel(this._oManagedObjectModel,"$mdcChart");this._bNewP13n=true;e.prototype.init.apply(this,arguments);this._setupPropertyInfoStore("propertyInfo");this._setPropertyHelperClass(a)};D.prototype.setP13nMode=function(t){var e=null;if(t&&t.length>=1){e=[];var i=t.reduce(function(t,e,i){t[e]=true;return t},{});if(i.Item){e.push("Item")}if(i.Sort){e.push("Sort")}if(i.Filter){e.push("Filter")}if(i.Type){this._typeBtnActive=true;e.push("Type")}else{this._typeBtnActive=false}}else{e=t}this.setProperty("p13nMode",e,true);this._updateAdaptation(this.getP13nMode());return this};D.prototype._updateAdaptation=function(t){var e={controller:{}};var i={Item:new h({control:this}),Sort:new u({control:this}),Filter:new p({control:this}),Type:new g({control:this})};if(t&&t.length>0){t.forEach(function(t){var r=t;var o=i[t];if(o){e.controller[r]=o}});this.getEngine().register(this,e)}};D.prototype.setFilterConditions=function(t){this.setProperty("filterConditions",t,true);var e=this.getInbuiltFilter();if(e){e.setFilterConditions(t)}this._updateInfoToolbar();return this};D.prototype.getConditions=function(){return this.getInbuiltFilter()?this.getInbuiltFilter().getConditions():[]};D.prototype._registerInnerFilter=function(t){t.attachSearch(function(){this._rebind()},this)};D.prototype.applySettings=function(t,i){this._setPropertyHelperClass(a);e.prototype.applySettings.apply(this,arguments);this.initializedPromise=new Promise(function(t,e){this._fnResolveInitialized=t;this._fnRejectInitialized=e}.bind(this));this.innerChartBoundPromise=new Promise(function(t,e){this._fnResolveInnerChartBound=t;this._fnRejectInnerChartBound=e}.bind(this));var r=this._loadDelegate().then(function(t){return t}).then(function(t){return this.initControlDelegate(t)}.bind(this)).catch(function(t){this._fnRejectInitialized(t)}.bind(this));var o=[r];if(this.isFilteringEnabled()){o.push(this.retrieveInbuiltFilter())}Promise.all(o).then(function(){this._initInnerControls()}.bind(this))};D.prototype._initInnerControls=function(){this.getControlDelegate().initializeInnerChart(this).then(function(t){this.setBusyIndicatorDelay(0);this.getControlDelegate().createInitialChartContent(this);this._renderOverlay(true);if(this.getAutoBindOnInit()){this.setBusy(true);this._createContentfromPropertyInfos(t)}this.setAggregation("_innerChart",t);if(this.getP13nMode().includes("Filter")){this._initInfoToolbar()}this._bInnerChartReady=true;this._fnResolveInitialized();this.invalidate()}.bind(this)).catch(function(t){this._fnRejectInitialized(t)}.bind(this));this._getToolbar().createToolbarContent(this)};D.prototype._initInfoToolbar=function(){this.setAggregation("_infoToolbar",new C(this.getId()+"--infoToolbar",{infoText:this._getFilterInfoText(),press:function(){this.finalizePropertyHelper().then(function(){return i.showPanel(this,"Filter")}.bind(this)).then(function(t){t.attachEventOnce("afterClose",function(){var t=this.getFilterConditions();var e=!Object.keys(t).find(function(e){return t[e]&&t[e].length>0});if(e&&this.getAggregation("_toolbar")){this.getAggregation("_toolbar").getSettingsButton().focus()}}.bind(this))}.bind(this))}.bind(this),removeAllFilters:function(t){this.getEngine().createChanges({control:this,key:"Filter",state:{},applyAbsolute:_.FullReplace});this._getToolbar().getSettingsButton().focus()}.bind(this)}));if(this.getDomRef()){this.getDomRef().setAttribute("aria-labelledby",this.getAggregation("_infoToolbar").getACCTextId())}};D.prototype._updateInfoToolbar=function(){if(this.getP13nMode().includes("Filter")&&this.getAggregation("_infoToolbar")){this.getAggregation("_infoToolbar").setInfoText(this._getFilterInfoText())}};D.prototype._getFilterInfoText=function(){if(this.getInbuiltFilter()){var t;var e=this._getLabelsFromFilterConditions();var i=m.getInstance();if(e.length>0){if(e.length>1){t=T.getText("chart.MULTIPLE_FILTERS_ACTIVE",[e.length,i.format(e)])}else{t=T.getText("chart.ONE_FILTER_ACTIVE",e[0])}}return t}return undefined};D.prototype._createContentfromPropertyInfos=function(t){this.getControlDelegate().checkAndUpdateMDCItems(this).then(function(){this.getControlDelegate().createInnerChartContent(this,this._innerChartDataLoadComplete.bind(this)).then(function(){this._createBreadcrumbs();this._oObserver=new c(this._propagateItemChangeToInnerChart.bind(this));this._oObserver.observe(this,{aggregations:["items"]});this._propagatePropertiesToInnerChart();this._fnResolveInnerChartBound()}.bind(this))}.bind(this))};D.prototype._createBreadcrumbs=function(){if(!this._oBreadcrumbs){this._oBreadcrumbs=new d(this.getId()+"--breadcrumbs");this._oBreadcrumbs.updateDrillBreadcrumbs(this,this.getControlDelegate().getDrillableItems(this));this.setAggregation("_breadcrumbs",this._oBreadcrumbs)}};D.prototype._loadDelegate=function(){return new Promise(function(t){var e=[this.getDelegate().name];function i(e){t(e)}sap.ui.require(e,i)}.bind(this))};D.prototype.isFilteringEnabled=function(){return this.getP13nMode().indexOf("Filter")>-1};D.prototype.getAdaptationUI=function(){return this.getControlDelegate().getAdaptionUI(this)};D.prototype._propagateItemChangeToInnerChart=function(t){if(this._bIsDestroyed){return}this.setBusy(true);switch(t.mutation){case"insert":var e;if(t.child&&t.child.getType()){e=this.getItems().filter(function(e){return e.getType()===t.child.getType()}).indexOf(t.child)}else{e=this.getItems().indexOf(t.child)}this.getControlDelegate().insertItemToInnerChart(this,t.child,e);break;case"remove":this.getControlDelegate().removeItemFromInnerChart(this,t.child);break;default:o.error("Unknown mutation on MDC Chart Item Aggregation. This will not sync to inner chart!");break}this._rebind();this._oBreadcrumbs.updateDrillBreadcrumbs(this,this.getControlDelegate().getDrillableItems(this))};D.prototype._rebind=function(){if(!this._bInnerChartReady){this.initialized().then(function(){this._rebind()}.bind(this));return}this.setBusy(true);if(!this.getControlDelegate().getInnerChartBound(this)){this._createContentfromPropertyInfos();return}var t=this.getControlDelegate()._getBindingInfo(this);this.getControlDelegate().updateBindingInfo(this,t);this.getControlDelegate().rebind(this,t)};D.prototype._getToolbar=function(){if(this.getAggregation("_toolbar")){return this.getAggregation("_toolbar")}else{var t=new n(this.getId()+"--toolbar",{design:"Transparent"});this.setAggregation("_toolbar",t);return t}};D.prototype._updateToolbar=function(){if(this.getAggregation("_toolbar")){this.getAggregation("_toolbar").updateToolbar(this)}else{o.warning("Trying to uipdate Chart Toolbar, but toolbar is not yet initialized. This will not work!")}};D.prototype._getInnerChart=function(){if(this._bInnerChartReady){return this.getControlDelegate().getInnerChart(this)}else{o.error("Trying to acces inner chart while inner chart is not yet initialized!")}};D.prototype.initialized=function(){return this.initializedPromise};D.prototype.innerChartBound=function(){return this.innerChartBoundPromise};D.prototype.zoomIn=function(t){if(!t){t=10}this.getControlDelegate().zoomIn(this,t)};D.prototype.zoomOut=function(t){if(t){t=10}this.getControlDelegate().zoomOut(this,t)};D.prototype.getZoomState=function(){return this.getControlDelegate().getZoomState(this)};D.prototype.getSelectionHandler=function(){return this.getControlDelegate().getInnerChartSelectionHandler(this)};D.prototype.getChartTypeLayoutConfig=function(){return this.getControlDelegate().getChartTypeLayoutConfig()};D.prototype.getAllowedRolesForKinds=function(){return this.getControlDelegate().getAllowedRolesForKinds()};D.prototype.setLegendVisible=function(t){this.setProperty("legendVisible",t);try{this.getControlDelegate().setLegendVisible(this,t)}catch(t){o.info("Trying to set legend visiblity for Chart before delegate was initialized")}return this};D.prototype.setShowChartTooltip=function(t){this.setProperty("showChartTooltip",t);try{this.getControlDelegate().setChartTooltipVisibility(this,t)}catch(t){o.info("Trying to set tooltip visibility before delegate was initialized")}return this};D.prototype.destroy=function(){this._bIsDestroyed=true;e.prototype.destroy.apply(this,arguments)};D.prototype._showDrillDown=function(t){if(!this.oDrillPopover){if(v){this.oDrillPopover=v.createDrillDownPopover(this);this.oDrillPopover.attachAfterClose(function(){delete this.oDrillPopover}.bind(this));return v.showDrillDownPopover(this,t)}return new Promise(function(e,i){sap.ui.require(["sap/ui/mdc/chart/DrillStackHandler"],function(i){v=i;this.oDrillPopover=v.createDrillDownPopover(this);this.oDrillPopover.attachAfterClose(function(){delete this.oDrillPopover}.bind(this));v.showDrillDownPopover(this,t).then(function(t){e(t)})}.bind(this))}.bind(this))}else if(this.oDrillPopover){this.oDrillPopover.close()}};D.prototype._propagatePropertiesToInnerChart=function(){this.setLegendVisible(this.getLegendVisible());this.setShowChartTooltip(this.getShowChartTooltip());this.setChartType(this.getChartType())};D.prototype.getChartTypeInfo=function(){var e;try{e=this.getControlDelegate().getChartTypeInfo(this)}catch(r){var i=t.getLibraryResourceBundle("sap.chart.messages");if(!e){e={icon:"sap-icon://vertical-bar-chart",text:T.getText("chart.CHART_TYPE_TOOLTIP",[i.getText("info/bar")])}}}return e};D.prototype.getAvailableChartTypes=function(){return this.getControlDelegate().getAvailableChartTypes(this)};D.prototype.setChartType=function(t){this.setProperty("chartType",t);try{this.getControlDelegate().setChartType(this,t)}catch(t){o.info("Trying to set chart type for Chart before delegate was initialized")}return this};D.prototype.setNoData=function(t){this.setAggregation("noData",t);try{this.getControlDelegate().changedNoDataStruct(this)}catch(t){}return this};D.prototype.setHeaderVisible=function(t){this.setProperty("headerVisible",t,true);if(this.getAggregation("_toolbar")){this.getAggregation("_toolbar").setHeaderVisible(t)}return this};D.prototype.getManagedObjectModel=function(){return this._oManagedObjectModel};D.prototype._innerChartDataLoadComplete=function(t){this._checkStyleClassesForDimensions();this.setBusy(false);this._renderOverlay(false);this.getControlDelegate().requestToolbarUpdate(this)};D.prototype._checkStyleClassesForDimensions=function(){var t=this.getItems().some(function(t){return t.getType()==="groupable"});if(!t&&this.hasStyleClass("sapUiMDCChartGrid")){this.removeStyleClass("sapUiMDCChartGrid");this.addStyleClass("sapUiMDCChartGridNoBreadcrumbs")}else if(t&&this.hasStyleClass("sapUiMDCChartGridNoBreadcrumbs")){this.removeStyleClass("sapUiMDCChartGridNoBreadcrumbs");this.addStyleClass("sapUiMDCChartGrid")}};D.prototype.getCurrentState=function(){var t={};var e=this.getP13nMode();if(e){if(e.indexOf("Item")>-1){t.items=this._getVisibleProperties()}if(e.indexOf("Sort")>-1){t.sorters=this._getSortedProperties()}if(e.indexOf("Filter")>-1){t.filter=this.getFilterConditions()}if(e.indexOf("Type")>-1){t.chartType=this.getChartType()}}return t};D.prototype._getVisibleProperties=function(){var t=[];this.getItems().forEach(function(e){t.push({name:e.getName(),role:e.getRole()})});return t};D.prototype._getSortedProperties=function(){return this.getSortConditions()?this.getSortConditions().sorters:[]};D.prototype._getTypeBtnActive=function(){return!!this._typeBtnActive};D.prototype.setNoDataText=function(t){this.setProperty("noDataText",t);try{this.getControlDelegate().setNoDataText(this,t)}catch(t){}return this};D.prototype._onFiltersChanged=function(t){if(this._bInnerChartReady&&this.getControlDelegate()&&this.getControlDelegate().getInnerChartBound(this)&&t.getParameter("conditionsBased")){this._renderOverlay(true)}};var A=function(t){var e=false;if(t&&(t.indexOf("Sort")>-1||t.indexOf("Item")>-1||t.indexOf("Filter")>-1)){e=true}return e};D.prototype._onModifications=function(t){if(A(t)){this.rebind()}};D.prototype.setVariant=function(t){this.setAggregation("variant",t);if(this.getAggregation("_toolbar")){this.getAggregation("_toolbar").addVariantManagement(t)}return this};D.prototype._renderOverlay=function(t){try{this.getControlDelegate().showOverlay(this,t)}catch(t){o.error("sap.ui.mdc.Chart: Tried to render overlay on not initiailized chart. This will not work!")}};D.prototype.addAction=function(t){if(t.getMetadata().getName()!=="sap.ui.mdc.actiontoolbar.ActionToolbarAction"){t=new f(t.getId()+"-action",{action:t})}return e.prototype.addAggregation.apply(this,["actions",t])};D.prototype.setHeaderLevel=function(t){if(this.getAggregation("_toolbar")){this.getAggregation("_toolbar")._setHeaderLevel(t)}this.setProperty("headerLevel",t);return this};D.prototype.getVariant=function(){var t=this.getAggregation("_toolbar");return t?t._getVariantReference():this.getAggregation("variant")};D.prototype.onkeydown=function(t){if(t.isMarked()){return}if((t.metaKey||t.ctrlKey)&&t.which===b.COMMA){var e=this._getToolbar()._oSettingsBtn;if(e&&e.getVisible()&&e.getEnabled()){e.firePress();t.setMarked();t.preventDefault()}}};return D});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/ChartDelegate", ["sap/ui/mdc/AggregationBaseDelegate"],function(n){"use strict";var t=Object.assign({},n);t.zoomIn=function(n,t){};t.zoomOut=function(n,t){};t.getZoomState=function(n){};t.getFilterDelegate=function(){return{addItem:function(n,t){return Promise.resolve()},addCondition:function(n,t,e){return Promise.resolve()},removeCondition:function(n,t,e){return Promise.resolve()}}};t.addItem=function(n,t,e,o){};t.removeItem=function(n,t){return Promise.resolve(true)};t.getInnerChartSelectionHandler=function(n){};t.setLegendVisible=function(n,t){};t.insertItemToInnerChart=function(n,t,e){};t.removeItemFromInnerChart=function(n,t){};t.initializeInnerChart=function(n){};t.createInitialChartContent=function(n){};t.getInnerChart=function(){};t.getChartTypeInfo=function(){};t.getAvailableChartTypes=function(n){};t.getChartTypeLayoutConfig=function(){};t.getDrillStack=function(n){};t.getSortedDimensions=function(n){};t.getDrillableItems=function(n){};t.setChartType=function(n){};t.changedNoDataStruct=function(n){};t.setNoDataText=function(n,t){};t.createInnerChartContent=function(n,t){};t.rebindChart=function(n,t){};t.rebind=function(n,t){};t.getInnerChartBound=function(n){};t.updateBindingInfo=function(n,t){};t.setChartTooltipVisibility=function(n,t){};t.getInternalChartNameFromPropertyNameAndKind=function(n,t,e){};t.getPropertyFromNameAndKind=function(n,t,e){};t.fetchProperties=function(n){};t.showOverlay=function(n,t){};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/ChartRenderer", ["./library"],function(e){"use strict";var r={apiVersion:2};r.CSS_CLASS="sapUiMDCChart";r.render=function(e,n){e.openStart("div",n);e.class(r.CSS_CLASS);e.style("height",n.getHeight());e.style("width",n.getWidth());e.style("min-height",n.getMinHeight());e.style("min-width",n.getMinWidth());e.openEnd();e.openStart("div");e.openEnd();this.renderToolbar(e,n.getAggregation("_toolbar"));this.renderInfoToolbar(e,n.getAggregation("_infoToolbar"));e.close("div");this.renderBreadcrumbs(e,n.getAggregation("_breadcrumbs"));this.renderInnerStructure(e,n.getAggregation("_innerChart"));e.close("div")};r.renderNoDataStruct=function(e,r){if(r){}};r.renderToolbar=function(e,r){if(r){e.openStart("div");e.openEnd();e.renderControl(r);e.close("div")}};r.renderBreadcrumbs=function(e,r){if(r){e.renderControl(r)}};r.renderInfoToolbar=function(e,r){if(r){e.renderControl(r)}};r.renderInnerStructure=function(e,r){e.renderControl(r)};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Control", ["sap/ui/core/Control","sap/ui/mdc/mixin/DelegateMixin","sap/ui/mdc/mixin/PropertyHelperMixin","sap/ui/mdc/mixin/AdaptationMixin"],function(e,i,r,t){"use strict";var a=e.extend("sap.ui.mdc.Control",{metadata:{library:"sap.ui.mdc",properties:{delegate:{type:"object",group:"Data"}}},renderer:e.renderer});i.call(a.prototype);t.call(a.prototype);r.call(a.prototype);return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Delegate", [],function(){"use strict";var n=function(){};n.retrieveAllMetadata=function(n,t){return[]};n.retrieveAggregationItem=function(n,t){return null};n.preConfiguration=function(n,t){return n};n.getNavigationTargets=function(n){return[]};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Element", ["sap/ui/core/Element","sap/ui/mdc/mixin/DelegateMixin","sap/ui/mdc/mixin/PropertyHelperMixin","sap/ui/mdc/mixin/AdaptationMixin"],function(e,i,t,r){"use strict";var a=e.extend("sap.ui.mdc.Element",{metadata:{library:"sap.ui.mdc",properties:{delegate:{type:"object",group:"Data"}}},renderer:e.renderer});i.call(a.prototype);r.call(a.prototype);t.call(a.prototype);return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Field", ["sap/ui/mdc/field/FieldBase","sap/ui/mdc/field/FieldBaseRenderer","sap/ui/mdc/enum/FieldDisplay","sap/ui/mdc/enum/BaseType","sap/base/util/deepEqual","sap/base/util/merge","sap/ui/model/BindingMode","sap/ui/model/Context","sap/ui/mdc/condition/Condition"],function(t,e,i,n,a,o,s,l,r){"use strict";var p=t.extend("sap.ui.mdc.Field",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/field/Field.designtime",properties:{value:{type:"any",defaultValue:null,bindable:"bindable"},additionalValue:{type:"any",defaultValue:null,bindable:"bindable"}},events:{change:{parameters:{value:{type:"string"},valid:{type:"boolean"},promise:{type:"Promise"}}}},defaultProperty:"value"},renderer:e});p.prototype.init=function(){this._vValue=null;this._vAdditionalValue=null;t.prototype.init.apply(this,arguments);this.setMaxConditions(1);this._oObserver.observe(this,{properties:["value","additionalValue"]})};p.prototype.exit=function(){t.prototype.exit.apply(this,arguments);if(this._iConditionUpdateTimer){clearTimeout(this._iConditionUpdateTimer);delete this._iConditionUpdateTimer;delete this._bPendingConditionUpdate}this._oBindingContext=undefined};p.prototype.bindProperty=function(e,i){if(e==="value"&&!i.formatter){i.targetType="raw";var n=this._getContentFactory().getDataType();if(i.type&&(!n||n.getMetadata().getName()!==i.type.getMetadata().getName()||!a(n.getFormatOptions(),i.type.getFormatOptions())||!a(n.getConstraints(),i.type.getConstraints())||n._bCreatedByOperator!==i.type._bCreatedByOperator)){this._getContentFactory().setDataType(i.type);this._getContentFactory().setDateOriginalType(undefined);this._getContentFactory().setUnitOriginalType(undefined);this._getContentFactory().setIsMeasure(false);if(i.type.isA("sap.ui.model.CompositeType")&&i.parts){var o=[];for(var s=0;s<i.parts.length;s++){o.push(i.parts[s].type)}this._getContentFactory().setCompositeTypes(o)}this._getContentFactory().updateConditionType();this.invalidate()}}t.prototype.bindProperty.apply(this,arguments)};p.prototype._handleModelContextChange=function(e){t.prototype._handleModelContextChange.apply(this,arguments);var i=this.getBinding("value");if(i){var n=i.isA("sap.ui.model.CompositeBinding")?i.getBindings()[0].getContext():i.getContext();if(l.hasChanged(this._oBindingContext,n)){this._oBindingContext=n;this._getContentFactory().updateConditionType();if(this._isInvalidInput()||this.getFieldHelp()){if(this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true)}this._resetInvalidInput()}}if(!this._getContentFactory().getDataType()){this._getContentFactory().setDataType(i.getType());this.invalidate()}}};p.prototype._initDataType=function(){t.prototype._initDataType.apply(this,arguments);var e=this.getBinding("value");if(e){this._getContentFactory().setDataType(e.getType())}};p.prototype.setProperty=function(e,i,n){if(e==="value"&&this._isInvalidInput()&&a(this.getValue(),this.validateProperty(e,i))){if(this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true)}this._resetInvalidInput()}return t.prototype.setProperty.apply(this,arguments)};p.prototype.setMaxConditions=function(t){if(t!==1){throw new Error("Only one condition allowed for Field "+this)}return this.setProperty("maxConditions",t,true)};p.prototype._observeChanges=function(e){t.prototype._observeChanges.apply(this,arguments);if(e.name==="value"){var i=y.call(this,e.current,e.old);if(this._vAdditionalValue!==null&&C.call(this)&&!c.call(this,i,this._vValue,true)){this._vAdditionalValue=this.getAdditionalValue()}this._vValue=i;f.call(this,e.current);u.call(this)}if(e.name==="additionalValue"){this._vAdditionalValue=e.current;u.call(this)}if(e.name==="conditions"){if(this._getContent().length<=1){v.call(this,e.current)}}};function d(){return this._vValue}function h(){return this._vAdditionalValue}function u(){if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){if(!this.bIsDestroyed){u.call(this)}}.bind(this));return}if(this.getDisplay()===i.Value){g.call(this,d.call(this),h.call(this))}else if(!this._iConditionUpdateTimer){this._iConditionUpdateTimer=setTimeout(function(){g.call(this,d.call(this),h.call(this));this._iConditionUpdateTimer=undefined;this._bPendingConditionUpdate=false}.bind(this),0);this._bPendingConditionUpdate=true}}function g(t,e){var i=this.getConditions();if(this._checkValueInitial(t)&&!e){if(i.length>0){this.setConditions([])}}else{var n=i[0];var a=n&&n.values[0];var o=n&&n.values[1]?n.values[1]:null;if(!n||n.operator!=="EQ"||!c.call(this,a,t)||o!==e){var s=this.getControlDelegate();var l=this.getPayload();var p=s.createCondition(l,this,[t,e],n);if(!r.compareConditions(n,p)){this.setConditions(p?[p]:[])}}}}function y(t,e){var i=this._getContentFactory().getDataType()?this._getContentFactory().getDataType().getMetadata().getName():this.getDataType();if(t&&e&&(i==="sap.ui.model.odata.type.Unit"||i==="sap.ui.model.odata.type.Currency")&&!t[2]&&e[2]!==undefined){t=o([],t);t[2]=e[2];if(this._bPendingChange){var n=this.getConditions()[0];if(n){if(t[0]===e[0]&&t[0]!==n.values[0][0]){t[0]=n.values[0][0]}if(t[1]===e[1]&&t[1]!==n.values[0][1]){t[1]=n.values[0][1]}}}}return t}function c(t,e,i){var o=t===e;var s=this._getContentFactory().getDataType()?this._getContentFactory().getDataType().getMetadata().getName():this.getDataType();if(!o&&this.getTypeUtil().getBaseType(s)===n.Unit&&Array.isArray(t)&&Array.isArray(e)){var l=t[0];var r=t[1];var p=t.length>=3?t[2]:null;var d=e[0];var h=e[1];var u=e.length>=3?e[2]:null;if(l===d&&r===h&&((this._bUnitSet||i)&&(!p||!u)||a(p,u))){o=true}if((p||u)&&!i){this._bUnitSet=true}}return o}function f(t){if(!this._bTypeInitialized){if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){if(!this.bIsDestroyed){f.call(this,t)}}.bind(this));return}var e=this.getBinding("value");var i=e?e.getType():this._getContentFactory().getDataType();this._oTypeInitialization=this.getControlDelegate().initializeTypeFromBinding(this.getPayload(),i,t);this._bTypeInitialized=this._oTypeInitialization.bTypeInitialized;if(this._bTypeInitialized&&this._getContentFactory().getUnitOriginalType()){this.getControlDelegate().initializeInternalUnitType(this.getPayload(),this._getContentFactory().getDataType(),this._oTypeInitialization);this.getControlDelegate().initializeInternalUnitType(this.getPayload(),this._getContentFactory().getUnitType(),this._oTypeInitialization)}}}p.prototype._fireChange=function(t,e,i,n){var a;if(t){if(e){a=this._getResultForPromise(t)}else{a=i}}if(this._getContent().length>1){if(t){v.call(this,this.getConditions())}else if(n){n=n.then(function(t){v.call(this,this.getConditions());return t}.bind(this))}}this.fireChange({value:a,valid:e,promise:n})};p.prototype._getResultForPromise=function(t){var e;if(t.length===0&&this._getContentFactory().getDataType()){e=this._getContentFactory().getDataType().parseValue("","string",[])}else if(t.length===1){e=t[0].values[0]}return e};function v(t){if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){if(!this.bIsDestroyed){v.call(this,t)}}.bind(this));return}var e=null;var i=null;var n=this.getValue();var a=this.getAdditionalValue();if(t.length===0&&n===null&&a===null){return}e=this._getResultForPromise(t);if(t.length===0&&!a){i=a}else if(t.length===1&&t[0].values.length>1){i=t[0].values[1]}this._vValue=e;this._vAdditionalValue=i;if(!c.call(this,e,n,true)){this.setProperty("value",e,true)}if(i!==a&&!C.call(this)){this.setProperty("additionalValue",i,true)}}p.prototype._getOperators=function(){return["EQ"]};function C(){var t=this.getBinding("additionalValue");if(t&&t.getBindingMode()===s.OneWay){return true}return false}p.prototype._checkCreateInternalContent=function(){if(!this.bIsDestroyed&&this._getContentFactory().getDataType()&&!this._isPropertyInitial("editMode")&&!this._isPropertyInitial("multipleLines")){t.prototype._checkCreateInternalContent.apply(this,arguments)}};p.prototype.getOverflowToolbarConfig=function(){var e=t.prototype.getOverflowToolbarConfig.apply(this,arguments);e.propsUnrelatedToSize.push("value");e.propsUnrelatedToSize.push("additionalValue");return e};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/FilterBar", ["sap/ui/mdc/p13n/subcontroller/FilterController","sap/ui/mdc/p13n/subcontroller/AdaptFiltersController","sap/ui/mdc/filterbar/aligned/FilterContainer","sap/ui/mdc/filterbar/aligned/FilterItemLayout","sap/ui/mdc/filterbar/FilterBarBase","sap/ui/mdc/filterbar/FilterBarBaseRenderer","sap/m/library","sap/m/Button","sap/base/util/merge","sap/base/Log","sap/ui/core/library"],function(t,e,i,r,o,n,s,a,l,u,d){"use strict";var p=d.aria.HasPopup;var h=o.extend("sap.ui.mdc.FilterBar",{metadata:{designtime:"sap/ui/mdc/designtime/filterbar/FilterBar.designtime",properties:{showAdaptFiltersButton:{type:"boolean",defaultValue:true},showClearButton:{type:"boolean",defaultValue:false},p13nMode:{type:"sap.ui.mdc.FilterBarP13nMode[]"},_p13nModeItem:{type:"boolean",visibility:"hidden",defaultValue:false},_p13nModeValue:{type:"boolean",visibility:"hidden",defaultValue:false}}},renderer:n});var _=s.ButtonType;h.prototype._createInnerLayout=function(){this._cLayoutItem=r;this._oFilterBarLayout=new i;this._oFilterBarLayout.getInner().setParent(this);this._oFilterBarLayout.getInner().addStyleClass("sapUiMdcFilterBarBaseAFLayout");this.setAggregation("layout",this._oFilterBarLayout,true);this._addButtons()};h.prototype.setP13nMode=function(i){var r=this.getP13nMode();this.setProperty("p13nMode",i||[],false);var o={helper:this.getPropertyHelper(),controller:{}};i&&i.forEach(function(i){if(!r||r.indexOf(i)<0){this._setP13nMode(i,true)}if(i=="Item"){o.controller["Item"]=new e({control:this})}if(i=="Value"){o.controller["Filter"]=new t({control:this})}}.bind(this));r&&r.forEach(function(t){if(!i||i.indexOf(t)<0){this._setP13nMode(t,false)}}.bind(this));this.getEngine().register(this,o);return this};h.prototype._setP13nMode=function(t,e){switch(t){case"Item":this._setP13nModeItem(e);break;case"Value":this._setP13nModeValue(e);break}};h.prototype.setFilterConditions=function(e,i){t.checkConditionOperatorSanity(e);if(this._oP13nFB){this._oP13nFB.setFilterConditions(l({},e))}this.setProperty("filterConditions",e,i);return this};h.prototype._getP13nModeItem=function(){return this._oModel.getProperty("/_p13nModeItem")};h.prototype._setP13nModeItem=function(t){this._oModel.setProperty("/_p13nModeItem",t,true)};h.prototype._getP13nModeValue=function(){return this._oModel.getProperty("/_p13nModeValue")};h.prototype._setP13nModeValue=function(t){this._oModel.setProperty("/_p13nModeValue",t,false);this._bPersistValues=t};h.prototype._addButtons=function(){if(this._oFilterBarLayout){this.setProperty("_filterCount",this._oRb.getText("filterbar.ADAPT"),false);this._btnAdapt=new a(this.getId()+"-btnAdapt",{type:_.Transparent,text:"{"+o.INNER_MODEL_NAME+">/_filterCount}",press:this.onAdaptFilters.bind(this)});this._btnAdapt.setAriaHasPopup(p.ListBox);this._btnAdapt.setModel(this._oModel,o.INNER_MODEL_NAME);this._btnAdapt.bindProperty("visible",{parts:[{path:"/showAdaptFiltersButton",model:o.INNER_MODEL_NAME},{path:"/_p13nModeItem",model:o.INNER_MODEL_NAME}],formatter:function(t,e){return t&&e}});this._btnSearch=this._getSearchButton();this._btnSearch.setModel(this._oModel,o.INNER_MODEL_NAME);this._btnSearch.bindProperty("visible",{parts:[{path:"/showGoButton",model:o.INNER_MODEL_NAME},{path:"/liveMode",model:o.INNER_MODEL_NAME}],formatter:function(t,e){return t&&(this._isPhone()?true:!e)}.bind(this)});this._btnSearch.addStyleClass("sapUiMdcFilterBarBaseButtonPaddingRight");this._btnClear=new a(this.getId()+"-btnClear",{type:_.Transparent,visible:"{"+o.INNER_MODEL_NAME+">/showClearButton}",text:this._oRb.getText("filterbar.CLEAR"),press:function(t){this.onClear()}.bind(this)});this._btnClear.setModel(this._oModel,o.INNER_MODEL_NAME);this._oFilterBarLayout.addButton(this._btnSearch);this._oFilterBarLayout.addButton(this._btnClear);this._oFilterBarLayout.addButton(this._btnAdapt)}};h.prototype.onClear=function(){this._btnClear.setEnabled(false);this.awaitControlDelegate().then(function(t){t.clearFilters(this).catch(function(t){u.error(t)}).finally(function(){this._btnClear.setEnabled(true)}.bind(this))}.bind(this))};h.prototype.retrieveInbuiltFilter=function(){var t=o.prototype.retrieveInbuiltFilter.apply(this,arguments);return t.then(function(t){t._bPersistValues=this._bPersistValues;return t}.bind(this))};h.prototype.onAdaptFilters=function(t){return this._retrieveMetadata().then(function(){return this.getEngine().uimanager.show(this,"Item",this._btnAdapt).then(function(t){t.setVerticalScrolling(false);return t})}.bind(this))};h.prototype.getCurrentState=function(){var t=o.prototype.getCurrentState.apply(this,arguments);if(!this.getProperty("_p13nModeItem")){delete t.items}return t};h.prototype.setFocusOnFirstErroneousField=function(){return this._setFocusOnFirstErroneousField()};h.prototype.exit=function(){o.prototype.exit.apply(this,arguments);this._btnClear=undefined};return h});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/FilterBarDelegate", ["sap/ui/mdc/AggregationBaseDelegate","sap/ui/mdc/enum/FilterBarValidationStatus"],function(e,t){"use strict";var r=Object.assign({},e);r.addItem=function(t,r,i){return e.addItem(t,r,i)};r.removeItem=function(t,r,i){return e.removeItem(t,r,i)};r.addCondition=function(e,t,r){return Promise.resolve()};r.removeCondition=function(e,t,r){return Promise.resolve()};r.fetchProperties=function(t){return e.fetchProperties(t)};r.clearFilters=function(e){return Promise.resolve()};r.determineValidationState=function(e){return e.checkFilters()};r.visualizeValidationState=function(e,r){var i;if(r.status===t.NoError){return}if(r.status===t.RequiredHasNoValue){i=e.getText("filterbar.REQUIRED_CONDITION_MISSING")}else if(r.status===t.FieldInErrorState){i=e.getText("filterbar.VALIDATION_ERROR")}if(e.getShowMessages()&&!e._isLiveMode()){sap.ui.require(["sap/m/MessageBox","sap/base/Log"],function(t,r){try{if(e._bIsBeingDestroyed){return}t.error(i,{styleClass:this.$()&&this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":"",onClose:e.setFocusOnFirstErroneousField.bind(e)})}catch(e){r.error(e.message)}})}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/FilterField", ["sap/ui/mdc/field/FieldBase","sap/ui/mdc/field/FieldBaseRenderer","sap/ui/mdc/enum/FieldDisplay","sap/base/util/merge","sap/base/util/deepEqual"],function(t,e,r,i,o){"use strict";var a=t.extend("sap.ui.mdc.FilterField",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/field/FilterField.designtime",properties:{operators:{type:"string[]",group:"Data",defaultValue:[]},defaultOperator:{type:"string",group:"Data",defaultValue:null}},events:{change:{parameters:{value:{type:"string"},valid:{type:"boolean"},conditions:{type:"object[]"},promise:{type:"boolean"}}}}},renderer:e});a.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["value","operators"]})};a.prototype.exit=function(){t.prototype.exit.apply(this,arguments)};a.prototype.setProperty=function(e,r,i){if(e==="conditions"&&this._isInvalidInput()&&o(this.getConditions(),this.validateProperty(e,r))){if(this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true)}this._resetInvalidInput()}return t.prototype.setProperty.apply(this,arguments)};a.prototype._observeChanges=function(e){t.prototype._observeChanges.apply(this,arguments);if(e.name==="operators"){this._updateInternalContent()}};a.prototype._fireChange=function(t,e,r,o){var a;if(t){if(e){if(t.length==1){a=t[0].values[0]}}else{a=r}}this.fireChange({value:a,valid:e,conditions:i([],t),promise:o})};a.prototype._getOperators=function(){var e=this.getOperators();if(e.length===0){e=t.prototype._getOperators.apply(this,arguments)}return e};a.prototype.setOperators=function(t){var e=[];if(!Array.isArray(t)){t=t.split(",")}t.forEach(function(t){if(typeof t==="string"){e.push(t)}else{e.push(t.name)}});this.setProperty("operators",e);return this};a.prototype.addOperator=function(t){var e=this._getOperators();var r=t;if(typeof t!=="string"){r=t.name}if(e.indexOf(r)<0){e.push(r);this.setOperators(e)}return this};a.prototype.addOperators=function(t){if(!Array.isArray(t)){t=[t]}t.forEach(function(t){this.addOperator(t)}.bind(this));return this};a.prototype.removeOperator=function(t){var e=this._getOperators();var r=t;if(typeof t!=="string"){r=t.name}if(e.indexOf(r)>-1){e.splice(e.indexOf(r),1);this.setOperators(e)}};a.prototype.removeOperators=function(t){if(!Array.isArray(t)){t=[t]}t.forEach(function(t){this.removeOperator(t)}.bind(this))};a.prototype.removeAllOperators=function(){this.setOperators([])};a.prototype.setDefaultOperator=function(t){var e=t;if(t&&typeof t!=="string"){e=t.name}this.setProperty("defaultOperator",e);return this};a.prototype._checkCreateInternalContent=function(){if(!this.bIsDestroyed&&!this.isPropertyInitial("dataType")){var e=this.getFieldHelp();var i=sap.ui.getCore().byId(e);var o=this.getBindingInfo("conditions");var a=this.getBinding("conditions");if(this.getDisplay()!==r.Value&&e&&(!i||o&&!a)){return}this._getContentFactory().retrieveDataType();t.prototype._checkCreateInternalContent.apply(this,arguments)}};a.prototype._handleModelContextChange=function(e){t.prototype._handleModelContextChange.apply(this,arguments);if(this._getContent().length===0){this._triggerCheckCreateInternalContent()}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Link", ["sap/ui/mdc/field/FieldInfoBase","sap/ui/thirdparty/jquery","sap/ui/model/BindingMode","sap/ui/model/json/JSONModel","sap/ui/mdc/link/Log","sap/base/Log","sap/ui/mdc/link/Panel","sap/ui/mdc/link/PanelItem","sap/ui/layout/form/SimpleForm","sap/ui/core/Title","sap/ui/layout/library"],function(e,jQuery,t,i,n,o,r,a,s,l,d){"use strict";var u=d.form.SimpleFormLayout.ResponsiveGridLayout;var p=e.extend("sap.ui.mdc.Link",{metadata:{library:"sap.ui.mdc",properties:{enablePersonalization:{type:"boolean",defaultValue:true},delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/LinkDelegate",payload:{}}}},associations:{sourceControl:{type:"sap.ui.core.Control",multiple:false}}}});p.prototype.applySettings=function(){e.prototype.applySettings.apply(this,arguments);this.initControlDelegate()};p.prototype.init=function(){var n=new i({contentTitle:undefined,linkItems:[]});n.setDefaultBindingMode(t.TwoWay);n.setSizeLimit(1e3);this.setModel(n,"$sapuimdcLink");this.attachEvent("modelContextChange",this.fireDataUpdate,this);this._oLinkType=null;this._bLinkItemsFetched=false;this._aLinkItems=[];e.prototype.init.apply(this,arguments)};p.prototype.exit=function(){this._aLinkItems=undefined;this._bLinkItemsFetched=undefined;this._oLinkType=undefined;this._oUseDelegateItemsPromise=undefined;this._aAdditionalContent=undefined;this._oUseDelegateAdditionalContentPromise=undefined;e.prototype.exit.apply(this,arguments)};p.prototype.isTriggerable=function(){return this.retrieveLinkType().then(function(e){if(!e){return false}var t=e.runtimeType;var i=e.initialType?e.initialType:e;if(t&&t instanceof Promise){t.then(function(e){if(!this._oLinkType||e.linkType!==this._oLinkType.linkType){this._oLinkType=e;this.fireDataUpdate()}}.bind(this))}return this._oLinkType?this._oLinkType.type>0:i.type>0}.bind(this))};p.prototype.getTriggerHref=function(){return this.getDirectLinkHrefAndTarget().then(function(e){return e?e.href:null})};p.prototype.getDirectLinkHrefAndTarget=function(){return this._retrieveDirectLinkItem().then(function(e){if(this.isDestroyed()){return null}this.addDependent(e);return e?{target:e.getTarget(),href:e.getHref()}:null}.bind(this))};p.prototype._retrieveDirectLinkItem=function(){return this.retrieveLinkType().then(function(e){if(!e){return null}if(this._linkTypeHasDirectLink(this._oLinkType)){return this._oLinkType.directLink}var t=e.initialType?e.initialType:e;if(this._linkTypeHasDirectLink(t)){return t.directLink}return null}.bind(this))};p.prototype._linkTypeHasDirectLink=function(e){return e&&e.type===1&&e.directLink};p.prototype.getContent=function(e){var t=this.retrieveLinkItems();var n=this.retrieveAdditionalContent();return Promise.all([t,n]).then(function(t){var n=t[0];var o=t[1];return new Promise(function(t){sap.ui.require(["sap/ui/fl/Utils","sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(s,l){this._setConvertedLinkItems(n);var d=this._getInternalModel().getProperty("/linkItems");var u=this._getInternalModel().getProperty("/baselineLinkItems");var p=!o.length&&!d.length?this._getNoContent():o;var h=this._createPanelId(s,l);var g=sap.ui.getCore().byId(h);if(g){if(g.getParent()&&g.getParent().close){g.getParent().close()}g.destroy()}var f=new r(h,{enablePersonalization:this.getEnablePersonalization(),items:u.map(function(e){return new a(e.key,{text:e.text,description:e.description,href:e.href,internalHref:e.internalHref,target:e.target,icon:e.icon,visible:true})}),additionalContent:p,beforeSelectionDialogOpen:function(){if(e&&e()){e().setModal(true)}},afterSelectionDialogClose:function(){if(e&&e()){e().setModal(false)}},beforeNavigationCallback:this._beforeNavigationCallback.bind(this),metadataHelperPath:"sap/ui/mdc/Link"});f.setModel(new i({metadata:jQuery.extend(true,[],this._getInternalModel().getProperty("/linkItems")),baseline:jQuery.extend(true,[],this._getInternalModel().getProperty("/baselineLinkItems"))}),"$sapuimdcLink");this._setAdditionalContent(undefined);return t(f)}.bind(this))}.bind(this))}.bind(this))};p.prototype.checkDirectNavigation=function(){var e=this.retrieveLinkItems();var t=this.retrieveAdditionalContent();return Promise.all([e,t]).then(function(e){var t=e[0];var i=e[1];this._setConvertedLinkItems(t);var n=this._getInternalModel().getProperty("/linkItems");if(n.length===1&&!i.length){r.navigate(n[0].href);return Promise.resolve(true)}return Promise.resolve(false)}.bind(this))};p.prototype._setConvertedLinkItems=function(e){var t=this._getInternalModel();var i=e.map(function(e){if(!e.getKey()){o.error("sap.ui.mdc.Link: undefined 'key' property of the LinkItem "+e.getId()+". The mandatory 'key' property should be defined due to personalization reasons.")}return{key:e.getKey(),text:e.getText(),description:e.getDescription(),href:e.getHref(),internalHref:e.getInternalHref(),target:e.getTarget(),icon:e.getIcon(),initiallyVisible:e.getInitiallyVisible(),visible:false}});t.setProperty("/linkItems/",i);var n=i.filter(function(e){return e.initiallyVisible});t.setProperty("/baselineLinkItems/",n)};p.prototype._getNoContent=function(){var e=new s({layout:u,content:[new l({text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("info.POPOVER_MSG_NO_CONTENT")})]});e.addStyleClass("mdcbaseinfoPanelDefaultAdditionalContent");return e};p.prototype._createPanelId=function(e,t){var i;if(this.getParent()){i=this.getParent()}var n=this._getSourceControl();if(!n){this.setSourceControl(i);n=i}if(!t.isFlexSupported({element:this})||!t.isFlexSupported({element:n})){o.error("Invalid component. The mandatory 'sourceControl' association should be assigned to the app component due to personalization reasons.");return this.getId()+"-idInfoPanel"}var r=e.getAppComponentForControl(n)||e.getAppComponentForControl(i);return r.createId("idInfoPanel")};p.retrieveAllMetadata=function(e){if(!e.getModel||!e.getModel("$sapuimdcLink")){return[]}var t=e.getModel("$sapuimdcLink");return t.getProperty("/metadata").map(function(e){return{id:e.key,text:e.text,description:e.description,href:e.href,internalHref:e.internalHref,target:e.target,visible:e.visible}})};p.retrieveBaseline=function(e){if(!e.getModel||!e.getModel("$sapuimdcLink")){return[]}var t=e.getModel("$sapuimdcLink");return t.getProperty("/baseline").map(function(e){return{id:e.key,visible:true}})};p.prototype._getInfoLog=function(){if(this.getPayload()&&this.getPayload().semanticObjects){if(this._oInfoLog){return this._oInfoLog}if(o.getLevel()>=o.Level.INFO){this._oInfoLog=new n;this._oInfoLog.initialize(this.getPayload().semanticObjects,this._getContextObject(this._getControlBindingContext()));return this._oInfoLog}}return undefined};p.prototype._getContextObject=function(e){return e?e.getObject(e.getPath()):undefined};p.prototype.retrieveAdditionalContent=function(){if(this._aAdditionalContent){return Promise.resolve(this._aAdditionalContent)}else{this._oUseDelegateAdditionalContentPromise=this._useDelegateAdditionalContent();return this._oUseDelegateAdditionalContentPromise.then(function(){return Promise.resolve(this._aAdditionalContent)}.bind(this))}};p.prototype._useDelegateAdditionalContent=function(){if(this.awaitControlDelegate()){return this.awaitControlDelegate().then(function(){var e=Object.assign({},this.getPayload());return new Promise(function(t){this.getControlDelegate().fetchAdditionalContent(e,this).then(function(e){this._setAdditionalContent(e===null?[]:e);t()}.bind(this))}.bind(this))}.bind(this))}o.error("mdc.Link retrieveAdditionalContent: control delegate is not set - could not load AdditionalContent from delegate.");return Promise.resolve([])};p.prototype._setAdditionalContent=function(e){this._aAdditionalContent=e};p.prototype.retrieveLinkType=function(){if(this.awaitControlDelegate()){return this.awaitControlDelegate().then(function(){var e=Object.assign({},this.getPayload());return this._bIsBeingDestroyed?Promise.resolve():this.getControlDelegate().fetchLinkType(e,this)}.bind(this))}o.error("mdc.Link retrieveLinkType: control delegate is not set - could not load LinkType from delegate.");return Promise.resolve(null)};p.prototype.retrieveLinkItems=function(){var e=Object.assign({},this.getPayload());var t=this._getControlBindingContext();return this._retrieveUnmodifiedLinkItems().then(function(i){return this.getControlDelegate().modifyLinkItems(e,t,i).then(function(e){return e})}.bind(this))};p.prototype._retrieveUnmodifiedLinkItems=function(){if(this._bLinkItemsFetched){return Promise.resolve(this._aLinkItems)}else{this._oUseDelegateItemsPromise=this._useDelegateItems();return this._oUseDelegateItemsPromise.then(function(){return Promise.resolve(this._aLinkItems)}.bind(this))}};p.prototype._useDelegateItems=function(){if(this.awaitControlDelegate()){return this.awaitControlDelegate().then(function(){var e=Object.assign({},this.getPayload());var t=this._getControlBindingContext();var i=this._getInfoLog();return new Promise(function(n){this.getControlDelegate().fetchLinkItems(e,t,i).then(function(e){this._setLinkItems(e===null?[]:e);this._bLinkItemsFetched=e!==null;n()}.bind(this))}.bind(this))}.bind(this))}o.error("mdc.Link _useDelegateItems: control delegate is not set - could not load LinkItems from delegate.");return Promise.resolve()};p.prototype._setLinkItems=function(e){var t=e.filter(function(e){return e.getParent()===null});t.forEach(function(e){this.addDependent(e)}.bind(this));this._aLinkItems=e};p.prototype._beforeNavigationCallback=function(e){if(this.awaitControlDelegate()){var t=Object.assign({},this.getPayload());return this.getControlDelegate().beforeNavigationCallback(t,e)}o.error("mdc.Link _beforeNavigationCallback: control delegate is not set - could not load beforeNavigationCallback from delegate.");return Promise.resolve()};p.prototype._getControlBindingContext=function(){var e=this._getSourceControl();return e&&e.getBindingContext()||this.getBindingContext()};p.prototype._getInternalModel=function(){return this.getModel("$sapuimdcLink")};p.prototype._getSourceControl=function(){return typeof this.getSourceControl()==="string"?sap.ui.getCore().byId(this.getSourceControl()):this.getSourceControl()};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/LinkDelegate", ["sap/ui/mdc/BaseDelegate"],function(e){"use strict";var n=Object.assign({},e);n.fetchLinkItems=function(e,n,i){return Promise.resolve(null)};n.fetchLinkType=function(e,n){return Promise.resolve({initialType:{type:2,directLink:undefined},runtimeType:null})};n.fetchAdditionalContent=function(e,n){return Promise.resolve([])};n.modifyLinkItems=function(e,n,i){return Promise.resolve(i)};n.beforeNavigationCallback=function(e,n){return Promise.resolve(true)};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/MultiValueField", ["sap/ui/mdc/library","sap/ui/mdc/field/FieldBase","sap/ui/mdc/field/FieldBaseRenderer","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated"],function(t,e,i,n,o){"use strict";var a=e.extend("sap.ui.mdc.MultiValueField",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/field/MultiValueField.designtime",properties:{delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/field/MultiValueFieldDelegate",payload:{}}}},aggregations:{items:{type:"sap.ui.mdc.field.MultiValueFieldItem",multiple:true,singularName:"item",bindable:"bindable"}},defaultAggregation:"items",events:{change:{parameters:{items:{type:"sap.ui.mdc.field.MultiValueFieldItem[]"},valid:{type:"boolean"},promise:{type:"Promise"}}}}},renderer:i});a.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver.observe(this,{aggregations:["items"]})};a.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this._iConditionUpdateTimer){clearTimeout(this._iConditionUpdateTimer);delete this._iConditionUpdateTimer}};a.prototype.bindAggregation=function(t,i){if(t==="items"&&!i.formatter){s.call(this,i)}e.prototype.bindAggregation.apply(this,arguments)};function s(t){if(t.template&&t.template.mBindingInfos.key){var e=t.template.mBindingInfos.key;if(e.type&&(!this._oDataType||this._oDataType.getMetadata().getName()!==e.type.getMetadata().getName())){this._oContentFactory.setDataType(e.type);this.invalidate()}}}a.prototype._handleModelContextChange=function(t){e.prototype._handleModelContextChange.apply(this,arguments);if(!this._oDataType){var i=this.getBinding("items");if(i){s.call(this,i)}}};a.prototype._initDataType=function(){e.prototype._initDataType.apply(this,arguments);var t=this.getBindingInfo("items");if(t){s.call(this,t)}};a.prototype.setMaxConditions=function(t){if(t===1){throw new Error("Multiple Conditions needed on MultiValueField "+this)}return this.setProperty("maxConditions",t,true)};a.prototype._observeChanges=function(t){e.prototype._observeChanges.apply(this,arguments);if(t.name==="items"){r.call(this,t.child,t.mutation)}if(t.name==="key"){p.call(this)}if(t.name==="description"){p.call(this)}if(t.name==="conditions"){d.call(this,t.current)}};function r(t,e){if(e==="insert"){this._oObserver.observe(t,{properties:true})}else{this._oObserver.unobserve(t)}if(!this._bMyItemUpdate){p.call(this)}}function d(t){if(this._bConditionsUpdateFromItems){return}if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){if(!this.bIsDestroyed){d.call(this.getConditions())}}.bind(this));return}this.getControlDelegate().updateItems(this.getPayload(),t,this)}function p(){if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){if(!this.bIsDestroyed){p.call(this)}}.bind(this));return}if(!this._iConditionUpdateTimer){this._iConditionUpdateTimer=setTimeout(function(){l.call(this);this._iConditionUpdateTimer=undefined}.bind(this),0)}}function l(){var t=this.getItems();var e=[];for(var i=0;i<t.length;i++){var a=t[i];var s=n.createItemCondition(a.getKey(),a.getDescription());s.validated=o.Validated;e.push(s)}this._bConditionsUpdateFromItems=true;this.setConditions(e);this._bConditionsUpdateFromItems=false}a.prototype._fireChange=function(t,e,i,n){this.fireChange({items:this.getItems(),valid:e,promise:n})};a.prototype._getResultForPromise=function(t){return this.getItems()};a.prototype._getOperators=function(){return["EQ"]};a.prototype._checkCreateInternalContent=function(){if(!this.bIsDestroyed&&this._oContentFactory.getDataType()&&!this._isPropertyInitial("editMode")){e.prototype._checkCreateInternalContent.apply(this,arguments)}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Table", ["./Control","./ActionToolbar","./table/TableSettings","./table/GridTableType","./table/TreeTableType","./table/ResponsiveTableType","./table/PropertyHelper","./table/utils/Personalization","./mixin/FilterIntegrationMixin","./library","sap/m/Text","sap/m/ToolbarSpacer","sap/m/Button","sap/m/Title","sap/m/OverflowToolbar","sap/m/library","sap/m/table/Util","sap/m/table/columnmenu/Menu","sap/ui/core/Core","sap/ui/core/format/NumberFormat","sap/ui/core/Item","sap/ui/core/format/ListFormat","sap/ui/core/library","sap/ui/events/KeyCodes","sap/ui/model/Sorter","sap/base/strings/capitalize","sap/base/util/deepEqual","sap/base/util/Deferred","sap/base/util/UriParameters","sap/ui/core/InvisibleMessage","sap/ui/core/InvisibleText","sap/ui/mdc/p13n/subcontroller/ColumnController","sap/ui/mdc/p13n/subcontroller/SortController","sap/ui/mdc/p13n/subcontroller/FilterController","sap/ui/mdc/p13n/subcontroller/GroupController","sap/ui/mdc/p13n/subcontroller/AggregateController","sap/ui/mdc/p13n/subcontroller/ColumnWidthController","sap/ui/mdc/actiontoolbar/ActionToolbarAction","sap/ui/mdc/table/menu/QuickActionContainer","sap/ui/mdc/table/menu/ItemContainer","sap/ui/mdc/enum/ProcessingStrategy","sap/ui/core/theming/Parameters","sap/base/Log"],function(t,e,i,o,n,r,s,a,l,u,p,h,d,g,f,c,_,b,y,T,m,C,v,E,B,I,P,x,A,S,D,w,R,F,M,N,z,H,L,O,V,U,k){"use strict";var G=u.SelectionMode;var j=u.TableType;var W=u.TableP13nMode;var q=c.ToolbarDesign;var Q=c.ToolbarStyle;var K=c.IllustratedMessageType;var X=u.MultiSelectMode;var $=v.TitleLevel;var J=v.SortOrder;var Y=new window.WeakMap;var Z=function(t){if(!Y.has(t)){Y.set(t,{oFilterInfoBar:null})}return Y.get(t)};var tt={Table:o,TreeTable:n,ResponsiveTable:r,null:o};var et=t.extend("sap.ui.mdc.Table",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/table/Table.designtime",interfaces:["sap.ui.mdc.IFilterSource","sap.ui.mdc.IxState"],defaultAggregation:"columns",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null,invalidate:true},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null,invalidate:true},p13nMode:{type:"sap.ui.mdc.TableP13nMode[]",defaultValue:[]},delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/TableDelegate",payload:{}}},headerLevel:{type:"sap.ui.core.TitleLevel",group:"Appearance",defaultValue:$.Auto},autoBindOnInit:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:null},headerVisible:{type:"boolean",group:"Misc",defaultValue:true},selectionMode:{type:"sap.ui.mdc.SelectionMode",defaultValue:G.None},showRowCount:{type:"boolean",group:"Misc",defaultValue:true},threshold:{type:"int",group:"Appearance",defaultValue:-1},noDataText:{type:"string"},sortConditions:{type:"object"},filterConditions:{type:"object",defaultValue:{}},groupConditions:{type:"object"},aggregateConditions:{type:"object"},enableExport:{type:"boolean",defaultValue:false},busyIndicatorDelay:{type:"int",defaultValue:100},enableColumnResize:{type:"boolean",group:"Behavior",defaultValue:true},showPasteButton:{type:"boolean",group:"Behavior",defaultValue:false},enablePaste:{type:"boolean",group:"Behavior",defaultValue:true},multiSelectMode:{type:"sap.ui.mdc.MultiSelectMode",group:"Behavior",defaultValue:X.Default},enableAutoColumnWidth:{type:"boolean",group:"Behavior",defaultValue:false},propertyInfo:{type:"object[]",defaultValue:[]}},aggregations:{_content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},type:{type:"sap.ui.mdc.table.TableTypeBase",altTypes:["sap.ui.mdc.TableType"],multiple:false},columns:{type:"sap.ui.mdc.table.Column",multiple:true},creationRow:{type:"sap.ui.mdc.table.CreationRow",multiple:false},actions:{type:"sap.ui.core.Control",multiple:true,forwarding:{getter:"_createToolbar",aggregation:"actions"}},variant:{type:"sap.ui.fl.variants.VariantManagement",multiple:false},quickFilter:{type:"sap.ui.core.Control",multiple:false},rowSettings:{type:"sap.ui.mdc.table.RowSettings",multiple:false},dataStateIndicator:{type:"sap.m.plugins.DataStateIndicator",multiple:false},noData:{type:"sap.ui.core.Control",multiple:false,altTypes:["string"]}},associations:{filter:{type:"sap.ui.mdc.IFilter",multiple:false}},events:{rowPress:{parameters:{bindingContext:{type:"sap.ui.model.Context"}}},selectionChange:{parameters:{bindingContext:{type:"sap.ui.model.Context"},selected:{type:"boolean"},selectAll:{type:"boolean"}}},beforeExport:{parameters:{exportSettings:{type:"object"},userExportSettings:{type:"object"},filterSettings:{type:"object[]"}}},paste:{parameters:{data:{type:"string[][]"}}}}},constructor:function(){this._oTableReady=new x;this._oFullInitialize=new x;t.apply(this,arguments);this.bCreated=true;this._updateAdaptation();this._initializeContent()},renderer:{apiVersion:2,render:function(t,e){t.openStart("div",e);t.class("sapUiMdcTable");t.style("height",e.getHeight());t.style("width",e.getWidth());t.openEnd();t.renderControl(e.getAggregation("_content"));t.close("div")}}});var it=["variant","quickFilter"];l.call(et.prototype);it.forEach(function(t){var e=I(t),i="_o"+e,o="get"+e,n="set"+e,r="destroy"+e;et.prototype[o]=function(){return this[i]};et.prototype[r]=function(){var t=this[i];this[n]();if(t){t.destroy()}return this};et.prototype[n]=function(e){this.validateAggregation(t,e,false);var n=this._createToolbar(),r=e!==this[i];if(!e||r){n.removeBetween(this[o]());this[i]=e}if(r&&e){this._setToolbarBetween(n)}return this}});et.prototype.init=function(){t.prototype.init.apply(this,arguments);this.mSkipPropagation={rowSettings:true};this._bForceRebind=true;this._setPropertyHelperClass(s);this._setupPropertyInfoStore("propertyInfo")};et.prototype.applySettings=function(e,i){if(e&&"type"in e){var o={type:e.type};if("delegate"in e){o.delegate=e.delegate;delete e.delegate}delete e.type;t.prototype.applySettings.call(this,o,i)}t.prototype.applySettings.call(this,e,i);this.initControlDelegate()};et.prototype._setToolbarBetween=function(t){[this._oVariant,this._oQuickFilter].forEach(function(e){if(e){t.addBetween(e)}})};et.prototype.initialized=function(){return this._oTableReady.promise};et.prototype._fullyInitialized=function(){return this._oFullInitialize.promise};et.prototype.getDataStateIndicatorPluginOwner=function(t){return this._oTable||this._oFullInitialize.promise};et.prototype.getCopyProviderPluginOwner=function(){return this._oTable||this._oFullInitialize.promise};et.prototype.setDataStateIndicator=function(t){this._handleDataStateEvents(this.getDataStateIndicator(),"detach");this.setAggregation("dataStateIndicator",t,true);this._handleDataStateEvents(this.getDataStateIndicator(),"attach");return this};et.prototype._handleDataStateEvents=function(t,e){if(t){t[e+"ApplyFilter"](this._onApplyMessageFilter,this);t[e+"ClearFilter"](this._onClearMessageFilter,this);t[e+"Event"]("filterInfoPress",function(){a.openFilterDialog(this)},this)}};et.prototype._onApplyMessageFilter=function(t){this._oMessageFilter=t.getParameter("filter");t.preventDefault();if(this.isTableBound()){this.rebind()}};et.prototype._onClearMessageFilter=function(t){this._oMessageFilter=null;t.preventDefault();if(this.isTableBound()){this.rebind()}};et.prototype._isOfType=function(t,e){var i=this._getType();if(e){return i.isA(tt[t].getMetadata().getName())}else{return i.constructor===tt[t]}};et.prototype.scrollToIndex=function(t){if(typeof t!=="number"){return Promise.reject("The iIndex parameter has to be a number")}return this._getType().scrollToIndex(t)};et.prototype.focusRow=function(t,e){return this.scrollToIndex(t).then(function(){return this._oTable._setFocus(t,e)}.bind(this))};et.prototype.setType=function(t){if(!this.bCreated||this.getType()==t){return this.setAggregation("type",t,true)}if(this._oToolbar){this._getType().removeToolbar()}this._destroyDefaultType();this.setAggregation("type",t,true);if(this._oTable){var e=this.getNoData();this.setNoData();this._vNoData=e;this._oTable.destroy("KeepDom");this._oTable=null;this._bTableExists=false}else{this._onAfterTableCreated();this._onAfterFullInitialization()}if(this._oRowTemplate){this._oRowTemplate.destroy();this._oRowTemplate=null}this._oTableReady=new x;this._oFullInitialize=new x;this._bFullyInitialized=false;this._initializeContent();return this};et.prototype._getType=function(){var t=this.getType();if(!this._oDefaultType&&(typeof t==="string"||t===null)){this._oDefaultType=new tt[t];this.addDependent(this._oDefaultType)}return this._oDefaultType||this.getType()};et.prototype._destroyDefaultType=function(){if(this._oDefaultType){this._oDefaultType.destroy();delete this._oDefaultType}};et.prototype.setRowSettings=function(t){this.setAggregation("rowSettings",t,true);this._getType().updateRowSettings();if(this.isTableBound()){this._bForceRebind=true;this.rebind()}return this};et.prototype.setHeaderLevel=function(t){if(this.getHeaderLevel()===t){return this}this.setProperty("headerLevel",t,true);this._oTitle&&this._oTitle.setLevel(t);return this};et.prototype.focus=function(t){if(this._oTable){this._oTable.focus(t)}};et.prototype.setBusy=function(t){this.setProperty("busy",t,true);if(this._oTable){this._oTable.setBusy(t)}return this};et.prototype.setBusyIndicatorDelay=function(t){this.setProperty("busyIndicatorDelay",t,true);if(this._oTable){this._oTable.setBusyIndicatorDelay(t)}return this};et.prototype.setSelectionMode=function(t){this.setProperty("selectionMode",t,true);this._getType().updateSelectionSettings();return this};et.prototype.setMultiSelectMode=function(t){this.setProperty("multiSelectMode",t,true);this._getType().updateSelectionSettings();return this};et.prototype.setCreationRow=function(t){this.setAggregation("creationRow",t,true);if(t){t.update()}return this};et.prototype.setEnableColumnResize=function(t){var e=this.getEnableColumnResize();this.setProperty("enableColumnResize",t,true);if(this.getEnableColumnResize()!==e){this._updateColumnResize();this._updateAdaptation()}return this};var ot=function(t){var e=false;if(t&&(t.indexOf("Sort")>-1||t.indexOf("Column")>-1||t.indexOf("Group")>-1||t.indexOf("Aggregate")>-1||t.indexOf("Filter")>-1)){e=true}return e};et.prototype._onModifications=function(t){if(ot(t)&&this.isTableBound()){this.rebind()}if(!this.isPropertyHelperFinal()){this._bFinalzingPropertiesOnModification=true;this.finalizePropertyHelper().then(function(){delete this._bFinalzingPropertiesOnModification}.bind(this))}this.getColumns().forEach(function(t){t._onModifications()})};et.prototype.setP13nMode=function(t){var e=this.getP13nMode();var i=[];if(t&&t.length>1){var o=t.reduce(function(t,e,i){t[e]=true;return t},{});if(o.Column){i.push("Column")}if(o.Sort){i.push("Sort")}if(o.Filter){i.push("Filter")}if(o.Group){i.push("Group")}if(o.Aggregate){i.push("Aggregate")}}else{i=t}this.setProperty("p13nMode",i,true);this._updateAdaptation();if(!P(e.sort(),this.getP13nMode().sort())){nt(this)}return this};et.prototype._updateAdaptation=function(){var t={controller:{}};var e=[];if(this.getColumns().length>0&&this._isOfType(j.TreeTable)){e.push(this.getColumns()[0].getDataProperty())}var i={Column:new w({control:this,stableKeys:e}),Sort:new R({control:this}),Group:new M({control:this}),Filter:new F({control:this}),Aggregate:new N({control:this}),ColumnWidth:new z({control:this})};this.getActiveP13nModes().forEach(function(e){t.controller[e]=i[e]});if(this.getEnableColumnResize()){t.controller["ColumnWidth"]=i["ColumnWidth"]}this.getEngine().register(this,t)};function nt(t){t._updateP13nButton();if(t._oTable){var e=t._oTable.getDragDropConfig()[0];if(e){e.setEnabled(t.getActiveP13nModes().indexOf("Column")>-1)}}if(t.isFilteringEnabled()){st(t)}rt(t)}et.prototype.setFilterConditions=function(t){this.setProperty("filterConditions",t,true);var e=this.getInbuiltFilter();if(e){e.setFilterConditions(t)}rt(this);return this};function rt(t){var e=ut(t);var i=pt(t);var o=ht(t);if(!e){return}if(o.length===0){var n=e.getDomRef();if(n&&n.contains(document.activeElement)){t.focus()}e.setVisible(false);at(t).setText("");return}t._fullyInitialized().then(function(){var n=t.getPropertyHelper();var r=o.map(function(t){return n.hasProperty(t)?n.getProperty(t).label:""});var s=y.getLibraryResourceBundle("sap.ui.mdc");var a=C.getInstance();var l;if(r.length>1){l=s.getText("table.MULTIPLE_FILTERS_ACTIVE",[r.length,a.format(r)])}else{l=s.getText("table.ONE_FILTER_ACTIVE",r[0])}if(!e.getVisible()){e.setVisible(true)}i.setText(l);at(t).setText(l)})}function st(t){if(!t._oTable){return}var e=ut(t);var i=at(t);if(!e){e=lt(t)}t._getType().insertFilterInfoBar(e,i.getId())}function at(t){if(!t._oFilterInfoBarInvisibleText){t._oFilterInfoBarInvisibleText=(new D).toStatic()}return t._oFilterInfoBarInvisibleText}function lt(t){var e=t.getId()+"-filterInfoBar";var i=Z(t).oFilterInfoBar;var o=y.getLibraryResourceBundle("sap.ui.mdc");if(i&&!i.bIsDestroyed){i.destroy()}i=new f({id:e,active:true,design:q.Info,visible:false,content:[new p({id:e+"-text",wrapping:false}),new h,new d({type:c.ButtonType.Transparent,tooltip:o.getText("infobar.REMOVEALLFILTERS"),icon:"sap-icon://decline",press:function(){a.createFilterChange(t,{conditions:[],strategy:V.FullReplace});t.focus()}})],press:function(){a.openFilterDialog(t,function(){if(ht(t).length===0){t.focus()}})}});Z(t).oFilterInfoBar=i;rt(t);return i}function ut(t){var e=Z(t).oFilterInfoBar;if(e&&(e.bIsDestroyed||e.bIsBeingDestroyed)){return null}return Z(t).oFilterInfoBar}function pt(t){var e=ut(t);return e?e.getContent()[0]:null}et.prototype.setThreshold=function(t){this.setProperty("threshold",t,true);if(!this._oTable){return this}t=this.getThreshold()>-1?this.getThreshold():undefined;if(this._isOfType(j.ResponsiveTable)){this._oTable.setGrowingThreshold(t)}else{this._oTable.setThreshold(t)}return this};et.prototype._onFilterProvided=function(t){this._updateInnerTableNoData()};et.prototype._onFilterRemoved=function(t){this._updateInnerTableNoData()};et.prototype._onFiltersChanged=function(t){if(this.isTableBound()&&t.getParameter("conditionsBased")){this._oTable.setShowOverlay(true)}};et.prototype._onFilterSearch=function(t){this._bAnnounceTableUpdate=true};et.prototype.setNoData=function(t){this._vNoData=this.validateAggregation("noData",t,false);if(!this._oTable){return this}if(t&&t.isA&&t.isA("sap.m.IllustratedMessage")){this._sLastNoDataTitle="";t.setEnableVerticalResponsiveness(!this._isOfType(j.ResponsiveTable));var e=this._oTable.getAggregation("_noColumnsMessage");if(!e){e=_.getNoColumnsIllustratedMessage(function(){a.openSettingsDialog(this)}.bind(this));e.setEnableVerticalResponsiveness(!this._isOfType(j.ResponsiveTable));this._oTable.setAggregation("_noColumnsMessage",e)}}this._oTable.setNoData(t);this._updateInnerTableNoData();return this};et.prototype.getNoData=function(){return this._vNoData&&!this._vNoData.bIsDestroyed?this._vNoData:null};et.prototype.destroyNoData=function(){if(this._oTable){this._oTable.destroyNoData(true);this._vNoData=null}return this};et.prototype._updateInnerTableNoData=function(){var t=this.getNoData();if(!t||typeof t=="string"){return this._updateInnerTableNoDataText()}if(!t.isA("sap.m.IllustratedMessage")||this._sLastNoDataTitle!=t.getTitle()){return}var e=y.getLibraryResourceBundle("sap.ui.mdc");if(!this.isTableBound()){t.setDescription(" ");if(this.getFilter()){t.setTitle(e.getText("table.NO_DATA_WITH_FILTERBAR"));t.setIllustrationType(K.SearchEarth)}else{t.setIllustrationType(K.EmptyList);t.setTitle(e.getText("table.NO_DATA"))}}else if(gt(this)){t.setTitle(e.getText("table.NO_RESULTS_TITLE"));t.setDescription(e.getText("table.NO_RESULTS_DESCRIPTION"));t.setIllustrationType(K.NoFilterResults)}else{t.setTitle(e.getText("table.NO_DATA")).setDescription(" ");t.setIllustrationType(K.NoEntries)}this._sLastNoDataTitle=t.getTitle()};et.prototype.setNoDataText=function(t){this.setProperty("noDataText",t,true);this._updateInnerTableNoDataText();return this};et.prototype._updateInnerTableNoDataText=function(){if(this._oTable){this._oTable.setNoData(this._getNoDataText())}};et.prototype._getNoDataText=function(){var t=this.getNoDataText();if(t){return t}var e=this.getNoData();if(e&&typeof e=="string"){return e}var i=y.getLibraryResourceBundle("sap.ui.mdc");if(!this.isTableBound()){return i.getText(this.getFilter()?"table.NO_DATA_WITH_FILTERBAR":"table.NO_DATA")}if(gt(this)){return i.getText("table.NO_RESULTS")}return i.getText("table.NO_DATA")};et.prototype._updateRowActions=function(){this._getType().updateRowActions()};et.prototype._initializeContent=function(){var t=this._getType();var e=[this.awaitControlDelegate(),t.loadModules()];if(this.isFilteringEnabled()){e.push(this.retrieveInbuiltFilter())}Promise.all(e).then(function(){if(this.bIsDestroyed){return}var e=this.getControlDelegate();this._updateAdaptation();if(e.preInit){this._pDelegatePreInit=e.preInit(this)}if(!this._bTableExists&&t.constructor===this._getType().constructor){this._createContent();this._bTableExists=true}}.bind(this)).catch(function(t){this._onAfterTableCreated();throw t}.bind(this))};et.prototype._onAfterTableCreated=function(t){if(this._oTableReady){this._oTableReady[t?"resolve":"reject"](this)}};et.prototype._onAfterFullInitialization=function(t){if(this._oFullInitialize){this._oFullInitialize[t?"resolve":"reject"](this)}};et.prototype._createContent=function(){this._createToolbar();this._createTable();this._updateColumnResize();this._updateRowActions();this._updateExpandAllButton();this._updateCollapseAllButton();this._updateExportButton();this.getColumns().forEach(this._insertInnerColumn,this);this.setAggregation("_content",this._oTable);this._onAfterTableCreated(true);Promise.all([this.getPropertyInfo().length===0?this.finalizePropertyHelper():this.awaitPropertyHelper(),this._pDelegatePreInit,this.initialized()]).then(function(){delete this._pDelegatePreInit;var t=this.getCreationRow();if(t){t.update()}if(this.getAutoBindOnInit()){var e=this.getEngine();e.isModificationSupported(this).then(function(t){if(t){e.waitForChanges(this).then(function(){this.rebind()}.bind(this))}else{this.rebind()}}.bind(this))}this._bFullyInitialized=true;this._onAfterFullInitialization(true)}.bind(this)).catch(function(t){this._onAfterFullInitialization();throw t}.bind(this))};et.prototype.setHeader=function(t){this.setProperty("header",t,true);this._updateHeaderText();return this};et.prototype.setHeaderVisible=function(t){this.setProperty("headerVisible",t,true);if(this._oTitle){this._oTitle.setWidth(this.getHeaderVisible()?undefined:"0px")}return this};et.prototype.setShowRowCount=function(t){this.setProperty("showRowCount",t,true);this._updateHeaderText();return this};et.prototype.setEnableExport=function(t){this.setProperty("enableExport",t,true);this._updateExportButton();return this};et.prototype.setShowPasteButton=function(t){if((t=!!t)==this.getShowPasteButton()){return this}this.setProperty("showPasteButton",t,true);if(t&&!this._oPasteButton&&this._oToolbar){this._oToolbar.insertEnd(this._getPasteButton(),0);this._oPasteButton.setEnabled(this.getEnablePaste())}else if(this._oPasteButton){this._oPasteButton.setVisible(t);this._oPasteButton.setEnabled(this.getEnablePaste())}return this};et.prototype.setEnablePaste=function(t){this.setProperty("enablePaste",t,true);if(this._oPasteButton){this._oPasteButton.setEnabled(this.getEnablePaste())}return this};et.prototype._setShowP13nButton=function(t){this._bHideP13nButton=!t;this._updateP13nButton()};et.prototype._isP13nButtonHidden=function(){return this._bHideP13nButton};et.prototype._createToolbar=function(){if(this.isDestroyStarted()||this.isDestroyed()){return}if(!this._oToolbar){this._oTitle=new g(this.getId()+"-title",{text:this.getHeader(),width:this.getHeaderVisible()?undefined:"0px",level:this.getHeaderLevel(),titleStyle:$.H4});this._oToolbar=new e(this.getId()+"-toolbar",{design:q.Transparent,begin:[this._oTitle],end:[this._getPasteButton(),this._getP13nButton()]})}this._oToolbar.setStyle(this._isOfType(j.ResponsiveTable)?Q.Standard:Q.Clear);return this._oToolbar};et.prototype._getVisibleProperties=function(){var t=[],e;this.getColumns().forEach(function(i,o){e=i&&i.getDataProperty();if(e){t.push({name:e})}});return t};et.prototype.getConditions=function(){return this.getInbuiltFilter()?this.getInbuiltFilter().getConditions():[]};et.prototype._getSortedProperties=function(){return this.getSortConditions()?this.getSortConditions().sorters:[]};et.prototype._getGroupedProperties=function(){return this.getGroupConditions()?this.getGroupConditions().groupLevels:[]};et.prototype._getAggregatedProperties=function(){return this.getAggregateConditions()?this.getAggregateConditions():{}};et.prototype._getXConfig=function(){return this.getEngine().readXConfig(this)};function ht(t){return t.isFilteringEnabled()?ft(t.getFilterConditions()):[]}function dt(t){var e=y.byId(t.getFilter());return e?ft(e.getConditions()):[]}function gt(t){var e=y.byId(t.getFilter());return ht(t).length>0||dt(t).length>0||e&&e.getSearch()!==""}function ft(t){return Object.keys(t||{}).filter(function(e){return t[e].length>0})}et.prototype.getCurrentState=function(){var t={};var e=this.getActiveP13nModes();if(e.indexOf("Column")>-1){t.items=this._getVisibleProperties()}if(this.isSortingEnabled()){t.sorters=this._getSortedProperties()}if(this.isFilteringEnabled()){t.filter=this.getFilterConditions()}if(this.isGroupingEnabled()){t.groupLevels=this._getGroupedProperties()}if(this.isAggregationEnabled()){t.aggregations=this._getAggregatedProperties()}if(this.getEnableColumnResize()){t.xConfig=this._getXConfig()}return t};et.prototype.isFilteringEnabled=function(){return this.getActiveP13nModes().includes(W.Filter)};et.prototype.isSortingEnabled=function(){return this.getActiveP13nModes().includes(W.Sort)};et.prototype.isGroupingEnabled=function(){return this.getActiveP13nModes().includes(W.Group)};et.prototype.isAggregationEnabled=function(){return this.getActiveP13nModes().includes(W.Aggregate)};et.prototype.getSupportedP13nModes=function(){var t=ct(Object.keys(W),this._getType().getSupportedP13nModes());if(this.bDelegateInitialized){t=ct(t,this.getControlDelegate().getSupportedP13nModes(this))}return t};et.prototype.getActiveP13nModes=function(){return ct(this.getP13nMode(),this.getSupportedP13nModes())};function ct(t,e){return t.filter(function(t){return e.includes(t)})}et.prototype._getP13nButton=function(){if(!this._oP13nButton){this._oP13nButton=i.createSettingsButton(this.getId(),[function(){a.openSettingsDialog(this)},this])}this._updateP13nButton();return this._oP13nButton};et.prototype._updateP13nButton=function(){if(this._oP13nButton){var t=this.getActiveP13nModes();var e=t.length===1&&t[0]==="Aggregate";this._oP13nButton.setVisible(t.length>0&&!e&&!this._bHideP13nButton)}};et.prototype._getPasteButton=function(){if(this.getShowPasteButton()){if(!this._oPasteButton){this._oPasteButton=i.createPasteButton(this.getId())}return this._oPasteButton}};et.prototype._isExportEnabled=function(){return this.getEnableExport()&&this.bDelegateInitialized&&this.getControlDelegate().getSupportedFeatures(this)["export"]};et.prototype._updateExportButton=function(){var t=this._oToolbar!=null&&this._isExportEnabled();if(t&&!this._oExportButton){this._oExportButton=this._createExportButton()}if(!this._oExportButton){return}if(this._oToolbar&&!this._oToolbar.getEnd().includes(this._oExportButton)){this._oToolbar.addEnd(this._oExportButton)}this._oExportButton.setEnabled(this._getRowCount(false)>0);this._oExportButton.setVisible(this._isExportEnabled())};et.prototype._createExportButton=function(){return i.createExportButton(this.getId(),{default:[function(){this._onExport()},this],exportAs:[function(){this._onExport(true)},this]})};et.prototype._createExportColumnConfiguration=function(){var t=this.getColumns();return this._fullyInitialized().then(function(){return this.finalizePropertyHelper()}.bind(this)).then(function(){var e=this.getPropertyHelper();var i=[];t.forEach(function(t){var o=e.getColumnExportSettings(t);i=i.concat(o)},this);return i}.bind(this))};et.prototype._isCollapseAllEnabled=function(){return this.bDelegateInitialized&&this.getControlDelegate().getSupportedFeatures(this)["collapseAll"]};et.prototype._updateCollapseAllButton=function(){var t=this._oToolbar!=null&&this._isCollapseAllEnabled();if(t&&!this._oCollapseAllButton){this._oCollapseAllButton=i.createExpandCollapseAllButton(this.getId(),[function(){this.getControlDelegate().collapseAll(this,this.getRowBinding())},this],false)}if(!this._oCollapseAllButton){return}if(this._oToolbar&&!this._oToolbar.getEnd().includes(this._oCollapseAllButton)){this._oToolbar.insertEnd(this._oCollapseAllButton,0)}this._oCollapseAllButton.setEnabled(this._getRowCount(false)>0);this._oCollapseAllButton.setVisible(this._isCollapseAllEnabled())};et.prototype._isExpandAllEnabled=function(){return this.bDelegateInitialized&&this.getControlDelegate().getSupportedFeatures(this)["expandAll"]};et.prototype._updateExpandAllButton=function(){var t=this._oToolbar!=null&&this._isExpandAllEnabled();if(t&&!this._oExpandAllButton){this._oExpandAllButton=i.createExpandCollapseAllButton(this.getId(),[function(){this.getControlDelegate().expandAll(this,this.getRowBinding())},this],true)}if(!this._oExpandAllButton){return}if(this._oToolbar&&!this._oToolbar.getEnd().includes(this._oExpandAllButton)){this._oToolbar.insertEnd(this._oExpandAllButton,0)}this._oExpandAllButton.setEnabled(this._getRowCount(false)>0);this._oExpandAllButton.setVisible(this._isExpandAllEnabled())};et.prototype._getColumnLabel=function(t){var e=this.getPropertyHelper();var i=e.getProperty(t);return i&&i.label};et.prototype._onExport=function(t){var e=this;return this._createExportColumnConfiguration().then(function(i){var o,n,r,s;if(!i||!i.length){sap.ui.require(["sap/m/MessageBox"],function(t){t.error(y.getLibraryResourceBundle("sap.ui.mdc").getText("table.NO_COLS_EXPORT"),{styleClass:this.$()&&this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":""})}.bind(e));return}s=e.getRowBinding();n=e._getColumnLabel.bind(e);o=t?"exportAs":"export";r={workbook:{columns:i,context:{title:e.getHeader()}},dataSource:s,fileName:e.getHeader()};e._getExportHandler().then(function(t){t[o](r,n)})})};et.prototype._getExportHandler=function(){var t=this;if(this._oExportHandler){return Promise.resolve(this._oExportHandler)}return new Promise(function(e,i){Promise.all([t._loadExportLibrary(),t.getControlDelegate().fetchExportCapabilities(t)]).then(function(i){var o=i[1];sap.ui.require(["sap/ui/export/ExportHandler"],function(i){t._oExportHandler=new i(o);t._oExportHandler.attachBeforeExport(t._onBeforeExport,t);e(t._oExportHandler)})}).catch(i)})};et.prototype._onBeforeExport=function(t){var e=t.getParameter("filterSettings");var i=this.getPropertyHelper();e.forEach(function(t){var e=i.getProperties().find(function(e){return e.path===t.getProperty()});if(e){t.setLabel(e.label);t.setType(e.typeConfig.typeInstance)}});this.fireBeforeExport({exportSettings:t.getParameter("exportSettings"),userExportSettings:t.getParameter("userExportSettings"),filterSettings:e})};et.prototype._loadExportLibrary=function(){if(!this._oExportLibLoadPromise){this._oExportLibLoadPromise=y.loadLibrary("sap.ui.export",true)}return this._oExportLibLoadPromise};et.prototype.onkeydown=function(t){if(t.isMarked()){return}if((t.metaKey||t.ctrlKey)&&t.shiftKey&&t.which===E.E){if(this._oExportButton&&this._oExportButton.getEnabled()&&this._isExportEnabled()){this._onExport(true);t.setMarked();t.preventDefault()}}if((t.metaKey||t.ctrlKey)&&t.which===E.COMMA){if(this._oP13nButton&&this._oP13nButton.getVisible()){this._oP13nButton.firePress();t.setMarked();t.preventDefault()}}};et.prototype._createTable=function(){var t=this._getType();this._oTable=t.createTable(this.getId()+"-innerTable");this._oRowTemplate=t.createRowTemplate(this.getId()+"-innerTableRow");t.updateTable();if(this.getNoData()){this.setNoData(this.getNoData())}if(this.isFilteringEnabled()){st(this)}if(!this._oColumnHeaderMenu){this._oQuickActionContainer=new L({table:this});this._oItemContainer=new O({table:this});this._oColumnHeaderMenu=new b({id:this.getId()+"-columnHeaderMenu",_quickActions:[this._oQuickActionContainer],_items:[this._oItemContainer]});this.addDependent(this._oColumnHeaderMenu);this._oColumnHeaderMenu.attachBeforeOpen(this._createColumnMenuContent,this)}};et.prototype._createColumnMenuContent=function(t){var e=t.getParameter("openBy");var i=this.getColumns()[e.getParent().indexOfColumn(e)];t.preventDefault();this._oQuickActionContainer.setColumn(i);this._oItemContainer.setColumn(i);this._fullyInitialized().then(function(){return this.finalizePropertyHelper()}.bind(this)).then(function(){Promise.all([this._oQuickActionContainer.initializeQuickActions(),this._oItemContainer.initializeItems()]).then(function(){if(this._oQuickActionContainer.hasQuickActions()||this._oItemContainer.hasItems()){this._oColumnHeaderMenu.openBy(e,true);a.detectUserPersonalizationCompletion(this,this._oColumnHeaderMenu)}}.bind(this))}.bind(this))};et.prototype._updateColumnResize=function(){var t=this._getType();if(this.getEnableColumnResize()){t.enableColumnResize()}else{t.disableColumnResize()}};et.prototype._onColumnMove=function(t){a.createColumnReorderChange(this,{column:t.column,index:t.newIndex})};et.prototype._onCustomSort=function(t,e){var i=t.getParameter("property");this.getCurrentState().sorters.forEach(function(t){if(t.name===i){if(t.descending&&e===J.Descending||!t.descending&&e===J.Ascending){e=J.None}}});a.createSortChange(this,{property:i,sortOrder:e})};et.prototype._onRowPress=function(t){if(this.getSelectionMode()!==G.SingleMaster){this.fireRowPress({bindingContext:t.bindingContext})}};et.prototype._onSelectionChange=function(t){if(!this._bSelectionChangedByAPI){this.fireSelectionChange({bindingContext:t.bindingContext,selected:t.selected,selectAll:t.selectAll})}};et.prototype._onColumnResize=function(t){a.createColumnWidthChange(this,{column:t.column,width:t.width})};et.prototype._onCustomGroup=function(t){a.createGroupChange(this,{property:t})};et.prototype._onCustomAggregate=function(t){a.createAggregateChange(this,{property:t})};et.prototype._insertInnerColumn=function(t,e){if(!this._oTable){return}var i=t.getInnerColumn();this._setMobileColumnTemplate(t,e);this._bForceRebind=true;if(e===undefined){this._oTable.addColumn(i)}else{this._oTable.insertColumn(i,e)}this._getType()._onColumnInsert(t)};et.prototype.moveColumn=function(t,e){t._bIsBeingMoved=true;this.removeAggregation("columns",t,true);this.insertAggregation("columns",t,e,true);delete t._bIsBeingMoved;if(this._oTable){var i=t.getInnerColumn();this._oTable.removeColumn(i);this._oTable.insertColumn(i,e);this._updateMobileColumnTemplate(t,e)}};et.prototype.removeColumn=function(t){t=this.removeAggregation("columns",t,true);this._updateMobileColumnTemplate(t,-1);return t};et.prototype.addColumn=function(t){this.addAggregation("columns",t,true);this._insertInnerColumn(t);return this};et.prototype.insertColumn=function(t,e){this.insertAggregation("columns",t,e,true);this._insertInnerColumn(t,e);return this};et.prototype._setMobileColumnTemplate=function(t,e){if(!this._oRowTemplate){return}var i=t.getTemplateClone();if(e>=0){this._oRowTemplate.insertCell(i,e);this._oTable.getItems().forEach(function(t){if(t.isA("sap.m.GroupHeaderListItem")){return}t.insertAggregation("cells",new D,e,true)})}else{this._oRowTemplate.addCell(i)}};et.prototype._updateMobileColumnTemplate=function(t,e){if(!this._oRowTemplate){return}var i,o;if(this._oRowTemplate){i=t.getTemplateClone();o=this._oRowTemplate.indexOfCell(i);_t(this._oRowTemplate,o,e)}if(o>-1){this._oTable.getItems().forEach(function(t){if(t.removeCell){_t(t,o,e)}})}};function _t(t,e,i){var o=t.removeCell(e);if(o){if(i>-1){t.insertCell(o,i)}else{o.destroy()}}}et.prototype.getSelectedContexts=function(){return this._getType().getSelectedContexts()};et.prototype.clearSelection=function(){this._bSelectionChangedByAPI=true;this._getType().clearSelection();this._bSelectionChangedByAPI=false};et.prototype._registerInnerFilter=function(t){t.attachSearch(this._rebind,this)};et.prototype.isTableBound=function(){return this._getType().isTableBound()};et.prototype.bindRows=function(){if(!this.bDelegateInitialized||!this._oTable){return}if(this._bFinalzingPropertiesOnModification){this.propertiesFinalized().then(function(){this.bindRows()}.bind(this));return}var t={};this.getControlDelegate().updateBindingInfo(this,t);if(!t.path){return}if(this._oRowTemplate){t.template=this._oRowTemplate}else{delete t.template}et._addBindingListener(t,"dataRequested",this._onDataRequested.bind(this));et._addBindingListener(t,"dataReceived",this._onDataReceived.bind(this));et._addBindingListener(t,"change",this._onBindingChange.bind(this));this._oTable.setShowOverlay(false);this._updateColumnsBeforeBinding();this.getControlDelegate().updateBinding(this,t,this._bForceRebind?null:this.getRowBinding());this._updateInnerTableNoData();this._bForceRebind=false};et.prototype._onDataRequested=function(){this._bIgnoreChange=true};et.prototype._onDataReceived=function(){this._bIgnoreChange=false;this._updateTableHeaderState()};et.prototype._onBindingChange=function(){this._updateExpandAllButton();this._updateCollapseAllButton();this._updateExportButton();if(this._bIgnoreChange){return}this._updateTableHeaderState()};et.prototype._updateTableHeaderState=function(){this._updateHeaderText()};et.prototype._updateHeaderText=function(){var t,e;if(!this._oNumberFormatInstance){this._oNumberFormatInstance=T.getFloatInstance()}if(this._oTitle&&this.getHeader()){t=this.getHeader();if(this.getShowRowCount()){e=this._getRowCount(true);if(e>0){var i=this._oNumberFormatInstance.format(e);t+=" ("+i+")"}}this._oTitle.setText(t)}if(!this._bIgnoreChange&&this._bAnnounceTableUpdate){this._bAnnounceTableUpdate=false;this._announceTableUpdate(e)}};et.prototype._announceTableUpdate=function(t){var e=S.getInstance();if(e){var i=y.getLibraryResourceBundle("sap.ui.mdc");var o=this.getHeader();if(t===undefined&&this._getRowCount(false)>0){e.announce(i.getText("table.ANNOUNCEMENT_TABLE_UPDATED",[o]))}else if(t>1){e.announce(i.getText("table.ANNOUNCEMENT_TABLE_UPDATED_MULT",[o,t]))}else if(t===1){e.announce(i.getText("table.ANNOUNCEMENT_TABLE_UPDATED_SING",[o,t]))}else{e.announce(i.getText("table.ANNOUNCEMENT_TABLE_UPDATED_NOITEMS",[o]))}}};et.prototype._updateColumnsBeforeBinding=function(){var t=this.getColumns();var e=this.getPropertyHelper();t.forEach(function(t){var i=e.getProperty(t.getDataProperty());var o=i?i.getSortableProperties().map(function(t){return t.name}):[];var n=this._getSortedProperties().find(function(t){return o.includes(t.name)});var r=J.None;if(n){r=n.descending?J.Descending:J.Ascending}this._getType().updateSortIndicator(t,r)},this)};et.prototype._getRowCount=function(t){var e=this.getRowBinding();if(!e){return t?undefined:0}var i;if(!t){i=e.getLength()}else if(typeof e.getCount==="function"){i=e.getCount()}else if(e.isLengthFinal()){i=e.getLength()}if(i<0||i==="0"){i=0}return i};et.prototype.getRowBinding=function(){return this._getType().getRowBinding()};et.prototype._getRowBinding=function(){k.error(this+": The method '_getRowBinding' must not be used will be deleted soon. Use 'getRowBinding' instead.");return this.getRowBinding()};et._addBindingListener=function(t,e,i){if(!t.events){t.events={}}if(!t.events[e]){t.events[e]=i}else{var o=t.events[e];t.events[e]=function(){i.apply(this,arguments);o.apply(this,arguments)}}};et.prototype._rebind=function(){if(this._bFullyInitialized){this.bindRows()}else{this._fullyInitialized().then(this._rebind.bind(this))}};et.prototype._getSorters=function(){var t=this.getSortConditions()?this.getSortConditions().sorters:[];var e=[],i=this.getPropertyHelper();t.forEach(function(t){if(i.hasProperty(t.name)){var o=i.getProperty(t.name).path;e.push(new B(o,t.descending))}});return e};et.prototype._onPaste=function(t){if(this.getEnablePaste()){this.firePaste({data:t.data})}};et.prototype.exit=function(){this._destroyDefaultType();if(this._oRowTemplate){this._oRowTemplate.destroy()}this._oRowTemplate=null;this._oTable=null;if(this._oToolbar&&!this._bTableExists){this._oToolbar.destroy()}this._oToolbar=null;this._oTitle=null;this._vNoData=null;this._oNumberFormatInstance=null;it.forEach(function(t){var e=I(t),i="_o"+e;this[i]=null},this);this._oTableReady=null;this._oFullInitialize=null;this._oPasteButton=null;this._oP13nButton=null;if(this._oFilterInfoBarInvisibleText){this._oFilterInfoBarInvisibleText.destroy();this._oFilterInfoBarInvisibleText=null}if(this._oColumnHeaderMenu){this._oColumnHeaderMenu.destroy();this._oColumnHeaderMenu=null}t.prototype.exit.apply(this,arguments)};et.prototype.addAction=function(e){if(e.getMetadata().getName()!=="sap.ui.mdc.actiontoolbar.ActionToolbarAction"){e=new H(e.getId()+"-action",{action:e})}return t.prototype.addAggregation.apply(this,["actions",e])};et.prototype.onThemeChanged=function(){if(this._oExportButton){var t=c.ButtonType[U.get({name:"_sap_ui_mdc_Table_ExportButtonType"})];this._oExportButton.setType(t)}};return et});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/TableDelegate", ["./AggregationBaseDelegate","./library","sap/ui/model/Sorter","sap/ui/core/library","sap/ui/core/Core"],function(e,r,t,o,a){"use strict";var n=r.TableP13nMode;var i=r.TableType;var s=Object.assign({},e);s.updateBindingInfo=function(e,r){r.parameters={};r.filters=[];r.sorter=[];if(e._oMessageFilter){r.filters=[e._oMessageFilter]}if(e._isOfType(i.ResponsiveTable)){var t=e._getGroupedProperties()[0];if(t){var o=this.getGroupSorter(e,t.name);if(o){r.sorter.push(o)}}}r.sorter=r.sorter.concat(r.sorter.length===1?e._getSorters().filter(function(e){return e.sPath!==r.sorter[0].sPath}):e._getSorters())};s.getGroupSorter=function(e,r){var o=e._getSortedProperties().find(function(e){return e.name===r});var a=e.getPropertyHelper().getProperty(r).path;var n=o?o.descending:false;if(!e._mFormatGroupHeaderInfo||e._mFormatGroupHeaderInfo.propertyName!==r){e._mFormatGroupHeaderInfo={propertyName:r,formatter:function(t){return this.formatGroupHeader(e,t,r)}.bind(this)}}return new t(a,n,e._mFormatGroupHeaderInfo.formatter)};s.updateBinding=function(e,r,t){this.rebind(e,r)};s.formatGroupHeader=function(e,r,t){var o=e.getPropertyHelper().getProperty(t);var n=o.textProperty;var i=a.getLibraryResourceBundle("sap.ui.mdc");var s="table.ROW_GROUP_TITLE";var p=[o.label,r.getProperty(o.path,true)];if(n){s="table.ROW_GROUP_TITLE_FULL";p.push(r.getProperty(n.path,true))}return i.getText(s,p)};s.validateState=function(r,t,n){if(n=="Filter"&&r._oMessageFilter){var i=a.getLibraryResourceBundle("sap.ui.mdc");return{validation:o.MessageType.Information,message:i.getText("table.PERSONALIZATION_DIALOG_FILTER_MESSAGESTRIP")}}return e.validateState.apply(this,arguments)};s.rebind=function(e,r){e._getType().bindRows(r)};s.getFilterDelegate=function(){return{addItem:function(e,r){return Promise.resolve(null)},addCondition:function(e,r,t){return Promise.resolve()},removeCondition:function(e,r,t){return Promise.resolve()}}};s.fetchExportCapabilities=function(e){return Promise.resolve({XLSX:{}})};s.expandAll=function(e){throw Error("Unsupported operation: TableDelegate does not support #expandAll")};s.collapseAll=function(e){throw Error("Unsupported operation: TableDelegate does not support #collapseAll")};s.getSupportedFeatures=function(e){return{export:true,selection:!e._isOfType(i.TreeTable),expandAll:false,collapseAll:false}};s.getSupportedP13nModes=function(e){var r=[n.Column,n.Sort,n.Filter];if(e._isOfType(i.ResponsiveTable)){r.push(n.Group)}return r};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/ValueHelp", ["sap/ui/mdc/Element","sap/ui/mdc/mixin/PromiseMixin","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/FilterConverter","sap/ui/mdc/enum/SelectType","sap/ui/mdc/enum/ConditionValidated","sap/ui/model/Context","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/base/ManagedObjectModel","sap/ui/base/ManagedObjectObserver","sap/base/util/merge","sap/base/util/deepEqual","sap/ui/mdc/enum/PropagationReason"],function(e,t,i,n,o,a,r,s,l,p,u,d,g,c,h){"use strict";var f=e.extend("sap.ui.mdc.ValueHelp",{metadata:{library:"sap.ui.mdc",properties:{conditions:{type:"object[]",defaultValue:[],byValue:true},delegate:{type:"object",group:"Data",defaultValue:{name:"sap/ui/mdc/ValueHelpDelegate"}},filterValue:{type:"string",defaultValue:""},validateInput:{type:"boolean",defaultValue:true},_config:{type:"object",defaultValue:{},visibility:"hidden"},_valid:{type:"boolean",group:"Appearance",defaultValue:true,visibility:"hidden"}},aggregations:{dialog:{type:"sap.ui.mdc.valuehelp.IDialogContainer",multiple:false},typeahead:{type:"sap.ui.mdc.valuehelp.ITypeaheadContainer",multiple:false}},events:{select:{parameters:{conditions:{type:"object[]"},add:{type:"boolean"},close:{type:"boolean"}}},disconnect:{},closed:{},open:{parameters:{container:{type:"sap.ui.mdc.valuehelp.base.Container"}}},opened:{parameters:{container:{type:"sap.ui.mdc.valuehelp.base.Container"}}},navigated:{parameters:{leaveFocus:{type:"boolean"},condition:{type:"object"},itemId:{type:"string"}}},switchToValueHelp:{}},defaultProperty:"filterValue"}});f.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver=new d(T.bind(this));this._oObserver.observe(this,{aggregations:["typeahead","dialog"]});this.setBindingContext(null);this._oConditions={}};f.prototype.exit=function(){if(this._oManagedObjectModel){this._oManagedObjectModel.destroy();delete this._oManagedObjectModel}};f.prototype.invalidate=function(e){return};f.prototype.connect=function(e,t){if(this._oControl&&this._oControl!==e){this.close();this.setFilterValue("");this.setConditions([]);var i=this.getTypeahead();var n=this.getDialog();if(i){i.onConnectionChange()}if(n){n.onConnectionChange()}this.fireDisconnect()}this._oControl=e;this.setProperty("_config",t,true);I.call(this);return this};f.prototype.getControl=function(){return this._oControl};f.prototype.getDomRef=function(){var e=this.getTypeahead();var t=this.getDialog();if(e&&(e.isOpen()||e.isOpening())){return e.getDomRef()}else if(t&&(t.isOpen()||t.isOpening())){return t.getDomRef()}};f.prototype.getAriaAttributes=function(e){var t=this.getTypeahead();var i=this.getDialog();if(!i&&t&&t.getUseAsValueHelp()){i=t}var n=t&&t.isOpen();var o=i&&i.isOpen();var a=t&&t.getAriaAttributes(e);var r=i&&i.getAriaAttributes(e);var s;var l;var p;var u;if(n){s=a.contentId}else if(o){s=r.contentId}l=t&&a.ariaHasPopup||i&&r.ariaHasPopup;p=t&&a.role||i&&r.role;u=t&&a.roleDescription||i&&r.roleDescription;return{contentId:s,ariaHasPopup:l,role:p,roleDescription:u,valueHelpEnabled:this.valueHelpEnabled()}};f.prototype._retrieveDelegateContent=function(e,t){var i;if(!t){var n=e.getSelectedContent();t=n&&n.getId()}i=this._retrievePromise("delegateContent");var o=this.isOpen();if(!i||i&&o||i&&i.aggregation!==e.sParentAggregationName){var a=function(){return this._getControlDelegatePromise().then(function(i){return i.retrieveContent(this.getPayload(),e,t)}.bind(this))}.bind(this);var r=i&&i.isPending();i=this._addPromise("delegateContent",r?i.getInternalPromise().then(a):a);i.aggregation=e.sParentAggregationName}return i.getInternalPromise()};f.prototype._getControlDelegatePromise=function(e){return this._retrievePromise("delegate",this.initControlDelegate.bind(this))};f.prototype.open=function(e){var t=e?this.getTypeahead():V.call(this);var i=e?this.getDialog():this.getTypeahead();if(i&&t!==i&&(i.isOpen()||i.isOpening())){i.close()}if(t&&!t.isOpen()&&!t.isOpening()){t.open(this._retrieveDelegateContent(t),e);this.fireOpen({container:t})}};function v(e){var t=e.getSource();this._retrieveDelegateContent(t,e.getParameter("contentId"))}function y(e){this.fireSwitchToValueHelp()}f.prototype.close=function(){var e=this.getTypeahead();var t=this.getDialog();if(e&&e.isOpen()){e.close()}if(t&&t.isOpen()){t.close()}};f.prototype.toggleOpen=function(e){var t=this.getTypeahead();var i=this.getDialog();if(!e&&!i&&t&&t.getUseAsValueHelp()){i=t}var n=t&&t.isOpen();var o=i&&i.isOpen();if(e&&n||!e&&o){this.close()}else if(e&&t||!e&&i){this.open(e)}};f.prototype.isOpen=function(){var e=this.getTypeahead();var t=this.getDialog();return!!(e&&(e.isOpen()||e.isOpening())||t&&(t.isOpen()||t.isOpening()))};f.prototype.skipOpening=function(){var e=this.getTypeahead();var t=this.getDialog();if(e&&e.isOpening()){e.close()}if(t&&t.isOpening()){t.close()}};f.prototype.initBeforeOpen=function(e){};f.prototype.isTypeaheadSupported=function(){var e=this.getTypeahead();if(e){return this._retrieveDelegateContent(e).then(function(){return!!e&&e.isTypeaheadSupported()})}else{return Promise.resolve(false)}};f.prototype.shouldOpenOnFocus=function(){var e=V.call(this,true);return e&&e.shouldOpenOnFocus()};f.prototype.shouldOpenOnClick=function(){var e=V.call(this,true);return e&&e.shouldOpenOnClick()};f.prototype.isFocusInHelp=function(){var e=V.call(this);return e&&e.isFocusInHelp()};f.prototype.removeFocus=function(){var e=this.getTypeahead();if(e){e.removeFocus()}};f.prototype.navigate=function(e){var t=this.getTypeahead();if(t){var i=function(){if(t.shouldOpenOnNavigate()&&!t.isOpening()&&!t.isOpen()){return t.open(true).then(function(){t.navigate(e)})}return t.navigate(e)};var n=this._retrievePromise("navigate");var o=n&&!n.isSettled()&&n.getInternalPromise();this._addPromise("navigate",o?o.then(i):this._retrieveDelegateContent(t).then(i))}};f.prototype.isNavigationEnabled=function(e){var t=this.getTypeahead();if(t){var i=this.getDialog();var n=t.isOpen();if(n||!i){return t.isNavigationEnabled(e)}}return false};f.prototype.getItemForValue=function(e){var t=this.getTypeahead();if(t){return this._retrieveDelegateContent(t).then(function(){e.caseSensitive=e.hasOwnProperty("caseSensitive")?e.caseSensitive:false;var i=t.getItemForValue(e);return i})}else{return Promise.reject("No Typeahead")}};f.prototype.isValidationSupported=function(){var e=this.getTypeahead();return e&&e.isValidationSupported()};f.prototype.onControlChange=function(){if(this.bIsDestroyed){return}m.call(this,h.ControlChange);I.call(this)};f.prototype.getIcon=function(){var e=this.getTypeahead();var t=this.getDialog();if(t){return t.getValueHelpIcon()}else if(e){return e.getValueHelpIcon()}};f.prototype.getMaxConditions=function(){var e=this.getProperty("_config");return e&&e.maxConditions||-1};f.prototype.getDisplay=function(){};f.prototype.getDataType=function(){};f.prototype.valueHelpEnabled=function(){var e=this.getTypeahead();var t=this.getDialog();if(t){return true}else{return!!e&&e.getUseAsValueHelp()}};function m(e,t){var i=this.bDelegateInitialized&&this.getControlDelegate();if(i){i.onConditionPropagation(this._oPayload,this,e,t||this.getProperty("_config"))}}function C(e){var t=e.getParameter("condition");this.fireNavigated({condition:t,itemId:e.getParameter("itemId"),leaveFocus:e.getParameter("leaveFocus")})}function O(e){var t=e.getParameter("type");var i=e.getParameter("conditions")||[];var o;var r=this.getMaxConditions()===1;if(r){o=t===a.Remove?[]:i.slice(0,1)}if(t===a.Set){o=[].concat(r?i.slice(0,1):i)}if(t===a.Add){if(r){o=i.slice(0,1)}else{o=this.getConditions();for(var s=0;s<i.length;s++){o.push(i[s])}}}if(t===a.Remove){if(r){o=[]}else{o=this.getConditions();for(var l=0;l<i.length;l++){var p=n.indexOfCondition(i[l],o);if(p>=0){o.splice(p,1)}}}}if(o){this.setProperty("conditions",o,true)}}function b(e){if(this.getProperty("_valid")){var t=this.getMaxConditions()===1;var o=e.getParameter("close");var a=typeof o!=="undefined"?o:t;var r=this.getConditions();var s=!t&&!e.getSource().isMultiSelect();if(a){this.close()}r=i._removeEmptyConditions(r);r=i._removeInitialFlags(r);n.updateConditionsValues(r);this.fireSelect({conditions:r,add:s,close:a});m.call(this,h.Select)}}function _(e){this.close()}function P(e){this.fireOpened({container:e.getSource()})}function D(e){this._removePromise("delegateContent");this._removePromise("navigate");this.fireClosed()}function T(e){if(["typeahead","dialog"].indexOf(e.name)!==-1){var t=e.child;var i=e.mutation==="insert";var n=i?t.attachEvent.bind(t):t.detachEvent.bind(t);n("select",O,this);n("requestDelegateContent",v,this);n("confirm",b,this);n("cancel",_,this);n("opened",P,this);n("closed",D,this);if(t.attachRequestSwitchToDialog){n("requestSwitchToDialog",y,this)}if(t.attachNavigated){n("navigated",C,this)}if(i){if(!this._oManagedObjectModel){this._oManagedObjectModel=new u(this)}t.setModel(this._oManagedObjectModel,"$valueHelp")}}}function I(){var e=this._oControl?this._oControl.getBindingContext():null;this.setBindingContext(e)}function V(e){var t=this.getTypeahead();var i=!!t&&t.getUseAsValueHelp();var n=this.getDialog();if(e){return(i||n)&&t||n}else{return n||i&&t}}f.prototype._getFieldGroupIds=function(){var t=this.getControl();if(t){return t.getFieldGroupIds()}else{return e.prototype._getFieldGroupIds.apply(this,arguments)}};t.call(f.prototype);return f});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/ValueHelpDelegate", ["sap/ui/mdc/BaseDelegate","sap/ui/model/FilterType","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterConverter"],function(e,t,n,i,r){"use strict";var o=Object.assign({},e);o.retrieveContent=function(e,t,n){return Promise.resolve()};o.isSearchSupported=function(e,t,n){return false};o.showTypeahead=function(e,t){if(!t||t.isA("sap.ui.mdc.valuehelp.base.FilterableListContent")&&!t.getFilterValue()){return false}else if(t.isA("sap.ui.mdc.valuehelp.base.ListContent")){var n=t.getListBinding();var i=n&&n.getAllCurrentContexts().length;return i>0}return true};o.updateBindingInfo=function(e,t,o){o.parameters={};o.filters=[];var a=t.getFilterFields();var s=t._getPriorityFilterValue();var u=t._getPriorityFilterBar();var l=u?u.getInternalConditions():t._oInitialFilterConditions||{};if(!u&&s&&a&&a!=="$search"){var d=i.createCondition("Contains",[s],undefined,undefined,n.NotValidated);l[a]=[d]}var f=l&&t._getTypesForConditions(l);var c=l&&r.createFilters(l,f,undefined,t.getCaseSensitive());if(c){o.filters=[c]}};o.updateBinding=function(e,n,i,r){n.filter(i.filters,t.Application);if(n.isSuspended()){n.resume()}};o.adjustSearch=function(e,t,n){return n};o.executeFilter=function(e,t,n){return Promise.resolve(t)};o.checkListBindingPending=function(e,t,n){if(!t||t.isSuspended()){return false}return Promise.resolve(t.getContexts(0,n)).then(function(e){return e.length===0})};o.onConditionPropagation=function(e,t,n,i){};o.getInitialFilterConditions=function(e,t,n){var i={};return i};o.isFilterableListItemSelected=function(e,t,i,r){var o=t._getListBindingInfo().model;var a=i&&i.getBindingContext(o);var s=t._getItemFromContext(a);for(var u=0;u<r.length;u++){var l=r[u];if(l.validated===n.Validated&&s.key===l.values[0]){return true}}return false};o.modifySelectionBehaviour=function(e,t,n){return n};o.createConditionPayload=function(e,t,n,i){return undefined};o.getTypesForConditions=function(e,t,n){var i={};var r=t&&t._getListBindingInfo();if(r&&r.template){r.template.mAggregations.cells.forEach(function(e){Object.values(e.mBindingInfos).forEach(function(e){e.parts.forEach(function(e){i[e.path]={type:e.type||null}})})},{})}return i};o.getFilterConditions=function(e,t,n){if(this.getInitialFilterConditions){return this.getInitialFilterConditions(e,t,n&&n.control||t&&t.getControl())}return{}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/actiontoolbar/ActionToolbarAction", ["sap/ui/core/Control","sap/ui/mdc/actiontoolbar/ActionToolbarActionRenderer","sap/ui/mdc/enum/ActionToolbarActionAlignment"],function(t,e,o){"use strict";var r=t.extend("sap.ui.mdc.actiontoolbar.ActionToolbarAction",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/actiontoolbar/ActionToolbarAction.designtime",interfaces:["sap.m.IOverflowToolbarContent"],properties:{layoutInformation:{type:"object",defaultValue:{aggregationName:"end",alignment:o.Begin}}},defaultAggregation:"action",aggregations:{action:{type:"sap.ui.core.Control",multiple:false}}},renderer:e});r.prototype.getDomRef=function(){return this.getAction()&&this.getAction().getDomRef()};r.prototype.getLayoutData=function(){var e=t.prototype.getLayoutData.apply(this);return e?e:this.getAction()&&this.getAction().getLayoutData()};r.prototype.getOverflowToolbarConfig=function(){var t=this.getAction()&&this.getAction().getOverflowToolbarConfig?this.getAction().getOverflowToolbarConfig():{canOverflow:true};t.onBeforeEnterOverflow=this._getOnBeforeEnterOverflow(t);t.onAfterExitOverflow=this._getOnAfterExitOverflow(t);return t};r.prototype._getOnBeforeEnterOverflow=function(t){var e=t.onBeforeEnterOverflow;return function(t){if(e){e(t.getAction())}if(t.getParent()&&t.getParent()._updateSeparators){t.getParent()._updateSeparators()}}};r.prototype._getOnAfterExitOverflow=function(t){var e=t.onAfterExitOverflow;return function(t){if(e){e(t.getAction())}if(t.getParent()&&t.getParent()._updateSeparators){t.getParent()._updateSeparators()}}};r.prototype.getLabel=function(){var t=this.getAction();return t&&t.getText?t.getText():this.getId()};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/actiontoolbar/ActionToolbarActionRenderer", [],function(){"use strict";var r={apiVersion:2};r.render=function(r,e){var a=e.getAction();if(a){if(e.hasStyleClass("sapMBarChild")){a.addStyleClass("sapMBarChild")}r.renderControl(a)}};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/ChartImplementationContainer", ["sap/ui/core/Control","./ChartImplementationContainerRenderer","sap/ui/core/Core","sap/ui/thirdparty/jquery"],function(t,e,i,jQuery){"use strict";var a=t.extend("sap.ui.mdc.chart.ChartImplementationContainer",{metadata:{library:"sap.ui.mdc",interfaces:[],properties:{showNoDataStruct:{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false},noDataContent:{type:"sap.ui.core.Control",multiple:false}},associations:{chartNoDataContent:{type:"sap.ui.core.Control",multiple:false}},events:{}},renderer:e});a.prototype.init=function(){this._updateVisibilities()};a.prototype.setShowNoDataStruct=function(t){this.setProperty("showNoDataStruct",t);this._updateVisibilities();return this};a.prototype.setContent=function(t){this.setAggregation("content",t);this._updateVisibilities();return this};a.prototype.setNoDataContent=function(t){this.setAggregation("noDataContent",t);this._updateVisibilities();return this};a.prototype.setChartNoDataContent=function(t){this.setAssociation("chartNoDataContent",t);this._updateVisibilities();return this};a.prototype.showOverlay=function(t){var e=this.$(),i=e.find(".sapUiMdcChartOverlay");if(t&&i.length===0){i=jQuery("<div>").addClass("sapUiOverlay sapUiMdcChartOverlay").css("z-index","1");e.append(i)}else if(!t){i.remove()}};a.prototype._getChartNoDataForRenderer=function(){return i.byId(this.getChartNoDataContent())};a.prototype._updateVisibilities=function(){var t=this.getShowNoDataStruct();if(this.getContent()){this.getContent().setVisible(!t)}if(this.getChartNoDataContent()){if(this.getNoDataContent()){this.getNoDataContent().setVisible(false)}i.byId(this.getChartNoDataContent()).setVisible(t)}else if(this.getNoDataContent()){this.getNoDataContent().setVisible(t)}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/ChartImplementationContainerRenderer", [],function(){"use strict";var e={apiVersion:2};e.CSS_CLASS="sapUiMDCChart";e.render=function(e,t){e.openStart("div",t);e.style("height","100%");e.style("width","100%");e.style("min-height","200px");e.openEnd();e.renderControl(t.getContent());e.renderControl(t.getNoDataContent());e.renderControl(t._getChartNoDataForRenderer());e.close("div")};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/ChartSelectionDetails", ["sap/ui/core/Core","sap/ui/mdc/library","sap/m/SelectionDetails","sap/m/SelectionDetailsItem","sap/m/SelectionDetailsItemLine","sap/m/SelectionDetailsRenderer","./SelectionDetailsActions"],function(e,t,i,a,n,r,s){"use strict";var o=i.extend("sap.ui.mdc.chart.ChartSelectionDetails",{metadata:{library:"sap.ui.mdc",interfaces:[],defaultAggregation:"",properties:{},aggregations:{},associations:{},events:{}},renderer:r});o.prototype.init=function(){i.prototype.init.apply(this,arguments);this._registerTemplate();this._attachEvents()};o.prototype._registerTemplate=function(){this.registerSelectionDetailsItemFactory([],function(e,t,i,r){var s=[];for(var o=0;o<e.length;o++){s.push(new n({label:e[o].label,value:this._formatValue(e[o].value),unit:e[o].unit}))}return new a({enableNav:this._hasNavigationTargets(t),lines:s}).setBindingContext(i)}.bind(this))};o.prototype._formatValue=function(e){if(e){return e instanceof Object?e:e.toString()}else{return e}};o.prototype._hasNavigationTargets=function(e){return false};o.prototype._attachEvents=function(){this.attachActionPress(function(e){var t=this.getParent().getParent();var i=[];e.getParameter("items").forEach(function(e){i.push(e.getBindingContext())});t.fireSelectionDetailsActionPressed({id:e.getParameter("id"),action:e.getParameter("action"),itemContexts:i,level:e.getParameter("level")})})};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/ChartSettings", [],function(){"use strict";var n={showPanel:function(e,t,r,i){return n["showUI"+t](e,r)},showUIChart:function(n,e){return n.getEngine().uimanager.show(n,"Item")},showUISort:function(n,e){return n.getEngine().uimanager.show(n,"Sort")},showUIFilter:function(n,e){return n.getEngine().uimanager.show(n,"Filter")}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/ChartToolbar", ["sap/ui/core/Core","sap/ui/mdc/ActionToolbar","sap/m/OverflowToolbarRenderer","sap/m/OverflowToolbarButton","sap/m/OverflowToolbarToggleButton","sap/m/Title","sap/ui/mdc/library","sap/ui/mdc/chart/ChartTypeButton","./ChartSelectionDetails","sap/m/ToolbarSeparator","sap/m/OverflowToolbarLayoutData","sap/ui/core/library","sap/ui/Device","sap/ui/core/ShortcutHintsMixin"],function(t,e,o,n,i,a,s,r,l,h,c,d,g,u){"use strict";var p=d.aria.HasPopup;var f=e.extend("sap.ui.mdc.chart.ChartToolbar",{metadata:{library:"sap.ui.mdc",interfaces:[],defaultAggregation:"",properties:{},aggregations:{},associations:{},events:{}},renderer:o});var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");f.prototype.init=function(){e.prototype.init.apply(this,arguments)};f.prototype.createToolbarContent=function(t){this._chartInternalButtonsToEnable=[];this._oTitle=new a(t.getId()+"-title",{text:t.getHeader(),level:t.getHeaderLevel(),width:t.getHeaderVisible()?undefined:"0px"});this.addBegin(this._oTitle);if(t.getAggregation("variant")){this.addVariantManagement(t.getAggregation("variant"))}if(t.getShowSelectionDetails()){this._oChartSelectionDetails=new l(t.getId()+"-selectionDetails",{});this._oChartSelectionDetails.attachBeforeOpen(function(e){this._updateSelectionDetailsActions(t)}.bind(this));this.addEnd(this._oChartSelectionDetails)}var e=t.getP13nMode()||[];if(e.indexOf("Item")>-1&&(!t.getIgnoreToolbarActions().length||t.getIgnoreToolbarActions().indexOf(s.ChartToolbarActionType.DrillDownUp)<0)){this._oDrillDownBtn=new n(t.getId()+"-drillDown",{icon:"sap-icon://drill-down",tooltip:T.getText("chart.CHART_DRILLDOWN_TITLE"),text:T.getText("chart.CHART_DRILLDOWN_TITLE"),enabled:false,ariaHasPopup:p.ListBox,layoutData:new c({closeOverflowOnInteraction:false}),press:function(e){t._showDrillDown(this._oDrillDownBtn)}.bind(this)});this.addEnd(this._oDrillDownBtn);this._chartInternalButtonsToEnable.push(this._oDrillDownBtn)}if(!t.getIgnoreToolbarActions().length||t.getIgnoreToolbarActions().indexOf(s.ChartToolbarActionType.Legend)<0){this._oLegendBtn=new i(t.getId()+"btnLegend",{type:"Transparent",text:T.getText("chart.LEGENDBTN_TEXT"),tooltip:T.getText("chart.LEGENDBTN_TOOLTIP"),icon:"sap-icon://legend",pressed:"{$mdcChart>/legendVisible}",enabled:false});this.addEnd(this._oLegendBtn);this._chartInternalButtonsToEnable.push(this._oLegendBtn)}if(!t.getIgnoreToolbarActions().length||t.getIgnoreToolbarActions().indexOf(s.ChartToolbarActionType.ZoomInOut)){this.oZoomInButton=new n(t.getId()+"btnZoomIn",{icon:"sap-icon://zoom-in",tooltip:T.getText("chart.TOOLBAR_ZOOM_IN"),text:T.getText("chart.TOOLBAR_ZOOM_IN"),enabled:false,press:function e(o){t.zoomIn();this.toggleZoomButtons(t)}.bind(this)});this.oZoomOutButton=new n(t.getId()+"btnZoomOut",{icon:"sap-icon://zoom-out",tooltip:T.getText("chart.TOOLBAR_ZOOM_OUT"),text:T.getText("chart.TOOLBAR_ZOOM_OUT"),enabled:false,press:function e(o){t.zoomOut();this.toggleZoomButtons(t)}.bind(this)});this.addEnd(this.oZoomInButton);this.addEnd(this.oZoomOutButton)}if(e.indexOf("Sort")>-1||e.indexOf("Item")>-1||e.indexOf("Filter")>-1){this._oSettingsBtn=new n(t.getId()+"-chart_settings",{icon:"sap-icon://action-settings",tooltip:T.getText("chart.SETTINGS"),text:T.getText("chart.SETTINGS"),enabled:false,press:function(e){var o=t.getP13nMode();var n=o.indexOf("Type");if(n>-1){o.splice(n,1)}if(t.isPropertyHelperFinal()){t.getEngine().uimanager.show(t,o)}else{t.finalizePropertyHelper().then(function(){t.getEngine().uimanager.show(t,o)})}}});u.addConfig(this._oSettingsBtn,{addAccessibilityLabel:true,messageBundleKey:g.os.macintosh?"mdc.PERSONALIZATION_SHORTCUT_MAC":"mdc.PERSONALIZATION_SHORTCUT"},this);this.addEnd(this._oSettingsBtn);this._chartInternalButtonsToEnable.push(this._oSettingsBtn)}if(t._getTypeBtnActive()){this._oChartTypeBtn=new r(t,{ariaHasPopup:p.ListBox,layoutData:new c({closeOverflowOnInteraction:false})});this._oChartTypeBtn.setEnabled(false);this.addEnd(this._oChartTypeBtn);this._chartInternalButtonsToEnable.push(this._oChartTypeBtn)}};f.prototype.addVariantManagement=function(t){if(t){if(this._oVariantManagement){this.removeBetween(this._oVariantManagement)}this._oVariantManagement=t;this.addBetween(this._oVariantManagement)}};f.prototype.toggleZoomButtons=function(t){var e=this._getZoomEnablement(t);if(e.enabled){this.oZoomInButton.setEnabled(e.enabledZoomIn);this.oZoomOutButton.setEnabled(e.enabledZoomOut)}else{this.oZoomInButton.setEnabled(false);this.oZoomOutButton.setEnabled(false)}};f.prototype.updateToolbar=function(t){this.toggleZoomButtons(t);if(!this._toolbarInitialUpdated){this.setEnabled(true);this._chartInternalButtonsToEnable.forEach(function(t){t.setEnabled(true)});this._toolbarInitialUpdated=true}var e=t.getSelectionHandler();if(e&&t.getShowSelectionDetails()){this._oChartSelectionDetails.attachSelectionHandler(e.eventId,e.listener)}};f.prototype._getVariantReference=function(){return this._oVariantManagement};f.prototype._getZoomEnablement=function(t){var e;try{e=t.getZoomState()}catch(t){e={enabled:false}}if(e&&e.hasOwnProperty("currentZoomLevel")&&e.currentZoomLevel!=null&&e.enabled){var o={enabled:true};o.enabledZoomOut=e.currentZoomLevel>0;o.enabledZoomIn=e.currentZoomLevel<1;return o}else{return{enabled:false}}};f.prototype._updateSelectionDetailsActions=function(t){if(!t.getShowSelectionDetails()){return}var e=t.getSelectionDetailsActions(),o;if(e){var n=this._oChartSelectionDetails.getItems();n.forEach(function(t){var n=e.getDetailsItemActions();n.forEach(function(e){o=e.clone();t.addAction(o)})});var i=e.getDetailsActions();this._oChartSelectionDetails.removeAllActions();i.forEach(function(t){o=t.clone();this._oChartSelectionDetails.addAction(o)}.bind(this));var a=e.getActionGroups();this._oChartSelectionDetails.removeAllActionGroups();a.forEach(function(t){o=t.clone();this._oChartSelectionDetails.addActionGroup(o)}.bind(this))}};f.prototype._setHeaderLevel=function(t){this._oTitle.setLevel(t)};f.prototype.setHeaderVisible=function(t){if(this._oTitle){this._oTitle.setWidth(t?undefined:"0px")}};f.prototype.getSettingsButton=function(){return this._oSettingsBtn};return f});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/ChartTypeButton", ["sap/m/OverflowToolbarButton","sap/m/ButtonRenderer","sap/ui/base/ManagedObjectObserver","sap/ui/core/library","sap/m/library","sap/m/IllustratedMessage","sap/m/library","sap/base/util/merge","sap/ui/model/Filter"],function(e,t,a,i,r,o,s,n,c){"use strict";var l=r.PlacementType;var p=i.aria.HasPopup;var h,d,u,b,m,f,_;var v=e.extend("sap.ui.mdc.chart.ChartTypeButton",{metadata:{library:"sap.ui.mdc"},constructor:function(t,i){if(!t){e.apply(this);return}this.oMDCChartModel=t.getManagedObjectModel();i=n(i,{type:"Transparent",press:function(e){this.displayChartTypes(e.getSource(),t)}.bind(this),id:t.getId()+"-btnChartType",icon:"{$chart>/getChartTypeInfo/icon}",tooltip:"{$chart>/getChartTypeInfo/text}",text:"{$chart>/getChartTypeInfo/text}",ariaHasPopup:p.ListBox});this.oMDCChart=t;e.apply(this,[i]);this.setModel(this.oMDCChartModel,"$chart");this._oObserver=new a(function(){this.oMDCChartModel.checkUpdate(true)}.bind(this));this._oObserver.observe(this.oMDCChart,{aggregations:["items"],properties:["chartType"]})},renderer:t});v.mMatchingIcon={bar:"sap-icon://horizontal-bar-chart",bullet:"sap-icon://horizontal-bullet-chart",bubble:"sap-icon://bubble-chart",column:"sap-icon://vertical-bar-chart",combination:"sap-icon://business-objects-experience",dual_bar:"sap-icon://horizontal-bar-chart",dual_column:"sap-icon://vertical-bar-chart",dual_combination:"sap-icon://business-objects-experience",dual_horizontal_combination:"sap-icon://business-objects-experience",dual_horizontal_stacked_combination:"sap-icon://business-objects-experience",dual_line:"sap-icon://line-chart",dual_stacked_bar:"sap-icon://full-stacked-chart",dual_stacked_column:"sap-icon://vertical-stacked-chart",dual_stacked_combination:"sap-icon://business-objects-experience",donut:"sap-icon://donut-chart",heatmap:"sap-icon://heatmap-chart",horizontal_stacked_combination:"sap-icon://business-objects-experience",line:"sap-icon://line-chart",pie:"sap-icon://pie-chart",scatter:"sap-icon://scatter-chart",stacked_bar:"sap-icon://full-stacked-chart",stacked_column:"sap-icon://vertical-stacked-chart",stacked_combination:"sap-icon://business-objects-experience",treemap:"sap-icon://Chart-Tree-Map",vertical_bullet:"sap-icon://vertical-bullet-chart","100_dual_stacked_bar":"sap-icon://full-stacked-chart","100_dual_stacked_column":"sap-icon://vertical-stacked-chart","100_stacked_bar":"sap-icon://full-stacked-chart","100_stacked_column":"sap-icon://full-stacked-column-chart",waterfall:"sap-icon://vertical-waterfall-chart",horizontal_waterfall:"sap-icon://horizontal-waterfall-chart"};v.prototype.displayChartTypes=function(e,t){if(!t||!e){return}if(!this.oReadyPromise){this.oReadyPromise=new Promise(function(e){if(h){e(true)}else{sap.ui.require(["sap/m/ResponsivePopover","sap/m/List","sap/m/SearchField","sap/m/StandardListItem","sap/ui/core/InvisibleText","sap/ui/Device"],function(t,a,i,r,o,s){h=t;d=a;u=i;b=r;m=o;f=s;if(!_){sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc",true).then(function(t){_=t;e(true)})}else{e(true)}})}})}this.oReadyPromise.then(function(){if(!this.oPopover){this.oPopover=this._createPopover(t);this.oPopover.attachAfterClose(function(){this.oPopover.destroy();delete this.oPopover}.bind(this));return this.oPopover.openBy(e)}else if(this.oPopover){this.oPopover.close()}}.bind(this))};v.prototype._createPopover=function(e){var t=new b({title:"{$chart>text}",icon:"{$chart>icon}",selected:"{$chart>selected}"});var a=new d({mode:"SingleSelectMaster",noData:new o({title:_.getText("chart.NO_CHART_TYPES_AVAILABLE"),description:_.getText("chart.NO_CHART_TYPES_AVAILABLE_ACTION"),illustrationType:s.IllustratedMessageType.AddDimensions}),items:{path:"$chart>/getAvailableChartTypes",template:t},selectionChange:function(t){if(t&&t.mParameters&&t.mParameters.listItem){var a=t.mParameters.listItem.getBinding("title");if(a){var i=a.getContext();if(i){var o=i.getObject();if(o&&o.key){sap.ui.require(["sap/ui/mdc/flexibility/Chart.flexibility"],function(t){e.getEngine().createChanges({control:e,key:"Type",state:{properties:{chartType:o.key}}})})}}}}r.close()}});var i=new u({placeholder:_.getText("chart.CHART_TYPE_SEARCH"),liveChange:function(t){if(e){this._triggerSearchInPopover(t,a)}}.bind(this)});var r=new h({id:e.getId()+"-btnChartTypePopover",placement:l.VerticalPreferredBottom,subHeader:i,contentWidth:"25rem"});r.setModel(this.oMDCChartModel,"$chart");if(f.system.desktop){var n=new m({text:_.getText("chart.CHART_TYPELIST_TEXT")});r.setShowHeader(false);r.addContent(n);r.addAriaLabelledBy(n)}else{r.setTitle(_.getText("chart.CHART_TYPELIST_TEXT"))}r.addContent(a);if(a.getItems().length<7){i.setVisible(false)}return r};v.prototype._triggerSearchInPopover=function(e,t){if(!e||!t){return}var a=e.getParameter("newValue");var i=[];if(a){i=new c("text","Contains",a)}t.getBinding("items").filter(i)};v.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this.oPopover){this.oPopover.destroy();this.oPopover=null}};return v});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/DrillBreadcrumbs", ["sap/m/Breadcrumbs","sap/m/Link"],function(e,t){"use strict";var i=e.extend("sap.ui.mdc.chart.DrillBreadcrumbs",{renderer:{apiVersion:2}});i.prototype.init=function(){e.prototype.init.apply(this,arguments);this.addStyleClass("sapUiMDCChartBreadcrumbs")};i.prototype.updateDrillBreadcrumbs=function(e,t){var i=[];if(t){t.reverse();if(t.length>0){t.forEach(function(t,r,s){this.setVisible(true);var n=t.getLabel();var a=t.getName();if(r==0){this.setCurrentLocationText(n)}else{var o={dimensionKey:a,dimensionText:n};var l=this._createCrumb(e,o);i.push(l)}},this)}else{this.setVisible(false)}}var r=this.getLinks();i.reverse();var s=false;if(r.length!==i.length){s=true}else{for(var n=0;n<i.length;n++){if(i[n].getText()!=r[n].getText()){s=true;break}}}if(s){if(this.getLinks()){this.destroyLinks()}for(var n=0;n<i.length;n++){this.addLink(i[n])}}return this};i.prototype._createCrumb=function(e,i){var r=new t({text:i.dimensionText,press:function t(i){var r=this.indexOfLink(i.getSource());var s=e.getControlDelegate().getDrillableItems(e),n=s.slice(r+1);var a=n.map(function(e){return{name:e.getName(),visible:false}});e.getEngine().createChanges({control:e,key:"Item",state:a})}.bind(this)});r.data("key",i.dimensionKey);return r};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/DrillStackHandler", ["sap/ui/core/Core","sap/m/ResponsivePopover","sap/m/List","sap/m/Bar","sap/m/StandardListItem","sap/ui/core/InvisibleText","sap/m/library","sap/ui/Device","sap/base/Log","sap/m/IllustratedMessage","sap/m/SearchField","sap/ui/model/json/JSONModel","sap/ui/model/Filter"],function(e,t,n,r,a,i,o,s,l,c,d,u,m){"use strict";var p=o.PlacementType;var f=o.ListMode;function g(e){var t=e.getControlDelegate().getDrillStack(e);var n=[];t.forEach(function(e){e.dimension.forEach(function(e){if(e!=null&&e!=""&&n.indexOf(e)==-1){n.push(e)}})});return n}var v=function(){};v.createDrillDownPopover=function(r){var l;var u=e.getLibraryResourceBundle("sap.ui.mdc");var g=new d({placeholder:u.getText("chart.CHART_DRILLDOWN_SEARCH"),liveChange:function(e){if(!l){return}var t=e.getParameter("newValue");var n=[];if(t){n=new m("text","Contains",t)}l.getBinding("items").filter(n)}});var v=new t({id:r.getId()+"-drilldownPopover",contentWidth:"25rem",contentHeight:"20rem",placement:p.VerticalPreferredBottom,subHeader:g,afterClose:function(){v.destroy()}});var D=new a({title:"{$ChartDrilldown>text}"});l=new n({noData:new c({enableVerticalResponsiveness:true,title:u.getText("chart.NO_DRILLABLE_DIMENSION"),description:u.getText("chart.NO_DRILLABLE_DIMENSION_DESC"),illustrationType:o.IllustratedMessageType.NoDimensionsSet}),mode:f.SingleSelectMaster,items:{path:"$ChartDrilldown>/items",template:D},selectionChange:function(e){var t=e.getParameter("listItem");if(t){var n=t.getBindingContext("$ChartDrilldown");var a=n.getObject().id;r.getEngine().createChanges({control:r,key:"Item",state:[{name:a,position:r.getItems().length}]})}v.close()}});if(s.system.desktop){var h=new i({text:u.getText("chart.CHART_DRILLDOWN_TITLE")});v.setShowHeader(false);v.addContent(h);v.addAriaLabelledBy(h)}else{v.setTitle(u.getText("chart.CHART_DRILLDOWN_TITLE"))}v.addContent(l);r._oDrillDownPopover=v;return v};v.showDrillDownPopover=function(e,t){var n=e.getControlDelegate().getSortedDimensions(e);return n.then(function(n){var r=e._oDrillDownPopover;var a;a=g(e);n=n.filter(function(e){return a.indexOf(e.name)<0});var i={items:[]};n.forEach(function(e){i.items.push({text:e.label,id:e.name})});r.setModel(new u(i),"$ChartDrilldown");if(i.items.length<7){r.getSubHeader().setVisible(false)}return new Promise(function(e,n){r.attachEventOnce("afterOpen",function t(n){e(r)});r.openBy(t)})})};return v});
/*
 * !OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/Item", ["sap/ui/core/Element","sap/base/Log"],function(e,t){"use strict";var a=e.extend("sap.ui.mdc.chart.Item",{metadata:{abstract:false,library:"sap.ui.mdc",properties:{name:{type:"string"},label:{type:"string"},type:{type:"string",defaultValue:""},role:{type:"string"}}}});return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/PropertyHelper", ["../util/PropertyHelper","sap/ui/mdc/library"],function(e,t){"use strict";var r=e.extend("sap.ui.mdc.chart.PropertyHelper",{constructor:function(t,r){e.call(this,t,r,{filterable:true,sortable:true,propertyInfos:true,groupable:{type:"boolean"},aggregatable:{type:"boolean"},propertyPath:{type:"string"},aggregationMethod:{type:"string"},role:{type:"string"},datapoint:{type:"object"},criticality:{type:"object"},textProperty:{type:"string"},availableRoles:{type:"object"},kind:{type:"string"}})}});r.prototype.prepareProperty=function(t){if(t.groupable){t.availableRoles=this._getLayoutOptionsForType("groupable");t.kind="Groupable"}else if(t.aggregatable){t.availableRoles=this._getLayoutOptionsForType("aggregatable");t.kind="Aggregatable"}if(!t.typeConfig&&t.dataType){var r=t.formatOptions?t.formatOptions:null;var a=t.constraints?t.constraints:{};t.typeConfig=this.getParent().getControlDelegate().getTypeUtil().getTypeConfig(t.dataType,r,a)}e.prototype.prepareProperty.apply(this,arguments);t.isAggregatable=function(){if(t){return t.isComplex()?false:t.aggregatable}}};r.prototype._getLayoutOptionsForType=function(e){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var a={groupable:[{key:t.ChartItemRoleType.category,text:r.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_CATEGORY")},{key:t.ChartItemRoleType.category2,text:r.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_CATEGORY2")},{key:t.ChartItemRoleType.series,text:r.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_SERIES")}],aggregatable:[{key:t.ChartItemRoleType.axis1,text:r.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS1")},{key:t.ChartItemRoleType.axis2,text:r.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS2")},{key:t.ChartItemRoleType.axis3,text:r.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS3")}]};return a[e]};r.prototype.getAllAggregatableProperties=function(){return this.getProperties().filter(function(e){return e.isAggregatable()})};return r});
/*
 * !OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/SelectionDetailsActions", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.chart.SelectionDetailsActions",{metadata:{library:"sap.ui.mdc",aggregations:{detailsItemActions:{type:"sap.ui.core.Item",multiple:true},detailsActions:{type:"sap.ui.core.Item",multiple:true},actionGroups:{type:"sap.ui.core.Item",multiple:true}}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/condition/Condition", ["sap/base/Log","sap/ui/mdc/enum/ConditionValidated"],function(n,i){"use strict";var e=function(n){return JSON.stringify(Object.assign({},n,{isEmpty:undefined}),function(n,i){return i===undefined?"[undefined]":i})};var t={createItemCondition:function(n,e,t,r,a){var o=i.NotValidated;var u=[n,e];if(e===null||e===undefined){u.pop()}else{o=i.Validated}return this.createCondition("EQ",u,t,r,o,a)},createCondition:function(n,i,e,t,r,a){var o={operator:n,values:i,isEmpty:null,validated:r};if(e){o.inParameters=e}if(t){o.outParameters=t}if(a){o.payload=a}return o},compareConditions:function(n,i){var t=e(n);var r=e(i);return t===r},_removeEmptyConditions:function(n){for(var i=n.length-1;i>-1;i--){if(n[i].isEmpty){n.splice(parseInt(i),1)}}return n},_removeInitialFlags:function(n){for(var i=n.length-1;i>-1;i--){if(n[i].isInitial){delete n[i].isInitial}}return n}};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/condition/ConditionConverter", ["sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/base/util/merge"],function(a,e,r,t,i){"use strict";var n={toString:function(e,t,n){var p=r.getOperator(e.operator);var l=t.typeInstance?t.typeInstance:t;var v=u(e.values,o(l,p),p,n);var s;var d;var c;if(e.inParameters){s=i({},e.inParameters)}if(e.outParameters){d=i({},e.outParameters)}if(e.payload){c=i({},e.payload)}var f=a.createCondition(e.operator,v,s,d,e.validated,c);return f},toType:function(t,n,u){var l=r.getOperator(t.operator);var v=n.typeInstance?n.typeInstance:n;var s=p(t.values,o(v,l),u);var d;var c;var f;if(t.inParameters){d=i({},t.inParameters)}if(t.outParameters){c=i({},t.outParameters)}if(t.payload){f=i({},t.payload)}var y=a.createCondition(t.operator,s,d,c,t.validated,f);if(y.validated!==e.Validated&&l.validateInput){l.checkValidated(y)}return y}};function o(a,e){if(e&&e.valueTypes[0]&&(e.valueTypes[0]!==t.ValueType.Self&&e.valueTypes[0]!==t.ValueType.Static)){return e._createLocalType(e.valueTypes[0],a)}return a}function u(a,e,r,i){var n=[];for(var o=0;o<a.length;o++){if(!r||r.valueTypes[o]&&r.valueTypes[o]!==t.ValueType.Static){var u=a[o];n.push(i.externalizeValue(u,e))}}return n}function p(a,e,r){var t=[];for(var i=0;i<a.length;i++){var n=a[i];t.push(r.internalizeValue(n,e))}return t}return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/condition/ConditionModel", ["sap/ui/mdc/condition/ConditionModelPropertyBinding","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/ChangeReason","sap/ui/mdc/condition/FilterOperatorUtil","sap/base/util/merge","sap/base/util/deepEqual","sap/base/Log","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterConverter","sap/ui/core/date/UI5Date"],function(t,i,e,n,o,r,s,a,d,p,h){"use strict";var l=i.extend("sap.ui.mdc.condition.ConditionModel",{constructor:function(){i.apply(this,arguments);this.setSizeLimit(1e3);if(!this.getProperty("/conditions")){this.setProperty("/conditions",{})}if(!this.getProperty("/fieldPath")){this.setProperty("/fieldPath",{})}}});l.prototype.bindProperty=function(i,e,n){var o=i;if(i.startsWith("/conditions/")){var r=i.slice(12);this._getFieldPathProperty(r);r=c.call(this,r);o="/conditions/"+r}var s=new t(this,o,e,n);s._sOriginapPath=i;return s};l.prototype.getContext=function(t){if(t.startsWith("/conditions/")){var e=t.slice(12);e=c.call(this,e);t="/conditions/"+e}return i.prototype.getContext.apply(this,[t])};l.prototype.bindList=function(t,e,n,o,r){var s=i.prototype.bindList.apply(this,arguments);s.enableExtendedChangeDetection(true);return s};l.prototype.destroy=function(){i.prototype.destroy.apply(this,arguments)};l.prototype.clone=function(t){var i=new l;i._sName=this._sName+"_clone";var e={};if(typeof t==="string"){var n=this.getConditions(t);for(var o=0;o<n.length;o++){var s=n[o];var a=c.call(this,t);if(!e[a]){e[a]=[]}e[a].push(r({},s))}}else{e=r({},this.getAllConditions())}i.setConditions(e);return i};l.prototype.merge=function(t,i,e){this.removeAllConditions(t);var n=r({},i.getAllConditions());for(var o in n){if(!(typeof e==="string")||o===e){var s=d._removeEmptyConditions(n[o]);for(var a=0;a<s.length;a++){var p=s[a];this.addCondition(o,p)}}}this.checkUpdate(true,true)};l.prototype.getConditions=function(t){return f.call(this,t)};function f(t,i){var e=this.getProperty("/conditions");var n;if(typeof t=="string"){t=c.call(this,t);if(!e[t]&&i){e[t]=[]}n=e[t]||[]}else{throw new Error("ConditionModel","getConditions without FieldPath is not supported!")}return n}l.prototype.getAllConditions=function(t){var i=this.getProperty("/conditions");var e={};for(var n in i){var o=this.getProperty("/fieldPath");var s=o[n];var a=s?s.fieldPath:n;if(t&&[].concat(t).indexOf(a)===-1){continue}e[a]=r([],i[n])}return e};l.prototype.indexOf=function(t,i,e){if(typeof t!=="string"){throw new Error("sFieldPath must be a string "+this)}var n=this.getConditions(t);var r=e?[e(i),n.map(e)]:[i,n];var s=o.indexOfCondition.apply(o,r);return s};l.prototype.exist=function(t,i){if(typeof i==="string"){return this.indexOf(i,t)>=0}else{throw new Error("sFieldPath must be provided "+this)}};l.prototype.setConditions=function(t){var i=0;var e;if(Array.isArray(t)){throw new Error("setConditions with an Array of condition is not supported! "+this)}else{this._bNoSingleEvent=true;var s=false;var a;var d;var p=r({},this.getProperty("/conditions"));for(a in t){this._getFieldPathProperty(a);d=c.call(this,a);var h=p[d]||[];var l=t[a]||[];if(!o.compareConditionsArray(h,l)){s=true;this.removeAllConditions(a);for(i=0;i<t[a].length;i++){e=t[a][i];this.insertCondition(a,-1,e,true)}this.firePropertyChange({reason:n.Binding,path:"/conditions/"+a,context:undefined,value:t[a]})}delete p[d]}var f=this.getProperty("/fieldPath");for(d in p){if(p[d].length>0){s=true;a=f[d].fieldPath;this.removeAllConditions(a);this.firePropertyChange({reason:n.Binding,path:"/conditions/"+a,context:undefined,value:[]})}}if(s){this.checkUpdate(false,true)}this._bNoSingleEvent=false}return this};l.prototype.addCondition=function(t,i,e){if(typeof t!=="string"){throw new Error("sFieldPath must be a string "+this)}return this.insertCondition(t,-1,i,e)};l.prototype.insertCondition=function(t,i,e,r){if(typeof t!=="string"){throw new Error("sFieldPath must be a string "+this)}if(!e){return this}var s;o.checkConditionsEmpty(e);o.updateConditionsValues(e);this._getFieldPathProperty(t);if(!r){var a=this.indexOf(t,e);if(a>=0){return this}}s=f.call(this,t,true);if(i==-1){s.push(e)}else{s.splice(i,0,e)}if(!this._bNoSingleEvent){this.checkUpdate(false,true);this.firePropertyChange({reason:n.Binding,path:"/conditions/"+t,context:undefined,value:s})}return this};l.prototype.createItemCondition=function(t,i,e){a.error("ConditionModel","createItemCondition is deprecated");return d.createItemCondition(i,e)};l.prototype.createCondition=function(t,i,e){a.error("ConditionModel","createCondition is deprecated");return d.createCondition(i,e)};l.prototype.removeCondition=function(t,i){if(typeof t!=="string"){throw new Error("sFieldPath must be a string "+this)}var e=-1;if(typeof i==="object"){e=this.indexOf(t,i)}else if(typeof i==="number"){e=i}if(e>=0){var o=this.getConditions(t);if(o.length>e){o.splice(e,1);this.checkUpdate(false,true);this.firePropertyChange({reason:n.Binding,path:"/conditions/"+t,context:undefined,value:o});return true}}return false};l.prototype.removeAllConditions=function(t){var i=this.getProperty("/conditions");if(typeof t==="string"){var e=c.call(this,t);if(i[e]&&i[e].length>0){i[e]=[];if(!this._bNoSingleEvent){this.firePropertyChange({reason:n.Binding,path:"/conditions/"+t,context:undefined,value:i[e]})}}}else{for(var o in i){if(i[o]&&i[o].length>0){i[o]=[];if(!this._bNoSingleEvent){var r=this.getProperty("/fieldPath");var s=r[o].fieldPath;this.firePropertyChange({reason:n.Binding,path:"/conditions/"+s,context:undefined,value:i[o]})}}}}if(!this._bNoSingleEvent){this.checkUpdate(false,true)}return this};l.prototype._getFieldPathProperty=function(t){var i=c.call(this,t);var e=this.getProperty("/fieldPath");if(!e[i]){e[i]={fieldPath:t}}var n=this.getProperty("/conditions");if(!n[i]){n[i]=[]}return e[i]};l.prototype.getFilters=function(t){a.error("ConditionModel","usage or deprecated getFilters() function! Please use the FilterConverter.createFilters() function instead.");return p.createFilters(this.getAllConditions(),{})};l.prototype.serialize=function(){var t=r({},this.getAllConditions());for(var i in t){var e=t[i];e.forEach(function(t){delete t.isEmpty},this);if(e.length===0){delete t[i]}}return'{"conditions":'+JSON.stringify(t)+"}"};l.prototype.parse=function(t){var i=function(t,i){var e;if(!isNaN(parseInt(t))&&typeof i==="string"){e=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).(\d{3})Z$/.exec(i);if(e){return h.getInstance(i)}}return i};this.setConditions(JSON.parse(t,i).conditions)};function c(t){if(t){var i=t.split("/");if(i.length>1){t="";for(var e=0;e<i.length;e++){var n=i[e];if(e>0){if(!isNaN(n)||!isNaN(i[e-1])){t=t+"/"}else{t=t+"\\"}}t=t+n}}}return t}return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/condition/ConditionModelPropertyBinding", ["sap/ui/model/ChangeReason","sap/ui/model/json/JSONPropertyBinding","sap/base/util/merge","sap/base/util/deepEqual","sap/ui/core/date/UI5Date"],function(t,e,i,a,s){"use strict";var o=e.extend("sap.ui.mdc.condition.ConditionModelPropertyBinding",{constructor:function(t,i,a,s){e.apply(this,arguments);this.oValue=n.call(this,this._getValue())}});o.prototype.getValue=function(){return n.call(this,this.oValue)};o.prototype.setValue=function(e){if(this.bSuspended){return}if(!a(this.oValue,e)){if(this.oModel.setProperty(this.sPath,e,this.oContext,true)){this.oValue=n.call(this,e);this.getDataState().setValue(this.oValue);this.oModel.firePropertyChange({reason:t.Binding,path:this._sOriginapPath,context:this.oContext,value:e})}}};o.prototype.checkUpdate=function(e){if(this.bSuspended&&!e){return}var i=this._getValue();if(!a(i,this.oValue)||e){this.oValue=n.call(this,i);this.getDataState().setValue(this.oValue);this.checkDataState();this._fireChange({reason:t.Change})}};function n(t){var e;if(!t){e=t}else if(Array.isArray(t)){e=i([],t)}else if(t instanceof Date){e=s.getInstance(t)}else if(typeof t==="object"){e=i({},t)}else{e=t}return e}return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/condition/ConditionValidateException", ["sap/ui/model/ValidateException"],function(t){"use strict";var o=function(o,i,n,e){t.call(this,o,i);this.condition=n;this.conditions=e};o.prototype=Object.create(t.prototype);o.prototype.getCondition=function(){return this.condition};o.prototype.setCondition=function(t){this.condition=t};o.prototype.getConditions=function(){return this.conditions};o.prototype.setConditions=function(t){this.conditions=t};return o},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/condition/FilterConverter", ["sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/Log"],function(e,t,r,i){"use strict";var n={createConditionTypesMapFromFilterBar:function(e,t){var r={};for(var i in e){if(t){var n=t._getPropertyByName(i);var a;if(n&&n.typeConfig){a=n.typeConfig.typeInstance}else{var o=t._getFilterField(i);if(o){var l=o._getFormatOptions();if(l.originalDateType){a=l.originalDateType}else{a=l.valueType}}}r[i]={type:a}}}return r},createFilters:function(a,o,l,s){var f,p,u,h=[],v,c,d,g,y;var F=function(e,t,r){var i="L1";var n,a,o;if(e.sPath&&e.sPath.indexOf(r)>-1){n=e.sPath.split(r);if(n.length===2){a=n[0];o=n[1];e.sPath=i+"/"+o;return{path:a,operator:t,variable:i}}else{throw new Error("FilterConverter: not supported binding "+e.sPath)}}return false};var P=function(e){var t=F(e,r.Any,"*/");if(t){return t}else{return F(e,r.All,"+/")}};for(var O in a){p=[];u=[];y=null;var w=a[O];if(O==="$search"){continue}var C;var b=true;var m;if(o){if(o[O]){C=o[O].type;b=o[O].caseSensitive;m=o[O].baseType;if(!C){i.warning("FilterConverter","Not able to retrieve the type of path '"+O+"!")}}}for(f=0;f<w.length;f++){g=w[f];v=e.getOperator(g.operator);if(!v){continue}try{c=v.getModelFilter(g,O,C,b,m)}catch(e){if(e){i.error("FilterConverter",e)}else{i.error("FilterConverter","Not able to convert the condition for path '"+O+"' into a filter! The type is missing!")}continue}if(!v.exclude){if(c.sPath==="$search"){continue}var T=/^\*(.+)\*$/.exec(c.sPath);if(T){var A=T[1].split(",");for(var x=0;x<A.length;x++){p.push(new t({path:A[x],operator:c.sOperator,value1:c.oValue1,caseSensitive:s}))}continue}y=P(c);p.push(c)}else{y=P(c);u.push(c)}}c=undefined;if(p.length===1){c=p[0]}else if(p.length>1){c=new t({filters:p,and:false})}if(c){u.unshift(c)}d=undefined;if(u.length===1){d=u[0]}else if(u.length>1){d=new t({filters:u,and:true})}if(y){y.condition=d;d=new t(y)}if(d){h.push(d)}}if(h.length===1){c=h[0]}else if(h.length>1){c=new t({filters:h,and:true})}else{c=null}i.info("FilterConverter",n.prettyPrintFilters(c));return c},prettyPrintFilters:function(e){var t;if(!e){return"no filters set"}if(e._bMultiFilter){t="";var i=e.bAnd;e.aFilters.forEach(function(e,r,a){t+=n.prettyPrintFilters(e);if(a.length-1!=r){t+=i?" and ":" or "}},this);return"("+t+")"}else{if(e.sOperator===r.Any||e.sOperator===r.All){t=e.sPath+" "+e.sOperator+" "+n.prettyPrintFilters(e.oCondition)}else{if(e.bCaseSensitive===false){t="tolower("+e.sPath+") "+e.sOperator+" tolower('"+e.oValue1+"')"}else{t=e.sPath+" "+e.sOperator+" '"+e.oValue1+"'"}if([r.BT,r.NB].indexOf(e.sOperator)>=0){t+="...'"+e.oValue2+"'"}}return t}}};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/condition/FilterOperatorUtil", ["sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/ui/model/ValidateException","sap/base/Log","sap/ui/mdc/enum/FieldDisplay","./Operator","./RangeOperator","sap/ui/mdc/enum/BaseType","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/util/loadModules","sap/ui/core/date/UniversalDate","sap/ui/core/date/UniversalDateUtils","sap/ui/core/format/DateFormat","sap/ui/model/json/JSONModel","sap/ui/model/type/Integer"],function(e,t,a,r,n,s,o,l,i,u,p,m,f,c,y){"use strict";var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.getCore().attachLocalizationChanged(function(){T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")});var O={_mOperators:{equal:new s({name:"EQ",alias:{Date:"DATE",DateTime:"DATETIME"},filterOperator:e.EQ,tokenParse:"^=([^=].*)$",tokenFormat:"{1} ({0})",valueTypes:[s.ValueType.Self,null],displayFormats:{DescriptionValue:"{1} ({0})",ValueDescription:"{0} ({1})",Description:"{1}",Value:"{0}"},format:function(e,t,a,r,s){a=a||n.DescriptionValue;var o=this.valueTypes.length;var l=e.values;var u=e&&e.validated===i.Validated||l.length===2||r?"":"=";var p=u+this.displayFormats[a];if(!l[1]){p=u+this.displayFormats["Value"];o=1}for(var m=0;m<o;m++){var f,c=l[m];if(c===null||c===undefined){c=""}if(m==0){f=this._formatValue(c,t,s)}else{f=c}if(f===null){p=null;break}if(typeof f==="string"){f=f.replace(/\$/g,"$$$")}p=p.replace(new RegExp("\\$"+m+"|"+m+"\\$"+"|"+"\\{"+m+"\\}","g"),f)}return p},parse:function(e,t,a,r,o){a=a||n.DescriptionValue;var l=s.prototype.parse.apply(this,[e,t,a,r,o]);if(r&&(!l||l[0]===null||l[0]===undefined)&&a!==n.Value){a=n.Value;l=s.prototype.parse.apply(this,[e,t,a,r,o])}if(l&&(l[1]===null||l[1]===undefined)&&a===n.Value){l=[l[0]]}return l},getValues:function(e,t,a){var r=e.match(this.tokenParseRegExp);var n;if(r||a&&e){var s;var o=this.displayFormats[t];var l=o.indexOf("{0}");var i=o.indexOf("{1}");var u;var p;if(r){s=r[1]}else if(a){s=e}if(l>=0&&i>=0){if(s.lastIndexOf("(")>0&&(s.lastIndexOf(")")===s.length-1||s.lastIndexOf(")")===-1)){var m=s.length;if(s[m-1]===")"){m--}var f=s.substring(0,s.lastIndexOf("("));if(f[f.length-1]===" "){f=f.substring(0,f.length-1)}var c=s.substring(s.lastIndexOf("(")+1,m);if(l<i){u=f;p=c}else{u=c;p=f}}else if(l<i){u=s}else{p=s}}else if(l>=0){u=s}else{p=s}n=[u];if(i>=0){n.push(p)}}return n},isEmpty:function(e,t){var a=false;var r=e.values[0];if((r===null||r===undefined||r==="")&&!e.values[1]){a=true}return a},getCheckValue:function(e){return{value:e.values[0]}},checkValidated:function(e){if(e.values.length===2&&e.values[0]!==undefined&&e.values[1]!==null&&e.values[1]!==undefined){e.validated=i.Validated}else{e.validated=i.NotValidated}},validateInput:true}),between:new s({name:"BT",alias:{Date:"DATERANGE",DateTime:"DATETIMERANGE"},filterOperator:e.BT,tokenParse:"^([^!].*)\\.\\.\\.(.+)$",tokenFormat:"{0}...{1}",valueTypes:[s.ValueType.Self,s.ValueType.Self],validate:function(e,t){if(e.length===2){if(d(e[0])&&d(e[1])){return}else if(d(e[0])||d(e[1])){throw new a(T.getText("operator.between.validate.missingValue"))}else if(e[0]===e[1]){throw new a(T.getText("operator.between.validate.sameValues"))}}s.prototype.validate.apply(this,[e,t])}}),notBetween:new s({name:"NOTBT",filterOperator:e.NB,tokenParse:"^!(.+)\\.\\.\\.(.+)$",tokenFormat:"!({0}...{1})",valueTypes:[s.ValueType.Self,s.ValueType.Self],exclude:true,validate:function(e,t){O._mOperators.between.validate(e,t)}}),lessThan:new s({name:"LT",filterOperator:e.LT,tokenParse:"^<([^=].*)$",tokenFormat:"<{0}",valueTypes:[s.ValueType.Self]}),notLessThan:new s({name:"NOTLT",filterOperator:e.GE,tokenParse:"^!<([^=].*)$",tokenFormat:"!(<{0})",valueTypes:[s.ValueType.Self],exclude:true}),greaterThan:new s({name:"GT",filterOperator:e.GT,tokenParse:"^>([^=].*)$",tokenFormat:">{0}",valueTypes:[s.ValueType.Self]}),notGreaterThan:new s({name:"NOTGT",filterOperator:e.LE,tokenParse:"^!>([^=].*)$",tokenFormat:"!(>{0})",valueTypes:[s.ValueType.Self],exclude:true}),lessEqual:new s({name:"LE",alias:{Date:"TO",DateTime:"TODATETIME"},filterOperator:e.LE,tokenParse:"^<=(.+)$",tokenFormat:"<={0}",valueTypes:[s.ValueType.Self]}),notLessEqual:new s({name:"NOTLE",filterOperator:e.GT,tokenParse:"^!<=(.+)$",tokenFormat:"!(<={0})",valueTypes:[s.ValueType.Self],exclude:true}),greaterEqual:new s({name:"GE",alias:{Date:"FROM",DateTime:"FROMDATETIME"},filterOperator:e.GE,tokenParse:"^>=(.+)$",tokenFormat:">={0}",valueTypes:[s.ValueType.Self]}),notGreaterEqual:new s({name:"NOTGE",filterOperator:e.LT,tokenParse:"^!>=(.+)$",tokenFormat:"!(>={0})",valueTypes:[s.ValueType.Self],exclude:true}),startsWith:new s({name:"StartsWith",filterOperator:e.StartsWith,tokenParse:"^([^!\\*]+.*)\\*$",tokenFormat:"{0}*",valueTypes:[s.ValueType.SelfNoParse]}),notStartsWith:new s({name:"NotStartsWith",filterOperator:e.NotStartsWith,tokenParse:"^!([^\\*].*)\\*$",tokenFormat:"!({0}*)",valueTypes:[s.ValueType.SelfNoParse],exclude:true}),endsWith:new s({name:"EndsWith",filterOperator:e.EndsWith,tokenParse:"^\\*(.*[^\\*])$",tokenFormat:"*{0}",valueTypes:[s.ValueType.SelfNoParse]}),notEndsWith:new s({name:"NotEndsWith",filterOperator:e.NotEndsWith,tokenParse:"^!\\*(.*[^\\*])$",tokenFormat:"!(*{0})",valueTypes:[s.ValueType.SelfNoParse],exclude:true}),contains:new s({name:"Contains",filterOperator:e.Contains,tokenParse:"^\\*(.*)\\*$",tokenFormat:"*{0}*",valueTypes:[s.ValueType.SelfNoParse]}),notContains:new s({name:"NotContains",filterOperator:e.NotContains,tokenParse:"^!\\*(.*)\\*$",tokenFormat:"!(*{0}*)",valueTypes:[s.ValueType.SelfNoParse],exclude:true}),notEqual:new s({name:"NE",filterOperator:e.NE,tokenParse:"^!=(.+)$",tokenFormat:"!(={0})",valueTypes:[s.ValueType.Self],exclude:true}),empty:new s({name:"Empty",filterOperator:e.EQ,tokenParse:"^<#tokenText#>$",tokenFormat:"<#tokenText#>",valueTypes:[],getModelFilter:function(a,r,n,s,o){var l=false;if(n){var i=n.parseValue("","string");try{n.validateValue(i);l=i===null}catch(e){l=false}}if(l){return new t({filters:[new t({path:r,operator:e.EQ,value1:""}),new t({path:r,operator:e.EQ,value1:null})],and:false})}else{return new t({path:r,operator:this.filterOperator,value1:""})}}}),notEmpty:new s({name:"NotEmpty",filterOperator:e.NE,tokenParse:"^!<#tokenText#>$",tokenFormat:"!(<#tokenText#>)",valueTypes:[],exclude:true,getModelFilter:function(a,r,n,s,o){var l=false;if(n){var i=n.parseValue("","string");try{n.validateValue(i);l=i===null}catch(e){l=false}}if(l){return new t({filters:[new t({path:r,operator:e.NE,value1:""}),new t({path:r,operator:e.NE,value1:null})],and:true})}else{return new t({path:r,operator:this.filterOperator,value1:""})}}}),yesterday:new o({name:"YESTERDAY",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.yesterday()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),today:new o({name:"TODAY",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.today()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),tomorrow:new o({name:"TOMORROW",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.tomorrow()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDays:new o({name:"LASTDAYS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastDays(e)}}),firstDayWeek:new o({name:"FIRSTDAYWEEK",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.firstDayOfWeek()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayWeek:new o({name:"LASTDAYWEEK",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastDayOfWeek()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),firstDayMonth:new o({name:"FIRSTDAYMONTH",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.firstDayOfMonth()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayMonth:new o({name:"LASTDAYMONTH",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastDayOfMonth()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),firstDayQuarter:new o({name:"FIRSTDAYQUARTER",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.firstDayOfQuarter()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayQuarter:new o({name:"LASTDAYQUARTER",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastDayOfQuarter()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),firstDayYear:new o({name:"FIRSTDAYYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.firstDayOfYear()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayYear:new o({name:"LASTDAYYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastDayOfYear()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),todayFromTo:new o({name:"TODAYFROMTO",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null}},{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null}}],paramTypes:["([-+]?\\d+)","([-+]?\\d+)"],additionalInfo:"",calcRange:function(e,t){var a=e>=0?m.ranges.lastDays(e)[0]:m.ranges.nextDays(-e)[1];var r=t>=0?m.ranges.nextDays(t)[1]:m.ranges.lastDays(-t)[0];if(a.oDate.getTime()>r.oDate.getTime()){r=[a,a=r][0]}return[m.resetStartTime(a),m.resetEndTime(r)]}}),nextDays:new o({name:"NEXTDAYS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextDays(e)}}),lastWeek:new o({name:"LASTWEEK",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastWeek()}}),thisWeek:new o({name:"THISWEEK",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.currentWeek()}}),nextWeek:new o({name:"NEXTWEEK",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.nextWeek()}}),lastWeeks:new o({name:"LASTWEEKS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastWeeks(e)}}),nextWeeks:new o({name:"NEXTWEEKS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextWeeks(e)}}),lastMonth:new o({name:"LASTMONTH",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastMonth()}}),thisMonth:new o({name:"THISMONTH",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.currentMonth()}}),nextMonth:new o({name:"NEXTMONTH",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.nextMonth()}}),lastMonths:new o({name:"LASTMONTHS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastMonths(e)}}),nextMonths:new o({name:"NEXTMONTHS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextMonths(e)}}),lastQuarter:new o({name:"LASTQUARTER",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastQuarter()}}),thisQuarter:new o({name:"THISQUARTER",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.currentQuarter()}}),nextQuarter:new o({name:"NEXTQUARTER",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.nextQuarter()}}),lastQuarters:new o({name:"LASTQUARTERS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastQuarters(e)}}),nextQuarters:new o({name:"NEXTQUARTERS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextQuarters(e)}}),quarter1:new o({name:"QUARTER1",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.quarter(1)}}),quarter2:new o({name:"QUARTER2",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.quarter(2)}}),quarter3:new o({name:"QUARTER3",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.quarter(3)}}),quarter4:new o({name:"QUARTER4",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.quarter(4)}}),lastYear:new o({name:"LASTYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastYear()}}),thisYear:new o({name:"THISYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.currentYear()}}),nextYear:new o({name:"NEXTYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.nextYear()}}),lastYears:new o({name:"LASTYEARS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastYears(e)}}),nextYears:new o({name:"NEXTYEARS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextYears(e)}}),specificMonth:new o({name:"SPECIFICMONTH",valueTypes:[{name:"sap.ui.model.type.Integer",constraints:{minimum:0,maximum:11}}],paramTypes:["(.+)"],additionalInfo:"",label:[T.getText("operators.SPECIFICMONTH_MONTH.label")],defaultValues:function(){var e=new p;return[e.getMonth()]},calcRange:function(e){var t=new p;t.setMonth(e);t=m.getMonthStartDate(t);return m.getRange(0,"MONTH",t)},format:function(e,t,a,r,n){var s=e.values[0];var o=this.tokenFormat;var l=h.apply(this)[s];if(r){return l}else{return l==null?null:o.replace(new RegExp("\\$"+0+"|"+0+"\\$"+"|"+"\\{"+0+"\\}","g"),l)}},getValues:function(e,t,a){var r=e.match(this.tokenParseRegExp);var n;if(r||a&&e){n=[];for(var s=0;s<this.valueTypes.length;s++){var o;if(r){o=r[s+1]}else if(a&&e){o=e}n.push(o)}return[v.call(this,n[0])]}return null},createControl:function(e,t,a,n){var s=sap.ui.require("sap/ui/mdc/Field");var o=E.call(this);if(s&&o){var l=new s(n,{value:{path:t,type:e,mode:"TwoWay",targetType:"raw"},display:"Description",width:"100%",fieldHelp:o});return l}else{r.warning("Operator.createControl","not able to create the control for the operator "+this.name);return null}}}),specificMonthInYear:new o({name:"SPECIFICMONTHINYEAR",valueTypes:[{name:"sap.ui.model.type.Integer",constraints:{minimum:0,maximum:11}},{name:"sap.ui.model.type.Integer",constraints:{minimum:1,maximum:9999}}],paramTypes:["(.+)","(.+)"],additionalInfo:"",label:[T.getText("operators.SPECIFICMONTHINYEAR_MONTH.label"),T.getText("operators.SPECIFICMONTHINYEAR_YEAR.label")],defaultValues:function(){var e=new p;return[e.getMonth(),e.getFullYear()]},calcRange:function(e,t){var a=new p;a.setMonth(e);a.setYear(t);a=m.getMonthStartDate(a);return m.getRange(0,"MONTH",a)},format:function(e,t,a,r,n){var s=e.values[0];var o=e.values[1];var l=this.tokenFormat;var i=h.apply(this)[s];if(r){return i+","+o}else{var u=new RegExp("\\$"+0+"|"+0+"\\$"+"|"+"\\{"+0+"\\}","g");var p=new RegExp("\\$"+1+"|"+1+"\\$"+"|"+"\\{"+1+"\\}","g");l=i==null?null:l.replace(u,i);return l.replace(p,o)}},getValues:function(e,t,a){var r=e.match(this.tokenParseRegExp);var n;if(r||a&&e){n=[];for(var s=0;s<this.valueTypes.length;s++){var o;if(r){o=r[s+1]}else if(a&&e){o=e}n.push(o)}return[v.call(this,n[0]),n[1]]}return null},createControl:function(e,t,a,n){var s;var o=sap.ui.require("sap/ui/mdc/Field");if(!o){r.warning("Operator.createControl","not able to create the control for the operator "+this.name);return null}if(a==0){var l=E.call(this);if(l){s=new o(n,{value:{path:t,type:e,mode:"TwoWay",targetType:"raw"},display:"Description",width:"100%",fieldHelp:l})}else{r.warning("Operator.createControl","not able to create the control for the operator "+this.name)}}if(a==1){s=new o(n,{value:{path:"$this>",type:e,mode:"TwoWay",targetType:"raw"},width:"100%"})}return s}}),yearToDate:new o({name:"YEARTODATE",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.yearToDate()}}),dateToYear:new o({name:"DATETOYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.dateToYear()}}),lastMinutes:new o({name:"LASTMINUTES",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastMinutes(e)}}),nextMinutes:new o({name:"NEXTMINUTES",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextMinutes(e)}}),lastHours:new o({name:"LASTHOURS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastHours(e)}}),nextHours:new o({name:"NEXTHOURS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextHours(e)}})},_mDefaultOpsForType:{},addOperator:function(e){O._mOperators[e.name]=e},addOperators:function(e){if(!Array.isArray(e)){e=[e]}e.forEach(function(e){O.addOperator(e)})},removeOperators:function(e){if(!Array.isArray(e)){e=[e]}e.forEach(function(e){O.removeOperator(e)})},removeOperator:function(e){if(typeof e==="string"){delete O._mOperators[e]}else{delete O._mOperators[e.name]}},setOperatorsForType:function(e,t,a){if(!Array.isArray(t)){t=[t]}if(!O._mDefaultOpsForType[e]){O._mDefaultOpsForType[e]={}}O._mDefaultOpsForType[e].operators=[];t.forEach(function(t){O.addOperatorForType(e,t)});if(a){O.setDefaultOperatorForType(e,a)}},setDefaultOperatorForType:function(e,t){if(!O._mDefaultOpsForType[e]){O._mDefaultOpsForType[e]={}}if(typeof t==="string"){t=O.getOperator(t)}O._mDefaultOpsForType[e].defaultOperator=t},addOperatorForType:function(e,t){O.insertOperatorForType(e,t)},insertOperatorForType:function(e,t,a){if(!O._mDefaultOpsForType[e]){O._mDefaultOpsForType[e]={operators:[]}}a=a===undefined?O._mDefaultOpsForType[e].operators.length:a;if(typeof t==="string"){t=O.getOperator(t)}O._mDefaultOpsForType[e].operators.splice(a,0,t)},removeOperatorForType:function(e,t){var a;if(typeof t==="string"){a=t}else{a=t.name}for(var r=0;r<O._mDefaultOpsForType[e].operators.length;r++){if(O._mDefaultOpsForType[e].operators[r].name===a){O._mDefaultOpsForType[e].operators.splice(r,1);return}}},getOperatorsForType:function(e){var t=[];for(var a=0;a<O._mDefaultOpsForType[e].operators.length;a++){t.push(O._mDefaultOpsForType[e].operators[a].name)}return t},getDefaultOperator:function(e){return O._mDefaultOpsForType[e].defaultOperator||O._mOperators.equal},getMatchingOperators:function(e,t){var a=[];for(var r=0;r<e.length;r++){var n=this.getOperator(e[r]);if(n){a.push(n)}}return g.call(this,a,t)},getOperator:function(e){for(var t in O._mOperators){var a=O._mOperators[t];if(a.name===e){return a}}return undefined},getEQOperator:function(e){if(e){for(var t=0;t<e.length;t++){var a=this.getOperator(e[t]);if(a&&a.validateInput&&!a.exclude&&a.valueTypes[0]&&a.valueTypes[0]!==s.ValueType.Static){return a}}}return O._mOperators.equal},onlyEQ:function(e){if(e.length===1&&e[0]==="EQ"){return true}else{return false}},checkConditionsEmpty:function(e){if(!Array.isArray(e)){e=[e]}e.forEach(function(e){var t=this.getOperator(e.operator);if(t){e.isEmpty=t.isEmpty(e)}}.bind(this))},updateConditionsValues:function(e){if(!Array.isArray(e)){e=[e]}for(var t=0;t<e.length;t++){this.updateConditionValues(e[t])}},updateConditionValues:function(e){var t=this.getOperator(e.operator);if(t&&e.validated!==i.Validated){var a=t.valueTypes.length;if(t.valueTypes.length===2&&t.valueTypes[1]===null&&(e.values.length<2||e.values[1]===null||e.values[1]===undefined)){a=a-1}if(t.valueTypes[0]==="static"){e.values=[]}else{while(e.values.length!=a){if(e.values.length<a){e.values.push(null)}if(e.values.length>a){e.values=e.values.slice(0,e.values.length-1)}}}}},indexOfCondition:function(e,t){var a=-1;for(var r=0;r<t.length;r++){if(this.compareConditions(e,t[r])){a=r;break}}return a},compareConditions:function(e,t){var a=false;if(e.operator===t.operator){var r=this.getOperator(e.operator);if(r){a=r.compareConditions(e,t)}}return a},compareConditionsArray:function(e,t){var a=false;if(e.length===t.length){a=true;for(var r=0;r<e.length;r++){if(!this.compareConditions(e[r],t[r])){a=false;break}}}return a},checkConditionValidated:function(e){var t=this.getOperator(e.operator);if(!e.validated&&t&&t.checkValidated){t.checkValidated(e)}},getOperatorForDynamicDateOption:function(e,t){var a;if(t&&e.startsWith(t)){a=this.getOperator(e.slice(t.length+1))}else{a=this.getOperator(e)}if(!a&&t){for(var r in O._mOperators){var n=O._mOperators[r];if(n.alias&&n.alias[t]===e){a=n;break}}}return a},getDynamicDateOptionForOperator:function(e,t,a){var r;if(e){if(t[e.name]){r=e.name}else if(e.alias&&t[e.alias[a]]){r=e.alias[a]}}return r},getCustomDynamicDateOptionForOperator:function(e,t){return t+"-"+e.name}};O.setOperatorsForType(l.String,[O._mOperators.contains,O._mOperators.equal,O._mOperators.between,O._mOperators.startsWith,O._mOperators.endsWith,O._mOperators.lessThan,O._mOperators.lessEqual,O._mOperators.greaterThan,O._mOperators.greaterEqual,O._mOperators.empty,O._mOperators.notContains,O._mOperators.notEqual,O._mOperators.notBetween,O._mOperators.notStartsWith,O._mOperators.notEndsWith,O._mOperators.notLessThan,O._mOperators.notLessEqual,O._mOperators.notGreaterThan,O._mOperators.notGreaterEqual,O._mOperators.notEmpty],O._mOperators.equal);O.setOperatorsForType(l.Date,[O._mOperators.equal,O._mOperators.between,O._mOperators.lessThan,O._mOperators.lessEqual,O._mOperators.greaterThan,O._mOperators.greaterEqual,O._mOperators.notEqual,O._mOperators.notBetween,O._mOperators.notLessThan,O._mOperators.notLessEqual,O._mOperators.notGreaterThan,O._mOperators.notGreaterEqual,O._mOperators.today,O._mOperators.yesterday,O._mOperators.tomorrow,O._mOperators.firstDayWeek,O._mOperators.lastDayWeek,O._mOperators.firstDayMonth,O._mOperators.lastDayMonth,O._mOperators.firstDayQuarter,O._mOperators.lastDayQuarter,O._mOperators.firstDayYear,O._mOperators.lastDayYear,O._mOperators.todayFromTo,O._mOperators.lastDays,O._mOperators.nextDays,O._mOperators.thisWeek,O._mOperators.lastWeek,O._mOperators.lastWeeks,O._mOperators.nextWeek,O._mOperators.nextWeeks,O._mOperators.specificMonth,O._mOperators.specificMonthInYear,O._mOperators.thisMonth,O._mOperators.lastMonth,O._mOperators.lastMonths,O._mOperators.nextMonth,O._mOperators.nextMonths,O._mOperators.thisQuarter,O._mOperators.lastQuarter,O._mOperators.lastQuarters,O._mOperators.nextQuarter,O._mOperators.nextQuarters,O._mOperators.quarter1,O._mOperators.quarter2,O._mOperators.quarter3,O._mOperators.quarter4,O._mOperators.thisYear,O._mOperators.lastYear,O._mOperators.lastYears,O._mOperators.nextYear,O._mOperators.nextYears,O._mOperators.yearToDate,O._mOperators.dateToYear]);O.setOperatorsForType(l.DateTime,[O._mOperators.equal,O._mOperators.between,O._mOperators.lessThan,O._mOperators.lessEqual,O._mOperators.greaterThan,O._mOperators.greaterEqual,O._mOperators.notEqual,O._mOperators.notBetween,O._mOperators.notLessThan,O._mOperators.notLessEqual,O._mOperators.notGreaterThan,O._mOperators.notGreaterEqual,O._mOperators.lastMinutes,O._mOperators.nextMinutes,O._mOperators.lastHours,O._mOperators.nextHours,O._mOperators.today,O._mOperators.yesterday,O._mOperators.tomorrow,O._mOperators.firstDayWeek,O._mOperators.lastDayWeek,O._mOperators.firstDayMonth,O._mOperators.lastDayMonth,O._mOperators.firstDayQuarter,O._mOperators.lastDayQuarter,O._mOperators.firstDayYear,O._mOperators.lastDayYear,O._mOperators.todayFromTo,O._mOperators.lastDays,O._mOperators.nextDays,O._mOperators.thisWeek,O._mOperators.lastWeek,O._mOperators.lastWeeks,O._mOperators.nextWeek,O._mOperators.nextWeeks,O._mOperators.specificMonth,O._mOperators.specificMonthInYear,O._mOperators.thisMonth,O._mOperators.lastMonth,O._mOperators.lastMonths,O._mOperators.nextMonth,O._mOperators.nextMonths,O._mOperators.thisQuarter,O._mOperators.lastQuarter,O._mOperators.lastQuarters,O._mOperators.nextQuarter,O._mOperators.nextQuarters,O._mOperators.quarter1,O._mOperators.quarter2,O._mOperators.quarter3,O._mOperators.quarter4,O._mOperators.thisYear,O._mOperators.lastYear,O._mOperators.lastYears,O._mOperators.nextYear,O._mOperators.nextYears,O._mOperators.yearToDate,O._mOperators.dateToYear]);O.setOperatorsForType(l.Numeric,[O._mOperators.equal,O._mOperators.between,O._mOperators.lessThan,O._mOperators.lessEqual,O._mOperators.greaterThan,O._mOperators.greaterEqual,O._mOperators.notEqual,O._mOperators.notBetween,O._mOperators.notLessThan,O._mOperators.notLessEqual,O._mOperators.notGreaterThan,O._mOperators.notGreaterEqual]);O.setOperatorsForType(l.Time,[O._mOperators.equal,O._mOperators.between,O._mOperators.lessThan,O._mOperators.lessEqual,O._mOperators.greaterThan,O._mOperators.greaterEqual,O._mOperators.notEqual,O._mOperators.notBetween,O._mOperators.notLessThan,O._mOperators.notLessEqual,O._mOperators.notGreaterThan,O._mOperators.notGreaterEqual]);O.setOperatorsForType(l.Boolean,[O._mOperators.equal,O._mOperators.notEqual]);function g(e,t){var a=[];for(var r=0;r<e.length;r++){var n=e[r];if(n&&n.test&&n.test(t)){a.push(n)}}return a}function d(e){return e===null||e===undefined||e===""}function h(){if(!this._aMonths){var e=new p,t=f.getDateInstance({pattern:"LLLL"});e.setDate(15);e.setMonth(0);var a=[];for(var r=0;r<12;r++){a.push(t.format(e));e.setMonth(e.getMonth()+1)}this._aMonths=a}return this._aMonths}function v(e){var t=e.toLowerCase();var a=h.apply(this);var r=-1;a.some(function(e,a){if(e.toLowerCase()==t){r=a;return true}});return r}var _=false;function E(){var e="LFHForSpecificMonth";if(!_){_=true;u(["sap/ui/mdc/valuehelp/content/FixedList","sap/ui/mdc/field/ListFieldHelpItem","sap/ui/mdc/ValueHelp","sap/ui/mdc/valuehelp/Popover","sap/ui/core/Control"]).then(function(t){var a=t[0];var n=t[1];var s=t[2];var o=t[3];var l=t[4];var i=function(){if(!this._aMonthsItems){var e=h.apply(this);this._aMonthsItems=[];for(var t=0;t<12;t++){this._aMonthsItems.push({text:e[t],key:t})}}return this._aMonthsItems}.bind(this);var u=new s({id:e,typeahead:new o({content:[new a({filterList:false,useFirstMatch:true,items:{path:"$items>/",template:new n({text:"{$items>text}",key:"{$items>key}"}),templateShareable:false}})]})}).setModel(new c(i()),"$items");try{var p=sap.ui.getCore().getStaticAreaRef();var m=sap.ui.getCore().getUIArea(p);var f=new l(e+"-parent",{dependents:[u]});m.addContent(f,true)}catch(e){r.error(e);throw new Error("MonthFieldHelp cannot be assigned because static UIArea cannot be determined.")}}.bind(this))}return e}return O},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/condition/Operator", ["sap/ui/base/Object","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/ParseException","sap/base/Log","sap/base/util/ObjectPath","sap/base/util/merge","sap/base/util/deepEqual","./Condition","sap/ui/mdc/enum/ConditionValidated","sap/base/strings/escapeRegExp","sap/ui/mdc/enum/OperatorOverwrite"],function(e,t,a,r,i,s,o,n,l,u,p,f){"use strict";var h=function(e){return JSON.stringify(e,function(e,t){return t===undefined?"[undefined]":t})};var d=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.getCore().attachLocalizationChanged(function(){d=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")});var v=e.extend("sap.ui.mdc.condition.Operator",{constructor:function(t){e.apply(this,arguments);if(!t){throw new Error("Operator configuration missing")}if(!t.name){i.warning("Operator configuration expects a name property")}if(!t.filterOperator&&!t.getModelFilter){throw new Error("Operator configuration for "+t.name+" needs a default filter operator from sap.ui.model.FilterOperator or the function getModelFilter")}this._enableOverwrites(t);this.name=t.name;if(t.alias){this.alias=t.alias}this.filterOperator=t.filterOperator;this.valueTypes=t.valueTypes;this.paramTypes=t.paramTypes;this.displayFormats=t.displayFormats;var a="operators."+this.name;var r=a+".longText";var s=a+".tokenText";this.longText=t.longText||y(r)||"";this.tokenText=t.tokenText||y(s)||"";if(this.longText===r){this.longText=this.tokenText.replace(/\{0\}/g,"X").replace(/\{1\}/g,"Y")}if(this.tokenText===s){this.tokenText=this.longText}if(this.tokenText){var o;var n;if(t.tokenParse){n=p(this.tokenText);this.tokenParse=t.tokenParse.replace(/#tokenText#/g,n);for(var l=0;l<this.valueTypes.length;l++){var u=this.paramTypes?this.paramTypes[l]:this.valueTypes[l];this.tokenParse=this.tokenParse.replace(new RegExp("\\\\\\$"+l+"|"+l+"\\\\\\$"+"|"+"\\\\\\{"+l+"\\\\\\}","g"),u)}o=this.tokenParse}else{o=p(this.tokenText)}this.tokenParseRegExp=new RegExp(o,"i");if(t.tokenFormat){n=this.tokenText;this.tokenFormat=t.tokenFormat.replace(/\#tokenText\#/g,n)}else{this.tokenFormat=this.tokenText}}if(t.additionalInfo!==undefined){this.additionalInfo=t.additionalInfo}this.exclude=!!t.exclude;this.validateInput=!!t.validateInput;if(t.group){this.group=t.group}else{this.group={id:!this.exclude?"1":"2"};if(!this.group.text){this.group.text=d.getText("VALUEHELP.OPERATOR.GROUP"+this.group.id)}}},destroy:function(){this._oMethodOverwrites=null;e.protoype.destroy.apply(this,arguments)}});v.ValueType={Self:"self",Static:"static",SelfNoParse:"selfNoParse"};function y(e,t){var a=e+(t?"."+t:""),r;r=d.getText(a,undefined,true);if(r===a||r===undefined){if(t){r=d.getText(e,undefined,true);if(r===a||r===undefined){r=e}}else{r=a}}return r}v.prototype.getLongText=function(e){var t=this.textKey||"operators."+this.name+".longText";var a=y(t,e.toLowerCase());if(a===t){a=this.longText}return a};v.prototype.getModelFilter=function(e,r,i,s,o){var n=e.values[0];var l;var p;var f=r.split(",");if(Array.isArray(n)&&f.length>1){n=n[0];r=f[0];p=new t({path:f[1],operator:a.EQ,value1:e.values[0][1]})}if(p&&n===undefined){l=p;p=undefined}else if(!this.valueTypes[1]){if(!s&&e.validated===u.Validated){s=true}l=new t({path:r,operator:this.filterOperator,value1:n,caseSensitive:s===false?false:undefined})}else{var h=e.values[1];if(Array.isArray(h)&&f.length>1){h=h[0]}l=new t({path:r,operator:this.filterOperator,value1:n,value2:h,caseSensitive:s===false?false:undefined})}if(p){l=new t({filters:[l,p],and:true})}if(e.inParameters){var d=[l];for(var v in e.inParameters){if(v.startsWith("conditions/")){d.push(new t({path:v.slice(11),operator:a.EQ,value1:e.inParameters[v]}))}}if(d.length>1){l=new t({filters:d,and:true})}}return l};v.prototype.isEmpty=function(e,t){var a=false;if(e){for(var r=0;r<this.valueTypes.length;r++){if(this.valueTypes[r]!==v.ValueType.Static){var i=e.values[r];if(i===null||i===undefined||i===""){a=true;break}}}}return a};v.prototype.format=function(e,t,a,r,i){var s=e.values;var o=this.valueTypes.length;var n=r&&o===1?"{0}":this.tokenFormat;for(var l=0;l<o;l++){if(this.valueTypes[l]!==v.ValueType.Static){if(this.valueTypes[l]!==v.ValueType.Self){t=this._createLocalType(this.valueTypes[l],t)}var u=s[l];if(u===undefined||u===null){u=t?t.parseValue("","string"):""}var p=this._formatValue(u,t,i);if(typeof p==="string"){p=p.replace(/\$/g,"$$$")}n=n.replace(new RegExp("\\$"+l+"|"+l+"\\$"+"|"+"\\{"+l+"\\}","g"),p)}}return n};v.prototype._formatValue=function(e,t,a){var r;if(t){if(t.isA("sap.ui.model.CompositeType")&&t.getUseInternalValues()&&Array.isArray(e)&&a){e=o([],e);for(var i=0;i<e.length;i++){if(a[i]){var s=a[i].getModelFormat();if(s&&typeof s.parse==="function"){e[i]=s.parse(e[i])}}}}r=t.formatValue(e,"string")}else{r=e}return r};v.prototype.parse=function(e,t,a,r,s){var o=this.getValues(e,a,r);var n;if(o){n=[];for(var l=0;l<this.valueTypes.length;l++){if(this.valueTypes[l]&&[v.ValueType.Self,v.ValueType.Static].indexOf(this.valueTypes[l])===-1){t=this._createLocalType(this.valueTypes[l],t)}try{if(this.valueTypes[l]!==v.ValueType.Static){var u;if(this.valueTypes[l]){u=this._parseValue(o[l],t,s)}else{u=o[l]}n.push(u)}}catch(e){i.warning(e.message);throw e}}}return n};v.prototype._parseValue=function(e,t,a){if(e===undefined){return e}var r;if(t&&t.isA("sap.ui.model.CompositeType")&&t._aCurrentValue&&t.getParseWithValues()){r=t._aCurrentValue}var i=t?t.parseValue(e,"string",r):e;if(t&&t.isA("sap.ui.model.CompositeType")&&Array.isArray(i)&&(t._aCurrentValue||t.getUseInternalValues()&&a)){for(var s=0;s<i.length;s++){if(i[s]===undefined&&t._aCurrentValue){i[s]=t._aCurrentValue[s]===undefined?null:t._aCurrentValue[s]}else if(t.getUseInternalValues()&&a&&a[s]){var o=a[s].getModelFormat();if(o&&typeof o.format==="function"){i[s]=o.format(i[s])}}}}return i};v.prototype.validate=function(e,t,a,r){var i=this.valueTypes.length;for(var s=0;s<i;s++){if(this.valueTypes[s]&&this.valueTypes[s]!==v.ValueType.Static){if([v.ValueType.Self,v.ValueType.Static].indexOf(this.valueTypes[s])===-1){t=this._createLocalType(this.valueTypes[s],t)}if(e.length<s+1){throw new Error("value "+s+" for operator "+this.getName()+" missing")}if(t){var n=e[s];if(n===undefined||n===null){n=t?t.parseValue("","string"):""}if(t.isA("sap.ui.model.CompositeType")&&Array.isArray(n)&&a){n=o([],n);for(var l=0;l<n.length;l++){if(a[l]){if(r===undefined||l===r){a[l].validateValue(n[l])}if(t.getUseInternalValues()){var u=a[l].getModelFormat();if(u&&typeof u.parse==="function"){n[l]=u.parse(n[l])}}}}}t.validateValue(n)}}}};v.prototype._createLocalType=function(e,t){if(!this._aTypes){this._aTypes=[]}var a;var r;var i;var l;if(e===v.ValueType.SelfNoParse){a=t.getMetadata().getName();r=o({},t.getFormatOptions());i=o(t.getConstraints())}else if(typeof e==="string"){a=e}else if(e&&typeof e==="object"){a=e.name;r=e.formatOptions;i=e.constraints}for(var u=0;u<this._aTypes.length;u++){var p=this._aTypes[u];if(p.name===a&&n(p.formatOptions,r)&&n(p.constraints,i)){l=p.type;break}}if(!l){var f=s.get(a||"");l=new f(r,i);l._bCreatedByOperator=true;if(e===v.ValueType.SelfNoParse){l.parseValue=function(e,t){f.prototype.parseValue.apply(this,arguments);return e};l.validateValue=function(e){var t=f.prototype.parseValue.apply(this,[e,"string"]);f.prototype.validateValue.apply(this,[t])};l.formatValue=function(e,t){f.prototype.formatValue.apply(this,arguments);return e}}this._aTypes.push({name:a,formatOptions:r,constraints:i,type:l})}return l};v.prototype.test=function(e){return this.tokenParseRegExp.test(e)};v.prototype.getValues=function(e,t,a){var r=e.match(this.tokenParseRegExp);var i;if(r||a&&e){i=[];for(var s=0;s<this.valueTypes.length;s++){var o;if(r){o=r[s+1]}else if(a){if(s>0){break}o=e}i.push(o)}}return i};v.prototype.getCondition=function(e,t,a,i,s){if(this.test(e)||i&&e&&this.hasRequiredValues()){var o=this.parse(e,t,a,i,s);if(o.length==this.valueTypes.length||this.valueTypes[0]===v.ValueType.Static||o.length===1&&this.valueTypes.length===2&&!this.valueTypes[1]){var n=l.createCondition(this.name,o);this.checkValidated(n);return n}else{throw new r("Parsed value don't meet operator")}}return null};v.prototype.isSingleValue=function(){if(this.valueTypes.length>1&&this.valueTypes[1]){return false}return true};v.prototype.getCheckValue=function(e){if(this.valueTypes[0]&&this.valueTypes[0]===v.ValueType.Static){return{}}else{return{values:e.values}}};v.prototype.hasRequiredValues=function(){if(this.valueTypes[0]&&this.valueTypes[0]!==v.ValueType.Static){return true}else{return false}};v.prototype.compareConditions=function(e,t){var a=false;if(e.operator===this.name&&e.operator===t.operator){var r=this.getCheckValue(e);var i=this.getCheckValue(t);if(e.inParameters&&t.inParameters){r.inParameters=e.inParameters;i.inParameters=t.inParameters}if(e.outParameters&&t.outParameters){r.outParameters=e.outParameters;i.outParameters=t.outParameters}if(e.payload||t.payload){r.payload=e.payload;i.payload=t.payload}if(e.validated&&t.validated){r.validated=e.validated;i.validated=t.validated}var s=h(r);var o=h(i);if(s===o){a=true}}return a};v.prototype.checkValidated=function(e){e.validated=u.NotValidated};v.prototype._enableOverwrites=function(e){this._oMethodOverwrites={};["format","parse","validate","getModelFilter","isEmpty","createControl","getCheckValue","getValues","checkValidated","getLongText"].forEach(function(t){Object.defineProperty(this,t,{get:function(){return this._oMethodOverwrites&&this._oMethodOverwrites[t]||Object.getPrototypeOf(this)[t]}});if(e&&e[t]){this._oMethodOverwrites[t]=e[t]}}.bind(this))};var c=Object.values(f);v.prototype.overwrite=function(e,t){if(c.indexOf(e)>=0){var a=this[e];this._oMethodOverwrites[e]=t;return a.bind(this)}throw"Operator: Illegal overwrite detected. Please see sap.ui.mdc.enum.OperatorOverwrite"};return v});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/condition/OperatorDynamicDateOption", ["sap/m/DynamicDateOption","sap/m/DynamicDateValueHelpUIType","sap/m/Input","sap/ui/mdc/condition/Operator","sap/ui/mdc/enum/BaseType","sap/ui/mdc/enum/FieldDisplay","sap/ui/mdc/util/DateUtil","sap/ui/mdc/util/loadModules","sap/ui/model/json/JSONModel","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/core/library"],function(e,t,a,r,o,s,i,p,l,n,u,y,v){"use strict";var h=v.ValueState;var f;var d;var g=e.extend("sap.ui.mdc.condition.OperatorDynamicDateOption",{metadata:{library:"sap.ui.mdc",properties:{operator:{type:"object"},type:{type:"object"},baseType:{type:"sap.ui.mdc.enum.BaseType"}}}});g.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this._oModel){this._oModel.destroy();this._oModel=undefined;this._mChangeHandler=undefined}if(this._aUITypes){for(var t=0;t<this._aUITypes.length;t++){this._aUITypes[t].destroy()}this._aUITypes=undefined}};g.prototype.applySettings=function(){e.prototype.applySettings.apply(this,arguments);var t=[];var a=this.getBaseType();if(a===o.DateTime){if(!d){t.push("sap/m/DateTimePicker")}}else if(!f){t.push("sap/m/DatePicker")}if(t.length>0){return p(t).then(function(e){if(a===o.DateTime){d=e[0]}else{f=e[0]}})}};g.prototype.validateProperty=function(t,a){if(t==="operator"&&a&&(typeof a!=="object"||!a.isA||!a.isA("sap.ui.mdc.condition.Operator"))){throw new Error('"'+a+'" is of type '+typeof a+", expected "+'sap.ui.mdc.condition.Operator for property "'+t+'" of '+this)}else if(t==="type"&&a&&(typeof a!=="object"||!a.isA||!a.isA("sap.ui.model.Type"))){throw new Error('"'+a+'" is of type '+typeof a+", expected "+'sap.ui.model.Type for property "'+t+'" of '+this)}return e.prototype.validateProperty.apply(this,arguments)};g.prototype.isRange=function(){var e=this.getOperator();return e.isA("sap.ui.mdc.condition.RangeOperator")};g.prototype.getText=function(e){var t=this.getOperator();var a=this.getBaseType();return t.getLongText(a)};g.prototype.getValueHelpUITypes=function(e){if(!this._aUITypes){var a=this.getOperator();var s=this.getType();var i=this.getBaseType();this._aUITypes=[];for(var p=0;p<a.valueTypes.length;p++){var l=a.valueTypes[p];if(l===r.ValueType.Self){var n;if(i===o.DateTime){n="datetime"}else{n="date"}this._aUITypes.push(new t({type:n}))}else if(!l||l===r.ValueType.Static){continue}else{s=a._createLocalType(l,s);if(s.isA("sap.ui.model.type.Integer")||s.isA("sap.ui.model.odata.type.Int")){this._aUITypes.push(new t({type:"int"}))}else{this._aUITypes.push(new t({type:"custom"}))}}}}return this._aUITypes};g.prototype.createValueHelpUI=function(e,t){var s=e.getValue();var p=this.getOperator();var n=this.getType();var u=this.getKey();var y=e.getId();if(!s||s.operator!==u){s={operator:u,values:[]};if(p.valueDefaults){s.values=p.valueDefaults}}c.call(this,e);if(!e.aControlsByParameters){e.aControlsByParameters={}}e.aControlsByParameters[u]=[];var v=function(e){t(this)}.bind(this);for(var h=0;h<p.valueTypes.length;h++){var g=p.valueTypes[h];var m=this.getBaseType();var T;if(!g){continue}if(!e.aControlsByParameters[u][h]){if(p.createControl){if(!this._oModel){v=function(e){var t=e.getParameter("path");var a=t.split("/");var r=a[0]||a[1];if(this._mChangeHandler&&this._mChangeHandler[r]){this._mChangeHandler[r](this)}}.bind(this);this._oModel=new l;this._oModel.attachPropertyChange({},v,this);this._mChangeHandler={}}var _=this._oModel.getData();_[y]={value0:s&&s.values[0],value1:s&&s.values[1]};this._mChangeHandler[y]=t;if(g!==r.ValueType.Self){n=p._createLocalType(g,n)}var V=p.createControl(n,"internal>/"+y+"/value"+h,h,y+"-"+h);V.setModel(this._oModel,"internal");e.aControlsByParameters[u].push(V)}else if(g===r.ValueType.Self){if(s&&s.values[h]){T=i.typeToDate(s.values[h],n,m)}var C=n.getFormatOptions();var O;if(m===o.DateTime){O=d}else{O=f}var B=new O(y+"-"+h,{dateValue:T,displayFormat:C.style||C.pattern,displayFormatType:C.calendarType,change:v});e.aControlsByParameters[u].push(B)}else if(typeof g==="object"){n=p._createLocalType(p.valueTypes[h],n);var P=n.formatValue(s&&s.values[h],"string");var D=new a(y+"-"+h,{value:P,change:v});e.aControlsByParameters[u].push(D)}}}return e.aControlsByParameters[u]};g.prototype.validateValueHelpUI=function(e){var t=this.getKey();var a=this.getOperator();var r=this.getType();var o;var s=true;var i=h.None;var p;var l=0;try{o=this.getValueHelpOutput(e);for(l=0;l<o.values.length;l++){var n=o.values[l];if(n===undefined||n===null){s=false}}a.validate(o.values,r)}catch(e){s=false;i=h.Error;p=e.message;if(e&&!(e instanceof u)&&!(e instanceof y)){throw e}}if(!a.createControl){for(l=0;l<e.aControlsByParameters[t].length;l++){var v=e.aControlsByParameters[t][l];if(v.setValueState){v.setValueState(i);v.setValueStateText(p)}}}return s};g.prototype.getValueHelpOutput=function(e){var t=this.getKey();var a={operator:t,values:[]};var o=this.getOperator();var s=this.getType();var p=this.getBaseType();var l=e.getId();for(var n=0;n<o.valueTypes.length;n++){if(!o.valueTypes[n]){continue}var y=e.aControlsByParameters[t][n];if(y){var v;if(o.createControl){v=this._oModel?this._oModel.getProperty("/"+l+"/value"+n):null}else if(o.valueTypes[n]===r.ValueType.Self){if(!y.isValidValue()){throw new u}v=y.getDateValue();if(v){v=i.dateToType(v,s,p)}}else{v=y.getValue();s=o._createLocalType(o.valueTypes[n],s);v=s.parseValue(v,"string")}a.values.push(v)}}return a};g.prototype.getGroupHeader=function(){var t=this.getOperator();if(t.group&&t.group.text){return t.group.text}return e.prototype.getGroupHeader.apply(this,arguments)};g.prototype.getGroup=function(){var t=this.getOperator();if(t.group){return t.group.id}return e.prototype.getGroup.apply(this,arguments)};g.prototype.toDates=function(e){var t=this.getOperator();var a=this.getType();var o=this.getBaseType();var s;var p=0;if(t.isA("sap.ui.mdc.condition.RangeOperator")){s=t._getRange(e&&e.values,a,o);for(p=0;p<s.length;p++){s[p]=i.typeToDate(s[p],a,o)}}else if(t.valueTypes.length===0){s=[]}else if(t.valueTypes[0]===r.ValueType.Self){s=[];for(p=0;p<e.values.length;p++){s.push(e.values[p]?i.typeToDate(e.values[p],a,o):e.values[p])}if(s.length===1){s.push(s[0])}}else if([r.ValueType.Self,r.ValueType.Static].indexOf(t.valueTypes[0])===-1){throw new Error("Cannot convert to date, use RangeOperator")}return s};g.prototype.format=function(e){var t=this.getOperator();var a=this.getType();return t.format(e,a,s.Value)};g.prototype.parse=function(e){var t=this.getOperator();var a=this.getType();if(e&&t.parse(e)){var r={};r.operator=this.getKey();r.values=t.parse(e,a,s.Value);return r}};g.prototype.enhanceFormattedValue=function(e,t){return false};function c(e){var t=this.getKey();if(e&&e.aControlsByParameters&&e.aControlsByParameters[t]){for(var a=0;a<e.aControlsByParameters[t].length;a++){var r=e.aControlsByParameters[t][a];if(!r.bIsDestroyed){r.destroy()}}delete e.aControlsByParameters[t]}}return g});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/condition/RangeOperator", ["sap/ui/mdc/condition/Operator","sap/ui/mdc/util/DateUtil","sap/ui/model/Filter","sap/base/Log"],function(e,t,a,i){"use strict";var n=e.extend("sap.ui.mdc.condition.RangeOperator",{constructor:function(t){t.filterOperator="RANGE";t.tokenParse=t.tokenParse||"^#tokenText#$";t.tokenFormat=t.tokenFormat||"#tokenText#";e.apply(this,arguments);if(this.paramTypes){if(t.defaultValues!==undefined){if(Array.isArray(t.defaultValues)){this.valueDefaults=t.defaultValues}else{this.valueDefaults=t.defaultValues()}}else{this.paramTypes.forEach(function(e){if(!this.valueDefaults){this.valueDefaults=[]}this.valueDefaults.push(1)}.bind(this))}}if(t.label!==undefined){this.aLabels=t.label}if(t.calcRange){this.calcRange=t.calcRange}if(t.formatRange){this.formatRange=t.formatRange}else if(this.calcRange){this.formatRange=function(e,t){return t.formatValue(e[0],"string")+" - "+t.formatValue(e[1],"string")}}}});n.prototype.getModelFilter=function(e,t,i,n,r){var s=this._getRange(e.values,i,r);return new a({path:t,operator:"BT",value1:s[0],value2:s[1]})};n.prototype._getRange=function(e,a,i){var n;if(e){if(e.length===2){n=this.calcRange(e[0],e[1])}else{n=this.calcRange(e[0])}}else{n=this.calcRange()}for(var r=0;r<2;r++){n[r]=t.dateToType(n[r].getJSDate(),a,i)}return n};n.prototype.getStaticText=function(e){var t=this._getRange(null,e);return this.formatRange(t,e)};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/ActionToolbarActionAlignment", function(){"use strict";var n={Begin:"Begin",End:"End"};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/BaseType", function(){"use strict";var e={String:"String",Numeric:"Numeric",Boolean:"Boolean",Date:"Date",Time:"Time",DateTime:"DateTime",Unit:"Unit"};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/ConditionValidated", function(){"use strict";var t={NotValidated:"NotValidated",Validated:"Validated"};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/ContentMode", function(){"use strict";var i={Display:"Display",DisplayMultiValue:"DisplayMultiValue",DisplayMultiLine:"DisplayMultiLine",Edit:"Edit",EditMultiValue:"EditMultiValue",EditMultiLine:"EditMultiLine",EditOperator:"EditOperator",EditForHelp:"EditForHelp"};return i},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/EditMode", function(){"use strict";var a={Display:"Display",Editable:"Editable",ReadOnly:"ReadOnly",Disabled:"Disabled",EditableReadOnly:"EditableReadOnly",EditableDisplay:"EditableDisplay"};return a},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/FieldDisplay", function(){"use strict";var e={Value:"Value",Description:"Description",ValueDescription:"ValueDescription",DescriptionValue:"DescriptionValue"};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/FilterBarValidationStatus", function(){"use strict";var e={NoError:-1,RequiredHasNoValue:0,FieldInErrorState:1,AsyncValidation:2,OngoingChangeAppliance:3};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/OperatorOverwrite", function(){"use strict";var e={getModelFilter:"getModelFilter",getLongText:"getLongText"};return e},true);
/*
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/PersistenceMode", function(){"use strict";var t={Global:"Global",Auto:"Auto",Transient:"Transient"};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/ProcessingStrategy", function(){"use strict";var e={Add:false,PartialReplace:true,FullReplace:"FullReplace"};return e},true);
/*
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/PropagationReason", function(){"use strict";var e={ControlChange:"ControlChange",Select:"Select",Info:"Info"};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/ReasonMode", function(){"use strict";var r={Variant:"Variant",Enter:"Enter",Go:"Go",Unclear:""};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/SelectType", function(){"use strict";var e={Set:"Set",Add:"Add",Remove:"Remove"};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/ConditionType", ["sap/ui/model/SimpleType","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/type/String","sap/ui/mdc/enum/FieldDisplay","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/ConditionValidateException","sap/ui/mdc/enum/BaseType","sap/ui/mdc/enum/ConditionValidated","sap/base/util/merge","sap/base/strings/whitespaceReplacer","sap/ui/base/SyncPromise"],function(e,t,a,i,r,n,o,s,l,u,f,d,c,h,p){"use strict";var v="sap.ui.mdc.raw";var m="sap.ui.mdc.raw:";var g=e.extend("sap.ui.mdc.field.ConditionType",{constructor:function(t,a){e.apply(this,arguments);this.sName="Condition";this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._oCalls={active:0,last:0,condition:undefined,exception:undefined}}});g.prototype.destroy=function(){e.prototype.destroy.apply(this,arguments);if(this._oDefaultType){this._oDefaultType.destroy();delete this._oDefaultType}this._bDestroyed=true};g.prototype.formatValue=function(e,a){if(e==undefined||e==null||this._bDestroyed){return null}if(typeof e!=="object"||!e.operator||!e.values||!Array.isArray(e.values)){throw new t("No valid condition provided")}if(!a){a="string"}var i=T.call(this);var r=S(i);var s=this.oFormatOptions.preventGetDescription;A.call(this,e,i);switch(this.getPrimitiveType(a)){case"string":case"any":var l=F.call(this);var u=D.call(this);var f=o.getEQOperator(u);if(!this.oFormatOptions.maxConditions||this.oFormatOptions.maxConditions===1){this._oCalls.active++;this._oCalls.last++}var h=this._oCalls.last;if(!s&&l!==n.Value&&e.validated===d.Validated&&(r||e.operator===f.name&&!e.values[1])){var m=this.oFormatOptions.bindingContext;var g=r?e.values[0][1]:e.values[0];return p.resolve().then(function(){return L.call(this,g,e,i,m)}.bind(this)).then(function(t){if(t){e=c({},e);if(r){i=P.call(this);e.operator=f.name;if(typeof t!=="object"){t={key:g,description:t}}}if(typeof t==="object"){e=Q.call(this,e,t)}else if(e.values.length===1){e.values.push(t)}else{e.values[1]=t}}return C.call(this,e,undefined,h,true,i)}.bind(this)).catch(function(a){var r;if(!(a instanceof t)||!j.call(this)){r=a}return C.call(this,e,r,h,true,i)}.bind(this)).unwrap()}return C.call(this,e,undefined,h,true,i);default:var y=z(a);if(y>=0){if(N.call(this,i)){return e.values.length>=1?e.values[0][y]:null}}else if(a===v){return e.values.length>=1?e.values[0]:null}else if(i&&e.values.length>=1){return i.formatValue(e.values[0],a)}throw new t("Don't know how to format Condition to "+a)}};function y(e,a){var i=F.call(this);var r=S(a);if(r&&e.values.length>1&&e.values[0][1]===e.values[1][1]){e=c({},e);e.operator="EQ";e.values.splice(1)}var s=this.oFormatOptions.hideOperator&&e.values.length===1||r;var l=o.getOperator(e.operator);var u=I.call(this);if(!l){throw new t("No valid condition provided, Operator wrong.")}var d=l.format(e,a,i,s,u);var p=this.oFormatOptions.convertWhitespaces;if(p&&(U.call(this,a)===f.String||i!==n.Value)){d=h(d)}return d}function C(e,t,a,i,r){if(this._oCalls.active>0){this._oCalls.active--}if(a<this._oCalls.last&&(this._oCalls.condition!==undefined||this._oCalls.exception!==undefined)){e=this._oCalls.condition;t=this._oCalls.exception}if(a===this._oCalls.last&&this._oCalls.active>0){this._oCalls.condition=c({},e);this._oCalls.exception=t}else if(this._oCalls.active===0&&this._oCalls.last>0){this._oCalls={active:0,last:0,condition:undefined,exception:undefined}}if(t){throw t}var n;if(i){n=y.call(this,e,r)}else{n=O.call(this,e,r)}return n}g.prototype.parseValue=function(e,t){if(this._bDestroyed){return null}if(!t){t="string"}else if(t==="any"&&typeof e==="string"){t="string"}var i=this.oFormatOptions.navigateCondition;if(i){var r=this.formatValue(i,t);if(r===e){return c({},i)}}var n=F.call(this);var s=R.call(this);var u=T.call(this);var f=b.call(this);var h=D.call(this);var p=S(u);var m;if(e===null||e===undefined||e===""&&!s){if(!N.call(this,u)){return null}}k.call(this,u);switch(this.getPrimitiveType(t)){case"string":var g;var y=false;var O=false;if(h.length===1){g=o.getOperator(h[0]);O=true}else{var w=o.getMatchingOperators(h,e);if(w.length===0){g=q.call(this,h,u);if(s&&!N.call(this,u)){var _=o.getEQOperator(h);if(h.indexOf(_.name)>=0){y=!!g&&g.name!==_.name;g=_}}O=true}else{var P=w.filter(function(e){return e.valueTypes.length===0});if(P.length>=1){g=P[0]}else{g=w[0]}}}if(g){if(p&&g!==o.getEQOperator(h)){throw new a("unsupported operator")}var x;var E=N.call(this,u);var A=I.call(this);this._oCalls.active++;this._oCalls.last++;var Q=this._oCalls.last;if((!E||p)&&g.validateInput&&s){x=V.call(this,g,e,u,O,y,h,n,true);if(x instanceof Promise){return B.call(this,x)}else{return x}}else{try{if(e===""&&E&&O){x=l.createCondition(g.name,[u.parseValue(e,"string",u._aCurrentValue)],undefined,undefined,d.NotValidated)}else{x=g.getCondition(e,u,n,O,A)}}catch(t){var U=t;if(U instanceof a&&f&&!E){try{f.parseValue(e,"string",f._aCurrentValue)}catch(e){U=e}}return C.call(this,undefined,U,Q,false,u)}}if(x){return C.call(this,x,undefined,Q,false,u)}}throw new a("Cannot parse value "+e);default:if(u){if(h.length===1){m=h[0]}else{m=q.call(this,h,u).name;if(h.indexOf(m)<0){m=undefined}}if(m){var j=z(t);if(j>=0){if(N.call(this,u)){var M=c([],u._aCurrentValue);M[j]=e;return l.createCondition(m,[M],undefined,undefined,d.NotValidated)}}else if(t===v){return l.createCondition(m,[e],undefined,undefined,d.NotValidated)}else{return l.createCondition(m,[u.parseValue(e,t)],undefined,undefined,d.NotValidated)}}}throw new a("Don't know how to parse Condition from "+t)}};function O(e,t){var a=S(t);var i=N.call(this,t);if(e&&!a&&i){var r=b.call(this)||t;var n=r.getMetadata().getName();var o=r.getFormatOptions();var s=r.getConstraints();var l=this.oFormatOptions.delegate;var u=this.oFormatOptions.payload;var d=l&&l.getTypeUtil(u).getBaseType(n,o,s);if((d===f.Unit||d===f.DateTime)&&!e.values[0][1]&&t._aCurrentValue){var c=t._aCurrentValue[1]?t._aCurrentValue[1]:null;e.values[0][1]=c;if(e.operator==="BT"){e.values[1][1]=c}}}A.call(this,e,t);return e}function V(e,r,o,u,f,c,h,v){var m;var g;var y=true;var O=false;var F;var T;var P=this.oFormatOptions.bindingContext;var b;if(r===""){b=[];m=r;F=r}else{b=e.getValues(r,h,u);m=v?b[0]:b[1];g=v?b[1]:b[0];O=h!==n.Value;F=m||g}var x=function(i){if(i&&!(i instanceof a)&&!(i instanceof t)){throw i}if(!i._bNotUnique){if(r===""){return null}if(v&&b[0]&&b[1]){return V.call(this,e,r,o,u,f,c,h,false)}if(f){return w.call(this,o,c,r,h)}}if(j.call(this)){return _.call(this,o,c,r,h)}throw new a(i.message)};var D=function(t){if(t){var i=[t.key];if(e.valueTypes.length>1&&e.valueTypes[1]!==s.ValueType.Static){i.push(t.description)}return l.createCondition(e.name,i,t.inParameters,t.outParameters,d.Validated,t.payload)}else if(r===""){return null}else{return x.call(this,new a(this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[r])))}};var E=this._oCalls.last;var N=function(t,i){var n;var s;try{n=i.call(this,t);if(S(o)){if(n){if(n.operator!=="EQ"){throw new a("unsupported operator")}var u=o._aCurrentValue&&o._aCurrentValue[0]!==undefined?o._aCurrentValue[0]:null;var f=n.values[0];n.values=[[u,f]]}else if(r===""){n=l.createCondition(e.name,[o.parseValue(r,"string",o._aCurrentValue)],undefined,undefined,d.NotValidated)}}}catch(e){s=e}return C.call(this,n,s,E,false,o)};try{if(S(o)){T=o.parseValue(F,"string",o._aCurrentValue);o.validateValue(T);T=T[1]}else{T=o.parseValue(F,"string");o.validateValue(T)}}catch(e){if(e&&!(O&&(e instanceof a||e instanceof i))){throw e}y=false;T=undefined}return p.resolve().then(function(){return M.call(this,F,T,o,P,y,O)}.bind(this)).then(function(e){return N.call(this,e,D)}.bind(this)).catch(function(e){return N.call(this,e,x)}.bind(this)).unwrap()}function w(e,t,a,i){var r=q.call(this,t,e);var o;if(r&&t.indexOf(r.name)>=0){o=r.getCondition(a,e,n.Value,true);o.validated=d.NotValidated}return o}function _(e,t,i,r){var s;if(S(e)){s=o.getEQOperator("EQ")}else if(t.length===1){s=o.getOperator(t[0])}else{s=o.getEQOperator(t);if(t.indexOf(s.name)<0){s=undefined}}if(!s){throw new a("Cannot parse value "+i)}var l=s.getCondition(i,e,n.Value,true);if(l){l.validated=d.NotValidated;if(S(e)&&Array.isArray(l.values[0])){l.values[0]=l.values[0][1]}}return l}g.prototype.validateValue=function(e){var t=T.call(this);var a=b.call(this);var r=D.call(this);var n=S(t);var s=N.call(this,t);var l=I.call(this);var f=0;if(e===undefined||this._bDestroyed){return null}else if(e===null){if(o.onlyEQ(r)){try{if(t.hasOwnProperty("_sParsedEmptyString")&&t._sParsedEmptyString!==null){t.validateValue(t._sParsedEmptyString)}else{t.validateValue(null)}}catch(e){if(e instanceof i){throw new u(e.message,e.violatedConstraints,null)}else{return null}}}return null}if(typeof e!=="object"||!e.operator||!e.values||!Array.isArray(e.values)){throw new u(this._oResourceBundle.getText("field.VALUE_NOT_VALID"),undefined,typeof e==="object"?c({},e):e)}var d=o.getOperator(e.operator);if(n){d=o.getEQOperator();f=1}if(!d||r.indexOf(d.name)===-1){throw new u("No valid condition provided, Operator wrong.",undefined,c({},e))}try{d.validate(e.values,t,l,f)}catch(t){try{if(t instanceof i&&a&&!s){d.validate(e.values,a,l,f)}throw t}catch(t){if(t instanceof i){throw new u(t.message,t.violatedConstraints,c({},e))}throw t}}};function F(){var e=this.oFormatOptions.display;if(!e){e=n.Value}return e}function T(){var e=this.oFormatOptions.valueType;if(!e){e=P.call(this)}return e}function P(){if(!this._oDefaultType){this._oDefaultType=new r}return this._oDefaultType}function b(){return this.oFormatOptions.originalDateType}function x(){return this.oFormatOptions.additionalType}function D(){var e=this.oFormatOptions.operators;if(!e||e.length===0){e=o.getOperatorsForType(f.String)}return e}function E(){var e=this.oFormatOptions.fieldHelpID;if(e){var t=sap.ui.getCore().byId(e);if(t&&t.isValidationSupported()){return t}}return null}function N(e){return e&&e.isA("sap.ui.model.CompositeType")}function I(){return this.oFormatOptions.compositeTypes}function S(e){if(N(e)){var t=e.getFormatOptions();var a=!t||!t.hasOwnProperty("showMeasure")||t.showMeasure;var i=!t||!t.hasOwnProperty("showNumber")||t.showNumber;var r=!t||!t.hasOwnProperty("showTimezone")||t.showTimezone;var n=!t||!t.hasOwnProperty("showDate")||t.showDate;var o=!t||!t.hasOwnProperty("showTime")||t.showTime;if(a&&!i||r&&!n&&!o){return true}}return false}function A(e,t){if(N.call(this,t)&&e&&e.values[0]){t._aCurrentValue=c([],e.values[0]);var a=x.call(this);if(N.call(this,a)){a._aCurrentValue=c([],e.values[0])}var i=b.call(this);if(N.call(this,i)){i._aCurrentValue=c([],e.values[0])}}}function k(e){if(N.call(this,e)){var t=x.call(this);if(N.call(this,t)){if(!t._aCurrentValue){t._aCurrentValue=[]}e._aCurrentValue=t._aCurrentValue}}}function Q(e,t){e.values=[t.key,t.description];if(t.inParameters){e.inParameters=t.inParameters}if(t.outParameters){e.outParameters=t.outParameters}if(t.payload){e.payload=t.payload}return e}function B(e){if(this.oFormatOptions.asyncParsing){this.oFormatOptions.asyncParsing(e)}return e}function U(e){var t=e.getMetadata().getName();var a=e.getFormatOptions();var i=e.getConstraints();var r=this.oFormatOptions.delegate;var n=this.oFormatOptions.payload;var o=r?r.getTypeUtil(n).getBaseType(t,a,i):f.String;if(o===f.Unit){o=f.Numeric}return o}function R(){var e=E.call(this);var t=this.oFormatOptions.delegate;var a=this.oFormatOptions.payload;if(t){return t.isInputValidationEnabled(a,e)}else{return!!e}}function j(){var e=E.call(this);var t=this.oFormatOptions.delegate;var a=this.oFormatOptions.payload;if(t){return t.isInvalidInputAllowed(a,e)}else if(e){return!e.getValidateInput()}else{return true}}function M(e,t,i,r,n,o){var s=E.call(this);var l=this.oFormatOptions.delegate;var u=this.oFormatOptions.payload;var f=this.oFormatOptions.control;var d={value:e,parsedValue:t,dataType:i,inParameters:undefined,outParameters:undefined,bindingContext:r,checkKey:n,checkDescription:o,exception:a,control:f};if(l){return l.getItemForValue(u,s,d)}else if(s){return s.getItemForValue(d)}}function L(e,a,i,r){var n=E.call(this);var o=this.oFormatOptions.delegate;var s=this.oFormatOptions.payload;var l=this.oFormatOptions.control;if(o){return o.getDescription(s,n,e,a.inParameters,a.outParameters,r,undefined,undefined,a.payload,l,i)}else if(n){var u={value:e,parsedValue:e,dataType:i,context:{inParameters:a.inParameters,outParameters:a.outParameters,payload:a.payload},bindingContext:r,checkKey:true,checkDescription:false,caseSensitive:true,exception:t,control:l};return n.getItemForValue(u)}}function q(e,t){var a=this.oFormatOptions.defaultOperatorName;var i;if(a){i=o.getOperator(a)}else{i=o.getDefaultOperator(U.call(this,t))}if(i&&e.indexOf(i.name)<0){for(var r=0;r<e.length;r++){i=o.getOperator(e[r]);if(i.exclude||!i.hasRequiredValues()){i=undefined}else{break}}}return i}function z(e){var t=-1;if(e.startsWith(m)){t=parseInt(e[m.length])}return t}return g});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/ConditionsType", ["sap/ui/mdc/field/ConditionType","sap/ui/mdc/condition/ConditionValidateException","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/model/SimpleType","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/base/util/merge","sap/ui/base/SyncPromise"],function(t,e,i,n,o,s,r,a,u){"use strict";var l=n.extend("sap.ui.mdc.field.ConditionsType",{constructor:function(e,i){n.apply(this,arguments);this.sName="Conditions";e=p(e);this._oConditionType=new t(e,this.oConstraints);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")}});l.prototype.destroy=function(){n.prototype.destroy.apply(this,arguments);if(this._oConditionType){this._oConditionType.destroy();this._oConditionType=undefined}this._bDestroyed=true};l.prototype.setFormatOptions=function(t){n.prototype.setFormatOptions.apply(this,arguments);t=p(t);if(this._oConditionType){this._oConditionType.setFormatOptions(t)}};function p(t){t=a({},t);if(t.asyncParsing){delete t.asyncParsing}return t}l.prototype.setConstraints=function(t){n.prototype.setConstraints.apply(this,arguments);if(this._oConditionType){this._oConditionType.setConstraints(this.oConstraints)}};l.prototype.formatValue=function(t,e){if(t==undefined||t==null||this._bDestroyed){return null}if(!Array.isArray(t)){throw new o("No valid conditions provided")}var i;if(!e||e==="string"||e==="any"){i=""}else if(e==="float"||e==="int"){i=0}if(v.call(this)){return m.call(this)||i}var n=f.call(this);var s=[];var r=function(t,e){return u.resolve().then(function(){return this._oConditionType.formatValue(t,e)}.bind(this))};for(var a=0;a<t.length;a++){s.push(r.call(this,t[a],e));if(n>0&&a>=n-1){break}}return u.all(s).then(function(t){return d.call(this,t,i)}.bind(this)).unwrap()};function d(t,e){for(var i=0;i<t.length;i++){if(e){e=e+this._oResourceBundle.getText("field.SEPARATOR")+t[i]}else{e=t[i]}}return e}l.prototype.parseValue=function(t,e){if(this._bDestroyed){return null}if(v.call(this)&&t===""){return this.oFormatOptions.getConditions?this.oFormatOptions.getConditions():[]}var i=u.resolve().then(function(){return this._oConditionType.parseValue(t,e)}.bind(this)).then(function(t){return h.call(this,t)}.bind(this)).unwrap();if(i instanceof Promise&&this.oFormatOptions.asyncParsing){this.oFormatOptions.asyncParsing(i)}return i};function h(t){var e=c(this.oFormatOptions.valueType);var n=this.oFormatOptions.getConditions&&this.oFormatOptions.getConditions();var o=f.call(this);if(o!==1&&this.oFormatOptions.getConditions){if(t){if(y(this.oFormatOptions.valueType)&&!e&&n.length===1&&(n[0].values[0][0]===null||n[0].values[0][0]===undefined||n[0].values[0][1]===null||n[0].values[0][1]===undefined)&&(t.values[0][0]!==null&&t.values[0][0]!==undefined&&t.values[0][1]!==null&&t.values[0][1]!==undefined)){n.splice(0,1)}if(i.indexOfCondition(t,n)===-1){n.push(t)}else{throw new s(this._oResourceBundle.getText("field.CONDITION_ALREADY_EXIST",[t.values[0]]))}if(o>0&&o<n.length){n.splice(0,n.length-o)}}return n}else if(e&&this.oFormatOptions.getConditions&&n.length>1){var r=t&&t.values[0][1];var a=t&&t.inParameters;var u=t&&t.outParameters;var l=t&&t.payload;for(var p=0;p<n.length;p++){n[p].values[0][1]=r;if(r===undefined){n[p].values[0][0]=t.values[0][0]}n[p].values[0].splice(2);if(n[p].operator==="BT"){n[p].values[1][1]=r;if(r===undefined){n[p].values[1][0]=t.values[0][0]}n[p].values[1].splice(2)}if(a||n[p].inParameters){n[p].inParameters=a}if(u||n[p].outParameters){n[p].outParameters=u}if(l||n[p].payload){n[p].payload=l}}if(n.length===0){n.push(t)}return n}else if(t){return[t]}else{return[]}}l.prototype.validateValue=function(t){if(t===undefined||t===null||this._bDestroyed){return}if(!Array.isArray(t)){throw new e("No valid conditions provided",undefined,undefined,t)}try{for(var i=0;i<t.length;i++){var n=t[i];this._oConditionType.validateValue(n)}var o=f.call(this);if(t.length===0&&o===1){this._oConditionType.validateValue(null)}}catch(i){if(i instanceof e){i.setConditions(t)}else if(i instanceof r){throw new e(i.message,i.violatedConstraints,a({},n))}throw i}};function f(){var t=1;if(this.oFormatOptions.hasOwnProperty("maxConditions")){t=this.oFormatOptions.maxConditions}return t}function c(t){if(y(t)){var e=t.getFormatOptions();var i=!e||!e.hasOwnProperty("showMeasure")||e.showMeasure;var n=!e||!e.hasOwnProperty("showNumber")||e.showNumber;var o=!e||!e.hasOwnProperty("showTimezone")||e.showTimezone;var s=!e||!e.hasOwnProperty("showDate")||e.showDate;var r=!e||!e.hasOwnProperty("showTime")||e.showTime;if(i&&!n||o&&!s&&!r){return true}}return false}function y(t){return t&&t.isA("sap.ui.model.CompositeType")}function v(){var t=false;if(this.oFormatOptions.hasOwnProperty("noFormatting")){t=this.oFormatOptions.noFormatting}return t}function m(){if(this.oFormatOptions.hasOwnProperty("keepValue")){return this.oFormatOptions.keepValue}return null}return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/CustomFieldInfo", ["sap/ui/mdc/field/FieldInfoBase","sap/ui/core/Control","sap/ui/core/InvisibleText","sap/ui/base/ManagedObjectObserver"],function(e,t,o,i){"use strict";var n=e.extend("sap.ui.mdc.field.CustomFieldInfo",{metadata:{library:"sap.ui.mdc",properties:{},aggregations:{content:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"content"}});n._oBox=undefined;n.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver=new i(r.bind(this));this._oObserver.observe(this,{aggregations:["content"]})};n.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this._oMyBox){this._oMyBox.destroy();this._oMyBox=undefined}};n.prototype.isTriggerable=function(){return Promise.resolve(!!this.getAggregation("content"))};n.prototype.getTriggerHref=function(){return Promise.resolve(null)};n.prototype.getDirectLinkHrefAndTarget=function(){return Promise.resolve(null)};n.prototype.getContent=function(){if(!n._oBox){n._oBox=t.extend("sap.ui.mdc.field.CustomFieldInfoBox",{metadata:{},renderer:{apiVersion:2,render:function(e,t){var o=t._oInfo.getAggregation("content");e.openStart("div",t);e.openEnd();if(o){e.renderControl(o)}e.close("div")}}})}if(!this._oMyBox||this._oMyBox._bIsBeingDestroyed){this._oMyBox=new n._oBox(this.getId()+"-box");this._oMyBox._oInfo=this}return Promise.resolve(this._oMyBox)};n.prototype.checkDirectNavigation=function(){return Promise.resolve(false)};function r(e){if(e.object==this&&!this._bIsBeingDestroyed){if(e.name=="content"){this.fireDataUpdate()}}}return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/DefineConditionPanel", ["sap/ui/core/Control","sap/ui/base/ManagedObjectObserver","sap/base/util/merge","sap/base/util/deepEqual","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/field/ConditionType","sap/ui/mdc/enum/EditMode","sap/ui/mdc/enum/FieldDisplay","sap/ui/mdc/enum/BaseType","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/Field","sap/ui/mdc/ValueHelp","sap/ui/mdc/valuehelp/Popover","sap/ui/mdc/valuehelp/content/FixedList","sap/ui/mdc/field/ListFieldHelpItem","sap/ui/model/base/ManagedObjectModel","sap/ui/model/json/JSONModel","sap/ui/model/resource/ResourceModel","sap/ui/model/type/String","sap/ui/core/library","sap/ui/core/InvisibleText","sap/ui/layout/Grid","sap/ui/layout/GridData","sap/m/library","sap/m/Button","sap/m/Panel","sap/base/Log","sap/ui/core/InvisibleMessage","sap/ui/thirdparty/jquery"],function(e,t,i,a,n,r,s,o,l,d,u,p,h,v,f,g,c,y,m,C,O,b,T,I,x,_,S,V,P,D,jQuery){"use strict";var M=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.getCore().attachLocalizationChanged(function(){M=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")});var w=_.ButtonType;var N=b.ValueState;var F=b.InvisibleMessageMode;var $=e.extend("sap.ui.mdc.field.DefineConditionPanel",{metadata:{library:"sap.ui.mdc",properties:{conditions:{type:"object[]",group:"Data",defaultValue:[],byValue:true},formatOptions:{type:"object",defaultValue:{}},label:{type:"string",defaultValue:""},inputOK:{type:"boolean",defaultValue:true}},aggregations:{_content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{fieldHelp:{type:"sap.ui.mdc.ValueHelp",multiple:false}},events:{conditionProcessed:{}}},_oManagedObjectModel:null,renderer:{apiVersion:2,render:function(e,t){e.openStart("section",t);e.class("sapUiMdcDefineConditionPanel");e.openEnd();e.renderControl(t.getAggregation("_content"));e.close("section")}},init:function(){sap.ui.getCore().getMessageManager().registerObject(this,true);e.prototype.init.apply(this,arguments);this.oInvisibleMessage=D.getInstance();this._oManagedObjectModel=new y(this);this._oObserver=new t(L.bind(this));this._oObserver.observe(this,{properties:["conditions","formatOptions"]});J.call(this);this.setModel(this._oManagedObjectModel,"$this");this.setModel(this._oManagedObjectModel,"$condition")},exit:function(){sap.ui.getCore().getMessageManager().unregisterObject(this,true);this._oObserver.disconnect();this._oObserver=undefined;if(this._sConditionsTimer){clearTimeout(this._sConditionsTimer);this._sConditionsTimer=null}if(this._oDefaultType){this._oDefaultType.destroy();delete this._oDefaultType}this._oManagedObjectModel.destroy();delete this._oManagedObjectModel},byId:function(e){return sap.ui.getCore().byId(this.getId()+"--"+e)},onBeforeRendering:function(){if(!this.getModel("$i18n")){this.setModel(new C({bundleName:"sap/ui/mdc/messagebundle",async:false}),"$i18n")}if(this.getConditions().length===0&&!this._sConditionsTimer){this.updateDefineConditions()}},removeCondition:function(e){var t=e.oSource;var i=t.getBindingContext("$this");var a=this.getConditions();var n=i.getPath();var r=n.match(/^.*\/(\d+)\/$/);var s;if(r){s=parseInt(r[1])}if(s>0&&a.length-1===s){this._bFocusLastRemoveBtn=true}this.oInvisibleMessage.announce(M.getText("valuehelp.DEFINECONDITIONS_REMOVECONDITION_ANNOUNCE"),F.Polite);var o=this.byId("conditions");var l=o.getContent();var d=0;for(var u=0;u<l.length&&d<=s;u++){var p=l[u];if(d===s&&p instanceof h&&p.hasOwnProperty("_iValueIndex")){if(p._isInvalidInput()){p.setValue(null)}}if(p instanceof S&&p.getId().endsWith("-removeBtnLarge")){d++}}if(a.length===1&&s===0){this.addDummyCondition(1);a=this.getConditions()}a.splice(s,1);this.setProperty("conditions",a,true);he.call(this,undefined);this.fireConditionProcessed()},addCondition:function(e){var t=this.getConditions();var i=this.getFormatOptions();var a=i.maxConditions;if(a===-1||t.length<a){this.addDummyCondition(t.length+1);this._bFocusLastCondition=true}this.oInvisibleMessage.announce(M.getText("valuehelp.DEFINECONDITIONS_ADDCONDITION_ANNOUNCE"),F.Polite)},addDummyCondition:function(e){var t=U.call(this);var i=k.call(this);var a=i.name;var o=n.createCondition(a,i.valueDefaults?i.valueDefaults:[],undefined,undefined,p.NotValidated);if(i.valueTypes[0]&&i.valueTypes[0]!==s.ValueType.Static){o.isInitial=true}r.updateConditionValues(o);r.checkConditionsEmpty(o,t);var l=this.getConditions();if(e!==undefined){l.splice(e,0,o)}else{l.push(o)}this.setProperty("conditions",l,true);if(!o.isInitial){this.fireConditionProcessed()}},updateDefineConditions:function(){var e=this.getConditions().filter(function(e){var t=r.getOperator(e.operator);return e.validated!==p.Validated||t.exclude});z.call(this,e,true,false);if(e.length===0){this.addDummyCondition()}},onChange:function(e){var t=e&&e.getParameter("promise");var i=e&&e.getSource();var a=function(e){var t=U.call(this);var i=this.getConditions();r.checkConditionsEmpty(i,t);r.updateConditionsValues(i,t);z.call(this,i,false,false);if(e){i.forEach(function(e){if(!e.isEmpty){delete e.isInitial}})}this.setProperty("conditions",i,true)}.bind(this);if(t){t.then(function(e){this._bPendingChange=false;a({mParameters:{value:e}});if(this._bPendingValidateCondition){pe.call(this,i);delete this._bPendingValidateCondition}}.bind(this)).catch(function(e){this._bPendingChange=false;if(this._bPendingValidateCondition){pe.call(this,i);delete this._bPendingValidateCondition}}.bind(this));this._bPendingChange=true;return}else{a()}},onSelectChange:function(e){var t=e.getSource();var i=e.getParameter("promise");i.then(function(e){var i=t._sOldKey;var n=r.getOperator(e);var o=i&&r.getOperator(i);var l=t.getBindingContext("$this").getObject();var d=this.getConditions();var u=r.indexOfCondition(l,d);if(u>=0){l=d[u]}if(n&&o){var p=false;if(!a(n.valueTypes[0],o.valueTypes[0])&&n.valueTypes[0]!==s.ValueType.Static){if(u>=0){l.values.forEach(function(e,t){if(e!==null){if(n.valueTypes[t]===s.ValueType.Self&&o.valueTypes[t]===s.ValueType.SelfNoParse||n.valueTypes[t]===s.ValueType.SelfNoParse&&o.valueTypes[t]===s.ValueType.Self){var i=j.call(this,n.name,t);var a=j.call(this,o.name,t);var r=a.formatValue(l.values[t],"string");var d=i.parseValue(r,"string");if(d!==l.values[t]){l.values[t]=i.parseValue(r,"string");p=true}}else{l.values[t]=null;p=true}}}.bind(this))}}if(u>=0&&n.valueDefaults){l.values.forEach(function(e,t){if(l.isInitial&&e!==n.valueDefaults[t]||e===null){l.values[t]=n.valueDefaults[t];l.isInitial=true;p=true}})}if(!n.valueTypes[1]&&o.valueTypes[1]){if(u>=0){if(l.values.length>1&&l.values[1]){l.values=l.values.slice(0,1);p=true}}}if(l.invalid){delete l.invalid;p=true}if(p){r.checkConditionsEmpty(l,U.call(this));this.setProperty("conditions",d,true);he.call(this,false)}}delete t._sOldKey}.bind(this)).catch(function(e){var i=t.getBindingContext("$this").getObject();var a=this.getConditions();var n=r.indexOfCondition(i,a);if(n>=0){i=a[n]}i.invalid=true;this.setProperty("conditions",a,true);t._sOldKey=t.getValue();he.call(this,true)}.bind(this))},onPaste:function(e){var t;var a=e.srcControl;var n=this.getFormatOptions();var s=n.hasOwnProperty("maxConditions")?n.maxConditions:-1;var l=a.getBindingContext("$condition").getPath();var u=parseInt(l.split("/")[2]);if(window.clipboardData){t=window.clipboardData.getData("Text")}else{t=e.originalEvent.clipboardData.getData("text/plain")}var p=t.split(/\r\n|\r|\n/g);if(p&&p.length>1){setTimeout(function(){var e=i({},this.getFormatOptions());delete e.fieldHelpID;e.maxConditions=1;e.display=d.Value;var t=new o(e);var n=p.length;var l=this.getConditions();for(var h=0;h<n;h++){if(p[h]){var v=p[h].trim();var f=v.split(/\t/g);if(f.length==2&&f[0]&&f[1]){var g=r.getOperator("BT");v=g.tokenFormat;for(var c=0;c<2;c++){v=v.replace(new RegExp("\\{"+c+"\\}","g"),f[c])}}try{var y=t.parseValue(v,"string");t.validateValue(y);if(l.length>u){l.splice(u,1,y)}else{l.push(y)}u++}catch(e){P.error("Paste handling","the pasted value '"+v+"' could not be handled! "+e.message)}}}if(s>=0&&l.length>s){l.splice(s,l.length-s)}if(a.setDOMValue){a.setDOMValue("")}r.checkConditionsEmpty(l);this.setProperty("conditions",l,true);this.fireConditionProcessed()}.bind(this),0)}},cleanUp:function(){var e=this.byId("conditions");var t=e.getContent();for(var i=0;i<t.length;i++){var a=t[i];if(a instanceof h&&a.hasOwnProperty("_iValueIndex")){if(a._isInvalidInput()){a.setValue()}}}this.setProperty("inputOK",true,true)},getInitialFocusedControl:function(){var e=this.getAggregation("_content").getContent()[1];var t=e.getContent()[0];return t}});function L(e){if(e.name==="value"){B.call(this,e.object,e.current,e.old)}if(e.name==="formatOptions"){var t=this.getConditions();var i=e.current&&e.current.operators;var n=e.old&&e.old.operators;var r=false;if(!a(i,n)){r=true;X.call(this)}var s=e.current&&e.current.valueType;var o=e.old&&e.old.valueType;var l=s&&s.getMetadata().getName();var d=o&&o.getMetadata().getName();var u=s&&s.getFormatOptions();var p=o&&o.getFormatOptions();var h=s&&s.getConstraints();var v=o&&o.getConstraints();if(l!==d||!a(u,p)||!a(h,v)){if(!r){X.call(this)}if(this._sConditionsTimer){this._bUpdateType=true}else if(t.length>0){this._bUpdateType=true;Z.call(this);this._bUpdateType=false;z.call(this,t,true,true)}}}if(e.name==="conditions"&&!this._bConditionUpdateRunning){if(this._sConditionsTimer){clearTimeout(this._sConditionsTimer);this._sConditionsTimer=null}this._sConditionsTimer=setTimeout(function(){this._sConditionsTimer=null;this._bConditionUpdateRunning=true;this.updateDefineConditions();Z.call(this);this._bUpdateType=false;this._bConditionUpdateRunning=false}.bind(this),0)}}function E(e){return true}function B(e,t,i){e._sOldKey=i;var a=0;if(t&&i){var n=r.getOperator(t);var s=r.getOperator(i);var o=e.getParent();var l;var d;a=o.indexOfContent(e);l=o.getContent()[a+2];if(l&&l.hasOwnProperty("_iValueIndex")&&l._iValueIndex===0){if(l instanceof h&&!l._isInvalidInput()){l.setValueState(N.None);l.setValueStateText()}d=o.getContent()[a+3];if(d&&d.hasOwnProperty("_iValueIndex")&&d._iValueIndex===1){if(d instanceof h&&!d._isInvalidInput()){d.setValueState(N.None);d.setValueStateText()}}else{d=undefined}}else{l=undefined}if(E(t)){var u=this.getFieldHelp();l&&l.setFieldHelp&&l.setFieldHelp(u);d&&d.setFieldHelp&&d.setFieldHelp(u)}else{l&&l.setFieldHelp&&l.setFieldHelp();d&&d.setFieldHelp&&d.setFieldHelp()}if(n.createControl||s.createControl){if(l){l.destroy()}if(d){d.destroy()}}else{if(l&&n.valueTypes[0]!==s.valueTypes[0]){l.unbindProperty("value")}if(d&&n.valueTypes[1]!==s.valueTypes[1]&&s.valueTypes[1]){d.unbindProperty("value")}}}if(!t){var p=e.getBindingContext("$this").getObject();if(p){var v=this.getConditions();a=r.indexOfCondition(p,v);if(a>=0){p=v[a];p.operator=i;this.setProperty("conditions",v,true)}}}var f=this.oOperatorModel.getData();var g;for(var c=0;c<f.length;c++){var y=f[c];if(y.key===t){g=y.text;break}}e.setAdditionalValue(g);this.onChange()}function R(e,t,i,a){var n=r.getOperator(e.operator);if(!n||!n.valueTypes[t]){return null}var s=j.call(this,n.name,t);var o=this._oManagedObjectModel.getContext(a.getPath()+"values/"+t+"/");var l;if(n.createControl){l=n.createControl(s,"$this>",t,i)}if(!l){l=new h(i,{delegate:q.call(this),value:{path:"$this>",type:s,mode:"TwoWay",targetType:"raw"},editMode:{parts:[{path:"$condition>operator"},{path:"$condition>invalid"}],formatter:ae},multipleLines:false,width:"100%",fieldHelp:E(e.operator)?this.getFieldHelp():null})}if(l.getMetadata().hasProperty("placeholder")){if(t===0){l.bindProperty("placeholder",{path:"$condition>operator",formatter:oe})}else{l.bindProperty("placeholder",{path:"$condition>operator",formatter:le})}}l._iValueIndex=t;if(l.attachChange){l.attachChange(this.onChange.bind(this))}l.onpaste=this.onPaste.bind(this);l.setLayoutData(new x({span:{parts:[{path:"$condition>"},{path:"$this>/formatOptions"}],formatter:se.bind(this)}}));l.setBindingContext(o,"$this");l.setBindingContext(a,"$condition");l.setFieldGroupIds([a.getPath()]);return l}function j(e,t){var i=G.call(this);var a=r.getOperator(e);if(a.valueTypes[t]&&[s.ValueType.Self,s.ValueType.Static].indexOf(a.valueTypes[t])===-1){i=a._createLocalType(a.valueTypes[t],i)}var n=false;if(a.valueTypes[t]===s.ValueType.Static){n=true;i=K.call(this)}var o=n?u.String:W.call(this,i);var l;switch(o){case u.Numeric:var d=i.getFormatOptions();if(d&&d.hasOwnProperty("emptyString")&&d.emptyString===null){l=i}else{l=A(i,{emptyString:null})}break;case u.Date:case u.Time:case u.DateTime:l=i;break;default:if(i.getConstraints()&&i.getConstraints().hasOwnProperty("nullable")&&i.getConstraints().nullable===false){l=A(i);if(i._bCreatedByOperator){l=a._createLocalType(a.valueTypes[t],i)}}else{l=i}break}return l}function A(e,t,a){var n=sap.ui.require(e.getMetadata().getName().replace(/\./g,"/"));var r=i(e.getFormatOptions(),t||{});var s=i(e.getConstraints(),a||{});if(s.hasOwnProperty("nullable")&&s.nullable===false){s.nullable=true}return new n(r,s)}function k(){var e=U.call(this);var t;var i=this.getFormatOptions().defaultOperatorName;if(i){t=r.getOperator(i)}else{var a=G.call(this);var n=W.call(this,a);t=r.getDefaultOperator(n)}if(t&&e.indexOf(t.name)<0){for(var s=0;s<e.length;s++){t=r.getOperator(e[s]);if(!t||t.exclude||!t.hasRequiredValues()){t=undefined}else{break}}}if(!t){t=r.getOperator(e[0])}return t}function U(){var e=this.getFormatOptions();var t=e&&e.operators;if(!t||t.length===0){t=r.getOperatorsForType(u.String)}return t}function H(){var e;var t=U.call(this);for(var i=0;i<t.length;i++){var a=t[i];var n=r.getOperator(a);if(!e){e=n.group.id}else if(e!==n.group.id){return true}}return false}function X(){if(!this.oOperatorModel){return}var e=G.call(this);var t=U.call(this);var i=[];var a=H.call(this);var n=this.getId()+"--rowSelect-help-pop-fl";var s=sap.ui.getCore().byId(n);var o;if(a){o=new c({key:"{om>key}",text:"{om>text}",additionalText:"{om>additionalText}",groupKey:"{om>groupId}",groupText:"{om>groupText}"})}else{o=new c({key:"{om>key}",text:"{om>text}",additionalText:"{om>additionalText}"})}s.bindAggregation("items",{path:"om>/",templateShareable:false,template:o});s.setGroupable(a);for(var l=0;l<t.length;l++){var d=t[l];var u=r.getOperator(d);if(!u||u.showInSuggest!==undefined&&u.showInSuggest==false){continue}var p=u.getLongText(W.call(this,e));var h=u.additionalInfo;if(h===undefined){if(h!==""&&u.formatRange){h=u.formatRange(u._getRange(undefined,e),e)}else if(!a){h=u.group.text}}i.push({key:u.name,text:p,additionalText:h,groupId:u.group.id,groupText:u.group.text})}this.oOperatorModel.setData(i)}function G(){var e=this.getFormatOptions();var t=e&&e.valueType;if(!t){t=K.call(this)}return t}function K(){if(!this._oDefaultType){this._oDefaultType=new O}return this._oDefaultType}function W(e){var t=e.getMetadata().getName();var i=e.getFormatOptions();var a=e.getConstraints();var n=this.getFormatOptions().delegate;var r=this.getFormatOptions().payload;var s=n?n.getTypeUtil(r).getBaseType(t,i,a):u.String;if(s===u.Unit){s=u.Numeric}return s}function q(){var e=this.getFormatOptions();var t=e.delegateName||"sap/ui/mdc/field/FieldBaseDelegate";var i=e.payload;return{name:t,payload:i}}function z(e,t,i){var a=G.call(this);var n=[];var o=0;for(o=0;o<e.length;o++){var l=e[o];var d=r.getOperator(l.operator);if(d&&d.valueTypes[0]===s.ValueType.Static&&(l.values.length===0||i)){if(d.getStaticText){var u=d.getStaticText(a,W.call(this,a));if(l.values.length>0){l.values[0]=u}else{l.values.push(u)}n.push(o)}}}if(t&&n.length>0){this.setProperty("conditions",e,true)}}function J(){var e=new T(this.getId()+"--ivtOperator",{text:"{$i18n>valuehelp.DEFINECONDITIONS_OPERATORLABEL}"});var t=new V({headerText:"{$this>/label}",expanded:true,height:"100%",backgroundDesign:"Transparent"}).addStyleClass("sapMdcDefineconditionPanel");t.addDependent(new v(this.getId()+"--rowSelect-help",{typeahead:new f(this.getId()+"--rowSelect-help-pop",{content:[new g(this.getId()+"--rowSelect-help-pop-fl",{filterList:false,useFirstMatch:true})]})}));var i=new I(this.getId()+"--conditions",{width:"100%",hSpacing:0,vSpacing:0,containerQuery:true}).addStyleClass("sapUiMdcDefineConditionGrid");ie.call(this,undefined,i,0,null,0);t.addContent(e);t.addContent(i);this._oInvisibleAddOperatorButtonText=new T({text:M.getText("valuehelp.DEFINECONDITIONS_ADDCONDITION_DESCRIPTION")});t.addContent(this._oInvisibleAddOperatorButtonText);var a=new S(this.getId()+"--addBtn",{press:this.addCondition.bind(this),type:w.Default,text:"{$i18n>valuehelp.DEFINECONDITIONS_ADDCONDITION}",layoutData:new x({span:"XL2 L3 M3 S3",indent:"XL9 L8 M8 S7",linebreak:true,visibleS:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Q.bind(this)},visibleM:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Q.bind(this)},visibleL:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Q.bind(this)},visibleXL:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Q.bind(this)}}),ariaDescribedBy:this._oInvisibleAddOperatorButtonText});i.addContent(a);i.attachValidateFieldGroup(ue,this);this.setAggregation("_content",t)}function Q(e,t){var i=t.hasOwnProperty("maxConditions")?t.maxConditions:-1;return i===-1||e.length<i}function Y(e,t){var i=t.hasOwnProperty("maxConditions")?t.maxConditions:-1;return i!==1}function Z(){var e=this.getConditions();var t=this.byId("conditions");var i;var a=-1;var n=0;for(var s=0;s<e.length;s++){var o=e[s];var l=r.getOperator(o.operator);if(o.validated!==p.Validated||l.exclude){var d=this._oManagedObjectModel.getContext("/conditions/"+s+"/");a++;if(!this.oOperatorModel){this.oOperatorModel=new m;this.setModel(this.oOperatorModel,"om");X.call(this)}i=t.getContent();if(i[n]&&i[n].isA("sap.ui.mdc.Field")){n=de.call(this,o,t,n,d,a)}else{n=ie.call(this,o,t,n,d,a)}}}i=t.getContent();while(i[n]&&i[n]!==this.byId("addBtn")){i[n].destroy();n++}if(this._bFocusLastCondition){n=te.call(this,"-operator");setTimeout(function(){i[n].focus()},0);this._bFocusLastCondition=false}if(this._bFocusLastRemoveBtn){n=ee.call(this,["-removeBtnLarge","-removeBtnSmall"]);i[n].focus();this._bFocusLastRemoveBtn=false}}function ee(e){var t=this.byId("conditions");var i=t.getContent();var a=i.length-1;if(!Array.isArray(e)){e=[e]}var n=0;var r=e[n];while(a>=0&&r!==undefined){var s=i[a];if(s.getId().endsWith(r)){var o=jQuery(s.getDomRef());if(o.is(":visible")){return a}else{n++;r=e[n]}}a--}return 0}function te(e){var t=this.byId("conditions");var i=t.getContent();var a=i.length-1;var n=e;while(a>=0){var r=i[a];if(r.getId().endsWith(n)){return a}a--}return 0}function ie(e,t,i,a,n){var r=this.getId()+"--"+n;if(!this._oOperatorFieldType){this._oOperatorFieldType=new O({},{minLength:1})}var s=new h(r+"-operator",{value:{path:"$this>operator",type:this._oOperatorFieldType},width:"100%",display:d.Description,editMode:l.Editable,multipleLines:false,fieldHelp:this.getId()+"--rowSelect-help",change:this.onSelectChange.bind(this),ariaLabelledBy:this.getId()+"--ivtOperator"}).setLayoutData(new x({span:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:re.bind(this)},linebreak:true})).setBindingContext(a,"$this");if(a){s.setFieldGroupIds([a.getPath()])}this._oObserver.observe(s,{properties:["value"]});t.insertContent(s,i);i++;var o=new S(r+"--removeBtnSmall",{press:this.removeCondition.bind(this),type:w.Transparent,icon:"sap-icon://decline",tooltip:"{$i18n>valuehelp.DEFINECONDITIONS_REMOVECONDITION}"}).setLayoutData(new x({span:"XL1 L1 M1 S2",indent:{path:"$this>operator",formatter:ne},visibleS:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Y.bind(this)},visibleM:false,visibleL:false,visibleXL:false})).setBindingContext(a,"$this");if(a){o.setFieldGroupIds([a.getPath()])}t.insertContent(o,i);i++;if(e){for(var u=0;u<e.values.length;u++){var p=R.call(this,e,u,r+"-values"+u,a);if(p){t.insertContent(p,i);i++}}}var v=new S(r+"--removeBtnLarge",{press:this.removeCondition.bind(this),type:w.Transparent,icon:"sap-icon://decline",tooltip:"{$i18n>valuehelp.DEFINECONDITIONS_REMOVECONDITION}"}).setLayoutData(new x({span:"XL1 L1 M1 S1",indent:{path:"$this>operator",formatter:ne},visibleS:false,visibleM:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Y.bind(this)},visibleL:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Y.bind(this)},visibleXL:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Y.bind(this)}})).setBindingContext(a,"$this");t.insertContent(v,i);i++;return i}function ae(e,t){if(!e){return this.getEditMode()}else if(t){return l.ReadOnly}var i=r.getOperator(e);var a=false;if(i&&i.valueTypes[0]===s.ValueType.Static){a=true}return a?l.Display:l.Editable}function ne(e){var t=e&&r.getOperator(e);if(!t||!t.valueTypes[0]||t.valueTypes[0]===s.ValueType.Static&&!t.getStaticText){return"XL8 L8 M8 S0"}else{return""}}function re(e,t){var i=t.hasOwnProperty("maxConditions")?t.maxConditions:-1;var a="XL3 L3 M3 ";if(i===1){a+="S12"}else{a+="S10"}return a}function se(e,t){var i=t.hasOwnProperty("maxConditions")?t.maxConditions:-1;var a=e&&r.getOperator(e.operator);var n="";if(a&&a.valueTypes[1]){n="XL4 L4 M4 "}else{n="XL8 L8 M8 "}if(i===1){n+="S12"}else{n+="S10"}return n}function oe(e){var t=e&&r.getOperator(e);if(t&&t.aLabels){return t.aLabels[0]}else if(t&&t.valueTypes[1]){return M.getText("valuehelp.DEFINECONDITIONS_FROM")}else{return M.getText("valuehelp.DEFINECONDITIONS_VALUE")}}function le(e){var t=e&&r.getOperator(e);if(t&&t.aLabels){return t.aLabels[1]}else if(t&&t.valueTypes[1]){return M.getText("valuehelp.DEFINECONDITIONS_TO")}}function de(e,t,i,a,n){var r=this.getId()+"--"+n;var s=t.getContent();var o;var l=s[i];l.setBindingContext(a,"$this");if(a){l.setFieldGroupIds([a.getPath()])}if(l.getValueState()===N.Error&&!e.invalid){l.setValue(l.getValue())}i++;var d=s[i];d.setBindingContext(a,"$this");if(a){d.setFieldGroupIds([a.getPath()])}i++;var u;var p=s[i];var h;if(p.hasOwnProperty("_iValueIndex")&&p._iValueIndex===0){if(e.values.length>0){u=this._oManagedObjectModel.getContext(a.getPath()+"values/0/");p.setBindingContext(u,"$this");p.setBindingContext(a,"$condition");if(p.getMetadata().hasProperty("value")&&(this._bUpdateType||!p.getBindingInfo("value"))){o=j.call(this,e.operator,0);p.bindProperty("value",{path:"$this>",type:o})}i++;h=s[i];if(h.hasOwnProperty("_iValueIndex")&&h._iValueIndex===1){if(e.values.length>1){u=this._oManagedObjectModel.getContext(a.getPath()+"values/1/");h.setBindingContext(u,"$this");if(h.getMetadata().hasProperty("value")&&(this._bUpdateType||!h.getBindingInfo("value"))){o=j.call(this,e.operator,1);h.bindProperty("value",{path:"$this>",type:o})}i++}else{h.destroy()}}else if(e.values.length>1){h=R.call(this,e,1,r+"-values1",a);if(h){t.insertContent(h,i);i++}}}else{p.destroy();p=undefined;h=s[i+1];if(h&&h.hasOwnProperty("_iValueIndex")&&h._iValueIndex===1){h.destroy()}}}else if(e.values.length>0){for(var v=0;v<e.values.length;v++){var f=R.call(this,e,v,r+"-values"+v,a);if(f){t.insertContent(f,i);i++}}}s=t.getContent();var g=s[i];g.setBindingContext(a,"$this");i++;return i}function ue(e){if(this._bPendingChange){this._bPendingValidateCondition=true;return}var t=e.getSource();while(!(t.getParent()instanceof I)){t=t.getParent()}pe.call(this,t)}function pe(e){var t=e.getParent();var i=t.indexOfContent(e);var a;if(e.getId().endsWith("-operator")){a=e.getBindingContext("$this");i=i+2;e=t.getContent()[i]}else if(e.getId().endsWith("-removeBtnSmall")){a=e.getBindingContext("$this");i=i+1;e=t.getContent()[i]}else{a=e.getBindingContext("$condition")}var n;var o=a.getObject();var l=r.getOperator(o.operator);var d=!!o.invalid;if(!d&&l.valueTypes.length>0&&l.valueTypes[0]!==s.ValueType.Static){if(l.valueTypes.length>1&&l.valueTypes[1]){if(e.hasOwnProperty("_iValueIndex")&&e._iValueIndex===0){n=t.getContent()[i+1]}else if(e.hasOwnProperty("_iValueIndex")&&e._iValueIndex===1){n=t.getContent()[i-1]}}if(e.getMetadata().getAllProperties().valueState&&!e._isInvalidInput()&&(!n||!n._isInvalidInput())){var u=e.getBinding("value").getType();try{l.validate(o.values,u);e.setValueState(N.None);e.setValueStateText();if(n&&n.getMetadata().getAllProperties().valueState){n.setValueState(N.None);n.setValueStateText()}}catch(t){d=true;e.setValueState(N.Error);e.setValueStateText(t.message);if(n&&n.getMetadata().getAllProperties().valueState){n.setValueState(N.Error);n.setValueStateText(t.message)}}}}he.call(this,d);this.fireConditionProcessed()}function he(e){var t=0;if(e!==true){var i=this.getConditions();for(t=0;t<i.length;t++){if(i[t].invalid){e=true;break}}}if(e!==true){var a=this.byId("conditions");var n=a.getContent();e=false;for(t=0;t<n.length;t++){var r=n[t];if(r.hasOwnProperty("_iValueIndex")&&r.getValueState&&r.getValueState()===N.Error){e=true;break}}}this.setProperty("inputOK",!e,true)}return $});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/DynamicDateRangeConditionsType", ["sap/ui/mdc/field/ConditionsType","sap/ui/mdc/condition/ConditionValidateException","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/enum/BaseType","sap/ui/mdc/util/DateUtil","sap/ui/model/SimpleType","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/m/library","sap/base/util/merge"],function(e,t,a,i,o,r,n,s,l,p,u,d,c,v){"use strict";var y=e.extend("sap.ui.mdc.field.DynamicDateRangeConditionsType",{constructor:function(e,t){l.apply(this,arguments);this.sName="ConditionsDateRange";this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")}});y.prototype.destroy=function(){l.prototype.destroy.apply(this,arguments);this._bDestroyed=true};y.prototype.formatValue=function(e,t){if(e==undefined||e==null||this._bDestroyed){return null}if(!Array.isArray(e)){throw new p("No valid conditions provided")}var o=f.call(this);var r;if(o!==1){throw new p("MaxConditions must be 1")}if(e.length===1){var l=e[0];var u=a.getOperator(l.operator);if(!l.operator||!u){throw new p("No valid condition provided, Operator wrong.")}var d=[];var v=T.call(this);var y=a.getDynamicDateOptionForOperator(u,c.StandardDynamicDateRangeKeys,v);for(var m=0;m<u.valueTypes.length;m++){if(u.valueTypes[m]&&u.valueTypes[m]!==i.ValueType.Static){if(y){if(u.valueTypes[m]===i.ValueType.Self){d.push(s.typeToDate(l.values[m],h.call(this),v))}else{var D=g.call(this,u.valueTypes[m]);if(D===n.Date||D===n.DateTime){d.push(s.typeToDate(l.values[m],O.call(this,u,m),D))}else{d.push(l.values[m])}}}else{d.push(l.values[m])}}}if(!y){y=a.getCustomDynamicDateOptionForOperator(u,v)}r={operator:y,values:d}}return r};y.prototype.parseValue=function(e,t){if(this._bDestroyed){return null}if(f.call(this)!==1){throw new u("Only one condition supported for parsing")}var l=m.call(this);var p=[];if(e&&e.operator){if(e.operator==="PARSEERROR"){throw new u(e.values[0])}var d=e.operator;var v=a.getOperatorForDynamicDateOption(d,T.call(this));if(v){var y=T.call(this);var D=[];for(var w=0;w<v.valueTypes.length;w++){if(v.valueTypes[w]&&v.valueTypes[w]!==i.ValueType.Static){if(c.StandardDynamicDateRangeKeys[d]){if(v.valueTypes[w]===i.ValueType.Self){D.push(s.dateToType(e.values[w],h.call(this),y))}else{var C=v.valueTypes[w]===i.ValueType.Self?y:g.call(this,v.valueTypes[w]);if(C===n.Date||C===n.DateTime){D.push(s.dateToType(e.values[w],O.call(this,v,w),C))}else{D.push(e.values[w])}}}else{D.push(e.values[w])}}}var V=o.createCondition(v.name,D,undefined,undefined,r.NotValidated);a.updateConditionValues(V);a.checkConditionsEmpty(V,l);p.push(V)}}return p};y.prototype.validateValue=function(e){if(e===undefined||e===null||this._bDestroyed){return}if(!Array.isArray(e)){throw new t("No valid conditions provided",undefined,undefined,e)}var i=h.call(this);var o=m.call(this);for(var r=0;r<e.length;r++){var n=e[r];if(typeof n!=="object"||!n.operator||!n.values||!Array.isArray(n.values)){throw new t(this._oResourceBundle.getText("field.VALUE_NOT_VALID"),undefined,typeof n==="object"?v({},n):n,e)}var s=a.getOperator(n.operator);if(!s||o.indexOf(s.name)===-1){throw new t("No valid condition provided, Operator wrong.",undefined,v({},n),e)}try{s.validate(n.values,i)}catch(a){if(a instanceof d){throw new t(a.message,a.violatedConstraints,v({},n),e)}throw a}}};function f(){var e=1;if(this.oFormatOptions.hasOwnProperty("maxConditions")){e=this.oFormatOptions.maxConditions}return e}function h(){var e=this.oFormatOptions.valueType;if(!e){throw new Error("Type missing")}return e}function m(){var e=this.oFormatOptions.operators;if(!e||e.length===0){e=a.getOperatorsForType(T.call(this))}return e}function T(){var e=h.call(this);var t=e.getMetadata().getName();var a=e.getFormatOptions();var i=e.getConstraints();return g.call(this,{name:t,formatOptions:a,constraints:i})}function g(e){var t=this.oFormatOptions.delegate;var a=this.oFormatOptions.payload;var i=t?t.getTypeUtil(a).getBaseType(e.name,e.formatOptions,e.constraints):n.Date;return i}function O(e,t){return e._createLocalType(e.valueTypes[t])}return y});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldBase", ["sap/ui/Device","sap/ui/mdc/enum/EditMode","sap/ui/mdc/enum/FieldDisplay","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/field/FieldBaseRenderer","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/ConditionValidateException","sap/ui/mdc/field/ConditionType","sap/ui/mdc/field/ConditionsType","sap/ui/mdc/enum/BaseType","sap/ui/mdc/field/content/ContentFactory","sap/ui/mdc/Control","sap/ui/mdc/util/loadModules","sap/ui/core/library","sap/ui/core/LabelEnablement","sap/ui/core/message/MessageMixin","sap/base/util/deepEqual","sap/base/util/merge","sap/base/Log","sap/ui/dom/containsOrEquals","sap/ui/model/BindingMode","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/base/ManagedObjectModel","sap/ui/base/ManagedObjectObserver","sap/ui/base/SyncPromise","sap/base/util/restricted/_debounce","sap/ui/events/KeyCodes"],function(t,e,i,n,a,o,s,r,l,h,d,g,p,u,c,f,y,v,C,_,m,F,b,D,I,T,P,V,E,O){"use strict";var M=c.ValueState;var H=c.TextAlign;var A=c.TextDirection;var x=p.extend("sap.ui.mdc.field.FieldBase",{metadata:{interfaces:["sap.ui.core.IFormContent","sap.ui.core.ISemanticFormContent","sap.m.IOverflowToolbarContent"],designtime:"sap/ui/mdc/designtime/field/FieldBase.designtime",library:"sap.ui.mdc",properties:{dataType:{type:"string",group:"Data",defaultValue:"sap.ui.model.type.String"},dataTypeConstraints:{type:"object",group:"Data",defaultValue:null},dataTypeFormatOptions:{type:"object",group:"Data",defaultValue:null},editMode:{type:"sap.ui.mdc.enum.EditMode",group:"Data",defaultValue:e.Editable},required:{type:"boolean",group:"Data",defaultValue:false},display:{type:"sap.ui.mdc.enum.FieldDisplay",defaultValue:i.Value},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:H.Initial},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:A.Inherit},placeholder:{type:"string",group:"Misc",defaultValue:""},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:M.None},valueStateText:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},multipleLines:{type:"boolean",group:"Appearance",defaultValue:false},maxConditions:{type:"int",group:"Behavior",defaultValue:-1},conditions:{type:"object[]",group:"Data",defaultValue:[],byValue:true,bindable:"bindable"},label:{type:"string",group:"Misc",defaultValue:""},delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/field/FieldBaseDelegate",payload:{}}},showEmptyIndicator:{type:"boolean",group:"Appearance",defaultValue:false},_fieldHelpEnabled:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"},_ariaAttributes:{type:"object",defaultValue:{},byValue:true,visibility:"hidden"}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false},contentEdit:{type:"sap.ui.core.Control",multiple:false},contentDisplay:{type:"sap.ui.core.Control",multiple:false},_content:{type:"sap.ui.core.Control",multiple:true,visibility:"hidden"},fieldInfo:{type:"sap.ui.mdc.field.FieldInfoBase",multiple:false}},associations:{fieldHelp:{type:"sap.ui.mdc.ValueHelp",multiple:false},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{liveChange:{parameters:{value:{type:"string"},escPressed:{type:"boolean"},previousValue:{type:"string"}}},press:{},submit:{parameters:{promise:{type:"Promise"}}}},publicMethods:[],defaultAggregation:"content"},renderer:a,_oManagedObjectModel:null,_oInvalidInput:null});y.call(x.prototype);var B={onsapup:nt,onsapdown:nt,onsaphome:nt,onsapend:nt,onsappageup:nt,onsappagedown:nt,onsapbackspace:nt};var w={onsapenter:G};var S;x._init=function(){if(S&&S.bool&&S.bool.control){S.bool.control.destroy()}if(S&&S.defineConditions&&S.defineConditions.control){S.defineConditions.control.destroy()}S={bool:{modules:["sap/ui/mdc/ValueHelp","sap/ui/mdc/valuehelp/Popover","sap/ui/mdc/valuehelp/content/Bool"],id:"BoolDefaultHelp",getDelegate:"getDefaultValueHelpDelegate",contentProperties:{},dialog:false,control:undefined,updateTitle:function(t,e){}},defineConditions:{modules:["sap/ui/mdc/ValueHelp","sap/ui/mdc/valuehelp/Dialog","sap/ui/mdc/valuehelp/content/Conditions"],id:"Field-DefineConditions-Help",getDelegate:"getDefaultValueHelpDelegate",contentProperties:{},dialog:true,control:undefined,updateTitle:function(t,e){t.getDialog().setTitle(e);t.getDialog().getContent()[0].setLabel(e)}}}};x._init();x.prototype.init=function(){p.prototype.init.apply(this,arguments);this._oObserver=new P(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["display","editMode","dataType","dataTypeFormatOptions","dataTypeConstraints","multipleLines","maxConditions","conditions","delegate"],aggregations:["fieldInfo","content","contentEdit","contentDisplay"],associations:["fieldHelp","ariaLabelledBy"]});this.attachEvent("modelContextChange",this._handleModelContextChange,this);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._aAsyncChanges=[];this._bPreventGetDescription=false;this._oContentFactory=this._getContentFactory();this._oCreateContentPromise=undefined;this._sFilterValue=""};x.prototype._getContentFactory=function(){if(this._bIsBeingDestroyed||this.bIsDestroyed){return}if(!this._oContentFactory){this._oContentFactory=new g(this.getId()+"-contentFactory",{field:this,handleTokenUpdate:mt.bind(this),handleContentChange:ft.bind(this),handleContentLiveChange:vt.bind(this),handleValueHelpRequest:Tt.bind(this),handleEnter:G.bind(this),handleContentPress:_t.bind(this)})}return this._oContentFactory};var U=function(t){var e=Dt.call(this);if(e&&!this._iFocusTimer&&e.shouldOpenOnFocus()&&!e.isOpen()){this._iFocusTimer=setTimeout(function(){e.open(true);this._redirectFocus(t,e);this._iFocusTimer=null}.bind(this),300)}};var N=function(){if(this._iFocusTimer){clearTimeout(this._iFocusTimer);this._iFocusTimer=null}};x.prototype.exit=function(){N.call(this);var t=this.getFieldInfo();if(t){t.detachEvent("dataUpdate",Ut,this)}var e=this.getContent();if(e){X.call(this,e)}var i=this.getContentEdit();if(i){X.call(this,i)}var n=this.getContentDisplay();if(n){X.call(this,n)}if(this._oManagedObjectModel){this._oManagedObjectModel.destroy();delete this._oManagedObjectModel}this._oObserver.disconnect();this._oObserver=undefined;this._oCreateContentPromise=undefined;var a=Dt.call(this);if(a){a.detachEvent("dataUpdate",Ht,this);if(this._bConnected){xt.call(this,a);a.connect()}}if(this._oContentFactory){this._oContentFactory.destroy();this._oContentFactory=undefined}Ct.call(this);delete this._fnLiveChangeTimer};x.prototype.applySettings=function(){p.prototype.applySettings.apply(this,arguments);if(!this.bDelegateInitialized&&!this.bDelegateLoading){this.initControlDelegate()}this._triggerCheckCreateInternalContent();this._bSettingsApplied=true;return this};x.prototype.setProperty=function(t,i,n){if(t==="editMode"){var a=this.getEditMode();if(a!==e.Display&&a!==e.EditableDisplay&&i!==e.Display&&i!==e.EditableDisplay){n=true}}else if(t!=="width"&&t!=="multipleLines"&&t!=="showEmptyIndicator"){n=true}return p.prototype.setProperty.apply(this,[t,i,n])};x.prototype.onBeforeRendering=function(){Z.call(this)};x.prototype.onAfterRendering=function(){};x.prototype.onfocusin=function(t){Bt.call(this);U.call(this,t)};x.prototype.onsapfocusleave=function(t){N.call(this);Ct.call(this)};function L(t){var e=t.indexOf(this.getId());if(e>-1){if(this._bPendingChange){var i=document.activeElement;var n=Dt.call(this);if(!(i&&n&&m(n.getDomRef(),i))){var a=Lt.call(this);if(a){R.call(this,undefined,undefined,undefined,a)}else{R.call(this,this.getConditions(),!this._isInvalidInput())}}}if(t.length>1){t.splice(e,1);this.fireValidateFieldGroup({fieldGroupIds:t})}}}x.prototype.onsapup=function(t){this._handleNavigate(t,-1)};x.prototype.onsapdown=function(t){this._handleNavigate(t,1)};x.prototype.onsaphome=function(t){this._handleNavigate(t,-9999)};x.prototype.onsappageup=function(t){this._handleNavigate(t,-10)};x.prototype.onsappagedown=function(t){this._handleNavigate(t,10)};x.prototype.onsapend=function(t){this._handleNavigate(t,9999)};x.prototype._handleNavigate=function(t,i){if(this.getEditMode()===e.Editable){var n=Dt.call(this);var a=t.srcControl;if(n){if(n.isNavigationEnabled(i)&&(!this._getContentFactory().isMeasure()||a.getShowValueHelp())){t.preventDefault();t.stopPropagation();n.setFilterValue(this._sFilterValue);n.navigate(i)}}}};x.prototype.onsapenter=function(t){var e=Dt.call(this);if(e&&e.isOpen()){e.close()}this._sFilterValue=""};x.prototype.onsapescape=function(t){this.onsapenter(t)};x.prototype._redirectFocus=function(t,e){var i=t.srcControl;if(e.isOpen()&&(!this._getContentFactory().isMeasure()||i.getShowValueHelp&&i.getShowValueHelp())){i.addStyleClass("sapMFocus");e.removeFocus()}};x.prototype.ontap=function(t){var e=Dt.call(this);if(e){if(e.shouldOpenOnClick()&&!e.isOpen()){e.open(true)}this._redirectFocus(t,e)}};x.prototype.clone=function(t,e){this.detachEvent("modelContextChange",this._handleModelContextChange,this);var i=this.getContent();if(i){X.call(this,i)}var n=this.getContentEdit();if(n){X.call(this,n)}var a=this.getContentDisplay();if(a){X.call(this,a)}var o=this.getFieldInfo();if(o){o.detachEvent("dataUpdate",Ut,this)}var s=p.prototype.clone.apply(this,arguments);this.attachEvent("modelContextChange",this._handleModelContextChange,this);if(i){Y.call(this,i)}if(n){Y.call(this,n)}if(a){Y.call(this,a)}if(o){o.attachEvent("dataUpdate",Ut,this)}if(this._bTriggerable){s._bTriggerable=this._bTriggerable}return s};x.prototype.getFieldPath=function(){var t=this.getBindingPath("conditions");if(t&&t.startsWith("/conditions/")){return t.slice(12)}else{return""}};function k(t,e,i,n){if(this._getContent().length>1){this._bPendingChange=true}else{R.call(this,t,e,i,n)}}function R(t,e,i,n){if(!n){if(e){n=Promise.resolve(this._getResultForPromise(t))}else{var a=this._getInvalidInputException();if(a){n=Promise.reject(a)}else{n=Promise.reject(i)}}}this._fireChange(t,e,i,n);this._bPendingChange=false}x.prototype._fireChange=function(t,e,i,n){};function G(t){var e=this.getEditMode();if(g._getEditable(e)&&(this.hasListeners("submit")||this._bPendingChange)){var i=Lt.call(this);var n=false;if(i){n=true}else if(this._isInvalidInput()){i=Promise.reject()}else{i=Promise.resolve(this._getResultForPromise(this.getConditions()))}if(this._bPendingChange){if(n){R.call(this,undefined,undefined,undefined,i)}else{R.call(this,this.getConditions(),!this._isInvalidInput(),undefined,i)}}this.fireSubmit({promise:i})}}x.prototype._initDataType=function(){if(this._getContentFactory().getDataType()){this._getContentFactory().getDataType().destroy();this._getContentFactory().setDataType(undefined)}if(this._getContentFactory().getDateOriginalType()){if(this._getContentFactory().getDateOriginalType()._bCreatedByField){this._getContentFactory().getDateOriginalType().destroy()}this._getContentFactory().setDateOriginalType(undefined)}if(this._getContentFactory().getUnitOriginalType()){if(this._getContentFactory().getUnitOriginalType()._bCreatedByField){this._getContentFactory().getUnitOriginalType().destroy()}this._getContentFactory().setUnitOriginalType(undefined)}this._getContentFactory().setIsMeasure(false)};function j(){var t=this._getContentFactory().getDateOriginalType()||this._getContentFactory().getUnitOriginalType()||this._getContentFactory().getDataType();if(t&&typeof t==="object"){return t.getMetadata().getName()}else if(this.bDelegateInitialized){return this.getTypeUtil().getDataTypeClassName(this.getDataType())}else{return this.getDataType()}}function $(){var t=this._getContentFactory().getDateOriginalType()||this._getContentFactory().getUnitOriginalType()||this._getContentFactory().getDataType();if(t&&typeof t==="object"&&t.getConstraints()){return t.getConstraints()}else{return this.getDataTypeConstraints()}}function q(){var t=this._getContentFactory().getDateOriginalType()||this._getContentFactory().getUnitOriginalType()||this._getContentFactory().getDataType();if(t&&typeof t==="object"&&t.getFormatOptions()){return t.getFormatOptions()}else{return this.getDataTypeFormatOptions()}}x.prototype.getBaseType=function(){var t=j.call(this);var e=$.call(this);var i=q.call(this);var n=this.getTypeUtil().getBaseType(t,i,e);return n};function z(t,e){var i=Dt.call(this);if(i&&this._bConnected){It.call(this,t,i)}}x.prototype._getContent=function(){var t=this.getContent();if(!t){if(this.getEditMode()===e.Display){t=this.getContentDisplay()}else{t=this.getContentEdit()}}if(t){return[t]}else{return this.getAggregation("_content",[])}};x.prototype._handleModelContextChange=function(t){};x.prototype._removeUIMessage=function(){this.setValueState(M.None);this.setValueStateText()};x.prototype._observeChanges=function(t){if(t.name==="dataType"){if(this._getContentFactory().getDataType()){var i=function(t){this._getContentFactory().checkDataTypeChanged(t).then(function(t){if(t&&!this._bIsBeingDestroyed){this._initDataType();this.destroyAggregation("_content");this._getContentFactory().updateConditionType()}}.bind(this)).catch(function(t){throw t})}.bind(this);if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){i.call(this,t.current)}.bind(this));return}i.call(this,t.current)}}if(t.name==="dataTypeFormatOptions"||t.name==="dataTypeConstraints"){if(this._getContentFactory().getDataType()){this._initDataType();this.destroyAggregation("_content");this._getContentFactory().updateConditionType()}}if(t.name==="maxConditions"){this._updateInternalContent()}if(t.name==="conditions"){this._resetInvalidInput();z.call(this,t.current,t.old);var n=false;var a=0;for(a=0;a<this._aAsyncChanges.length;a++){var o=this._aAsyncChanges[a];if(o.waitForUpdate&&v(o.result,t.current)){yt.call(this,o);n=true;break}}if(n){this._aAsyncChanges.splice(a,1)}if((t.current.length===0||t.old.length===0)&&this.getShowEmptyIndicator()&&this.getEditMode()===e.Display&&!this.getContent()&&!this.getContentDisplay()){this.invalidate()}}if(t.name==="display"){this._destroyInternalContent();this._getContentFactory().updateConditionType()}if(t.name==="fieldHelp"&&t.ids){Ft.call(this,t.ids,t.mutation);this._getContentFactory().updateConditionType()}if(t.name==="fieldInfo"&&t.child){St.call(this,t.child,t.mutation)}if(t.name==="content"&&t.child){K.call(this,t.child,t.mutation,t.name)}if(t.name==="contentEdit"&&t.child){K.call(this,t.child,t.mutation,t.name)}if(t.name==="contentDisplay"&&t.child){K.call(this,t.child,t.mutation,t.name)}if(t.name==="delegate"&&!this.bDelegateInitialized&&!this.bDelegateLoading){this.initControlDelegate.call(this)}if(t.name==="ariaLabelledBy"&&t.ids){Q.call(this,t.ids,t.mutation)}if(t.name==="editMode"){J.call(this);if(this._bSettingsApplied&&(t.old===e.Display||t.old===e.EditableDisplay||t.current===e.Display||t.current===e.EditableDisplay)){this._triggerCheckCreateInternalContent()}}};x.prototype._updateInternalContent=function(){if(this.getAggregation("_content",[]).length>0){Z.call(this);this._getContentFactory().updateConditionType()}};x.prototype.getFocusDomRef=function(){var t=this._getContent();if(t.length>0){return t[0].getFocusDomRef()}else{return this.getDomRef()}};x.prototype.getIdForLabel=function(){var t;var e=this._getContent();if(e.length>0){t=e[0].getIdForLabel()}else{t=et.call(this)}return t};x.prototype.getEditable=function(){return g._getEditable(this.getEditMode())};x.prototype.getControlForSuggestion=function(){var t=this._getContent();if(t.length>0){if(this._getContentFactory().isMeasure()){return t[1]}else{return t[0]}}else{return this}};x.prototype.getFocusElementForValueHelp=function(t){var e=this.getControlForSuggestion();var i=e&&e.getMetadata().getAllPrivateAggregations()._endIcon&&e.getAggregation("_endIcon",[]);var n;if(i){for(var a=0;a<i.length;a++){if(i[a].getVisible()){n=i[a];break}}}return t||!n?e:n};x.prototype.getMaxConditionsForHelp=function(){if(this._getContentFactory().isMeasure()){return 1}else{return this.getMaxConditions()}};x.prototype.getFormFormattedValue=function(){var t=this.getConditions();var e=this.getShowEmptyIndicator()&&t.length===0&&!this.getContent()&&!this.getContentDisplay();if(e){if(!this._oResourceBundleM){this._oResourceBundleM=sap.ui.getCore().getLibraryResourceBundle("sap.m")}return this._oResourceBundleM.getText("EMPTY_INDICATOR")}else if(this._getContentFactory().isMeasure()&&this._getContentFactory().getUnitOriginalType()){var i=t.length>0?t[0].values[0]:[0,null];return this._getContentFactory().getUnitOriginalType().formatValue(i,"string")}else if(this._getContentFactory().getDateOriginalType()){var n=t.length>0?t[0].values[0]:null;return this._getContentFactory().getDateOriginalType().formatValue(n,"string")}else{var a=this._getContentFactory().getConditionsType();var o=a.getFormatOptions();var s=o.noFormatting;o.noFormatting=false;a.setFormatOptions(o);var r=a.formatValue(t);o.noFormatting=s;a.setFormatOptions(o);return r}};x.prototype.getFormValueProperty=function(){return"conditions"};x.prototype.getOverflowToolbarConfig=function(){return{canOverflow:true,invalidationEvents:[],propsUnrelatedToSize:["conditions","editMode","display","valueState","valueStateText"]}};x.prototype.enhanceAccessibilityState=function(t,e){var i=this.getParent();if(i&&i.enhanceAccessibilityState){i.enhanceAccessibilityState(this,e)}};x.prototype.getAccessibilityInfo=function(){var t=this._getContent();if(t.length>0&&t[0].getAccessibilityInfo){return t[0].getAccessibilityInfo()}else{return{}}};function Q(t,e){var i=this.getAggregation("_content",[]);var n=this.getContent();if(n){i.push(n)}n=this.getContentDisplay();if(n){i.push(n)}n=this.getContentEdit();if(n){i.push(n)}for(var a=0;a<i.length;a++){n=i[a];if(n.getMetadata().getAllAssociations().ariaLabelledBy){if(e==="remove"){n.removeAriaLabelledBy(t)}else if(e==="insert"){n.addAriaLabelledBy(t)}}}}function W(t,e){var i={aria:{}};var n=Dt.call(this);if(n){var a=n.getAriaAttributes(this.getMaxConditionsForHelp());var o=a.roleDescription;i["role"]=a.role;if(o){i.aria["roledescription"]=o}i.aria["haspopup"]=a.ariaHasPopup;i["autocomplete"]="off";if(t){if(a.role){i.aria["expanded"]="true"}i.aria["controls"]=a.contentId;if(e){i.aria["activedescendant"]=e}}else if(a.role){i.aria["expanded"]="false"}i["valueHelpEnabled"]=a.valueHelpEnabled}this.setProperty("_ariaAttributes",i,true)}x.prototype.connectLabel=function(t){it.call(this,t);t.bindProperty("text",{path:"$field>/label"});t.setLabelFor(this);return this};function J(){var t=f.getReferencingLabels(this);for(var e=0;e<t.length;e++){var i=sap.ui.getCore().byId(t[e]);i.invalidate()}}function K(t,e,i){if(e==="remove"){X.call(this,t);ot.call(this,t);rt.call(this,t);if(this._getContentFactory().getContentConditionTypes()){delete this._getContentFactory().getContentConditionTypes()[i]}t.setModel(null,"$field")}else if(e==="insert"){if(!t.isA("sap.ui.core.IFormContent")){throw new Error(t+" is not a valid content! Only use valid content in "+this)}at.call(this,t,true);Y.call(this,t);st.call(this,t,true);if(this.getAggregation("_content",[]).length>0){this._destroyInternalContent()}if(!this._getContentFactory().getContentConditionTypes()){this._getContentFactory().setContentConditionTypes({})}if(!this._getContentFactory().getContentConditionTypes()[i]){this._getContentFactory().getContentConditionTypes()[i]={}}this._getContentFactory().setNoFormatting(false);this.awaitControlDelegate().then(function(){if(!this.bIsDestroyed){var t=gt.call(this,this._getOperators());if(t!==this._getContentFactory().getHideOperator()){this._getContentFactory().setHideOperator(t);this._getContentFactory()._setUsedConditionType(this.getContent(),this.getContentEdit(),this.getContentDisplay(),this.getEditMode())}}}.bind(this));var n;var a;var o=false;for(a in t.getMetadata().getAllProperties()){if(t.getBindingPath(a)==="/conditions"){n=t.getBindingInfo(a);if(n&&n.type&&n.type instanceof h){this._getContentFactory().getContentConditionTypes()[i].oConditionsType=n.type}o=true}if(a==="editable"&&!t.getBindingPath(a)&&t.isPropertyInitial(a)){t.bindProperty(a,{path:"$field>/editMode",formatter:g._getEditable})}if(a==="enabled"&&!t.getBindingPath(a)&&t.isPropertyInitial(a)){t.bindProperty(a,{path:"$field>/editMode",formatter:g._getEnabled})}if(a==="displayOnly"&&!t.getBindingPath(a)&&t.isPropertyInitial(a)){t.bindProperty(a,{path:"$field>/editMode",formatter:g._getDisplayOnly})}if(a==="required"&&!t.getBindingPath(a)&&t.isPropertyInitial(a)){t.bindProperty(a,{path:"$field>/required"})}if(a==="textAlign"&&!t.getBindingPath(a)&&t.isPropertyInitial(a)){t.bindProperty(a,{path:"$field>/textAlign"})}if(a==="textDirection"&&!t.getBindingPath(a)&&t.isPropertyInitial(a)){t.bindProperty(a,{path:"$field>/textDirection"})}if(a==="valueState"&&!t.getBindingPath(a)&&t.isPropertyInitial(a)){t.bindProperty(a,{path:"$field>/valueState"})}if(a==="valueStateText"&&!t.getBindingPath(a)&&t.isPropertyInitial(a)){t.bindProperty(a,{path:"$field>/valueStateText"})}if(a==="placeholder"&&!t.getBindingPath(a)&&t.isPropertyInitial(a)){t.bindProperty(a,{path:"$field>/placeholder"})}if(a==="showValueHelp"&&!t.getBindingPath(a)&&t.isPropertyInitial(a)){t.bindProperty(a,{path:"$field>/_fieldHelpEnabled"})}if(a==="valueHelpIconSrc"&&!t.getBindingPath(a)&&t.isPropertyInitial(a)){t.setValueHelpIconSrc(this._getFieldHelpIcon())}}for(var s in t.getMetadata().getAllAggregations()){if(t.getBindingPath(s)==="/conditions"){n=t.getBindingInfo(s);if(n&&n.template){for(a in n.template.getMetadata().getAllProperties()){var r=n.template.getBindingInfo(a);if(r&&r.type&&r.type instanceof l){this._getContentFactory().getContentConditionTypes()[i].oConditionType=r.type;if(o){this._getContentFactory().setNoFormatting(true)}break}}}}if(s==="tooltip"&&!t.getBindingPath(s)&&!t.getAggregation(s)){t.bindProperty(s,{path:"$field>/tooltip"})}}if(t.getMetadata().getAllAssociations().ariaLabelledBy){this._getContentFactory().setAriaLabelledBy(t)}}}function Y(t){if(t.getMetadata().getEvents().change){t.attachEvent("change",ft,this)}if(t.getMetadata().getEvents().liveChange){t.attachEvent("liveChange",vt,this)}if(t.getMetadata().getEvents().press){t.attachEvent("press",_t,this)}if(t.getMetadata().getEvents().valueHelpRequest){t.attachEvent("valueHelpRequest",Tt,this)}if(t.getMetadata().getEvents().tokenUpdate){t.attachEvent("tokenUpdate",mt,this)}}function X(t){if(t.getMetadata().getEvents().change){t.detachEvent("change",ft,this)}if(t.getMetadata().getEvents().liveChange){t.detachEvent("liveChange",vt,this)}if(t.getMetadata().getEvents().press){t.detachEvent("press",_t,this)}if(t.getMetadata().getEvents().valueHelpRequest){t.detachEvent("valueHelpRequest",Tt,this)}if(t.getMetadata().getEvents().tokenUpdate){t.detachEvent("tokenUpdate",mt,this)}}function Z(){var t=function(){if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){Z.call(this)}.bind(this))}else{tt.call(this)}};if(this._oCreateContentPromise){this._oCreateContentPromise.then(function(){Z.call(this)}.bind(this))}else{t.call(this)}}x.prototype._checkCreateInternalContent=function(){if(!this.bIsDestroyed&&this.getVisible()&&this._getContentFactory().getDataType()){Z.call(this)}};x.prototype._triggerCheckCreateInternalContent=function(){if(!this._oCheckCreateInternalContentPromise){this._oCheckCreateInternalContentPromise=this.awaitControlDelegate().then(function(){delete this._oCheckCreateInternalContentPromise;this._checkCreateInternalContent()}.bind(this))}};function tt(){if(this._bIsBeingDestroyed||this.bIsDestroyed){return}var t=this.getEditMode();var i=this.getContent();var n=this.getContentEdit();var a=this.getContentDisplay();this._getContentFactory()._setUsedConditionType(i,n,a,t);bt.call(this,this.getFieldHelp());W.call(this,false);if(i||t===e.Display&&a||t!==e.Display&&n){this._destroyInternalContent();var o=this._getContent();if(o.length===1){it.call(this,o[0])}return}var s=this.getMaxConditions();var r=this._getOperators();var l;var h=this.getAggregation("_content",[]);var d;var g;var p=this.getMultipleLines();var u=this._bTriggerable;var c=this._getContentFactory().getContentType(this.getBaseType(),this.getMaxConditions(),u);if(h.length>0){d=h[0];g=d.getMetadata().getName().replace(/\./g,"/")}var f=this._getContentFactory().getContentMode(c,t,s,p,r);var y=c.getControlNames(f,r[0]);l=y[0];if(l!==g){this._getContentFactory().setHideOperator(gt.call(this,r));if(d){this._destroyInternalContent();if(d.isA("sap.m.DateTimeField")){this._initDataType()}this._getContentFactory().updateConditionType()}if(dt.call(this,c,r,t,s)){lt.call(this,c.getUseDefaultFieldHelp().name)}else if(this._sDefaultFieldHelp){delete this._sDefaultFieldHelp}var v=et.call(this);this._oCreateContentPromise=this._getContentFactory().createContent(c,f,v);this._oCreateContentPromise.then(function(t){delete this._oCreateContentPromise;for(var e=0;e<t.length;e++){var i=t[e];i.attachEvent("parseError",pt,this);i.attachEvent("validationError",ut,this);i.attachEvent("validationSuccess",ct,this);at.call(this,i,c.getUseDefaultEnterHandler());st.call(this,i,false);it.call(this,i);if(this._bConnected&&(e===0&&!this._getContentFactory().isMeasure()||e===1&&this._getContentFactory().isMeasure())){wt.call(this,i)}this.addAggregation("_content",i)}J.call(this)}.bind(this)).catch(function(t){delete this._oCreateContentPromise;throw t}.bind(this))}}function et(){return this.getId()+"-inner"}x.prototype._destroyInternalContent=function(){this.destroyAggregation("_content");if(this._getContentFactory().getDateOriginalType()){this._getContentFactory().setDataType(this._getContentFactory().getDateOriginalType());this._getContentFactory().setDateOriginalType(undefined)}else if(this._getContentFactory().getUnitOriginalType()){this._getContentFactory().setDataType(this._getContentFactory().getUnitOriginalType());this._getContentFactory().setUnitOriginalType(undefined)}if(this._isInvalidInput()){this._resetInvalidInput();this._removeUIMessage()}if(this._getContentFactory().isMeasure()){this._getContentFactory().setIsMeasure(false)}};function it(t){if(!this._oManagedObjectModel&&!this._bIsBeingDestroyed){this._oManagedObjectModel=new T(this)}t.setModel(this._oManagedObjectModel,"$field")}function nt(t){var e=false;var i=Dt.call(this);if(!i){return}else{switch(t.type){case"sapup":e=i.isNavigationEnabled(-1);break;case"sapdown":e=i.isNavigationEnabled(1);break;case"saphome":e=i.isNavigationEnabled(-9999);break;case"sapend":e=i.isNavigationEnabled(9999);break;case"sappageup":e=i.isNavigationEnabled(-10);break;case"sappagedown":e=i.isNavigationEnabled(10);break;default:e=i.isOpen();break}}if(e){t.stopPropagation();t.stopImmediatePropagation(true);switch(t.type){case"sapup":this.onsapup(t);break;case"sapdown":this.onsapdown(t);break;case"saphome":this.onsaphome(t);break;case"sapend":this.onsapend(t);break;case"sappageup":this.onsappageup(t);break;case"sappagedown":this.onsappagedown(t);break;default:break}}}function at(t,e){t.addDelegate(B,true,this);if(e){t.addDelegate(w,false,this)}}function ot(t){t.removeDelegate(B);t.removeDelegate(w)}function st(t,e){if(e){t._OriginalGetFieldGroupIds=t._getFieldGroupIds;t._OriginalTriggerValidateFieldGroup=t.triggerValidateFieldGroup}t._getFieldGroupIds=function(){var t=this.getFieldGroupIds();var e=this.getParent();if(e){t=t.concat(e._getFieldGroupIds())}return t};t.triggerValidateFieldGroup=function(t){var e=this.getParent();if(e){var i=t.indexOf(e.getId());if(i>-1){L.call(e,t)}else{e.fireValidateFieldGroup({fieldGroupIds:t})}}}}function rt(t){if(t._OriginalGetFieldGroupIds&&t._OriginalTriggerValidateFieldGroup){t._getFieldGroupIds=t._OriginalGetFieldGroupIds;delete t._OriginalGetFieldGroupIds;t.triggerValidateFieldGroup=t._OriginalTriggerValidateFieldGroup;delete t._OriginalTriggerValidateFieldGroup}}function lt(t){this._sDefaultFieldHelp=S[t].id;var e=S[t].control;if(e&&e.bIsDestroyed){S[t].control=undefined;e=undefined}if(!e){if(S[t].promise){S[t].promise.then(ht.bind(this,S[t].id))}else{S[t].promise=u(S[t].modules).catch(function(e){throw new Error("loadModules promise rejected in sap.ui.mdc.field.FieldBase:_createDefaultFieldHelp function call - could not load controls "+JSON.stringify(S[t].modules))}).then(function(i){var n=i[0];var a=i[1];var o=i[2];var s=this.bDelegateInitialized&&this.getControlDelegate()[S[t].getDelegate]();e=new n(S[t].id,{delegate:s});var r=new a(S[t].id+"-container",{content:[new o(S[t].id+"-content",S[t].contentProperties)]});e._bIsDefaultHelp=true;e._sDefaultHelpType=t;S[t].control=e;if(S[t].dialog){e.setDialog(r)}else{e.setTypeahead(r)}e.connect(this);ht.call(this,S[t].id)}.bind(this)).unwrap()}}else{ht.call(this,S[t].id)}W.call(this,false)}function ht(t){Ft.call(this,t,"insert")}function dt(t,i,n,a){var o=t.getUseDefaultFieldHelp();if(o&&!this.getFieldHelp()&&n!==e.Display){if(a===1&&o.single||a!==1&&o.multi){if(i.length===1){var s=gt.call(this,i);if(a===1){if(!(t.getEditOperator()&&t.getEditOperator()[i[0]])&&(o.oneOperatorSingle||!s)){return true}}else if(o.oneOperatorMulti||!s){return true}}else{return true}}}return false}function gt(t){if(t.length===1){var e=o.getOperator(t[0]);return!e||e.isSingleValue()}else{return false}}x.prototype._setInvalidInput=function(t,e,i){this._oInvalidInput={exception:t,value:e,reason:i}};x.prototype._getInvalidInputException=function(){return this._oInvalidInput&&this._oInvalidInput.exception};x.prototype._resetInvalidInput=function(){this._oInvalidInput=null};x.prototype._isInvalidInput=function(){return!!this._oInvalidInput};function pt(t){var e=t.getParameter("newValue");var i=t.getParameter("exception");this._setInvalidInput(i,e,"ParseError");this._sFilterValue=""}function ut(t){var e=t.getParameter("newValue");var i=t.getParameter("exception");this._setInvalidInput(i,e,"ValidationError");this._sFilterValue="";var n=i&&i instanceof r&&i.getConditions();var a=false;var o=0;for(o=0;o<this._aAsyncChanges.length;o++){var s=this._aAsyncChanges[o];if(s.waitForUpdate&&Array.isArray(s.result)){if(s.result.length===0&&e===""){s.reject(t.getParameter("exception"));a=true;break}else if(v(s.result,n)){s.reject(i);a=true;break}}}if(a){this._aAsyncChanges.splice(o,1)}}function ct(t){this._resetInvalidInput()}function ft(t){var e={parameters:C({},t.getParameters()),source:t.getSource()};var i=this._aAsyncChanges.length;if(i>0&&!this._aAsyncChanges[i-1].changeFired){this._aAsyncChanges[i-1].changeFired=true;this._aAsyncChanges[i-1].changeEvent=e;k.call(this,undefined,undefined,undefined,this._aAsyncChanges[i-1].promise);return}var n={changeEvent:e};yt.call(this,n)}function yt(t){var e=this.getConditions();var i=true;var n;var a=t.changeEvent.source;if(t.changeEvent.parameters.hasOwnProperty("valid")){i=t.changeEvent.parameters["valid"]}else if(this._isInvalidInput()){i=false}if(!i&&t.changeEvent.parameters.hasOwnProperty("value")){n=t.changeEvent.parameters["value"]}var o=Dt.call(this);if(o&&this._bConnected){if(sap.ui.getCore().getCurrentFocusedControlId()===a.getId()){o.close()}this._sFilterValue="";if(i){It.call(this,e,o);o.onControlChange()}Ct.call(this)}if(this._oNavigateCondition){this._oNavigateCondition=undefined;this._getContentFactory().updateConditionType()}if(t.resolve){kt.call(this,t)}else{k.call(this,e,i,n)}}function vt(t){var e;var i;var n=false;var a=t.getSource();this._oNavigateCondition=undefined;this._getContentFactory().updateConditionType();if("value"in t.getParameters()){e=t.getParameter("value")}else if("newValue"in t.getParameters()){e=t.getParameter("newValue")}if("escPressed"in t.getParameters()){n=t.getParameter("escPressed")}if("previousValue"in t.getParameters()){i=t.getParameter("previousValue")}else{var s=this.getConditions();i=s[0]&&s[0].values[0]}var r=Dt.call(this);if(r&&(!this._getContentFactory().isMeasure()||a.getShowValueHelp())){if(n){if(r.isOpen()){r.close();It.call(this,this.getConditions(),r);Ct.call(this);this._sFilterValue=""}}else{var l=this._getOperators();var h=false;for(var d=0;d<l.length;d++){var g=o.getOperator(l[d]);if(g.validateInput){h=true;break}}if(h){this._bIgnoreInputValue=false;this._vLiveChangeValue=e;if(!this._fnLiveChangeTimer){N.call(this);this._fnLiveChangeTimer=E(function(){var t=this.getDisplay();if(typeof this._vLiveChangeValue!=="undefined"){this._sFilterValue=""}if(this._vLiveChangeValue){var e=o.getEQOperator();var i=e.getValues(this._vLiveChangeValue,t,true);if(i[0]){this._sFilterValue=i[0];if(i[1]){this._sFilterValue=this._sFilterValue+" "}}if(i[1]){this._sFilterValue=this._sFilterValue+i[1]}}var n=function(){var t=document.activeElement;if(t&&m(this.getDomRef(),t)){var e=r.isOpen();r.setFilterValue(this._sFilterValue);if(this.getMaxConditionsForHelp()===1&&r.getConditions().length>0){r.setConditions([])}if(!e){r.open(true)}W.call(this,true);delete this._vLiveChangeValue}}.bind(this);if(this._bConnected&&this._getContent()[0]){r.isTypeaheadSupported().then(function(t){return!!t&&n()});delete this._vLiveChangeValue}}.bind(this),300,{leading:false,trailing:true});r.initBeforeOpen(true)}var p=r.isTypeaheadSupported();if(p instanceof Promise){p.then(function(t){var e=document.activeElement;if(e&&m(this.getDomRef(),e)&&this._fnLiveChangeTimer){this._fnLiveChangeTimer()}this._bOpenByTyping=t}.bind(this))}this._fnLiveChangeTimer()}}}this.fireLiveChange({value:e,escPressed:n,previousValue:i})}function Ct(){if(this._fnLiveChangeTimer){this._fnLiveChangeTimer.cancel();delete this._vLiveChangeValue}}function _t(t){var e=this.getFieldInfo();if(e){e.getTriggerHref().then(function(t){if(!t){e.open(this._getContent()[0]);W.call(this,true)}}.bind(this))}this.firePress()}function mt(t){if(t.getParameter("type")==="removed"){var e=t.getParameter("removedTokens");var i=this.getConditions();var n;var a;var o;for(o=0;o<e.length;o++){var r=e[o];var l=r.getBindingContext("$field").sPath;var h=parseInt(l.slice(l.lastIndexOf("/")+1));i[h].delete=true}for(o=i.length-1;o>=0;o--){if(i[o].delete){if(this._getContentFactory().isMeasure()){n=i[o].values[0][1];a=i[o].payload}i.splice(o,1)}}if(this._getContentFactory().isMeasure()&&n&&i.length===0){i=[s.createItemCondition([undefined,n],undefined,undefined,undefined,a)]}this.setProperty("conditions",i,true);R.call(this,i,true);t.preventDefault(true)}}function Ft(t,e){var i;if(e==="remove"){i=sap.ui.getCore().byId(t);if(i){xt.call(this,i);i.detachEvent("dataUpdate",Ht,this)}this.resetProperty("_fieldHelpEnabled")}else if(e==="insert"){if(this._sDefaultFieldHelp&&t!==this._sDefaultFieldHelp){Ft.call(this,this._sDefaultFieldHelp,"remove");delete this._sDefaultFieldHelp}bt.call(this,t);var n=this._getContent()[0];if(n&&n.setValueHelpIconSrc){n.setValueHelpIconSrc(this._getFieldHelpIcon())}}z.call(this,this.getConditions())}function bt(t){if(t&&this.isPropertyInitial("_fieldHelpEnabled")){var e=sap.ui.getCore().byId(t);if(e){e.attachEvent("dataUpdate",Ht,this);if(e.getIcon()){this.setProperty("_fieldHelpEnabled",true,true)}}}}function Dt(){var t=this.getFieldHelp();var e;if(!t&&this._sDefaultFieldHelp){t=this._sDefaultFieldHelp}if(t){e=sap.ui.getCore().byId(t)}return e}function It(t,e){if(!e){e=Dt.call(this)}var i;if(this._isInvalidInput()&&this.getMaxConditionsForHelp()===1){i=[]}else if(this._getContentFactory().isMeasure()){i=[];for(var n=0;n<t.length;n++){var a=t[n];if(a.values[0]&&a.values[0][1]){var o=s.createItemCondition(a.values[0][1],undefined,a.inParameters,a.outParameters,a.payload);i.push(o)}}}else{i=t}e.setConditions(i)}function Tt(t){var e=Dt.call(this);if(e){if(this._fnLiveChangeTimer){this._fnLiveChangeTimer.flush()}e.setFilterValue(this._sFilterValue);var i=this.getConditions();It.call(this,i,e);e.toggleOpen(false);if(!e.isFocusInHelp()){var n=t.getSource();if(n.bValueHelpRequested){n.bValueHelpRequested=false}}}}function Pt(t){var e=this.getConditions();var i=t.getParameter("conditions");var a=t.getParameter("add");var r=t.getParameter("close");var l=t.oSource;var h=this.getMaxConditions();var d;var g=this.getControlForSuggestion();var p;var u=0;if(this._getContentFactory().isMeasure()){if(i.length>1){throw new Error("Only one item must be selected! "+this)}if(i[0].operator!=="EQ"){throw new Error("Only EQ allowed! "+this)}if(e.length>0){for(u=0;u<e.length;u++){e[u].values[0][1]=i[0].values[0];if(e[u].operator==="BT"){e[u].values[1][1]=i[0].values[0]}if(i[0].inParameters){e[u].inParameters=i[0].inParameters}if(i[0].outParameters){e[u].outParameters=i[0].outParameters}if(i[0].payload){e[u].payload=i[0].payload}}}else{var c=o.getEQOperator(this._getOperators());var f=this.getControlDelegate().enhanceValueForUnit(this.getPayload(),[null,i[0].values[0]],this._oTypeInitialization);d=s.createCondition(c.name,[f],i[0].inParameters,i[0].outParameters,n.NotValidated,i[0].payload);e.push(d);var y=this._getContentFactory().getConditionType(true);var C=this._getContentFactory().getUnitConditionsType(true);if(y){p=y.formatValue(d)}else if(C){p=C.formatValue(e)}}}else{if(!a){e=[]}for(u=0;u<i.length;u++){d=i[u];if(!Gt.call(this,d.operator)){continue}var _=o.indexOfCondition(d,e);if(_===-1){e.push(d)}else if(d.validated===n.Validated&&d.values.length>1&&(e[_].values.length===1||d.values[1]!==e[_].values[1])){e[_].values=d.values}}}if(h>0&&h<e.length){e.splice(0,e.length-h)}var m=false;if(g&&g.setDOMValue){if(this.getMaxConditionsForHelp()===1&&e.length>0){if(this._getContentFactory().isMeasure()&&this._getContentFactory().getUnitConditionsType()){p=this._getContentFactory().getUnitConditionsType().formatValue(e)}else if(this._getContentFactory().getConditionType(true)){p=this._getContentFactory().getConditionType().formatValue(e[0])}else if(this._getContentFactory().getConditionsType(true)){p=this._getContentFactory().getConditionsType().formatValue(e)}var F=function(t){var i=g.getDOMValue();g.setDOMValue("");g.setDOMValue(t);if(i!==t&&h===1){this.fireLiveChange({value:e[0].values[0]})}}.bind(this);if(p instanceof Promise){p.then(function(t){F(t)})}else{F(p)}this._sFilterValue=""}else if(r){g.setDOMValue("");this._sFilterValue="";this._bIgnoreInputValue=false}else{this._bIgnoreInputValue=true}if(this._isInvalidInput()){this._resetInvalidInput();this._removeUIMessage();m=true}}var b=this.getConditions();if(!v(e,b)){this._oNavigateCondition=undefined;this._getContentFactory().updateConditionType();this.setProperty("conditions",e,true);if(!o.compareConditionsArray(e,b)){l.onControlChange();k.call(this,e,true)}}else if(m){k.call(this,e,true)}}function Vt(t){var e=t.getParameter("value");var a=t.getParameter("key");var r=t.getParameter("condition");var l=t.getParameter("itemId");var h=t.getParameter("leaveFocus");if(!r&&a){r=s.createItemCondition(a,e)}var d;var g;var p=this.getControlForSuggestion();var u=o.getEQOperator(this._getOperators());var c=Dt.call(this);if(h){p.addStyleClass("sapMFocus");p.focus();c.removeFocus();return}if(r){this._oNavigateCondition=C({},r);this._oNavigateCondition.operator=u.name;a=r.values[0];e=r.values[1]}else{this._oNavigateCondition=s.createCondition(u.name,[a,e],undefined,undefined,n.Validated)}if(this._getContentFactory().isMeasure()){var f=this.getConditions();if(f.length>0){this._oNavigateCondition.operator=f[0].operator;this._oNavigateCondition.values[0]=[f[0].values[0][0],a];if(f[0].operator==="BT"){this._oNavigateCondition.values[1]=[f[0].values[1][0],this._oNavigateCondition.values[0][1]]}else if(this._oNavigateCondition.values.length>1){this._oNavigateCondition.values.splice(1)}}else{this._oNavigateCondition.values=[this.getControlDelegate().enhanceValueForUnit(this.getPayload(),[null,a],this._oTypeInitialization)]}}this._bPreventGetDescription=true;this._getContentFactory().updateConditionType();if(this.getDisplay()!==i.Value){d=a}else if(e){d=e}else{d=a}var y=c.isOpen();if(p&&p.setDOMValue){if(!g){if(this._getContentFactory().isMeasure()&&this._getContentFactory().getUnitConditionsType()&&this._oNavigateCondition){g=this._getContentFactory().getUnitConditionsType().formatValue([this._oNavigateCondition])}else if(this._getContentFactory().getConditionType(true)&&this._oNavigateCondition){g=this._getContentFactory().getConditionType().formatValue(this._oNavigateCondition)}else if(this._getContentFactory().getConditionsType(true)&&this._oNavigateCondition){g=this._getContentFactory().getConditionsType().formatValue([this._oNavigateCondition])}else{g=e||a}}p.setDOMValue(g);if(p._doSelect){p._doSelect()}if(y){p.removeStyleClass("sapMFocus")}}this._bPreventGetDescription=false;this._getContentFactory().updateConditionType();W.call(this,y,l);this._bIgnoreInputValue=false;this.fireLiveChange({value:d})}function Et(t){if(this._bIgnoreInputValue){var e=this.getControlForSuggestion();this._bIgnoreInputValue=false;e.setDOMValue("");this._sFilterValue="";this._getContentFactory().updateConditionType();if(this.getMaxConditions()!==1){this._oManagedObjectModel.checkUpdate(true)}}W.call(this,false);var i=t.getSource();var n=this.getConditions();It.call(this,n,i)}function Ot(t){W.call(this,true)}function Mt(t){var e=this.getControlForSuggestion();e.focus();if(e.fireValueHelpRequest){e.bValueHelpRequested=true;e.fireValueHelpRequest()}}function Ht(t){var n=this.getEditMode()===e.Editable&&this._getContent().length>0&&sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[0].getId();if(!n&&!this._bPendingConditionUpdate&&this.getConditions().length>0&&(this.getMaxConditions()!==1||this.getDisplay()!==i.Value&&!this._isInvalidInput())&&this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true)}}function At(t){var e=Dt.call(this);xt.call(this,e)}function xt(t){if(this._bConnected){t.detachEvent("select",Pt,this);t.detachEvent("navigated",Vt,this);t.detachEvent("disconnect",At,this);t.detachEvent("afterClose",Et,this);t.detachEvent("switchToValueHelp",Mt,this);t.detachEvent("closed",Et,this);t.detachEvent("opened",Ot,this);this._bConnected=false}}function Bt(){var t=Dt.call(this);if(t){var e;var n=this._getContentFactory().isMeasure();if(n){var a=this._getContentFactory().getCompositeTypes();if(a&&a.length>1){e=a[1]}}else{e=this._getContentFactory().getDataType()}var o={maxConditions:this.getMaxConditions(),dataType:e,operators:this._getOperators(),display:n?i.Value:this.getDisplay(),delegate:this.getControlDelegate(),delegateName:this.getDelegate()&&this.getDelegate().name,payload:this.getPayload(),defaultOperatorName:this.getDefaultOperator?this.getDefaultOperator():null};t.connect(this,o);if(!this._bConnected){this._bConnected=true;t.attachEvent("select",Pt,this);t.attachEvent("navigated",Vt,this);t.attachEvent("disconnect",At,this);t.attachEvent("afterClose",Et,this);t.attachEvent("switchToValueHelp",Mt,this);t.attachEvent("closed",Et,this);t.attachEvent("opened",Ot,this);var s=this.getConditions();It.call(this,s,t);var r=this.getControlForSuggestion();wt.call(this,r);if(t._bIsDefaultHelp){S[t._sDefaultHelpType].updateTitle(t,this.getLabel())}}}}function wt(t){if(t&&!t.orgOnsapfocusleave&&t.onsapfocusleave){t.orgOnsapfocusleave=t.onsapfocusleave;t.onsapfocusleave=function(t){var e=Dt.call(this.getParent());if(e){var i=sap.ui.getCore().byId(t.relatedControlId);if(i){if(m(e.getDomRef(),i.getFocusDomRef())){t.stopPropagation();if(this.bValueHelpRequested){this.bValueHelpRequested=false}return}else{e.skipOpening()}}}this.orgOnsapfocusleave(t)}}}x.prototype._getFieldHelpIcon=function(){var t=Dt.call(this);if(t){return t.getIcon()}};function St(t,e){if(e==="remove"){t.detachEvent("dataUpdate",Ut,this)}else if(e==="insert"){t.attachEvent("dataUpdate",Ut,this);Ut.call(this)}}function Ut(){var t=this.getFieldInfo();var i=this;t.isTriggerable().then(function(n){i._bTriggerable=n;var a=i.getAggregation("_content",[]);if(a.length>0&&i.getEditMode()===e.Display){Z.call(i);if(i._bTriggerable){a=i.getAggregation("_content",[]);var o=a[0];t.getDirectLinkHrefAndTarget().then(function(t){g._updateLink(o,t)})}}})}x.prototype._getFormatOptions=function(){if(!this._asyncParsingCall){this._asyncParsingCall=Nt.bind(this)}return{valueType:this._getContentFactory().retrieveDataType(),originalDateType:this._getContentFactory().getDateOriginalType()||this._getContentFactory().getUnitOriginalType(),additionalType:this._getContentFactory().getUnitType(),compositeTypes:this._getContentFactory().getCompositeTypes(),display:this._getContentFactory().isMeasure()?i.Value:this.getDisplay(),fieldHelpID:this._getContentFactory().isMeasure()?undefined:this.getFieldHelp()||this._sDefaultFieldHelp,operators:this._getOperators(),hideOperator:this._getContentFactory().getHideOperator(),maxConditions:this.getMaxConditions(),bindingContext:this.getBindingContext(),asyncParsing:this._asyncParsingCall,navigateCondition:this._oNavigateCondition,delegate:this.getControlDelegate(),delegateName:this.getDelegate()&&this.getDelegate().name,payload:this.getPayload(),preventGetDescription:this._bPreventGetDescription,convertWhitespaces:this.getEditMode()===e.Display||this.getMaxConditions()!==1,control:this,defaultOperatorName:this.getDefaultOperator?this.getDefaultOperator():null,getConditions:this.getConditions.bind(this),noFormatting:this._getContentFactory().getNoFormatting(),keepValue:this._bIgnoreInputValue?this._sFilterValue:null}};x.prototype._checkValueInitial=function(t){if(t===null||t===undefined){return true}if(t===""||typeof t==="string"&&t.match(/^0+$/)){var e=this._getContentFactory().retrieveDataType();var i=e.parseValue("","string");if(i===t){return true}else{try{e.validateValue(i)}catch(t){return true}}}else{var n=j.call(this);if(this.getTypeUtil().getBaseType(n)===d.Unit&&Array.isArray(t)&&t.length>1&&(t[0]===undefined||t[0]===null)&&!t[1]){return true}}return false};x.prototype._getUnitFormatOptions=function(){if(!this._asyncParsingCall){this._asyncParsingCall=Nt.bind(this)}return{valueType:this._getContentFactory().getUnitType(),originalDateType:this._getContentFactory().getDateOriginalType()||this._getContentFactory().getUnitOriginalType(),additionalType:this._getContentFactory().retrieveDataType(),compositeTypes:this._getContentFactory().getCompositeTypes(),display:this.getDisplay(),fieldHelpID:this.getFieldHelp()||this._sDefaultFieldHelp,operators:["EQ"],hideOperator:true,maxConditions:1,bindingContext:this.getBindingContext(),asyncParsing:this._asyncParsingCall,navigateCondition:this._oNavigateCondition,delegate:this.getControlDelegate(),delegateName:this.getDelegate()&&this.getDelegate().name,payload:this.getPayload(),preventGetDescription:this._bPreventGetDescription,convertWhitespaces:this.getEditMode()===e.Display||this.getEditMode()===e.EditableDisplay,control:this,getConditions:this.getConditions.bind(this),noFormatting:false}};function Nt(t){var e=Dt.call(this);if(e&&e.isOpen()){var i=document.activeElement;if(i&&(m(this.getDomRef(),i)||m(e.getDomRef(),i))){e.close()}}var n={};var a=new Promise(function(e,i){n.resolve=e;n.reject=i;t.then(function(t){n.result=t;this._resetInvalidInput();var e=this.getConditions();if(v(t,e)){kt.call(this,n);Rt.call(this,n)}else{n.waitForUpdate=true}}.bind(this)).catch(function(t){if(t&&!(t instanceof D)&&!(t instanceof b)&&!(t instanceof I)){throw t}this._setInvalidInput(t,undefined,"AsyncParsing");i(t);Rt.call(this,n)}.bind(this))}.bind(this));n.promise=a;this._aAsyncChanges.push(n)}function Lt(){var t=[];for(var e=0;e<this._aAsyncChanges.length;e++){t.push(this._aAsyncChanges[e].promise)}if(t.length>0){return Promise.all(t).then(function(){return this._getResultForPromise(this.getConditions())}.bind(this))}return null}x.prototype._getResultForPromise=function(t){return t};function kt(t){t.resolve(this._getResultForPromise(t.result))}function Rt(t){var e=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){if(t===this._aAsyncChanges[i]){e=true;break}}if(e){this._aAsyncChanges.splice(i,1)}return e}x.prototype._getOperators=function(){var t=new RegExp("^\\*(.*)\\*|\\$search$");if(t.test(this.getFieldPath())&&this.getMaxConditions()===1){return["Contains"]}var e=this.getBaseType();if(e===d.Unit){e=d.Numeric}return o.getOperatorsForType(e)};function Gt(t){var e=this._getOperators();for(var i=0;i<e.length;i++){if(t===e[i]){return true}}return false}x.prototype._isPropertyInitial=function(t){if(this.isBound(t)&&!this.getBinding(t)){return!Object.prototype.hasOwnProperty.call(this.mProperties,t)}else{return this.isPropertyInitial(t)}};return x});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldBaseDelegate", ["sap/ui/mdc/BaseDelegate","sap/ui/mdc/odata/TypeUtil","sap/ui/model/FormatException","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated"],function(e,t,n,i,a){"use strict";var u=Object.assign({},e);u.createConditionPayload=function(e,t,n){return undefined};u.createCondition=function(e,t,n,u){var r=i.createItemCondition(n[0],n[1],undefined,undefined,this.createConditionPayload(e,t,n));r.validated=a.Validated;return r};u.initializeTypeFromBinding=function(e,t,n){return{}};u.initializeInternalUnitType=function(e,t,n){};u.enhanceValueForUnit=function(e,t,n){return t};u.isInputValidationEnabled=function(e,t){if(t&&t.isValidationSupported()){return true}else{return false}};u.isInvalidInputAllowed=function(e,t){if(t){return!t.getValidateInput()}else{return true}};u.getItemForValue=function(e,t,n){if(t){return t.getItemForValue(n)}};u.getDescription=function(e,t,i,a,u,r,o,d,l,c,s){var p={value:i,parsedValue:i,dataType:s,context:{inParameters:a,outParameters:u,payload:l},bindingContext:r,checkKey:true,checkDescription:false,caseSensitive:true,exception:n,control:c};return t&&t.getItemForValue(p)};u.getDefaultValueHelpDelegate=function(e){return{name:"sap/ui/mdc/ValueHelpDelegate",payload:{}}};u.getTypeUtil=function(e){return t};return u});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldBaseRenderer", ["sap/ui/core/Renderer","sap/ui/core/IconPool","sap/ui/mdc/enum/EditMode"],function(e,t,i){"use strict";var n=e.extend("sap.ui.mdc.field.FieldBaseRenderer");n=Object.assign(n,{apiVersion:2});n.render=function(e,t){var n=t._getContent();var a=t.getWidth();var s=t.getConditions();var r=t.getEditMode();var d=t.getShowEmptyIndicator()&&s.length===0&&r===i.Display&&!t.getContent()&&!t.getContentDisplay();e.openStart("div",t);e.class("sapUiMdcFieldBase");if(n.length>1){e.class("sapUiMdcFieldBaseMoreFields")}if(d){e.class("sapMShowEmpty-CTX")}e.style("width",a);e.openEnd();for(var o=0;o<n.length;o++){var l=n[o];e.renderControl(l)}e.close("div")};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldInfoBase", ["sap/ui/Device","sap/ui/mdc/Element","sap/m/library","sap/m/ResponsivePopover"],function(e,t,n,i){"use strict";var r=n.PlacementType;var o=t.extend("sap.ui.mdc.field.FieldInfoBase",{metadata:{library:"sap.ui.mdc",events:{dataUpdate:{},popoverAfterOpen:{}}}});o.prototype.isTriggerable=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method isTriggerable must be redefined")};o.prototype.getTriggerHref=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getTriggerHref must be redefined")};o.prototype.getDirectLinkHrefAndTarget=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getDirectLinkHrefAndTarget must be redefined")};o.prototype.open=function(e){e=e?e:this.getParent();if(!e){throw new Error("sap.ui.mdc.field.FieldInfoBase: popover can not be open because the control is undefined")}var t=this.getDependents().find(function(e){return e.isA("sap.m.ResponsivePopover")});if(t&&t.isOpen()){return Promise.resolve()}return this.checkDirectNavigation().then(function(t){return t?Promise.resolve():this.createPopover().then(function(t){if(t){t.openBy(e);t.attachAfterOpen(function(){this.firePopoverAfterOpen()}.bind(this))}}.bind(this))}.bind(this))};o.prototype.getContent=function(e){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getContent must be redefined")};o.prototype.checkDirectNavigation=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method checkDirectNavigation must be redefined")};o.prototype.getSourceControl=function(){return this.getParent()};o.prototype.createPopover=function(){var t;return this.getContent(function(){return t}).then(function(n){t=new i(this.getId()+"-popover",{contentWidth:"380px",horizontalScrolling:false,showHeader:e.system.phone,placement:r.Auto,content:[n],afterClose:function(e){if(e.getSource()){e.getSource().destroy()}}});this.addDependent(t);return new Promise(function(e,i){sap.ui.require(["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(i){if(i.isFlexSupported({element:n})){i.waitForChanges({element:n}).then(function(){t.addAriaLabelledBy(n.getContentTitle?n.getContentTitle():"");e(t)})}else if(n){t.addAriaLabelledBy(n.getContentTitle?n.getContentTitle():"");e(t)}})})}.bind(this))};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldInput", ["sap/m/Input","sap/ui/mdc/field/FieldInputRenderer"],function(e,t){"use strict";var r=e.extend("sap.ui.mdc.field.FieldInput",{metadata:{library:"sap.ui.mdc",properties:{ariaAttributes:{type:"object",defaultValue:{},byValue:true}}},renderer:t});return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldInputRenderUtil", ["sap/ui/core/InvisibleText"],function(e){"use strict";var t={getAriaRole:function(e,t){var r=e.getAriaAttributes();if(r.role){return r.role}else{return t.getAriaRole.apply(this,arguments)}},getAccessibilityState:function(t,r){var i=t.getAriaAttributes();var a=r.getAccessibilityState.apply(this,arguments);if(i.aria){for(var s in i.aria){a[s]=i.aria[s]}}if(!i.valueHelpEnabled&&a.describedby){var l=e.getStaticId("sap.m","INPUT_VALUEHELP");var n=a.describedby.value.split(" ");var u="";for(var b=0;b<n.length;b++){var v=n[b];if(v!==l){u=u?u+" "+v:v}}if(u){a.describedby.value=u}else{delete a.describedby}}return a},writeInnerAttributes:function(e,t,r){r.writeInnerAttributes.apply(this,arguments);var i=t.getAriaAttributes();for(var a in i){if(a!=="aria"&&a!=="role"&&a!=="valueHelpEnabled"){e.attr(a,i[a])}}}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldInputRenderer", ["sap/ui/core/Renderer","sap/m/InputRenderer","sap/ui/mdc/field/FieldInputRenderUtil"],function(e,t,i){"use strict";var n=e.extend(t);n.apiVersion=2;n.addOuterClasses=function(e,i){t.addOuterClasses.apply(this,arguments);e.class("sapUiMdcFieldInput")};n.getAriaRole=function(e){return i.getAriaRole.call(this,e,t)};n.getAccessibilityState=function(e){return i.getAccessibilityState.call(this,e,t)};n.writeInnerAttributes=function(e,n){return i.writeInnerAttributes.call(this,e,n,t)};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldMultiInput", ["sap/m/MultiInput","sap/ui/mdc/field/FieldMultiInputRenderer"],function(e,t){"use strict";var i=e.extend("sap.ui.mdc.field.FieldMultiInput",{metadata:{library:"sap.ui.mdc",properties:{ariaAttributes:{type:"object",defaultValue:{},byValue:true}}},renderer:t});return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldMultiInputRenderer", ["sap/ui/core/Renderer","sap/m/MultiInputRenderer","sap/ui/mdc/field/FieldInputRenderUtil"],function(e,t,i){"use strict";var n=e.extend(t);n.apiVersion=2;n.addOuterClasses=function(e,i){t.addOuterClasses.apply(this,arguments);e.class("sapUiMdcFieldMultiInput")};n.getAriaRole=function(e){return i.getAriaRole.call(this,e,t)};n.getAccessibilityState=function(e){return i.getAccessibilityState.call(this,e,t)};n.writeInnerAttributes=function(e,n){return i.writeInnerAttributes.call(this,e,n,t)};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/ListFieldHelpItem", ["sap/ui/core/ListItem"],function(e){"use strict";var a=e.extend("sap.ui.mdc.field.ListFieldHelpItem",{metadata:{library:"sap.ui.mdc",properties:{groupKey:{type:"any",group:"Appearance",defaultValue:null},groupText:{type:"string",group:"Appearance",defaultValue:null}}}});return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/MultiValueFieldDelegate", ["sap/ui/mdc/field/FieldBaseDelegate"],function(e){"use strict";var i=Object.assign({},e);i.updateItems=function(e,i,t){};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/MultiValueFieldItem", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.field.MultiValueFieldItem",{metadata:{library:"sap.ui.mdc",properties:{key:{type:"any",byValue:true},description:{type:"string"}},defaultProperty:"key"}});t.prototype.bindProperty=function(t,r){if(t==="key"&&!r.formatter){r.targetType="raw"}e.prototype.bindProperty.apply(this,arguments)};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/TokenDisplay", ["sap/m/Token","sap/ui/mdc/field/TokenDisplayRenderer"],function(e,t){"use strict";var i=e.extend("sap.ui.mdc.field.TokenDisplay",{metadata:{library:"sap.ui.mdc",properties:{_delimiter:{type:"string",defaultValue:"·",visibility:"hidden"}}},renderer:t});i.prototype.init=function(){e.prototype.init.apply(this,arguments);if(!this._oResourceBundle){this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")}this.setProperty("_delimiter",this._oResourceBundle.getText("field.SEPARATOR").trim())};i.prototype.getSelected=function(){return false};i.prototype.focus=function(){return};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/TokenDisplayRenderer", ["sap/ui/core/Renderer","sap/m/TokenRenderer"],function(e,t){"use strict";var r=e.extend(t);r.apiVersion=2;r._setAttributes=function(e,r){t._setAttributes(e,r);e.attr("delimiter",r.getProperty("_delimiter"))};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/TokenizerDisplay", ["sap/m/Tokenizer","sap/ui/mdc/field/TokenizerDisplayRenderer","sap/ui/events/KeyCodes","sap/m/library"],function(e,t,i,n){"use strict";var o=n.EmptyIndicatorMode;var r=e.extend("sap.ui.mdc.field.TokenizerDisplay",{metadata:{library:"sap.ui.mdc",properties:{emptyIndicatorMode:{type:"sap.m.EmptyIndicatorMode",group:"Appearance",defaultValue:o.Off}}},renderer:t});r.prototype.init=function(){e.prototype.init.apply(this,arguments);this.allowTextSelection(true);this.addStyleClass("sapUiMdcTokenizerDisplay")};r.prototype.onkeydown=function(t){e.prototype.onkeydown.call(this,t);if(!this.getEnabled()){return}if(t.which===i.ENTER){if(this.getHiddenTokensCount()>0){this._handleNMoreIndicatorPress()}}};r.prototype.getAccessibilityInfo=function(){var e=this.getTokens().map(function(e){return e.getText()}).join(" ");return{description:e}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/TokenizerDisplayRenderer", ["sap/ui/core/Renderer","sap/m/TokenizerRenderer","sap/m/library","sap/ui/core/Core"],function(e,t,n,r){"use strict";var a=n.EmptyIndicatorMode;var o=r.getLibraryResourceBundle("sap.m");var i=e.extend(t);i.apiVersion=2;i._renderIndicator=function(e,n){t._renderIndicator.apply(this,arguments);if(n.getEmptyIndicatorMode()!==a.Off&&n.getTokens().length==0){this._renderEmptyIndicator(e,n)}};i._renderTabIndex=function(e,t){e.attr("tabindex","-1")};i._renderIndicatorTabIndex=function(e,t){e.attr("tabindex","0")};i._renderEmptyIndicator=function(e,t){e.openStart("span");e.class("sapMEmptyIndicator");if(t.getEmptyIndicatorMode()===a.Auto){e.class("sapMEmptyIndicatorAuto")}e.openEnd();e.openStart("span");e.attr("aria-hidden",true);e.openEnd();e.text(o.getText("EMPTY_INDICATOR"));e.close("span");e.openStart("span");e.class("sapUiPseudoInvisibleText");e.openEnd();e.text(o.getText("EMPTY_INDICATOR_TEXT"));e.close("span");e.close("span")};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/BooleanContent", ["sap/ui/mdc/field/content/DefaultContent"],function(e){"use strict";var t=Object.assign({},e,{getDisplayMultiValue:function(){return[null]},getDisplayMultiLine:function(){return[null]},getEditMultiValue:function(){return[null]},getEditMultiLine:function(){return[null]},getUseDefaultFieldHelp:function(){return{name:"bool",oneOperatorSingle:true,oneOperatorMulti:true,single:true,multi:true}},createEditMultiValue:function(){throw new Error("sap.ui.mdc.field.content.BooleanContent - createEditMultiValue not defined!")},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.BooleanContent - createEditMultiLine not defined!")},createDisplayMultiValue:function(){throw new Error("sap.ui.mdc.field.content.BooleanContent - createDisplayMultiValue not defined!")},createDisplayMultiLine:function(){throw new Error("sap.ui.mdc.field.content.BooleanContent - createDisplayMultiLine not defined!")}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/ContentFactory", ["sap/ui/base/Object","sap/ui/mdc/enum/EditMode","sap/ui/mdc/enum/ContentMode","sap/ui/mdc/util/loadModules","sap/ui/mdc/field/content/DefaultContent","sap/ui/mdc/field/content/SearchContent","sap/ui/mdc/field/content/DateContent","sap/ui/mdc/field/content/TimeContent","sap/ui/mdc/field/content/DateTimeContent","sap/ui/mdc/field/content/LinkContent","sap/ui/mdc/field/content/BooleanContent","sap/ui/mdc/field/content/UnitContent","sap/ui/mdc/field/ConditionType","sap/ui/mdc/field/ConditionsType","sap/ui/base/SyncPromise"],function(t,e,n,i,o,a,s,r,p,d,l,y,u,h,c){"use strict";var f=t.extend("sap.ui.mdc.field.content.ContentFactory",{metadata:{library:"sap.ui.mdc"},constructor:function(e,n){this.init();this._oField=n?n.field:null;this._fnHandleTokenUpdate=n?n.handleTokenUpdate:null;this._fnHandleContentChange=n?n.handleContentChange:null;this._fnHandleContentLiveChange=n?n.handleContentLiveChange:null;this._fnHandleValueHelpRequest=n?n.handleValueHelpRequest:null;this._fnHandleEnter=n?n.handleEnter:null;this._fnHandleContentPress=n?n.handleContentPress:null;t.prototype.constructor.apply(this,arguments)}});var C={Default:o,Search:a,Date:s,Time:r,DateTime:p,Link:d,Boolean:l,Unit:y};f.prototype.init=function(){this._oContentTypeClass=undefined;this._sOperator=undefined;this._bNoFormatting=false;this._bHideOperator=false};f.prototype.exit=function(){this._oField=undefined;this._fnHandleTokenUpdate=undefined;this._fnHandleContentChange=undefined;this._fnHandleContentLiveChange=undefined;this._fnHandleValueHelpRequest=undefined;this._fnHandleEnter=undefined;this._fnHandleContentPress=undefined;this._oContentTypeClass=undefined;this._sOperator=undefined;if(this._oConditionType&&this._oConditionType._bCreatedByField){this._oConditionType.destroy();this._oConditionType=undefined}if(this._oConditionsType&&this._oConditionsType._bCreatedByField){this._oConditionsType.destroy();this._oConditionsType=undefined}};f.prototype.createContent=function(t,e,n){var o=t.getControlNames(e,this._sOperator);var a;this.setNoFormatting(t.getNoFormatting(e));if(o.every(function(t){return!t})){return Promise.resolve([])}if(!this.getDataType()){var s=this.getField().getDataType();if(s){s=this.getField().getTypeUtil().getDataTypeClassName(s);o.push(s.replaceAll(".","/"))}}try{a=i(o).catch(function(t){throw new Error("loadModules promise rejected in sap.ui.mdc.field.content.ContentFactory:createContent function call - could not load data type "+JSON.stringify(o))}).then(function(i){if(this.getField()&&!this.getField()._bIsBeingDestroyed){this.updateConditionType();return t.create(this,e,this._sOperator,i,n)}else{return[]}}.bind(this)).unwrap()}catch(t){throw new Error("Error in sap.ui.mdc.field.content.ContentFactory:createContent function call ErrorMessage: '"+t.message+"'")}if(a.then){a.catch(function(t){throw new Error("Error in sap.ui.mdc.field.content.ContentFactory:createContent function call ErrorMessage: '"+t.message+"'")});return a}return c.resolve(a)};f.prototype.getContentMode=function(t,i,o,a,s){var r=n.Edit;if(i===e.Display){if(o!==1){r=n.DisplayMultiValue}else if(a){r=n.DisplayMultiLine}else{r=n.Display}}else if(o!==1){r=n.EditMultiValue}else if(a){r=n.EditMultiLine}else if(s.length===1&&t.getEditOperator()&&t.getEditOperator()[s[0]]){this._sOperator=s[0];r=n.EditOperator}else if(this.getField().getFieldHelp()){r=n.EditForHelp}return r};f.prototype.getContentType=function(t,e,n){var i=this.getField();var o=C[t]?C[t]:null;if(!o){if(i.getFieldInfo()&&n){o=C.Link}else{var a=new RegExp("^\\*(.*)\\*|\\$search$");if(a.test(i.getFieldPath())&&e===1){o=C.Search}else{o=C.Default}}}return o};f._updateLink=function(t,e){if(e){t.setHref(e.href);t.setTarget(e.target)}};f._getEnabled=function(t){return t&&t!==e.Disabled};f._getEditable=function(t){return t===e.Editable||t===e.EditableReadOnly||t===e.EditableDisplay};f._getDisplayOnly=function(t){return t&&t!==e.Editable};f._getEditableUnit=function(t){return t===e.Editable};f.prototype.getField=function(){return this._oField};f.prototype.getFieldHelpIcon=function(){return this.getField()._getFieldHelpIcon()};f.prototype.getHandleTokenUpdate=function(){return this._fnHandleTokenUpdate};f.prototype.getHandleContentChange=function(){return this._fnHandleContentChange};f.prototype.getHandleContentLiveChange=function(){return this._fnHandleContentLiveChange};f.prototype.getHandleValueHelpRequest=function(){return this._fnHandleValueHelpRequest};f.prototype.getHandleEnter=function(){return this._fnHandleEnter};f.prototype.getHandleContentPress=function(){return this._fnHandleContentPress};f.prototype.setAriaLabelledBy=function(t){if(t.addAriaLabelledBy){var e=this.getField().getAriaLabelledBy();for(var n=0;n<e.length;n++){var i=e[n];t.addAriaLabelledBy(i)}}};f.prototype.setHideOperator=function(t){this._bHideOperator=t};f.prototype.getHideOperator=function(){return this._bHideOperator};function g(t,e,n,i){if(!i){if(this[t]&&this[t].getMetadata().getName()!==e.getMetadata().getName()){this[t].destroy();this[t]=undefined}if(!this[t]){var o=n();this[t]=new e(o);this[t]._bCreatedByField=true}}return this[t]}f.prototype.getConditionType=function(t){return g.call(this,"_oConditionType",u,this.getField()._getFormatOptions.bind(this.getField()),t)};f.prototype.setConditionType=function(t){this._oConditionType=t};f.prototype.getConditionsType=function(t,e){var n=e||h;return g.call(this,"_oConditionsType",n,this.getField()._getFormatOptions.bind(this.getField()),t)};f.prototype.setConditionsType=function(t){this._oConditionsType=t};f.prototype.getUnitConditionsType=function(t){return g.call(this,"_oUnitConditionsType",h,this.getField()._getUnitFormatOptions.bind(this.getField()),t)};f.prototype.getContentConditionTypes=function(){return this._oContentConditionTypes};f.prototype.setContentConditionTypes=function(t){this._oContentConditionTypes=t};f.prototype._setUsedConditionType=function(t,n,o,a){if(this._oConditionType&&!this._oConditionType._bCreatedByField){this._oConditionType=undefined}if(this._oConditionsType&&!this._oConditionsType._bCreatedByField){this._oConditionsType=undefined}var s;var r;if(t){if(this._oContentConditionTypes.content){s=this._oContentConditionTypes.content.oConditionType;r=this._oContentConditionTypes.content.oConditionsType}}else if(a===e.Display&&o){if(this._oContentConditionTypes.contentDisplay){s=this._oContentConditionTypes.contentDisplay.oConditionType;r=this._oContentConditionTypes.contentDisplay.oConditionsType}}else if(a!==e.Display&&n){if(this._oContentConditionTypes.contentEdit){s=this._oContentConditionTypes.contentEdit.oConditionType;r=this._oContentConditionTypes.contentEdit.oConditionsType}}if(s){if(this._oConditionType&&this._oConditionType._bCreatedByField){this._oConditionType.destroy()}this._oConditionType=s}if(r){if(this._oConditionsType&&this._oConditionsType._bCreatedByField){this._oConditionsType.destroy()}this._oConditionsType=r}if(s||r){if(!this.getDataType()){var p=this.getField().getDataType();if(p){p=this.getField().getTypeUtil().getDataTypeClassName(p);p=p.replaceAll(".","/");try{i([p]).catch(function(t){throw new Error("loadModules promise rejected in sap.ui.mdc.field.content.ContentFactory:_setUsedConditionType function call - could not load controls "+p)}).then(function(t){if(this.getField()&&!this.getField()._bIsBeingDestroyed){this.updateConditionType()}}.bind(this)).unwrap()}catch(t){throw new Error("Error in sap.ui.mdc.field.content.ContentFactory:_setUsedConditionType function call ErrorMessage: '"+t.message+"'")}}}else{this.updateConditionType()}}};f.prototype.getDataType=function(){return this._oDataType};f.prototype.setDataType=function(t){this._oDataType=t};f.prototype.checkDataTypeChanged=function(t){t=this.getField().getTypeUtil().getDataTypeClassName(t);try{return i([t.replaceAll(".","/")]).catch(function(e){throw new Error("loadModules promise rejected in sap.ui.mdc.field.content.ContentFactory:checkDataTypeChanged function call - could not load data type "+t)}).then(function(e){return!this._oDataType||this._oDataType.getMetadata().getName()!==t}.bind(this))}catch(t){throw new Error("Error in sap.ui.mdc.field.content.ContentFactory:checkDataTypeChanged function call ErrorMessage: '"+t.message+"'")}};f.prototype.retrieveDataType=function(){if(!this._oDataType){var t=this.getField().getDataType();if(typeof t==="string"){this._oDataType=this.getField().getTypeUtil().getDataTypeInstance(t,this.getField().getDataTypeFormatOptions(),this.getField().getDataTypeConstraints());this._oDataType._bCreatedByField=true}}return this._oDataType};f.prototype.getDateOriginalType=function(){return this._oDateOriginalType};f.prototype.setDateOriginalType=function(t){this._oDateOriginalType=t};f.prototype.getUnitOriginalType=function(){return this._oUnitOriginalType};f.prototype.setUnitOriginalType=function(t){this._oUnitOriginalType=t};f.prototype.getUnitType=function(){return this._oUnitType};f.prototype.setUnitType=function(t){this._oUnitType=t};f.prototype.getCompositeTypes=function(){return this._aCompositeTypes};f.prototype.setCompositeTypes=function(t){this._aCompositeTypes=t};f.prototype.isMeasure=function(){return this._bIsMeasure};f.prototype.setIsMeasure=function(t){this._bIsMeasure=t};f.prototype.getDisplayFormat=function(){return this._sDisplayFormat};f.prototype.setDisplayFormat=function(t){this._sDisplayFormat=t};f.prototype.getValueFormat=function(){return this._sValueFormat};f.prototype.setValueFormat=function(t){this._sValueFormat=t};f.prototype.getCalendarType=function(){return this._sCalendarType};f.prototype.setCalendarType=function(t){this._sCalendarType=t};f.prototype.getSecondaryCalendarType=function(){return this._sSecondaryCalendarType};f.prototype.setSecondaryCalendarType=function(t){this._sSecondaryCalendarType=t};f.prototype.getFieldTypeInitialization=function(){return this.getField()._oTypeInitialization};f.prototype.updateConditionType=function(){var t=this._oConditionType;var e=this._oConditionsType;if(t||e){var n=this.getField()._getFormatOptions();if(t){t.setFormatOptions(n)}if(e){e.setFormatOptions(n)}if(this._oUnitConditionsType){n=this.getField()._getUnitFormatOptions();this._oUnitConditionsType.setFormatOptions(n)}}};f.prototype.setNoFormatting=function(t){this._bNoFormatting=t};f.prototype.getNoFormatting=function(){return this._bNoFormatting};return f});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/DateContent", ["sap/ui/mdc/field/content/DefaultContent","sap/ui/mdc/enum/BaseType","sap/ui/mdc/util/DateUtil","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/core/library"],function(e,t,a,r,i,n){"use strict";var l=n.CalendarType;var o;var d;var p;var s=Object.assign({},e,{getEditMultiLine:function(){return[null]},getEdit:function(){return["sap/m/DynamicDateRange","sap/ui/mdc/condition/OperatorDynamicDateOption","sap/ui/mdc/field/DynamicDateRangeConditionsType","sap/m/library","sap/m/DynamicDateUtil","sap/m/DynamicDateFormat"]},getEditOperator:function(){return{EQ:{name:"sap/m/DatePicker",create:this._createDatePickerControl},BT:{name:"sap/m/DateRangeSelection",create:this._createDateRangePickerControl}}},getEditForHelp:function(){return e.getEdit.apply(this,arguments)},getUseDefaultFieldHelp:function(){return{name:"defineConditions",oneOperatorSingle:false,oneOperatorMulti:true,single:false,multi:true}},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.DateContent - createEditMultiLine not defined!")},_createDatePickerControl:function(e,t,a){var r=t[0];var i=e.getConditionsType();e.setHideOperator(true);this._adjustDataTypeForDate(e);var n=new r(a,{value:{path:"$field>/conditions",type:i},displayFormat:e.getDisplayFormat(),valueFormat:e.getValueFormat(),placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",liveChange:e.getHandleContentLiveChange(),change:e.getHandleContentChange()});if(n.setDisplayFormatType){n.setDisplayFormatType(e.getCalendarType())}if(n.setSecondaryCalendarType){n.setSecondaryCalendarType(e.getSecondaryCalendarType())}n._setPreferUserInteraction(true);e.setAriaLabelledBy(n);return[n]},_createDateRangePickerControl:function(e,t,a){var r=t[0];var i=e.getConditionsType();this._adjustDataTypeForDate(e);var n=new r(a,{value:{path:"$field>/conditions",type:i},displayFormat:e.getDisplayFormat(),valueFormat:e.getValueFormat(),delimiter:"...",displayFormatType:e.getCalendarType(),secondaryCalendarType:e.getSecondaryCalendarType(),placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",liveChange:e.getHandleContentLiveChange(),change:e.getHandleContentChange()});n._setPreferUserInteraction(true);e.setAriaLabelledBy(n);return[n]},_adjustDataTypeForDate:function(e){var t=e.retrieveDataType();var r=t.getFormatOptions();this._getDatePattern(e,r);if(!r||r.style||!r.pattern||r.pattern!==e.getValueFormat()||!r.calendarType||r.calendarType!==l.Gregorian){e.setDateOriginalType(e.getDataType());e.setDataType(a.createInternalType(t,e.getValueFormat()));e.updateConditionType()}},_getDatePattern:function(e,a){var r=e.getField().getBaseType();switch(r){case t.Date:e.setValueFormat("yyyy-MM-dd");break;case t.DateTime:e.setValueFormat("yyyy-MM-dd'T'HH:mm:ss");break;case t.Time:e.setValueFormat("HH:mm:ss");break;default:return}e.setDisplayFormat("medium");if(a){if(a.style){e.setDisplayFormat(a.style)}else if(a.pattern){e.setDisplayFormat(a.pattern)}if(a.calendarType){e.setCalendarType(a.calendarType)}if(a.secondaryCalendarType){e.setSecondaryCalendarType(a.secondaryCalendarType)}}},createEdit:function(e,t,a){var r=t[0];var i=t[1];var n=t[2];var l=t[3];if(!o||!d||!p){o=l.StandardDynamicDateRangeKeys;d=t[4];p=t[5]}var s=e.getConditionsType(false,n);var u;if(e.getField().getMetadata().hasProperty("operators")){var g=function(t){return this._getDateRangeOptions(t,e,i)}.bind(this);u={path:"$field>/operators",formatter:g}}else{u=this._getDateRangeOptions(undefined,e,i)}var y=new r(a,{value:{path:"$field>/conditions",type:s},formatter:this._getDateRangeFormatter(e),placeholder:"{$field>/placeholder}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",options:u,change:e.getHandleContentChange()});e.setAriaLabelledBy(r);return[y]},createEditForHelp:function(t,a,r){return e.createEdit.apply(this,arguments)},_getDateRangeOptions:function(e,t,a){if(!e||e.length===0){e=t.getField()._getOperators()}var r=[];var i=t.getField().getBaseType();for(var n=0;n<e.length;n++){var l=e[n];var o=this._getDateRangeOption(l,t,a,i);if(o){r.push(o)}}return r},_getDateRangeOption:function(e,t,a,n){var l=r.getOperator(e);var p;if(l){p=r.getDynamicDateOptionForOperator(l,o,n);if(!p){p=r.getCustomDynamicDateOptionForOperator(l,n);if(!d.getOption(p)){var s=t.retrieveDataType();var u=[];for(var g=0;g<l.valueTypes.length;g++){if(l.valueTypes[g]&&l.valueTypes[g]!==i.ValueType.Static){u.push("custom")}}d.addOption(new a({key:p,operator:l,type:s,baseType:n,valueTypes:u}))}}}return p},_getDateRangeFormatter:function(e){var a=e.retrieveDataType();var r=e.getField().getBaseType();var i=a.getFormatOptions();var n={};var l={};if(i.style){n.style=i.style}else if(i.pattern){n.pattern=i.pattern}if(r===t.DateTime){l.datetime=n}l.date=n;return p.getInstance(l)}});return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/DateTimeContent", ["sap/ui/mdc/field/content/DefaultContent","sap/ui/mdc/field/content/DateContent","sap/ui/mdc/util/DateUtil","sap/base/util/merge","sap/base/util/ObjectPath"],function(e,t,a,i,n){"use strict";var r=Object.assign({},t,{getEditOperator:function(){return{EQ:{name:"sap/m/DateTimePicker",create:this._createDatePickerControl}}},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.DateTimeContent - createEditMultiLine not defined!")},_createDatePickerControl:function(e,i,n){var r=t._createDatePickerControl.apply(this,arguments);var o=e.getDateOriginalType()||e.getDataType();if(a.showTimezone(o)){var s=e.getUnitConditionsType();r[0].bindProperty("timezone",{path:"$field>/conditions",type:s,targetType:"sap.ui.mdc.raw:1"});r[0].setShowTimezone(true)}return r},_adjustDataTypeForDate:function(e){var r=e.retrieveDataType();var o=r.getFormatOptions();if(a.showTimezone(r)){this._getDatePattern(e,o);e.setDateOriginalType(e.getDataType());e.setDataType(a.createInternalType(r,e.getValueFormat()));e.updateConditionType();o=i({},o);delete o.pattern;o.showDate=false;o.showTime=false;o.showTimezone=true;var s=r.getConstraints();var p=r.getMetadata().getName();var c=n.get(p);e.setUnitType(new c(o,s))}else{t._adjustDataTypeForDate.apply(this,arguments)}}});return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/DefaultContent", ["sap/m/library","sap/ui/mdc/enum/ContentMode"],function(e,t){"use strict";var i=e.EmptyIndicatorMode;var a=e.TokenizerRenderMode;var l={getDisplay:function(){return["sap/m/Text"]},getDisplayMultiValue:function(){return["sap/ui/mdc/field/TokenizerDisplay","sap/ui/mdc/field/TokenDisplay"]},getDisplayMultiLine:function(){return["sap/m/ExpandableText"]},getEdit:function(){return["sap/ui/mdc/field/FieldInput"]},getEditMultiValue:function(){return["sap/ui/mdc/field/FieldMultiInput","sap/m/Token"]},getEditMultiLine:function(){return["sap/m/TextArea"]},getEditOperator:function(){return[null]},getEditForHelp:function(){return this.getEdit()},getUseDefaultEnterHandler:function(){return true},getUseDefaultFieldHelp:function(){return{name:"defineConditions",oneOperatorSingle:false,oneOperatorMulti:false,single:true,multi:true}},getControlNames:function(e,i){var a;switch(e){case t.Display:a=this.getDisplay();break;case t.DisplayMultiValue:a=this.getDisplayMultiValue();break;case t.DisplayMultiLine:a=this.getDisplayMultiLine();break;case t.EditMultiValue:a=this.getEditMultiValue();break;case t.EditMultiLine:a=this.getEditMultiLine();break;case t.EditOperator:if(this.getEditOperator()){a=this.getEditOperator()[i]?this.getEditOperator()[i].name:[null]}else{a=[null]}break;case t.EditForHelp:a=this.getEditForHelp();break;default:a=this.getEdit()}if(a){return Array.isArray(a)?a:[a]}throw new Error("No control defined for content mode "+e)},getNoFormatting:function(e){if(e===t.EditMultiValue){return true}else{return false}},create:function(e,i,a,l,n){switch(i){case t.Display:return this.createDisplay(e,l,n);case t.DisplayMultiValue:return this.createDisplayMultiValue(e,l,n);case t.DisplayMultiLine:return this.createDisplayMultiLine(e,l,n);case t.EditMultiValue:return this.createEditMultiValue(e,l,n);case t.EditMultiLine:return this.createEditMultiLine(e,l,n);case t.EditOperator:if(this.getEditOperator()){return this.getEditOperator()[a]?this.getEditOperator()[a].create.call(this,e,l,n):[null]}return[null];case t.EditForHelp:return this.createEditForHelp(e,l,n);default:return this.createEdit(e,l,n)}},createEdit:function(e,t,i){var a=t[0];var l=e.getConditionsType();var n=new a(i,{value:{path:"$field>/conditions",type:l},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",valueHelpIconSrc:e.getFieldHelpIcon(),showValueHelp:"{$field>/_fieldHelpEnabled}",ariaAttributes:"{$field>/_ariaAttributes}",width:"100%",tooltip:"{$field>/tooltip}",autocomplete:false,change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),valueHelpRequest:e.getHandleValueHelpRequest()});n._setPreferUserInteraction(true);e.setAriaLabelledBy(n);return[n]},createEditMultiValue:function(e,t,i){var a=t[0];var l=t[1];var n=e.getConditionType();var r=e.getConditionsType();var d=new l(i+"-token",{text:{path:"$field>",type:n}});var o=new a(i,{value:{path:"$field>/conditions",type:r},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",valueHelpIconSrc:e.getFieldHelpIcon(),ariaAttributes:"{$field>/_ariaAttributes}",width:"100%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:d},dependents:[d],autocomplete:false,showSuggestion:false,change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),tokenUpdate:e.getHandleTokenUpdate(),valueHelpRequest:e.getHandleValueHelpRequest()});o._setPreferUserInteraction(true);e.setAriaLabelledBy(o);return[o]},createEditMultiLine:function(e,t,i){var a=t[0];var l=e.getConditionsType();var n=new a(i,{value:{path:"$field>/conditions",type:l},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",rows:4,tooltip:"{$field>/tooltip}",change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange()});n._setPreferUserInteraction(true);e.setAriaLabelledBy(n);return[n]},createDisplay:function(e,t,a){var l=t[0];var n=e.getConditionsType();var r=new l(a,{text:{path:"$field>/conditions",type:n},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",wrapping:"{$field>/multipleLines}",width:"100%",tooltip:"{$field>/tooltip}",emptyIndicatorMode:i.Auto});return[r]},createDisplayMultiLine:function(e,t,a){var l=t[0];var n=e.getConditionsType();var r=new l(a,{text:{path:"$field>/conditions",type:n},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",tooltip:"{$field>/tooltip}",emptyIndicatorMode:i.Auto});return[r]},createDisplayMultiValue:function(e,t,l){var n=t[0];var r=t[1];var d=e.getConditionType();var o=new r(l+"-token",{text:{path:"$field>",type:d}});var u=new n(l,{editable:false,emptyIndicatorMode:i.Auto,renderMode:a.Narrow,width:"100%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:o},dependents:[o]});return[u]},createEditForHelp:function(e,t,i){return this.createEdit(e,t,i)}};return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/LinkContent", ["sap/ui/mdc/field/content/DefaultContent"],function(e){"use strict";var t=Object.assign({},e,{getDisplay:function(){return["sap/m/Link"]},getDisplayMultiValue:function(){return[null]},getDisplayMultiLine:function(){return["sap/m/Link"]},getUseDefaultFieldHelp:function(){return false},createDisplay:function(e,t,i){var n=t[0];var l=e.getConditionsType();var a=new n(i,{text:{path:"$field>/conditions",type:l},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",tooltip:"{$field>/tooltip}",press:e.getHandleContentPress(),wrapping:"{$field>/multipleLines}"});var r=e.getField().getFieldInfo();if(r){r.getDirectLinkHrefAndTarget().then(function(t){e.getMetadata()._oClass._updateLink(a,t)})}e.setAriaLabelledBy(a);return[a]},createDisplayMultiValue:function(){throw new Error("sap.ui.mdc.field.content.LinkContent - createDisplayMultiValue not defined!")},createDisplayMultiLine:function(e,i,n){return t.createDisplay(e,i,n)}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/SearchContent", ["sap/ui/mdc/field/content/DefaultContent","sap/ui/model/BindingMode","sap/ui/model/ParseException","sap/ui/model/ValidateException"],function(e,t,n,i){"use strict";var r=Object.assign({},e,{getDisplayMultiValue:function(){return[null]},getDisplayMultiLine:function(){return[null]},getEdit:function(){return["sap/m/SearchField"]},getEditMultiValue:function(){return[null]},getEditMultiLine:function(){return[null]},getEditForHelp:function(){return[null]},getUseDefaultEnterHandler:function(){return false},getUseDefaultFieldHelp:function(){return false},createEdit:function(e,r,a){var l=r[0];var o=e.getConditionsType();e.setHideOperator(true);e.updateConditionType();var u=new l(a,{value:{path:"$field>/conditions",type:o,mode:t.OneWay},placeholder:"{$field>/placeholder}",width:"100%",tooltip:"{$field>/tooltip}",search:function(t){if(t.getParameters().clearButtonPressed){return}e.getHandleEnter().call(this,t)},change:function(t){var r=t.getSource();var a=t.getParameter("value");var l=r.getBinding("value");try{l.setExternalValue(a);var o={element:r,property:"value",type:l.getType(),newValue:a,oldValue:""};r.fireValidationSuccess(o,false,true)}catch(e){var u={element:r,property:"value",type:l.getType(),newValue:a,oldValue:"",exception:e,message:e.message};if(e instanceof n){r.fireParseError(u,false,true)}else if(e instanceof i){r.fireValidationError(u,false,true)}else{throw e}}e.getHandleContentChange().call(this,t)},liveChange:e.getHandleContentLiveChange()});e.setAriaLabelledBy(u);return[u]},createEditMultiValue:function(){throw new Error("sap.ui.mdc.field.content.SearchContent - createEditMultiValue not defined!")},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.SearchContent - createEditMultiLine not defined!")},createDisplayMultiValue:function(){throw new Error("sap.ui.mdc.field.content.SearchContent - createDisplayMultiValue not defined!")},createDisplayMultiLine:function(){throw new Error("sap.ui.mdc.field.content.SearchContent - createDisplayMultiLine not defined!")},createEditForHelp:function(){throw new Error("sap.ui.mdc.field.content.SearchContent - createEditForHelp not defined!")}});return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/TimeContent", ["sap/ui/mdc/field/content/DefaultContent","sap/ui/mdc/field/content/DateContent"],function(t,e){"use strict";var n=Object.assign({},e,{getEditOperator:function(){return{EQ:{name:"sap/m/TimePicker",create:this._createDatePickerControl}}},getEdit:function(){return t.getEdit.apply(this,arguments)},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.TimeContent - createEditMultiLine not defined!")},createEdit:function(e,n,i){return t.createEdit.apply(this,arguments)}});return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/UnitContent", ["sap/ui/mdc/field/content/DefaultContent","sap/ui/model/Filter","sap/base/util/isEmptyObject","sap/base/util/merge","sap/base/util/ObjectPath","sap/ui/mdc/enum/EditMode"],function(e,t,a,i,l,n){"use strict";var d=Object.assign({},e,{getEdit:function(){return["sap/ui/mdc/field/FieldInput","sap/ui/core/InvisibleText"]},getEditMultiValue:function(){return["sap/ui/mdc/field/FieldMultiInput","sap/ui/mdc/field/FieldInput","sap/m/Token","sap/ui/core/InvisibleText"]},getEditMultiLine:function(){return[null]},getUseDefaultFieldHelp:function(){return false},createEdit:function(e,t,a){e.setIsMeasure(true);var i=t[0];var l=t[1];var n=e.getConditionsType();this._adjustDataTypeForUnit(e);var d=l.getStaticId("sap.ui.mdc","field.NUMBER");var r=[];var o=new i(a,{value:{path:"$field>/conditions",type:n},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",valueHelpIconSrc:"sap-icon://slim-arrow-down",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",autocomplete:false,fieldGroupIds:[e.getField().getId()],ariaDescribedBy:[d],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange()});o._setPreferUserInteraction(true);e.setAriaLabelledBy(o);r.push(o);r=this._addUnitControl(e,r,a,i,l);return r},createEditMultiValue:function(e,a,i){e.setIsMeasure(true);var l=a[0];var n=a[2];var d=a[1];var r=a[3];var o=e.getConditionType();var s=e.getConditionsType();this._adjustDataTypeForUnit(e);var u=[];var p=new n(i+"-token",{text:{path:"$field>",type:o}});var f=new t({path:"values",test:function(e){if(!Array.isArray(e[0])||e[0][0]){return true}else{return false}}});var g=r.getStaticId("sap.ui.mdc","field.NUMBER");var c=new l(i,{value:{path:"$field>/conditions",type:s},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",fieldGroupIds:[e.getField().getId()],ariaDescribedBy:[g],tokens:{path:"$field>/conditions",template:p,filters:[f]},dependents:[p],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),tokenUpdate:e.getHandleTokenUpdate()});c._setPreferUserInteraction(true);e.setAriaLabelledBy(c);u.push(c);u=this._addUnitControl(e,u,i,d,r);return u},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.UnitContent - createEditMultiLine not defined!")},_addUnitControl:function(e,t,a,i,l){var d=e.getUnitConditionsType();if(e.getField().getEditMode()===n.EditableDisplay){t[0].bindProperty("description",{path:"$field>/conditions",type:d});t[0].setWidth("100%");t[0].setFieldWidth("70%")}else{var r;var o=e.getUnitOriginalType();var s=o&&o.getMetadata().getName();if(s&&s.indexOf("Currency")>=0){r=l.getStaticId("sap.ui.mdc","field.CURRENCY")}else{r=l.getStaticId("sap.ui.mdc","field.UNIT")}var u=new i(a+"-unit",{value:{path:"$field>/conditions",type:d},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditableUnit},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueHelpIconSrc:e.getFieldHelpIcon(),valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",ariaAttributes:"{$field>/_ariaAttributes}",width:"30%",tooltip:"{$field>/tooltip}",autocomplete:false,fieldGroupIds:[e.getField().getId()],ariaDescribedBy:[r],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),valueHelpRequest:e.getHandleValueHelpRequest()});u._setPreferUserInteraction(true);e.setAriaLabelledBy(u);t.push(u)}return t},_adjustDataTypeForUnit:function(e){var t=e.getField();var a=t.getTypeUtil();var i=e.retrieveDataType();var l=i.getFormatOptions();var n=!l||!l.hasOwnProperty("showMeasure")||l.showMeasure;var d=!l||!l.hasOwnProperty("showNumber")||l.showNumber;if(n&&d){var r=a.getUnitTypeInstance(i,true,false);e.setUnitOriginalType(e.getDataType());e.setDataType(r);t.getControlDelegate().initializeInternalUnitType(t.getPayload(),e.getDataType(),e.getFieldTypeInitialization());r=a.getUnitTypeInstance(i,false,true);e.setUnitType(r);t.getControlDelegate().initializeInternalUnitType(t.getPayload(),e.getUnitType(),e.getFieldTypeInitialization());e.updateConditionType()}}});return d});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/FilterBarBase", ["sap/ui/mdc/p13n/subcontroller/FilterController","sap/ui/core/library","sap/ui/core/ShortcutHintsMixin","sap/ui/Device","sap/ui/mdc/Control","sap/base/Log","sap/base/util/merge","sap/base/util/deepEqual","sap/ui/model/base/ManagedObjectModel","sap/ui/base/ManagedObjectObserver","sap/ui/mdc/condition/ConditionModel","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/ConditionConverter","sap/ui/mdc/util/IdentifierUtil","sap/ui/mdc/util/FilterUtil","sap/ui/mdc/filterbar/PropertyHelper","sap/ui/mdc/enum/ReasonMode","sap/ui/mdc/enum/FilterBarValidationStatus","sap/ui/fl/apply/api/ControlVariantApplyAPI","sap/m/library","sap/m/Button","./FilterBarBaseRenderer"],function(t,e,i,n,r,o,s,a,l,h,d,u,p,c,f,g,_,y,m,v,F,b){"use strict";var C=e.ValueState;var I=r.extend("sap.ui.mdc.filterbar.FilterBarBase",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/filterbar/FilterBarBase.designtime",defaultAggregation:"filterItems",interfaces:["sap.ui.mdc.IFilter","sap.ui.mdc.IxState"],properties:{delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/FilterBarDelegate",payload:{modelName:undefined,collectionName:""}}},liveMode:{type:"boolean",defaultValue:false},showMessages:{type:"boolean",group:"Misc",defaultValue:true},showGoButton:{type:"boolean",defaultValue:true},filterConditions:{type:"object",defaultValue:{}},propertyInfo:{type:"object",defaultValue:[]},suspendSelection:{type:"boolean",defaultValue:false},_filterCount:{type:"string",visibility:"hidden"}},aggregations:{filterItems:{type:"sap.ui.mdc.FilterField",multiple:true},basicSearchField:{type:"sap.ui.mdc.FilterField",multiple:false},layout:{type:"sap.ui.mdc.filterbar.IFilterContainer",multiple:false,visibility:"hidden"}},associations:{variantBackreference:{type:"sap.ui.fl.variants.VariantManagement",multiple:false}},events:{search:{reason:{type:"sap.ui.mdc.enum.ReasonMode"}},filtersChanged:{parameters:{conditionsBased:{type:"boolean"},filtersText:{type:"string"},filtersTextExpanded:{type:"string"}}}}},renderer:b});var P=v.ButtonType;I.INNER_MODEL_NAME="$sap.ui.filterbar.mdc.FilterBarBase";I.CONDITION_MODEL_NAME="$filters";I.prototype.init=function(){r.prototype.init.apply(this,arguments);this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._createInnerModel();this._oObserver=new h(this._observeChanges.bind(this));this._oObserver.observe(this,{aggregations:["filterItems","basicSearchField"]});this._createInnerLayout();this._bPersistValues=false;this.getEngine().register(this,{controller:{Filter:new t({control:this})}});this._fResolveInitialFiltersApplied=undefined;this._oInitialFiltersAppliedPromise=new Promise(function(t){this._fResolveInitialFiltersApplied=t}.bind(this));this._bIgnoreChanges=false;this._aOngoingChangeAppliance=[];this._bSearchTriggered=false;this._bIgnoreQueuing=false};I.prototype._createInnerLayout=function(){this._cLayoutItem=null;this._oFilterBarLayout=null;this._bPersistValues=false;this._btnAdapt=null;this.setAggregation("layout",this._oFilterBarLayout,true)};I.prototype._isPhone=function(){return n.system.phone?true:false};I.prototype._isLiveMode=function(){if(this._isPhone()){return false}return this.getLiveMode()};I.prototype._getConditionModel=function(){return this._oConditionModel};I.prototype._getSearchButton=function(){if(!this._btnSearch){this._btnSearch=new F(this.getId()+"-btnSearch",{text:this._oRb.getText("filterbar.GO"),press:this.onSearch.bind(this),type:P.Emphasized});i.addConfig(this._btnSearch,{addAccessibilityLabel:true,message:this._oRb.getText("filterbar.GoBtnShortCutHint")},this)}return this._btnSearch};I.prototype.getConditionModelName=function(){return this._getConditionModelName()};I.prototype._getConditionModelName=function(){return I.CONDITION_MODEL_NAME};I.prototype._createConditionModel=function(){this._oConditionModel=new d;this.setModel(this._oConditionModel,this._getConditionModelName())};I.prototype.applySettings=function(t,e){this._setPropertyHelperClass(g);this._setupPropertyInfoStore("propertyInfo");this._applySettings(t,e);Promise.all([this.awaitPropertyHelper()]).then(function(){if(!this._bIsBeingDestroyed){this._applyInitialFilterConditions()}}.bind(this))};I.prototype._applySettings=function(t,e){r.prototype.applySettings.apply(this,arguments);this._createConditionModel();this._oConditionModel.attachPropertyChange(this._handleConditionModelPropertyChange,this)};I.prototype._waitForMetadata=function(){return this._retrieveMetadata().then(function(){this._applyInitialFilterConditions()}.bind(this))};I.prototype.setIgnoreQueuing=function(t){this._bIgnoreQueuing=t};I.prototype.getIgnoreQueuing=function(){return this._bIgnoreQueuing};I.prototype.setSuspendSelection=function(t){this.setProperty("suspendSelection",t);if(!t){if(this._bSearchTriggered&&!this.getIgnoreQueuing()){this.triggerSearch()}this._bSearchTriggered=false;this.setIgnoreQueuing(false)}return this};I.prototype._createInnerModel=function(){this._oModel=new l(this);this.setModel(this._oModel,I.INNER_MODEL_NAME);return this};I.prototype.getCurrentState=function(){var t={};if(this._bPersistValues){t.filter=s({},this.getFilterConditions())}var e=this.getFilterItems();var i=[];e.forEach(function(t,e){i.push({name:t.getFieldPath()})});t.items=i;return t};I.prototype.getAssignedFilterNames=function(){var t,e=null,i=this._getConditionModel();if(i){e=[];var n=i.getConditions("$search");if(n&&n.length>0){e.push(this._oRb.getText("filterbar.ADAPT_SEARCHTERM"))}this._getNonHiddenPropertyInfoSet().forEach(function(n){t=c.getPropertyKey(n);var r=i.getConditions(t);if(r&&r.length>0){e.push(n.label||t)}})}return e};I.prototype._getAssignedFiltersText=function(){var t={};t.filtersText=this._getAssignedFiltersCollapsedText(this.getAssignedFilterNames());t.filtersTextExpanded=this._getAssignedFiltersExpandedText();return t};I.prototype._getAssignedFiltersExpandedText=function(){var t=0,e=0,i=this._getConditionModel();if(i){var n=i.getAllConditions();for(var r in n){var o=this._getPropertyByName(r);if(o&&!o.hiddenFilter&&n[r].length>0){++t;if(!(r==="$search"&&this.getAggregation("basicSearchField")||this._getFilterField(r))){++e}}}}if(!t&&!e){return this._oRb.getText("filterbar.ADAPT_NOTFILTERED")}if(!e){if(t===1){return this._oRb.getText("filterbar.ADAPT_FILTER_WITH_NON_HIDDEN",[t])}return this._oRb.getText("filterbar.ADAPT_FILTERS_WITH_NON_HIDDEN",[t])}if(t===1){return this._oRb.getText("filterbar.ADAPT_FILTER_WITH_HIDDEN",[t,e])}return this._oRb.getText("filterbar.ADAPT_FILTERS_WITH_HIDDEN",[t,e])};I.prototype._getAssignedFiltersCollapsedText=function(t){var e;t=t||[];if(t.length){e=Object.keys(t).map(function(e){return t[e]}).join(", ");if(t.length===1){return this._oRb.getText("filterbar.ADAPT_FILTER_COLLAPSED",[t.length,e])}return this._oRb.getText("filterbar.ADAPT_FILTERS_COLLAPSED",[t.length,e])}return this._oRb.getText("filterbar.ADAPT_NOTFILTERED")};I.prototype.getAssignedFiltersText=function(){return this._getAssignedFiltersText()};I.prototype._reportModelChange=function(t){if(t.triggerFilterUpdate){this._handleAssignedFilterNames(false)}if(this.getLiveMode()||t.triggerSearch||this._bExecuteOnSelect){this._bExecuteOnSelect=false;this.triggerSearch()}else if(t.recheckMissingRequired){this._recheckMissingRequiredFields()}};I.prototype.getPropertyInfoSet=function(){return this.getPropertyHelper()?this.getPropertyHelper().getProperties():[]};I.prototype._addConditionChange=function(t){this._aOngoingChangeAppliance.push(this.getEngine().createChanges({control:this,applySequentially:true,applyAbsolute:true,key:"Filter",state:t}))};I.prototype._handleConditionModelPropertyChange=function(t){var e;var i=function(t,e){var i={};i[t]=this._stringifyConditions(t,s([],e));this._cleanupConditions(i[t]);return i}.bind(this);if(!this._bIgnoreChanges){var n=t.getParameter("path");if(n.indexOf("/conditions/")===0){var r=n.substring("/conditions/".length);if(this._bPersistValues){var o=t.getParameter("value");if(this._getPropertyByName(r)){e=i(r,o)}else{e=this._retrieveMetadata().then(function(){return i(r,o)})}}else{this._reportModelChange({triggerSearch:false,triggerFilterUpdate:true})}}}if(e){this._addConditionChange(e)}};I.prototype._toExternal=function(t,e){var i=s({},e);i=p.toString(i,t.typeConfig.typeInstance,this.getTypeUtil());this._cleanupCondition(i);this._convertInOutParameters(e,i,"inParameters",p.toString);this._convertInOutParameters(e,i,"outParameters",p.toString);return i};I.prototype._toInternal=function(t,e){var i=s({},e);i=p.toType(i,t.typeConfig.typeInstance,this.getTypeUtil());this._convertInOutParameters(e,i,"inParameters",p.toType);this._convertInOutParameters(e,i,"outParameters",p.toType);return i};I.prototype._convertInOutParameters=function(t,e,i,n){if(t[i]&&Object.keys(t[i]).length>0){Object.keys(t[i]).forEach(function(r){var s=r.startsWith("conditions/")?r.slice(11):r;var a=this._getPropertyByName(s);if(a){var l=u.createCondition("EQ",[t[i][r]]);var h=n(l,a.typeConfig.typeInstance,this.getTypeUtil());if(!e[i]){e[i]={}}if(!r.startsWith("conditions/")){delete e[i][r];r="conditions/"+s}e[i][r]=h.values[0]}else{o.error("mdc.FilterBar._convertInOutParameters: could not find property info for "+s)}}.bind(this))}};I.prototype._cleanupCondition=function(t){if(t){if(t.hasOwnProperty("isEmpty")){delete t.isEmpty}}};I.prototype._cleanupConditions=function(t){if(t){t.forEach(function(t){this._cleanupCondition(t)},this)}};I.prototype._stringifyCondition=function(t,e){var i=e;if(e&&e.values){if(e.values.length>0){i=this._toExternal(t,e)}else{i=s({},e);this._cleanupCondition(i)}}return i};I.prototype._stringifyConditions=function(t,e){var i=this._getPropertyByName(t);var n=e;if(i&&e){n=[];e.forEach(function(t){n.push(this._stringifyCondition(i,t))},this)}return n};I.prototype._internalizeConditions=function(t){var e=s({},t);Object.keys(e).forEach(function(t){e[t].forEach(function(i,n){var r=this._getPropertyByName(t);e[t][n]=this._toInternal(r,i)},this)},this);return e};I.prototype._handleAssignedFilterNames=function(t){if(this._bIsBeingDestroyed){return}if(!t){if(this._btnAdapt){var e=this.getAssignedFilterNames();this.setProperty("_filterCount",this._oRb.getText(e.length?"filterbar.ADAPT_NONZERO":"filterbar.ADAPT",e.length),false)}}var i=this._getAssignedFiltersText();var n={conditionsBased:!t&&!this._bDoNotTriggerFiltersChangeEventBasedOnVariantSwitch,filtersText:i.filtersText,filtersTextExpanded:i.filtersTextExpanded};this._bDoNotTriggerFiltersChangeEventBasedOnVariantSwitch=false;this.fireFiltersChanged(n)};I.prototype.onReset=function(t){this._getConditionModel().oConditionModel.removeAllConditions()};I.prototype.onSearch=function(t){if(!this._bSearchPressed){this._bSearchPressed=true;this._sReason=_.Go;this.triggerSearch().then(function(){this._bSearchPressed=false}.bind(this),function(){this._bSearchPressed=false}.bind(this))}};I.prototype.triggerSearch=function(){if(this.getSuspendSelection()){this._bSearchTriggered=true;return Promise.resolve()}return this.validate()};I.prototype._hasRetrieveMetadataToBeCalled=function(){return this.getPropertyHelper()===null||this.getPropertyHelper().getProperties().length===0&&!this.isPropertyHelperFinal()};I.prototype.validate=function(t){var e=!t;var i=function(){if(!this._oValidationPromise){this._oValidationPromise=new Promise(function(t,e){this._fResolvedSearchPromise=t;this._fRejectedSearchPromise=e}.bind(this));var t=function(){this._validate(e)};setTimeout(t.bind(this),0)}return this._oValidationPromise}.bind(this);return this.waitForInitialization().then(function(){if(this._hasRetrieveMetadataToBeCalled()){return this._retrieveMetadata().then(function(){return i()})}else{return i()}}.bind(this))};I.prototype._clearDelayedSearch=function(){if(this._iDelayedSearchId){clearTimeout(this._iDelayedSearchId);this._iDelayedSearchId=null}};I.prototype._checkAsyncValidation=function(){var t=y.NoError;if(this._aFIChanges&&this._aFIChanges.length>0){t=y.AsyncValidation}return t};I.prototype._checkOngoingChangeAppliance=function(){var t=y.NoError;if(this._aOngoingChangeAppliance&&this._aOngoingChangeAppliance.length>0){t=y.OngoingChangeAppliance}return t};I.prototype._recheckMissingRequiredFields=function(){this.getFilterItems().forEach(function(t){var e;if(t){if(t.getValueState()!==C.None&&t.getValueStateText()===this._oRb.getText("filterbar.REQUIRED_FILTER_VALUE_MISSING")){if(!e){e=f.getRequiredFieldNamesWithoutValues(this)}if(e.indexOf(t.getFieldPath())<0){t.setValueState(C.None)}}}}.bind(this))};I.prototype._checkRequiredFields=function(){var t=y.NoError;var e=f.getRequiredFieldNamesWithoutValues(this);e.forEach(function(e){var i=this._getFilterField(e);if(i){if(i.getValueState()===C.None){i.setValueState(C.Error);i.setValueStateText(this._oRb.getText("filterbar.REQUIRED_FILTER_VALUE_MISSING"))}}else{o.error("Mandatory filter field '"+e+"' not visible on FilterBarBase has no value.")}t=y.RequiredHasNoValue}.bind(this));return t};I.prototype._checkFieldsInErrorState=function(){var t=y.NoError;this.getFilterItems().some(function(e){if(e&&e.getValueState()!==C.None){if(e.getValueStateText()!==this._oRb.getText("filterbar.REQUIRED_FILTER_VALUE_MISSING")){t=y.FieldInErrorState}}return t!==y.NoError}.bind(this));return t};I.prototype._handleFilterItemSubmit=function(t){var e=t.getParameter("promise");if(e){this._sReason=_.Enter;e.then(function(){var t=this._aOngoingChangeAppliance&&this._aOngoingChangeAppliance.length>0?this._aOngoingChangeAppliance.slice():[Promise.resolve()];Promise.all(t).then(function(){this.triggerSearch()}.bind(this))}.bind(this)).catch(function(t){o.error(t);this.triggerSearch().catch(function(t){})}.bind(this))}};I.prototype._handleFilterItemChanges=function(t){if(this._bIgnoreChanges){return}var e=t.oSource;if(e.getRequired()&&e.getValueState()===C.Error&&t.getParameter("valid")){e.setValueState(C.None);return}if(!this._aFIChanges){this._aFIChanges=[]}this._aFIChanges.push({name:e.getFieldPath(),promise:t.getParameter("promise")})};I.prototype.checkFilters=function(){var t=this._checkAsyncValidation();if(t!==y.NoError){return t}t=this._checkOngoingChangeAppliance();if(t!==y.NoError){return t}t=this._checkFieldsInErrorState();if(t!==y.NoError){return t}t=this._checkRequiredFields();if(t!==y.NoError){return t}return t};I.prototype._setFocusOnFirstErroneousField=function(){var t=null;this.getFilterItems().some(function(e){if(e.getValueState()!==C.None){t=e;setTimeout(e["focus"].bind(e),0)}return t!=null});return t};I.prototype._handleAsyncValidation=function(t,e){if(!e){e=this._validate.bind(this)}if(this._aFIChanges&&this._aFIChanges.length>0){var i=this._aFIChanges.slice();this._aFIChanges=null;var n=[];i.forEach(function(t){n.push(t.promise)});Promise.all(n).then(function(n){n.forEach(function(t,e){var n=this._getFilterField(i[e].name);if(n&&n.getRequired()&&n.getValueState()===C.Error){n.setValueState(C.None)}},this);e(t)}.bind(this)).catch(function(i){e(t)})}};I.prototype._handleOngoingChangeAppliance=function(t,e){if(!e){e=this._validate.bind(this)}if(this._aOngoingChangeAppliance&&this._aOngoingChangeAppliance.length>0){var i=this._aOngoingChangeAppliance.slice();this._aOngoingChangeAppliance=[];if(this._oApplyingChanges){i.push(this._oApplyingChanges)}Promise.all(i).then(function(){e(t)}).catch(function(i){e(t)})}};I.prototype._determineValidationState=function(){return this.awaitControlDelegate().then(function(t){return t.determineValidationState(this,this.checkFilters())}.bind(this))};I.prototype._visualizeValidationState=function(t){if(this._oDelegate){this._oDelegate.visualizeValidationState(this,{status:t})}};I.prototype.getText=function(t){return this._oRb.getText(t)};I.prototype._restartCheckAndNotify=function(t){var e=this.checkFilters();this._checkAndNotify(t,e)};I.prototype._checkAndNotify=function(t,e){var i=function(){if(t){var e={reason:this._sReason?this._sReason:_.Unclear};this._sReason=_.Unclear;this.fireSearch(e)}}.bind(this);var n=function(){this._oValidationPromise=null;this._fRejectedSearchPromise=null;this._fResolvedSearchPromise=null}.bind(this);if(e===y.AsyncValidation){this._handleAsyncValidation(t,this._restartCheckAndNotify.bind(this));return}if(e===y.OngoingChangeAppliance){this._handleOngoingChangeAppliance(t,this._restartCheckAndNotify.bind(this));return}if(e===y.NoError){if(this._fResolvedSearchPromise){i();this._fResolvedSearchPromise()}}else if(this._fRejectedSearchPromise){this._fRejectedSearchPromise()}this._visualizeValidationState(e);n()};I.prototype._validate=function(t){var e=function(){this._oValidationPromise=null;this._fRejectedSearchPromise=null;this._fResolvedSearchPromise=null}.bind(this);if(this.bIsDestroyed){e();return}this._determineValidationState().then(function(e){this._checkAndNotify(t,e)}.bind(this))};I.prototype.setInternalConditions=function(t){var e=this._getConditionModel();if(e){e.setConditions(t)}};I.prototype.getInternalConditions=function(){return this._getModelConditions(this._getConditionModel(),true)};I.prototype.waitForInitialization=function(){return Promise.all([this._oInitialFiltersAppliedPromise,this._oMetadataAppliedPromise])};I.prototype.initialized=function(){return this.waitForInitialization()};I.prototype.initializedWithMetadata=function(){if(!this._oMetadataAppliedPromise){this._retrieveMetadata()}return this.waitForInitialization()};I.prototype._getModelConditions=function(t,e,i){var n={};if(t){var r=s({},t.getAllConditions());for(var o in r){if(r[o]&&(i||r[o].length>0)){n[o]=r[o];if(!e){this._cleanupConditions(n[o]);var a=this._stringifyConditions(o,n[o]);n[o]=a}}}}return n};var S=function(t){var e=t.typeConfig.typeInstance;var i=e.getConstraints();return e.getMetadata().getName()==="sap.ui.model.odata.type.String"&&i&&i.isDigitSequence&&i.maxLength?function(e){return this._toExternal(t,e,this.getTypeUtil())}.bind(this):undefined};I.prototype._isPathKnownAsync=function(t,e){var i,n,r=[];r.push(this._getPropertyByNameAsync(t));for(n in e["inParameters"]){i=n.startsWith("conditions/")?n.slice(11):n;r.push(this._getPropertyByNameAsync(i))}for(n in e["outParameters"]){i=n.startsWith("conditions/")?n.slice(11):n;r.push(this._getPropertyByNameAsync(i))}return Promise.all(r)};I.prototype._isPathKnown=function(t,e){var i,n;if(!this._getPropertyByName(t)){return false}for(i in e["inParameters"]){n=i.startsWith("conditions/")?i.slice(11):i;if(!this._getPropertyByName(n)){return false}}for(i in e["outParameters"]){n=i.startsWith("conditions/")?i.slice(11):i;if(!this._getPropertyByName(n)){return false}}return true};I.prototype._removeCondition=function(t,e,i){var n=this._getPropertyByName(t);if(n){var r=this._toInternal(n,e);if(i.indexOf(t,r,S.call(this,n))>=0){i.removeCondition(t,r)}}};I.prototype.removeCondition=function(t,e){return this.waitForInitialization().then(function(){var i=this._getConditionModel();if(i){this._isPathKnownAsync(t,e).then(function(){this._removeCondition(t,e,i)}.bind(this))}}.bind(this))};I.prototype._addCondition=function(e,i,n){var r=this._getPropertyByName(e);if(r){var o=this._toInternal(r,i);if(n.indexOf(e,o,S.call(this,r))<0){var s={};s[e]=[o];t.checkConditionOperatorSanity(s);var a=s[e];if(a&&a.length>0){this._cleanUpFilterFieldInErrorStateByName(e);n.addCondition(e,o)}}}};I.prototype.addCondition=function(t,e){return this.waitForInitialization().then(function(){var i=this._getConditionModel();if(i){this._isPathKnownAsync(t,e).then(function(){this._addCondition(t,e,i)}.bind(this))}}.bind(this))};I.prototype._onModifications=function(t){if(t&&t.indexOf("Filter")===-1){return Promise.resolve()}var e;if(!this._oApplyingChanges){this._oApplyingChanges=new Promise(function(t){e=t})}return this._setXConditions(this.getFilterConditions()).then(function(){this._reportModelChange({triggerSearch:false,triggerFilterUpdate:true,recheckMissingRequired:true});e();this._oApplyingChanges=null}.bind(this))};I.prototype._setXConditions=function(t){if(t){var e=true;for(var i in t){var n=t[i];if(!this._isPathKnown(i,n)){e=false;break}}var r=e?Promise.resolve():this._retrieveMetadata();var o=this._getConditionModel();return r.then(function(){var e=this._internalizeConditions(t);var i=this._getModelConditions(this._getConditionModel(),true);this._oConditionModel.detachPropertyChange(this._handleConditionModelPropertyChange,this);return this.getEngine().diffState(this,{Filter:i},{Filter:e}).then(function(t){Object.keys(t.Filter).forEach(function(e){t.Filter[e].forEach(function(t){if(t.filtered!==false){o.addCondition(e,t)}else{o.removeCondition(e,t)}})});o.attachPropertyChange(this._handleConditionModelPropertyChange,this)}.bind(this))}.bind(this))}else{return Promise.resolve()}};I.prototype._getXConditions=function(){return this._getModelConditions(this._getConditionModel(),false)};I.prototype._getRequiredPropertyNames=function(){var t=[];this._getNonHiddenPropertyInfoSet().forEach(function(e){if(e.required){t.push(c.getPropertyKey(e))}});return t};I.prototype._getNonRequiredPropertyNames=function(){var t=[];this._getNonHiddenPropertyInfoSet().forEach(function(e){if(!e.required){t.push(c.getPropertyKey(e))}});return t};I.prototype._insertFilterFieldtoContent=function(t,e){if(!this._cLayoutItem){return}var i=this._cLayoutItem;var n=new i;n.setFilterField(t);this._oFilterBarLayout.insertFilterField(n,e)};I.prototype._filterItemInserted=function(t){if(!t.getVisible()){return}if(t.setWidth){t.setWidth("")}this._applyFilterItemInserted(t);this._handleAssignedFilterNames(true)};I.prototype._applyFilterItemInserted=function(t){var e,i;i=this.indexOfAggregation("filterItems",t);if(this.getAggregation("basicSearchField")){i++}e=i;var n=this.getFilterItems();for(var r=0;r<e;r++){if(!n[r].getVisible()){i--}}this._insertFilterFieldtoContent(t,i);if(!this._oObserver.isObserved(t,{properties:["visible"]})){this._oObserver.observe(t,{properties:["visible"]})}};I.prototype._filterItemRemoved=function(t){this._applyFilterItemRemoved(t.getFieldPath());this._handleAssignedFilterNames(true)};I.prototype._applyFilterItemRemoved=function(t){this._removeFilterFieldFromContentByName(t)};I.prototype._removeFilterFieldFromContent=function(t){this._removeFilterFieldFromContentByName(t.getFieldPath())};I.prototype._removeFilterFieldFromContentByName=function(t){var e=this._getFilterItemLayoutByName(t);if(e){this._oFilterBarLayout.removeFilterField(e);e.destroy()}};I.prototype._observeChanges=function(t){if(t.type==="aggregation"){if(t.name==="filterItems"){switch(t.mutation){case"insert":t.child.attachChange(this._handleFilterItemChanges,this);t.child.attachSubmit(this._handleFilterItemSubmit,this);this._filterItemInserted(t.child);break;case"remove":t.child.detachChange(this._handleFilterItemChanges,this);t.child.detachSubmit(this._handleFilterItemSubmit,this);this._filterItemRemoved(t.child);break;default:o.error("operation "+t.mutation+" not yet implemented")}}else if(t.name==="basicSearchField"){switch(t.mutation){case"insert":t.child.attachSubmit(this._handleFilterItemSubmit,this);this._insertFilterFieldtoContent(t.child,0);break;case"remove":t.child.detachSubmit(this._handleFilterItemSubmit,this);this._removeFilterFieldFromContent(t.child);break;default:o.error("operation "+t.mutation+" not yet implemented")}}}else if(t.type==="property"){var e;if(t.object.isA&&t.object.isA("sap.ui.mdc.FilterField")){e=t.object;if(e){if(t.current){this._filterItemInserted(e)}else{this._filterItemRemoved(e)}this._oFilterBarLayout.invalidate()}}}};I.prototype._getFilterItemLayout=function(t){return this._getFilterItemLayoutByName(t.getFieldPath())};I.prototype._getFilterItemLayoutByName=function(t){var e=null;if(this._oFilterBarLayout){this._oFilterBarLayout.getFilterFields().some(function(i){if(i._getFieldPath()===t){e=i}return e!==null})}return e};I.prototype._getFilterField=function(t){var e=null;this.getFilterItems().some(function(i){if(i&&i.getFieldPath&&i.getFieldPath()===t){e=i}return e!==null});return e};I.prototype._retrieveMetadata=function(){if(this._oMetadataAppliedPromise){return this._oMetadataAppliedPromise}this._fResolveMetadataApplied=undefined;this._oMetadataAppliedPromise=new Promise(function(t,e){this._fResolveMetadataApplied=t;this._fRejectMetadataApplied=e}.bind(this));this.initControlDelegate().then(function(){if(!this._bIsBeingDestroyed){var t=function(t){t?this._fResolveMetadataApplied():this._fRejectMetadataApplied();this._fResolveMetadataApplied=null;this._fRejectMetadataApplied=null}.bind(this);if(this.isControlDelegateInitialized()){this.finalizePropertyHelper().then(function(){t(true)})}else{o.error("Delegate not initialized.");t(false)}}}.bind(this));return this._oMetadataAppliedPromise};I.prototype.setBasicSearchField=function(t){var e=this.getAggregation("basicSearchField");if(e){this.removeAggregation("basicSearchField",e)}this.setAggregation("basicSearchField",t);if(t){if(!this._oObserver.isObserved(t,{properties:["visible"]})){this._oObserver.observe(t,{properties:["visible"]})}}return this};I.prototype._getNonHiddenPropertyInfoSet=function(){var t=[];this.getPropertyInfoSet().every(function(e){if(!e.hiddenFilter){if(c.getPropertyKey(e)!=="$search"){t.push(e)}}return true});return t};I.prototype._getNonHiddenPropertyByName=function(t){var e=null;this._getNonHiddenPropertyInfoSet().some(function(i){if(c.getPropertyKey(i)===t){e=i}return e!=null});return e};I.prototype._cleanUpFilterFieldInErrorStateByName=function(t){var e=null;var i=this.getFilterItems();i.some(function(i){if(i.getFieldPath()===t){e=i}return e!=null});if(e){this._cleanUpFilterFieldInErrorState(e)}};I.prototype._cleanUpAllFilterFieldsInErrorState=function(){this._getConditionModel().checkUpdate(true);var t=this.getFilterItems();t.forEach(function(t){this._cleanUpFilterFieldInErrorState(t)}.bind(this))};I.prototype._cleanUpFilterFieldInErrorState=function(t){if(t&&t.getValueState()!==C.None){t.setValueState(C.None)}};I.prototype._applyInitialFilterConditions=function(){this._bIgnoreChanges=true;this._applyFilterConditionsChanges().then(function(){this._bIgnoreChanges=false;this._reportModelChange({triggerFilterUpdate:true,triggerSearch:false});this._bInitialFiltersApplied=true;this._fResolveInitialFiltersApplied();this._fResolveInitialFiltersApplied=null}.bind(this))};I.prototype._applyFilterConditionsChanges=function(){var t,e;t=this.getProperty("filterConditions");if(Object.keys(t).length>0){e=s({},t);return this._setXConditions(e)}return Promise.resolve()};I.prototype.setVariantBackreference=function(t){if(!this._hasAssignedVariantManagement()){this.setAssociation("variantBackreference",t);m.attachVariantApplied({selector:this,vmControlId:this.getVariantBackreference(),callback:this._handleVariantSwitch.bind(this),callAfterInitialVariant:true})}else{o.error("the association 'variant' may only be assigned once and may not change afterwards.")}};I.prototype._handleVariantSwitch=function(t){this._bExecuteOnSelect=this._getExecuteOnSelectionOnVariant(t);this._sReason=this._bExecuteOnSelect?_.Variant:_.Unclear;this._bDoNotTriggerFiltersChangeEventBasedOnVariantSwitch=false;if(t.hasOwnProperty("createScenario")&&t.createScenario==="saveAs"){this._bDoNotTriggerFiltersChangeEventBasedOnVariantSwitch=true}return this.awaitPendingModification().then(function(t){this._cleanUpAllFilterFieldsInErrorState();if(this._bInitialFiltersApplied&&t.indexOf("Filter")===-1){this._reportModelChange({triggerFilterUpdate:false,triggerSearch:this._bExecuteOnSelect})}}.bind(this))};I.prototype._getExecuteOnSelectionOnVariant=function(t){var e=false,i=this._getAssignedVariantManagement();if(i){e=i.getApplyAutomaticallyOnVariant(t)}return e};I.prototype._hasAssignedVariantManagement=function(){return this._getAssignedVariantManagement()?true:false};I.prototype._getAssignedVariantManagement=function(){var t=this.getVariantBackreference();if(t){var e=sap.ui.getCore().byId(t);if(e&&e.isA("sap.ui.fl.variants.VariantManagement")){return e}}return null};I.prototype._getView=function(){return c.getView(this)};I.prototype.getConditions=function(){var t=this._bPersistValues?this.getCurrentState().filter:this._getXConditions();if(t&&t["$search"]){delete t["$search"]}return t};I.prototype.getSearch=function(){var t=this._getConditionModel()?this._getConditionModel().getConditions("$search"):[];return t[0]?t[0].values[0]:""};I.prototype.exit=function(){if(this._hasAssignedVariantManagement()){m.detachVariantApplied({selector:this,vmControlId:this.getVariantBackreference()})}if(this.isControlDelegateInitialized()&&this.getControlDelegate().cleanup){this.getControlDelegate().cleanup(this)}r.prototype.exit.apply(this,arguments);this._clearDelayedSearch();this._oFilterBarLayout=null;this._cLayoutItem=null;this._btnAdapt=undefined;this._btnSearch=undefined;this._oRb=null;if(this._oModel){this._oModel.destroy();this._oModel=null}if(this._oConditionModel){this._oConditionModel.detachPropertyChange(this._handleConditionModelPropertyChange,this);this._oConditionModel.destroy();this._oConditionModel=null}this._oObserver.disconnect();this._oObserver=undefined;this._bPersistValues=null;this._oDelegate=null;this._oFlexPromise=null;this._fResolveMetadataApplied=undefined;this._oMetadataAppliedPromise=null;this._oInitialFiltersAppliedPromise=null;this._oValidationPromise=null;this._aBindings=null;this._aFIChanges=null;this._aOngoingChangeAppliance=null};return I});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/FilterBarBaseRenderer", [],function(){"use strict";var e={apiVersion:2};e.CSS_CLASS="sapUiMdcFilterBarBase";e.render=function(t,r){t.openStart("div",r);t.class(e.CSS_CLASS);if(r.isA("sap.ui.mdc.filterbar.p13n.AdaptationFilterBar")&&r.getProperty("_useFixedWidth")){t.style("width",r.getWidth())}t.openEnd();var i=r.getAggregation("layout")?r.getAggregation("layout").getInner():null;t.renderControl(i);t.close("div")};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/IFilterContainer", ["sap/ui/core/Element"],function(t){"use strict";var o=t.extend("sap.ui.mdc.filterbar.IFilterContainer");o.prototype.init=function(){t.prototype.init.apply(this,arguments);this.oLayout=null};o.prototype.getInner=function(){return this.oLayout};o.prototype.insertFilterField=function(t,o){};o.prototype.removeFilterField=function(t){};o.prototype.getFilterFields=function(){};o.prototype.exit=function(){t.prototype.exit.apply(this,arguments);if(this.oLayout){this.oLayout.destroy();this.oLayout=null}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/PropertyHelper", ["../util/PropertyHelper"],function(e){"use strict";var t=e.extend("sap.ui.mdc.filterbar.PropertyHelper",{constructor:function(t,r){e.call(this,t,r,{required:{type:"boolean"},hiddenFilter:{type:"boolean"}})}});t.prototype.prepareProperty=function(t){if(!t.typeConfig){var r=this.getParent();if(r&&r._oDelegate){var p=r._oDelegate.getTypeUtil();try{t.typeConfig=p.getTypeConfig(t.dataType,t.formatOptions,t.constraints)}catch(e){}}}e.prototype.prepareProperty.apply(this,arguments)};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/aligned/FilterContainer", ["sap/ui/mdc/filterbar/IFilterContainer","sap/ui/layout/AlignedFlowLayout"],function(t,e){"use strict";var o=t.extend("sap.ui.mdc.filterbar.aligned.FilterContainer");o.prototype.init=function(){t.prototype.init.apply(this,arguments);this.oLayout=new e};o.prototype.addButton=function(t){this.oLayout.addEndContent(t)};o.prototype.insertFilterField=function(t,e){this.oLayout.insertContent(t,e)};o.prototype.removeFilterField=function(t){this.oLayout.removeContent(t)};o.prototype.getFilterFields=function(){return this.oLayout.getContent()};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/aligned/FilterItemLayout", ["sap/ui/layout/VerticalLayout","sap/ui/layout/VerticalLayoutRenderer","sap/m/Label"],function(e,t,i){"use strict";var a=e.extend("sap.ui.mdc.filterbar.aligned.FilterItemLayout",{metadata:{library:"sap.ui.mdc"},renderer:{apiVersion:2,render:t.render}});a.prototype._setLabel=function(e){this._oLabel=new i(e.getId()+"-label");this._oLabel.setParent(this);e.connectLabel(this._oLabel);if(e.getFieldPath()==="$search"){this._oLabel.setText(" ")}else{this._oLabel.addStyleClass("sapUiMdcFilterBarBaseLabel")}};a.prototype._getFilterField=function(){return this._oFilterField};a.prototype._getFieldPath=function(){return this._sFieldPath};a.prototype.setFilterField=function(e){this._setLabel(e);this._oFilterField=e;this._sFieldPath=e.getFieldPath()};a.prototype.getContent=function(){var e=[];e.push(this._oLabel);e.push(this._oFilterField);return e};a.prototype.exit=function(){this._oFilterField=null;this._sFieldPath=null;if(this._oLabel&&!this._oLabel.bIsDestroyed){this._oLabel.destroy();this._oLabel=undefined}e.prototype.exit.apply(this,arguments)};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/p13n/AdaptationFilterBar", ["sap/ui/core/library","sap/ui/mdc/p13n/subcontroller/FilterController","sap/ui/mdc/p13n/subcontroller/AdaptFiltersController","sap/ui/mdc/filterbar/p13n/GroupContainer","sap/ui/mdc/filterbar/p13n/FilterColumnLayout","sap/ui/mdc/filterbar/p13n/FilterGroupLayout","sap/ui/mdc/filterbar/p13n/TableContainer","sap/ui/mdc/filterbar/FilterBarBase","sap/ui/mdc/filterbar/FilterBarBaseRenderer","sap/base/util/merge","sap/ui/core/Core","sap/ui/mdc/enum/PersistenceMode"],function(t,e,i,n,o,r,a,s,l,p,h,u){"use strict";var d=t.ValueState;var c=s.extend("sap.ui.mdc.filterbar.p13n.AdaptationFilterBar",{metadata:{library:"sap.ui.mdc",properties:{_useFixedWidth:{type:"boolean",defaultValue:false,visibility:"hidden"}},associations:{adaptationControl:{type:"sap.ui.mdc.Control",multiple:false}},events:{change:{}}},renderer:l});c.prototype.WIDTH="30rem";c.prototype.init=function(){s.prototype.init.apply(this,arguments);this.addStyleClass("sapUIAdaptationFilterBar");this._bPersistValues=true;this.getEngine().defaultProviderRegistry.attach(this,u.Transient);this._fnResolveAdaptationControlPromise=null;this._oAdaptationControlPromise=new Promise(function(t,e){this._fnResolveAdaptationControlPromise=t}.bind(this))};c.prototype.keepAlive=function(){return true};c.prototype._onModifications=function(){var t=s.prototype._onModifications.apply(this,arguments);if(this._oFilterBarLayout.getInner().isA("sap.ui.mdc.p13n.panels.FilterPanel")){var e=this._oFilterBarLayout.getInner().getP13nData();this._updateActiveStatus(e);this._oFilterBarLayout.setP13nData({items:e})}return t};c.prototype.getInitialFocusedControl=function(){return this._oFilterBarLayout.getInitialFocusedControl()};c.prototype.getWidth=function(){return this.WIDTH};c.prototype.applySettings=function(){s.prototype._applySettings.apply(this,arguments);this._waitForAdaptControlAndPropertyHelper().then(function(){this._initControlDelegate()}.bind(this))};c.prototype.setVisibleFields=function(t){var e=this._getAdaptationControlInstance();if(this._checkAdvancedParent(e)){throw new Error("Only supported for simple parents")}this._aVisibleKeys=t};c.prototype._getPropertyByName=function(t){var e=this.getPropertyHelper();if(e){var i=e.getProperties().find(function(e){return e.path===t});if(!i){i=e.getPropertyMap()[t]||null}return i}};c.prototype._waitForAdaptControlAndPropertyHelper=function(){return this._oAdaptationControlPromise.then(function(){return this._getAdaptationControlInstance().awaitPropertyHelper().then(function(t){this._oPropertyHelper=t}.bind(this))}.bind(this))};c.prototype._initControlDelegate=function(){return this.initControlDelegate().then(function(){if(!this._bIsBeingDestroyed){this._applyInitialFilterConditions()}}.bind(this))};c.prototype.getControlDelegate=function(){return this._getAdaptationControlInstance().getControlDelegate()};c.prototype.initControlDelegate=function(){return this._oAdaptationControlPromise.then(function(){return this._getAdaptationControlInstance().initControlDelegate()}.bind(this))};c.prototype.awaitControlDelegate=function(){return this._oAdaptationControlPromise.then(function(){return this._getAdaptationControlInstance().awaitControlDelegate()}.bind(this))};c.prototype.initPropertyHelper=function(){return this._oAdaptationControlPromise.then(function(){return this._getAdaptationControlInstance().initPropertyHelper()}.bind(this))};c.prototype.finalizePropertyHelper=function(){return this._oAdaptationControlPromise.then(function(){return this._getAdaptationControlInstance().finalizePropertyHelper()}.bind(this))};c.prototype.getTypeUtil=function(){if(!this._getAdaptationControlInstance()){throw new Error("No adaptation control assigned yet.")}return this._getAdaptationControlInstance().getTypeUtil()};c.prototype.setMessageStrip=function(t){this._oFilterBarLayout.setMessageStrip(t)};c.prototype.setLiveMode=function(t,e){s.prototype.setLiveMode.apply(this,arguments);this._oConditionModel.attachPropertyChange(function(t){var e=t.getParameter("path").substring(12);if(this.oAdaptationData){var i=this.oAdaptationData.items;var n=i.find(function(t){return t.name==e});if(n&&this._checkAdvancedParent(this._getAdaptationControlInstance())){n.active=this._getConditionModel().getConditions(e).length>0?true:false}}}.bind(this));return this};c.prototype._retrieveMetadata=function(){return this._oAdaptationControlPromise.then(function(){return this._getAdaptationControlInstance().awaitPropertyHelper().then(function(t){if(!this._getAdaptationControlInstance().isPropertyHelperFinal()){return this.finalizePropertyHelper()}return s.prototype._retrieveMetadata.apply(this,arguments)}.bind(this))}.bind(this))};c.prototype.isControlDelegateInitialized=function(){return this._getAdaptationControlInstance().isControlDelegateInitialized()};c.prototype.createConditionChanges=function(){return Promise.all([this._oAdaptationControlPromise,this.awaitControlDelegate()]).then(function(){var t=this._getModelConditions(this._getConditionModel(),false,true);if(this._bPersistValues){return this.getEngine().createChanges({control:this._getAdaptationControlInstance(),applyAbsolute:true,key:"Filter",state:t,suppressAppliance:true})}else{this._getAdaptationControlInstance()._setXConditions(t);return Promise.resolve(null)}}.bind(this))};c.prototype.setP13nData=function(t){this.oAdaptationData=t;this._getConditionModel().checkUpdate(true);this._updateActiveStatus(this.oAdaptationData.items);this._oFilterBarLayout.update(t)};c.prototype._updateActiveStatus=function(t){var e=this.getFilterConditions();t.forEach(function(t){var i=this.mFilterFields&&this.mFilterFields[t.name];if(i){var n=i.getFieldPath();if(e[n]&&e[n].length>0){t.active=true}}}.bind(this))};c.prototype.getP13nData=function(){if(this._aVisibleKeys&&this._aVisibleKeys.length>0){this.oAdaptationData.items.forEach(function(t){if(this._aVisibleKeys.indexOf(t.name)>-1){t.active=true}},this)}return this.oAdaptationData};c.prototype._handleFilterItemSubmit=function(){return};c.prototype._getWaitForChangesPromise=function(){return this.getEngine().waitForChanges(this._getAdaptationControlInstance())};c.prototype.createFilterFields=function(){return this.initializedWithMetadata().then(function(){var t=this._bPersistValues?this._getAdaptationControlInstance().getFilterConditions():this._getAdaptationControlInstance()._getXConditions();this.setFilterConditions(t);this._setXConditions(t);if(this._bFilterFieldsCreated){this._oFilterBarLayout.setP13nData(this.getP13nData());return this}var e=this._getAdaptationControlInstance();var i=e.getControlDelegate();var n=this._checkAdvancedParent(e)?i:i.getFilterDelegate();this._mOriginalsForClone={};this.mFilterFields={};var o=[];this.getP13nData().items.forEach(function(t,i){var r;r=this._checkExisting(t,n);r.then(function(i){var n;if(this._checkAdvancedParent(e)){if(i._bTemporaryOriginal){delete r._bTemporaryOriginal;this._mOriginalsForClone[i.getFieldPath()]=i}n=i.clone();if(n.getValueState()!==d.None){n.setValueState(d.None);n.setValueStateText()}}else{n=i}this.mFilterFields[t.name]=n}.bind(this));o.push(r)}.bind(this));return Promise.all(o).then(function(){var t=this.getP13nData();t.items.forEach(function(t){this.addAggregation("filterItems",this.mFilterFields[t.name])}.bind(this));this._updateActiveStatus(t.items);this._oFilterBarLayout.setP13nData(t);this._bFilterFieldsCreated=true;return this}.bind(this))}.bind(this))};c.prototype._checkExisting=function(t,e){var i;var n=this._getAdaptationControlInstance();var o=this._checkAdvancedParent(n)?n.getFilterItems():[];var r=o.reduce(function(t,e){t[e.getFieldPath()]=e;return t},{});if(r[t.name]){i=Promise.resolve(r[t.name])}else{i=e.addItem(t.name,this._getAdaptationControlInstance());i=i.then(function(e){if(!e){throw new Error("No FilterField could be created for property: '"+t.name+"'.")}e._bTemporaryOriginal=true;return e})}return i};c.prototype.executeRemoves=function(){var t=this._oFilterBarLayout.getInner().getSelectedFields();var e=[];Object.keys(this._mOriginalsForClone).forEach(function(i){var n=this._getAdaptationControlInstance().getControlDelegate();if(t.indexOf(i)<0){var o=n.removeItem.call(n,i,this._getAdaptationControlInstance()).then(function(t){if(t&&this._mOriginalsForClone[i]){this._mOriginalsForClone[i].destroy();delete this._mOriginalsForClone[i]}}.bind(this));e.push(o)}}.bind(this));return Promise.all(e)};c.prototype._checkAdvancedParent=function(t){if(!t.isA("sap.ui.mdc.IFilterSource")&&!t.isA("sap.ui.mdc.IFilter")){throw new Error("The 'adaptationControl' needs to implement the IFilterSource or IFilter interface")}return t.isA("sap.ui.mdc.IFilter")};c.prototype.setAdaptationControl=function(t,e){if(this._fnResolveAdaptationControlPromise){this._fnResolveAdaptationControlPromise();this._fnResolveAdaptationControlPromise=null}this.setAssociation("adaptationControl",t,e);this._cLayoutItem=r;this._oFilterBarLayout=this._checkAdvancedParent(t)?new n:new a;this._oFilterBarLayout.getInner().setParent(this);this.setAggregation("layout",this._oFilterBarLayout,true);if(this._oFilterBarLayout.getInner().attachChange){this._oFilterBarLayout.getInner().attachChange(function(t){if(t.getParameter("reason")==="Remove"){var e=t.getParameter("item");var i={};i[this.mFilterFields[e.name].getFieldPath()]=[];return this.getEngine().createChanges({control:this,applyAbsolute:true,key:"Filter",state:i})}this.fireChange()}.bind(this))}return this};c.prototype._getAdaptationControlInstance=function(){var t=this.getAdaptationControl();return t&&h.byId(t)};c.prototype.exit=function(){this.getEngine().defaultProviderRegistry.detach(this);s.prototype.exit.apply(this,arguments);for(var t in this._mOriginalsForClone){this._mOriginalsForClone[t].destroy()}this._mOriginalsForClone=null;this.oAdaptationData=null;this.mFilterFields=null;this._fnResolveAdaptationControlPromise=null;this._oAdaptationControlPromise=null};return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/p13n/FilterColumnLayout", ["sap/m/ColumnListItem","sap/m/ColumnListItemRenderer","sap/m/Label"],function(t,e,i){"use strict";var l=t.extend("sap.ui.mdc.filterbar.p13n.FilterColumnLayout",{metadata:{library:"sap.ui.mdc"},renderer:e});l.prototype._getFieldPath=function(){return this._sFieldPath};l.prototype.setFilterField=function(t){this._sLabel=t.getLabel();this._oFilterField=t;this._sFieldPath=t.getFieldPath()};l.prototype.getCells=function(){var t=[];var e=new i({text:this._sLabel});e.setParent(this);t.push(e);t.push(this._oFilterField);return t};l.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oFilterField=null;this._sFieldPath=null};return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/p13n/FilterGroupLayout", ["sap/ui/core/Control"],function(t){"use strict";var e=t.extend("sap.ui.mdc.filterbar.p13n.FilterGroupLayout",{renderer:{apiVersion:2,render:function(t,e){t.openStart("div",e);t.style("height","100%");t.openEnd();t.renderControl(e.getItems()[0]);t.close("div")}}});e.prototype._getFieldPath=function(){return this._sFieldPath};e.prototype.setFilterField=function(t){this._oFilterField=t;this._sFieldPath=t.getFieldPath()};e.prototype.getIdForLabel=function(){return this._oFilterField&&this._oFilterField.getIdForLabel()};e.prototype.getAccessibilityInfo=function(){return{children:this.getItems()}};e.prototype.getItems=function(){var t=[];t.push(this._oFilterField);return t};e.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oFilterField=null;this._sFieldPath=null};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/p13n/GroupContainer", ["sap/ui/mdc/filterbar/IFilterContainer","sap/ui/mdc/p13n/panels/AdaptFiltersPanel"],function(t,e){"use strict";var i=t.extend("sap.ui.mdc.filterbar.p13n.GroupContainer");i.prototype.init=function(){t.prototype.init.apply(this,arguments);this.mFilterItems={};this.oLayout=new e;this.oLayout.setItemFactory(function(t){var e=t.getProperty(t.sPath).name;var i=this.mFilterItems[e];return i}.bind(this))};i.prototype.setMessageStrip=function(t){this.oLayout.getCurrentViewContent().setMessageStrip(t)};i.prototype.insertFilterField=function(t,e){this.mFilterItems[t._getFieldPath()]=t};i.prototype.removeFilterField=function(t){this.oLayout.removeItem(t)};i.prototype.getFilterFields=function(){var t=[];Object.keys(this.mFilterItems).forEach(function(e){t.push(this.mFilterItems[e])}.bind(this));return t};i.prototype.update=function(t){this.oLayout.restoreDefaults()};i.prototype.setP13nData=function(t){this.oLayout.setP13nData(t)};i.prototype.exit=function(){this.mFilterItems=null;this.mFilterFields=null;t.prototype.exit.apply(this,arguments)};i.prototype.getInitialFocusedControl=function(){return this.oLayout.getInitialFocusedControl&&this.oLayout.getInitialFocusedControl()};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/p13n/TableContainer", ["sap/ui/mdc/filterbar/IFilterContainer","sap/m/Table","sap/m/Column","sap/m/Text","sap/m/VBox","sap/ui/mdc/p13n/panels/FilterPanel","sap/base/util/UriParameters"],function(t,e,i,r,o,a,n){"use strict";var s=t.extend("sap.ui.mdc.filterbar.p13n.TableContainer");s.prototype.init=function(){t.prototype.init.apply(this,arguments);var o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._oTable=new e({sticky:["ColumnHeaders"],growing:true,columns:[new i({header:new r({text:o.getText("filter.AdaptationFilterBar_FIELD_COLUMN")})}),new i({header:new r({text:o.getText("filter.AdaptationFilterBar_FIELD_VALUE_COLUMN")})})]});this.oLayout=new a({enableReorder:false,itemFactory:function(t){var e=t.name;var i=this.mFilterItems[e];return i}.bind(this)});this.mFilterItems={}};s.prototype.insertFilterField=function(t,e){var i=t._oFilterField.getParent();var r=i._getPropertyByName(t._getFieldPath()).name;this.mFilterItems[r]=t};s.prototype.setP13nData=function(t){this.oLayout.setP13nData(t.items)};s.prototype.removeFilterField=function(t){this._oTable.removeItem(t)};s.prototype.setMessageStrip=function(t){this.oLayout.setMessageStrip(t)};s.prototype.getFilterFields=function(){return this._oTable.getItems()};s.prototype.update=function(t){};s.prototype.exit=function(){this._oTable=null};s.prototype.getInitialFocusedControl=function(){return this.oLayout.getInitialFocusedControl&&this.oLayout.getInitialFocusedControl()};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/vh/CollectiveSearchSelect", ["sap/m/VariantManagement"],function(t){"use strict";var e=t.extend("sap.ui.mdc.filterbar.vh.CollectiveSearchSelect",{metadata:{library:"sap.ui.mdc",properties:{title:{type:"string",group:"Misc",defaultValue:null},selectedItemKey:{type:"string",group:"Misc",defaultValue:null}}},renderer:{renderer:function(e,r){t.getMetadata().getRenderer().render(e,r)}}});e.prototype.init=function(){t.prototype.init.apply(this);this.oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")};e.prototype.applySettings=function(e,r){t.prototype.applySettings.apply(this,arguments);this.setShowFooter(false);this.setProperty("_selectStategyForSameItem",false);this.oVariantPopoverTrigger.setTooltip(this.oRb.getText("COL_SEARCH_TRIGGER_TT"))};e.prototype.setTitle=function(t){this.setProperty("title",t);this.setPopoverTitle(t);return this};e.prototype.getTitle=function(){return this.getProperty("title")};e.prototype.getCurrentText=function(){return t.prototype.getTitle.apply(this,arguments).getText()};e.prototype.setSelectedItemKey=function(t){this.setProperty("selectedItemKey",t);this.setSelectedKey(t);return this};e.prototype.getSelectedItemKey=function(){return this.getSelectedKey()};e.prototype._setInvisibleText=function(t){this.oVariantInvisibleText.setText(this.oRb.getText("COL_SEARCH_SEL_INVISIBLETXT",[t]))};e.prototype.exit=function(){t.prototype.exit.apply(this);this.oRb=undefined};e.prototype.getOverflowToolbarConfig=function(){var e=t.prototype.getOverflowToolbarConfig.apply(this);e.canOverflow=true;return e};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/vh/FilterBar", ["sap/m/library","sap/ui/mdc/filterbar/FilterBarBase","sap/ui/mdc/filterbar/FilterBarBaseRenderer","sap/ui/mdc/filterbar/aligned/FilterItemLayout","sap/ui/mdc/filterbar/vh/FilterContainer","sap/m/Button","sap/ui/mdc/enum/PersistenceMode"],function(t,e,i,r,o,s,a){"use strict";var l=e.extend("sap.ui.mdc.filterbar.vh.FilterBar",{metadata:{library:"sap.ui.mdc",properties:{delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/filterbar/vh/FilterBarDelegate",payload:{modelName:undefined,collectionName:""}}},expandFilterFields:{type:"boolean",defaultValue:true},filterFieldThreshold:{type:"int",defaultValue:8}},aggregations:{}},renderer:i});var h=t.ButtonType;l.prototype._createInnerLayout=function(){this._cLayoutItem=r;this._oFilterBarLayout=new o(this.getId()+"-innerLayout",{});this.setAggregation("layout",this._oFilterBarLayout,true);this._oBtnFilters=new s(this.getId()+"-btnShowFilters",{type:h.Transparent,press:this._onToggleFilters.bind(this)});this._oBtnFilters.bindProperty("text",{model:e.INNER_MODEL_NAME,path:"/expandFilterFields",formatter:function(t){return this._oRb.getText("valuehelp."+(t?"HIDE":"SHOW")+"ADVSEARCH")}.bind(this)});this._oBtnFilters.bindProperty("visible",{model:e.INNER_MODEL_NAME,path:"/filterItems",formatter:function(t){return t.length>0}});this._oFilterBarLayout.addControl(this._getSearchButton().bindProperty("visible",{parts:[{path:"/showGoButton",model:e.INNER_MODEL_NAME},{path:"/liveMode",model:e.INNER_MODEL_NAME}],formatter:function(t,e){return t&&(this._isPhone()?true:!e)}.bind(this)}));this._oFilterBarLayout.addControl(this._oBtnFilters);this._oShowAllFiltersBtn=new s(this.getId()+"-btnShowAllFilters",{type:h.Transparent,press:this._onShowAllFilters.bind(this),text:this._oRb.getText("valuehelp.SHOWALLFILTERS")});this._oFilterBarLayout.addEndContent(this._oShowAllFiltersBtn)};l.prototype.applySettings=function(t,e){this._applySettings(t,e);this._waitForMetadata()};l.prototype._handleConditionModelPropertyChange=function(){e.prototype._handleConditionModelPropertyChange.apply(this,arguments);this.fireFiltersChanged({conditionsBased:true})};l.prototype.init=function(){e.prototype.init.apply(this,arguments);this._bPersistValues=true;this.getEngine().defaultProviderRegistry.attach(this,a.Transient)};l.prototype.exit=function(){this.getEngine().defaultProviderRegistry.detach(this);if(this._oCollectiveSearch){this._oFilterBarLayout.removeControl(this._oCollectiveSearch);this._oCollectiveSearch=null}e.prototype.exit.apply(this,arguments);this._oBasicSearchField=null;this._oBtnFilters=null;this._oShowAllFiltersBtn=null};l.prototype._onToggleFilters=function(t){this.setExpandFilterFields(!this.getExpandFilterFields())};l.prototype._onShowAllFilters=function(t){this._oFilterBarLayout._updateFilterBarLayout(true)};l.prototype.setCollectiveSearch=function(t){if(this._oCollectiveSearch){if(this._oFilterBarLayout){this._oFilterBarLayout.removeControl(this._oCollectiveSearch)}}this._oCollectiveSearch=t;if(this._oFilterBarLayout&&this._oCollectiveSearch){this._oFilterBarLayout.insertControl(this._oCollectiveSearch,0)}return this};l.prototype.getCollectiveSearch=function(){return this._oCollectiveSearch};l.prototype.destroyCollectiveSearch=function(){if(this._oCollectiveSearch&&this._oFilterBarLayout){this._oFilterBarLayout.removeControl(this._oCollectiveSearch);this._oCollectiveSearch.destroy();this._oCollectiveSearch=undefined}return this};l.prototype.setBasicSearchField=function(t){if(this._oBasicSearchField){if(this._oFilterBarLayout){this._oFilterBarLayout.removeControl(this._oBasicSearchField)}this._oBasicSearchField.detachSubmit(this._handleFilterItemSubmit,this)}this._oBasicSearchField=t;if(t){if(this.isPropertyInitial("expandFilterFields")){this.setExpandFilterFields(false)}if(this._oFilterBarLayout){this._oFilterBarLayout.insertControl(t,this._oCollectiveSearch?1:0)}t.attachSubmit(this._handleFilterItemSubmit,this);if(!this._oObserver.isObserved(t,{properties:["visible"]})){this._oObserver.observe(t,{properties:["visible"]})}}return this};l.prototype.getBasicSearchField=function(){return this._oBasicSearchField};l.prototype.destroyBasicSearchField=function(){if(this._oBasicSearchField&&this._oFilterBarLayout){this._oFilterBarLayout.removeControl(this._oBasicSearchField);this._oBasicSearchField.detachSubmit(this._handleFilterItemSubmit,this);if(this._oObserver.isObserved(this._oBasicSearchField,{properties:["visible"]})){this._oObserver.unobserve(this._oBasicSearchField)}this._oBasicSearchField.destroy();this._oBasicSearchField=undefined}return this};l.prototype.getInitialFocusedControl=function(){var t=this.getBasicSearchField();if(!t&&this.getShowGoButton()){t=this._btnSearch}return t};return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/vh/FilterBarDelegate", ["sap/ui/mdc/FilterBarDelegate"],function(e){"use strict";var t=Object.assign({},e);t.fetchProperties=function(t){return Promise.resolve([{name:"$search",typeConfig:e.getTypeUtil().getTypeConfig("String",null,null)}])};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/vh/FilterContainer", ["sap/ui/mdc/filterbar/IFilterContainer","sap/ui/layout/AlignedFlowLayout","sap/m/OverflowToolbar","sap/m/ToolbarSpacer","sap/m/VBox"],function(t,e,o,i,n){"use strict";var a=t.extend("sap.ui.mdc.filterbar.vh.FilterContainer",{metadata:{aggregations:{_layout:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}}}});a.prototype.init=function(){this.aLayoutItems=[];this.oToolbar=new o(this.getId()+"-tbr",{content:[new i]});this.oAlgnLayout=new e(this.getId()+"-aflayout",{visible:"{$sap.ui.filterbar.mdc.FilterBarBase>/expandFilterFields}"}).addStyleClass("sapUiMdcFilterBarBaseAFLayout");this.oLayout=new n(this.getId()+"-vbox",{items:[this.oToolbar,this.oAlgnLayout]});this.setAggregation("_layout",this.oLayout,true)};a.prototype.exit=function(){this.aLayoutItems.forEach(function(t){t.destroy()});this.aLayoutItems=null};a.prototype.addControl=function(t){this.oToolbar.addContent(t)};a.prototype.insertControl=function(t,e){this.oToolbar.insertContent(t,e)};a.prototype.removeControl=function(t){this.oToolbar.removeContent(t)};a.prototype.addEndContent=function(t){this.oAlgnLayout.addEndContent(t)};a.prototype.insertFilterField=function(t,e){this.aLayoutItems.splice(e,0,t);this._updateFilterBarLayout()};a.prototype.removeFilterField=function(t){var e=-1;this.aLayoutItems.some(function(o,i){if(t===o){e=i;return true}return false});if(e>=0){this.aLayoutItems.splice(e,1);this._updateFilterBarLayout()}};a.prototype.getFilterFields=function(){return this.oAlgnLayout.getContent()};a.prototype._updateFilterBarLayout=function(t){var e=this.aLayoutItems.length;var o=this.getParent().getFilterFieldThreshold();var i=t||e<=o+1;if(!i){var n=this.oAlgnLayout.getContent();n.some(function(t,e){if(t!=this.aLayoutItems[e]){i=true;return true}return false}.bind(this))}if(i){this.oAlgnLayout.removeAllContent();this.aLayoutItems.some(function(i,n){if(t||e<=o||n+1<o){this.oAlgnLayout.insertContent(i,n);return false}return true}.bind(this))}var a=this.oAlgnLayout.getEndContent()[0];a.setVisible(!t&&e>o)};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ActionToolbar.flexibility", ["./ItemBaseFlex","./Util"],function(e,t){"use strict";var n=Object.assign({},e);n.findItem=function(e,t,n){return t.find(function(t){return e.getId(t)===n})};n.determineAggregation=function(e,t){return e.getAggregation(t,"actions").then(function(e){return{name:"actions",items:e}})};n._applyMove=function(e,n,i,r){var a=r===t.REVERT?true:false;var g=i.modifier;if(g.getParent(n)){var o=g.getParent(n);if(g.getControlType(o)==="sap.ui.mdc.Chart"){n=o}else if(g.getParent(o)&&g.getControlType(g.getParent(o))==="sap.ui.mdc.Table"){n=g.getParent(o)}}this.beforeApply(e.getChangeType(),n,a);if(this._bSupressFlickering){this._delayInvalidate(n)}var s=a?e.getRevertData():e.getContent();var u;var f;var h;var c;var m=this.determineAggregation(g,n).then(function(e){f=e;return this._getExistingAggregationItem(s,i,n)}.bind(this)).then(function(e){u=e}).then(function(){if(!u){throw new Error("No corresponding item in "+f.name+" found. Change to move item cannot be "+this._getOperationText(a)+"at this moment")}c=g.getId(u);return g.findIndexInParentAggregation(u)}.bind(this)).then(function(e){h=e;return g.removeAggregation(n,f.name,u).then(function(){return g.insertAggregation(n,f.name,u,s.index)})}).then(function(){if(a){e.resetRevertData()}else{e.setRevertData({name:s.name,index:h,item:c})}this.afterApply(e.getChangeType(),n,a)}.bind(this));return m};return{moveAction:n.createMoveChangeHandler()}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ActionToolbarAction.flexibility", [],function(){"use strict";return{unhideControl:{changeHandler:"default"},hideControl:{changeHandler:"default"}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/AggregateFlex", ["sap/m/p13n/Engine","sap/ui/mdc/flexibility/Util","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t,n){"use strict";var r=function(e,t,n,r){if(r){e.resetRevertData()}else{e.setRevertData(n)}};var a=function(e,n,a,i){return new Promise(function(o,g){var s=i===t.REVERT;var c=a.modifier;var v=s?e.getRevertData():e.getContent();Promise.resolve().then(c.getProperty.bind(c,n,"aggregateConditions")).then(function(t){var a=t?t:{};a[v.name]={};var i={name:v.name};c.setProperty(n,"aggregateConditions",a);r(e,n,i,s);o()}).catch(function(e){g(e)})})};var i=function(e,n,a,i){return new Promise(function(o,g){var s=i===t.REVERT;var c=a.modifier;var v=s?e.getRevertData():e.getContent();Promise.resolve().then(c.getProperty.bind(c,n,"aggregateConditions")).then(function(t){var a=t?t:{};if(!a){g()}delete a[v.name];c.setProperty(n,"aggregateConditions",a);r(e,n,v,s);o()}).catch(function(e){g(e)})})};var o={};var g=function(e,t){var r=e.getContent();return{classification:n.Reverse,affectedControl:e.getSelector(),uniqueKey:"aggregate"+"_"+r.name}};o.addAggregate=t.createChangeHandler({apply:a,revert:i,getCondenserInfo:g});o.removeAggregate=t.createChangeHandler({apply:i,revert:a,getCondenserInfo:g});return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/Chart.flexibility", ["./SortFlex","./ChartItemFlex","./ConditionFlex","./ChartTypeFlex"],function(e,t,o,r){"use strict";return{addItem:t.addItem,removeItem:t.removeItem,moveItem:t.moveItem,setChartType:r.setChartType,removeSort:e.removeSort,addSort:e.addSort,moveSort:e.moveSort,addCondition:o.addCondition,removeCondition:o.removeCondition}},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ChartItemFlex", ["./ItemBaseFlex"],function(e){"use strict";var r=Object.assign({},e);r.beforeAddItem=function(e,r,t,n,a){return e.addItem.call(e,r,t,n,a.role)};r.findItem=function(e,r,t){return r.reduce(function(r,n){return r.then(function(r){if(!r){return Promise.all([e.getProperty(n,"key"),e.getProperty(n,"name")]).then(function(e){if(e[0]===t||e[1]===t){return n}})}return r})},Promise.resolve())};r.addItem=r.createAddChangeHandler();r.removeItem=r.createRemoveChangeHandler();r.moveItem=r.createMoveChangeHandler();return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ChartTypeFlex", ["sap/ui/mdc/flexibility/Util","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t){"use strict";var r={};var n=function(e,t,r){var n=r.modifier;return Promise.resolve().then(n.getProperty.bind(n,t,"chartType")).then(function(r){e.setRevertData(r);n.setProperty(t,"chartType",e.getContent().chartType)})};var a=function(e,t,r){r.modifier.setProperty(t,"chartType",e.getRevertData());e.resetRevertData();return Promise.resolve()};var i=function(e,r){return{classification:t.LastOneWins,affectedControl:e.getSelector(),uniqueKey:"chartType"}};r.setChartType=e.createChangeHandler({apply:n,revert:a,getCondenserInfo:i});return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ColumnFlex", ["sap/m/p13n/Engine","./ItemBaseFlex"],function(e,n){"use strict";var r=Object.assign({},n);r.findItem=function(e,n,r){return n.reduce(function(n,t){return n.then(function(n){if(!n){return Promise.resolve().then(e.getProperty.bind(e,t,"dataProperty")).then(function(e){if(e===r){return t}})}return n})},Promise.resolve())};r.addColumn=r.createAddChangeHandler();r.removeColumn=r.createRemoveChangeHandler();r.moveColumn=r.createMoveChangeHandler();return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ConditionFlex", ["sap/base/util/merge","sap/base/Log","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/flexibility/Util","sap/ui/fl/changeHandler/condenser/Classification"],function(e,n,t,i,r){"use strict";var o=function(e,n){var t=function(n){if(e._pQueue===n){delete e._pQueue}};e._pQueue=e._pQueue instanceof Promise?e._pQueue.then(n):n();e._pQueue.then(t.bind(null,e._pQueue));return e._pQueue};var a=function(e){return new Promise(function(n,t){sap.ui.require([e],n,t)})};var u=function(r,u,f,d){var c=d===i.REVERT;var l=c?r.getRevertData():r.getContent();var s,g=null,v=f.modifier;return o(u,function(){return v.getProperty(u,"filterConditions").then(function(i){s=e({},i);if(s){for(var o in s){if(o===l.name){g=s[o];break}}}if(!g){s[l.name]=[];g=s[l.name]}if(!c){r.setRevertData({name:l.name,condition:l.condition})}var d=t.indexOfCondition(l.condition,g);if(d<0){g.push(l.condition);v.setProperty(u,"filterConditions",s);return v.getProperty(u,"delegate").then(function(e){return a(e.name)}).then(function(e){var t=e&&(e.getFilterDelegate?e.getFilterDelegate().addCondition:e.addCondition);if(t){return t(l.name,u,f).catch(function(e){n.error("Error during Delegate.addCondition call: "+e)})}}).finally(function(){if(c){r.resetRevertData()}})}})})};var f=function(r,u,f,d){var c=d===i.REVERT;var l=c?r.getRevertData():r.getContent();var s,g,v=-1,p=f.modifier;return o(u,function(){return p.getProperty(u,"filterConditions").then(function(i){s=e({},i);if(s){for(var o in s){if(o===l.name){g=s[o];break}}}if(!c){r.setRevertData({name:l.name,condition:l.condition})}if(g&&g.length>0){v=t.indexOfCondition(l.condition,g);if(v>=0){g.splice(v,1);p.setProperty(u,"filterConditions",s);return p.getProperty(u,"delegate").then(function(e){return a(e.name)}).then(function(e){var t=e&&(e.getFilterDelegate?e.getFilterDelegate().removeCondition:e.removeCondition);if(t){return t(l.name,u,f).catch(function(e){n.error("Error during Delegate.removeCondition call: "+e)})}}).finally(function(){if(c){r.resetRevertData()}})}}})})};var d=function(e,n){var t=e.getContent();return{classification:r.Reverse,affectedControl:e.getSelector(),uniqueKey:t.name+"_"+JSON.stringify(t.condition)}};var c={};c.addCondition=i.createChangeHandler({apply:u,revert:f,getCondenserInfo:d});c.removeCondition=i.createChangeHandler({apply:f,revert:u,getCondenserInfo:d});return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/FilterBar.flexibility", ["./FilterItemFlex","./ConditionFlex","./PropertyInfoFlex"],function(e,n,o){"use strict";return{addFilter:e.createAddChangeHandler(),removeFilter:e.createRemoveChangeHandler(),moveFilter:e.createMoveChangeHandler(),addCondition:n.addCondition,removeCondition:n.removeCondition,addPropertyInfo:o.addPropertyInfo}},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/FilterItemFlex", ["./ItemBaseFlex"],function(e){"use strict";var i=Object.assign({},e);i.findItem=function(e,i,n){return i.find(function(i){var t;if(e.targets==="jsControlTree"){t=i.getFieldPath()}else{t=i.getAttribute("conditions");if(t){var r,a=t.indexOf("/conditions/");if(a>=0){t=t.slice(a+12);r=t.indexOf("}");if(r>=0){t=t.slice(0,r)}}}}return t===n})};i.beforeApply=function(e){if(e.applyConditionsAfterChangesApplied){e.applyConditionsAfterChangesApplied()}};i.addFilter=i.createAddChangeHandler();i.removeFilter=i.createRemoveChangeHandler();i.moveFilter=i.createMoveChangeHandler();return i},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/GroupFlex", ["sap/m/p13n/Engine","sap/ui/mdc/flexibility/Util","sap/ui/fl/changeHandler/Base","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t,n,r){"use strict";var o=function(e,t,n,r){if(r){e.resetRevertData()}else{e.setRevertData(n)}};var i=function(e,n,r,i){return new Promise(function(a,g){var c=i===t.REVERT;var s=r.modifier;var u=c?e.getRevertData():e.getContent();Promise.resolve().then(s.getProperty.bind(s,n,"groupConditions")).then(function(t){var r=t?t.groupLevels:[];var i={name:u.name};r.splice(u.index,0,i);t={groupLevels:r};s.setProperty(n,"groupConditions",t);o(e,n,i,c);a()}).catch(function(e){g(e)})})};var a=function(e,r,i,a){return new Promise(function(g,c){var s=a===t.REVERT;var u=i.modifier;var p=s?e.getRevertData():e.getContent();Promise.resolve().then(u.getProperty.bind(u,r,"groupConditions")).then(function(t){var i=t?t.groupLevels:[];if(!i){c()}var a=i.filter(function(e){return e.name===p.name});var d=i.indexOf(a[0]);if(d>-1){i.splice(d,1)}else{return n.markAsNotApplicable("The specified change is already existing - change appliance ignored",true)}t={groupLevels:i};u.setProperty(r,"groupConditions",t);o(e,r,p,s);g()}).catch(function(e){c(e)})})};var g=function(e,n,r,i){return new Promise(function(a,g){var c=i===t.REVERT;var s=r.modifier;var u=c?e.getRevertData():e.getContent();Promise.resolve().then(s.getProperty.bind(s,n,"groupConditions")).then(function(t){var r=t?t.groupLevels:[];var i=r.filter(function(e){return e.name===u.name});var g=r.indexOf(i[0]);r.splice(u.index,0,r.splice(g,1)[0]);t={groupLevels:r};s.setProperty(n,"groupConditions",t);o(e,n,u,c);a()}).catch(function(e){g(e)})})};var c={};c.addGroup=t.createChangeHandler({apply:i,revert:a,getCondenserInfo:function(e,t){return{affectedControl:{id:e.getContent().name},affectedControlIdProperty:"name",targetContainer:e.getSelector(),targetAggregation:"groupLevels",customAggregation:t.modifier.bySelector(e.getSelector(),t.appComponent).getGroupConditions().groupLevels,classification:r.Create,setTargetIndex:function(e,t){e.getContent().index=t},getTargetIndex:function(e){return e.getContent().index}}}});c.removeGroup=t.createChangeHandler({apply:a,revert:i,getCondenserInfo:function(e,t){return{affectedControl:{id:e.getContent().name},affectedControlIdProperty:"name",targetContainer:e.getSelector(),targetAggregation:"groupLevels",customAggregation:t.modifier.bySelector(e.getSelector(),t.appComponent).getGroupConditions().groupLevels,classification:r.Destroy,sourceIndex:e.getRevertData().index}}});c.moveGroup=t.createChangeHandler({apply:g,revert:g,getCondenserInfo:function(e,t){return{affectedControl:{id:e.getContent().name},affectedControlIdProperty:"name",targetContainer:e.getSelector(),targetAggregation:"groupLevels",classification:r.Move,sourceIndex:e.getRevertData().index,customAggregation:t.modifier.bySelector(e.getSelector(),t.appComponent).getGroupConditions().groupLevels,sourceContainer:e.getSelector(),sourceAggregation:"groupLevels",setTargetIndex:function(e,t){e.getContent().index=t},getTargetIndex:function(e){return e.getContent().index}}}});return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ItemBaseFlex", ["sap/m/p13n/Engine","sap/base/Log","sap/ui/mdc/flexibility/Util","sap/ui/fl/changeHandler/Base","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t,n,i,r){"use strict";var a={beforeAddItem:function(e,t,n,i){return e.addItem.call(e,t,n,i)},afterRemoveItem:function(e,t,n,i){return e.removeItem.call(e,t,n,i)},findItem:function(e,t,n){return Promise.resolve()},beforeApply:function(e,t,n){return},afterApply:function(e,t,n){return},determineAggregation:function(e,t){var n;return Promise.resolve().then(e.getControlMetadata.bind(e,t)).then(function(i){n=i.getDefaultAggregation().name;return e.getAggregation(t,n)}).then(function(e){return{name:n,items:e}})},_getExistingAggregationItem:function(e,t,n){var i=t.modifier;return this.determineAggregation(i,n).then(function(t){var n,r=t.items;if(r){n=this.findItem(i,r,e.name)}return n}.bind(this))},_getDelegate:function(e){return new Promise(function(t,n){sap.ui.require([e],t,n)})},_getOperationText:function(e){return e?"reverted ":"applied "},_getChangeTypeText:function(e){return e?"add":"remove"},_applyAdd:function(e,t,r,a){var o=a===n.REVERT;this.beforeApply(e.getChangeType(),t,o);var g=r.modifier,d=o?e.getRevertData():e.getContent();var s=d.name;var u;var f;var h;var c;var l=this.determineAggregation(g,t).then(function(e){h=e;f=h.items;u=d.index>-1?d.index:f.length;return this._getExistingAggregationItem(d,r,t)}.bind(this)).then(function(e){if(e){return e}else{return g.getProperty(t,"delegate").then(function(e){return this._getDelegate(e.name)}.bind(this)).then(function(e){return this.beforeAddItem(e,s,t,r,d)}.bind(this)).then(function(e){return e})}}.bind(this)).then(function(e){if(!e){throw new Error("No item in"+h.name+"  created. Change to "+this._getChangeTypeText(!o)+"cannot be "+this._getOperationText(o)+"at this moment")}if(f.indexOf(e)<0){g.insertAggregation(t,h.name,e,u)}else{return i.markAsNotApplicable("The specified change is already existing - change appliance ignored",true)}c=e.getId?e.getId():e.id;return e}.bind(this)).then(function(){if(o){e.resetRevertData()}else{e.setRevertData({name:d.name,index:u,item:c})}this.afterApply(e.getChangeType(),t,o)}.bind(this));return l},_applyRemove:function(e,t,r,a){var o=a===n.REVERT;this.beforeApply(e.getChangeType(),t,o);var g=r.modifier,d=o?e.getRevertData():e.getContent();var s;var u;var f;var h;var c=this.determineAggregation(g,t).then(function(e){s=e;return this._getExistingAggregationItem(d,r,t)}.bind(this)).then(function(e){f=e;if(!f){return i.markAsNotApplicable("The specified change is already existing - change appliance ignored",true)}else{return g.findIndexInParentAggregation(f)}}).then(function(e){u=e;return g.removeAggregation(t,s.name,f)}).then(function(){return g.getProperty(t,"delegate").then(function(e){return this._getDelegate(e.name)}.bind(this)).then(function(n){return this.afterRemoveItem(n,f,t,r).then(function(n){if(n&&f){h=g.getId(f);g.destroy(f,"KeepDom")}this.afterApply(e.getChangeType(),t,o)}.bind(this))}.bind(this))}.bind(this)).then(function(){if(o){e.resetRevertData()}else{e.setRevertData({name:d.name,index:u,item:h})}});return c},_applyMove:function(e,t,r,a){var o;var g=a===n.REVERT;this.beforeApply(e.getChangeType(),t,g);if(this._bSupressFlickering){this._delayInvalidate(t)}var d=r.modifier;var s=g?e.getRevertData():e.getContent();var u;var f;var h;var c=this.determineAggregation(d,t).then(function(e){f=e;return this._getExistingAggregationItem(s,r,t)}.bind(this)).then(function(e){u=e}).then(function(){if(!u){return i.markAsNotApplicable("The specified change is already existing - change appliance ignored",true)}else{o=u.getId?u.getId():u.id;return d.findIndexInParentAggregation(u)}}).then(function(e){h=e;if(t.moveColumn){return t.moveColumn(u,s.index)}else{return d.removeAggregation(t,f.name,u).then(function(){return d.insertAggregation(t,f.name,u,s.index)})}}).then(function(){if(g){e.resetRevertData()}else{e.setRevertData({name:s.name,index:h,item:o})}this.afterApply(e.getChangeType(),t,g)}.bind(this));return c},_removeIndexFromChange:function(e){var t=e.getContent();delete t.index;e.setContent(t)},createAddChangeHandler:function(){return n.createChangeHandler({apply:this._applyAdd.bind(this),revert:this._applyRemove.bind(this),getCondenserInfo:function(e,t){var n=t.modifier.bySelector(e.getSelector(),t.appComponent);return this.determineAggregation(t.modifier,n).then(function(t){return{affectedControl:{idIsLocal:false,id:e.getRevertData().item},targetContainer:e.getSelector(),targetAggregation:t.name,classification:r.Create,setTargetIndex:function(e,t){e.getContent().index=t},getTargetIndex:function(e){return e.getContent().index}}})}.bind(this)})},createRemoveChangeHandler:function(){return n.createChangeHandler({apply:this._applyRemove.bind(this),complete:this._removeIndexFromChange.bind(this),revert:this._applyAdd.bind(this),getCondenserInfo:function(e,t){var n=t.modifier.bySelector(e.getSelector(),t.appComponent);return this.determineAggregation(t.modifier,n).then(function(t){return{affectedControl:{idIsLocal:false,id:e.getRevertData().item},targetContainer:e.getSelector(),targetAggregation:t.name,classification:r.Destroy,sourceIndex:e.getRevertData().index}})}.bind(this)})},createMoveChangeHandler:function(){return n.createChangeHandler({apply:this._applyMove.bind(this),revert:this._applyMove.bind(this),getCondenserInfo:function(e,t){var n=t.modifier.bySelector(e.getSelector(),t.appComponent);return this.determineAggregation(t.modifier,n).then(function(t){return{affectedControl:{idIsLocal:false,id:e.getRevertData().item},targetContainer:e.getSelector(),targetAggregation:t.name,classification:r.Move,sourceIndex:e.getRevertData().index,sourceContainer:e.getSelector(),sourceAggregation:t.name,setTargetIndex:function(e,t){e.getContent().index=t},getTargetIndex:function(e){return e.getContent().index}}})}.bind(this)})}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/Panel.flexibility", ["sap/ui/fl/changeHandler/Base","./ItemBaseFlex"],function(e,t){"use strict";var n=Object.assign({},t);n.findItem=function(e,t,n){return Promise.resolve(sap.ui.getCore().byId(n))};return{createChanges:function(e,t){var n=t.filter(function(e){return!sap.ui.getCore().byId(e.id)});var r={};return n.reduce(function(e,t){if(!r[t.id]){r[t.id]=true;e.push(t)}return e},[]).map(function(t){return{selectorElement:e,changeSpecificData:{changeType:"createItem",content:{selector:t.id}}}})},createItem:{layers:{USER:true},changeHandler:{applyChange:function(e,t,n){var r=e.getContent().selector;return Promise.resolve().then(function(){t.getModel();return n.modifier.getProperty(t,"metadataHelperPath")}).then(function(e){return new Promise(function(t,n){sap.ui.require(["sap/ui/mdc/link/PanelItem",e],function(e,n){t(n)},function(e){n(e)})})}).then(function(e){var i=n.modifier;if(i.bySelector(r,n.appComponent,n.view)){return undefined}var o=e.retrieveAllMetadata(t);var a;var u=function(e,t){var n=-1;t.some(function(t,r){if(t.getId()===e){n=r;return true}});return n};var c=i.getControlIdBySelector(r,n.appComponent);return Promise.resolve().then(i.getAggregation.bind(i,t,"items")).then(function(e){a=-1;var t=null;o.some(function(n){var r=u(n.id,e);if(r>-1){a=r}if(n.id===c){t=n;return true}});if(!t){return undefined}return i.createControl("sap.ui.mdc.link.PanelItem",n.appComponent,n.view,t.id,{text:t.text,description:t.description,href:t.href,target:t.target,icon:t.icon,visible:true})}).then(function(e){return i.insertAggregation(t,"items",e,a+1)})})},revertChange:function(t,n,r){var i=r.modifier;if(t.getContent()&&t.getContent().selector){var o=t.getContent().selector.id;var a=i.bySelector(o,r.appComponent,r.view);if(!a){return e.markAsNotApplicable("revertChange of createItem: the item with id "+o+" is not existing and therefore can not be removed.",true)}return Promise.resolve().then(i.removeAggregation.bind(i,n,"items",a))}},completeChangeContent:function(e,t,n){if(t.content){var r=n.modifier.getSelector(t.content.selector,n.appComponent);e.setContent({selector:r})}}}}}},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/PanelItem.flexibility", ["sap/ui/fl/changeHandler/HideControl","sap/ui/fl/changeHandler/UnhideControl"],function(e,n){"use strict";return{createChanges:function(e){return e.map(function(e){var n=sap.ui.getCore().byId(e.id);if(!n){throw new Error("Invalid 'id'. For the id "+e.id+" no existing control could be found")}return{selectorElement:n,changeSpecificData:{changeType:e.visible?"revealItem":"hideItem"}}})},revealItem:{layers:{USER:true},changeHandler:n},hideItem:{layers:{USER:true},changeHandler:e}}},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/PropertyInfoFlex", [],function(){"use strict";var n={};n.addPropertyInfo={changeHandler:{applyChange:function(n,e,t){},completeChangeContent:function(n,e,t){},revertChange:function(n,e,t){}},layers:{USER:true}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/SortFlex", ["sap/m/p13n/Engine","sap/ui/mdc/flexibility/Util","sap/ui/fl/changeHandler/Base","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t,n,r){"use strict";var o=function(e,t,n,r){if(r){e.resetRevertData()}else{e.setRevertData(n)}};var i=function(e,n,r,i){return new Promise(function(a,s){var c=i===t.REVERT;var g=r.modifier;var d=c?e.getRevertData():e.getContent();Promise.resolve().then(g.getProperty.bind(g,n,"sortConditions")).then(function(t){var r=t?t.sorters:[];var i={name:d.key||d.name,descending:d.descending};r.splice(d.index,0,i);t={sorters:r};g.setProperty(n,"sortConditions",t);o(e,n,i,c);a()}).catch(function(e){s(e)})})};var a=function(e,r,i,a){return new Promise(function(s,c){var g=i.modifier;var d=a===t.REVERT;var f=d?e.getRevertData():e.getContent();Promise.resolve().then(g.getProperty.bind(g,r,"sortConditions")).then(function(t){var i=t?t.sorters:[];if(!i){c()}var a=i.filter(function(e){return e.name===f.name});var l=i.indexOf(a[0]);if(l>-1){i.splice(l,1)}else{return n.markAsNotApplicable("The specified change is already existing - change appliance ignored",true)}t={sorters:i};g.setProperty(r,"sortConditions",t);o(e,r,f,d);s()}).catch(function(e){c(e)})})};var s=function(e,n,r,i){return new Promise(function(a,s){var c=i===t.REVERT;var g=r.modifier;var d=c?e.getRevertData():e.getContent();Promise.resolve().then(g.getProperty.bind(g,n,"sortConditions")).then(function(t){var r=t?t.sorters:[];var i=r.filter(function(e){return e.name===d.name});var s=r.indexOf(i[0]);r.splice(d.index,0,r.splice(s,1)[0]);t={sorters:r};g.setProperty(n,"sortConditions",t);o(e,n,d,c);a()}).catch(function(e){s(e)})})};var c={};c.addSort=t.createChangeHandler({apply:i,revert:a,getCondenserInfo:function(e,t){return{affectedControl:{id:e.getContent().name},affectedControlIdProperty:"name",targetContainer:e.getSelector(),targetAggregation:"sorters",customAggregation:t.modifier.bySelector(e.getSelector(),t.appComponent).getSortConditions().sorters,classification:r.Create,setTargetIndex:function(e,t){e.getContent().index=t},getTargetIndex:function(e){return e.getContent().index}}}});c.removeSort=t.createChangeHandler({apply:a,revert:i,getCondenserInfo:function(e,t){return{affectedControl:{id:e.getContent().name},affectedControlIdProperty:"name",targetContainer:e.getSelector(),targetAggregation:"sorters",customAggregation:t.modifier.bySelector(e.getSelector(),t.appComponent).getSortConditions().sorters,classification:r.Destroy,sourceIndex:e.getRevertData().index}}});c.moveSort=t.createChangeHandler({apply:s,revert:s,getCondenserInfo:function(e,t){return{affectedControl:{id:e.getContent().name},affectedControlIdProperty:"name",targetContainer:e.getSelector(),targetAggregation:"sorters",classification:r.Move,sourceIndex:e.getRevertData().index,customAggregation:t.modifier.bySelector(e.getSelector(),t.appComponent).getSortConditions().sorters,sourceContainer:e.getSelector(),sourceAggregation:"sorters",setTargetIndex:function(e,t){e.getContent().index=t},getTargetIndex:function(e){return e.getContent().index}}}});return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/Table.flexibility", ["./SortFlex","./ColumnFlex","./ConditionFlex","./GroupFlex","./AggregateFlex","./xConfigFlex"],function(e,o,r,d,t,n){"use strict";return{hideControl:"default",unhideControl:"default",addColumn:o.createAddChangeHandler(),removeColumn:o.createRemoveChangeHandler(),moveColumn:o.createMoveChangeHandler(),removeSort:e.removeSort,addSort:e.addSort,moveSort:e.moveSort,addCondition:r.addCondition,removeCondition:r.removeCondition,removeGroup:d.removeGroup,addGroup:d.addGroup,moveGroup:d.moveGroup,removeAggregate:t.removeAggregate,addAggregate:t.addAggregate,setColumnWidth:n.createSetChangeHandler({aggregation:"columns",property:"width"})}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/Util", ["sap/ui/mdc/util/loadModules","sap/m/p13n/Engine"],function(n,e){"use strict";var t={};t.APPLY="apply";t.REVERT="revert";function i(n){if(n&&n.isInvalidateSuppressed&&!n.isInvalidateSuppressed()){n.iSuppressInvalidate=1;e.getInstance().waitForChanges(n).then(function(){n.iSuppressInvalidate=0;n.findElements(false,function(n){if(n.isA("sap.ui.core.Control")){n.invalidate()}});n.invalidate()})}}function a(n,t){if(n.isA){e.getInstance().trace(n,{selectorElement:n,changeSpecificData:{changeType:t.getChangeType(),content:t.getContent()}});if(!n._pPendingModification&&n._onModifications instanceof Function){n._pPendingModification=e.getInstance().waitForChanges(n).then(function(){var t=e.getInstance().getTrace(n);e.getInstance().clearTrace(n);delete n._pPendingModification;return n._onModifications(t)})}}}t.createChangeHandler=function(e){var o=e.apply instanceof Function&&e.apply;var r=e.revert instanceof Function&&e.revert;var c=e.complete instanceof Function&&e.complete;if(!o||!r){throw new Error("Please provide atleast an apply and revert function!")}return{changeHandler:{applyChange:function(n,e,r){i(e);return o(n,e,r,t.APPLY).then(function(){a(e,n)})},completeChangeContent:function(n,e,t){if(c){c(n,e,t)}},revertChange:function(n,e,o){i(e);return r(n,e,o,t.REVERT).then(function(){a(e,n)})},onAfterXMLChangeProcessing:function(e,t){t.modifier.getProperty(e,"delegate").then(function(i){if(i){n(i.name).then(function(n){var i=n[0];if(i.onAfterXMLChangeProcessing instanceof Function){i.onAfterXMLChangeProcessing(e,t)}})}})}},layers:{USER:true}}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/xConfigFlex", ["sap/m/p13n/Engine","sap/ui/mdc/flexibility/Util","sap/ui/fl/changeHandler/condenser/Classification"],function(e,n,t){"use strict";var a={};var r=function(e,n){var t=function(n){if(e._pQueue===n){delete e._pQueue}};e._pQueue=e._pQueue instanceof Promise?e._pQueue.then(n):n();e._pQueue.then(t.bind(null,e._pQueue));return e._pQueue};a.createSetChangeHandler=function(a){if(!a||!a.hasOwnProperty("aggregation")||!a.hasOwnProperty("property")){throw new Error("Please provide a map containing the affected aggregation and property name!")}var o=a.aggregation;var g=a.property;var i=function(n,t,a){return r(t,function(){return e.getInstance().readXConfig(t,{propertyBag:a}).then(function(r){var i=null;if(r&&r.aggregations&&r.aggregations[o]&&r.aggregations[o][n.getContent().name]&&r.aggregations[o][n.getContent().name][g]){i=r.aggregations[o][n.getContent().name][g]}n.setRevertData({name:n.getContent().name,value:i});return e.getInstance().enhanceXConfig(t,{controlMeta:{aggregation:o},property:g,name:n.getContent().name,value:n.getContent().value,propertyBag:a})})})};var u=function(n,t,a){return e.getInstance().enhanceXConfig(t,{controlMeta:{aggregation:o},property:g,name:n.getRevertData().name,value:n.getRevertData().value,propertyBag:a}).then(function(){n.resetRevertData()})};return n.createChangeHandler({apply:i,revert:u,getCondenserInfo:function(e,n){return{classification:t.LastOneWins,affectedControl:e.getSelector(),uniqueKey:e.getContent().name+"_"+a.aggregation+"_"+a.property}}})};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flp/FlpLinkDelegate", ["sap/ui/mdc/LinkDelegate","sap/ui/mdc/link/LinkItem","sap/ui/mdc/link/Factory","sap/ui/mdc/link/Log","sap/base/Log","sap/base/util/isPlainObject","sap/ui/mdc/link/SemanticObjectMapping","sap/ui/mdc/link/SemanticObjectMappingItem","sap/ui/mdc/link/SemanticObjectUnavailableAction"],function(e,t,n,i,a,r,c,o,u){"use strict";var s=Object.assign({},e);s.fetchLinkItems=function(e,t,n){var a=t?t.getObject(t.getPath()):undefined;var r=[];if(n){n.initialize(s._getSemanticObjects(e));r.forEach(function(e){n.addIntent(i.IntentType.API,{text:e.getText(),intent:e.getHref()})})}var c=s._calculateSemanticAttributes(a,e,n);return s._retrieveNavigationTargets("",c,e,n).then(function(e,t){return Promise.resolve(e)})};s.fetchLinkType=function(e){var t={};var i=null;var r=function(e){return e.filter(function(e){return!t[e]}).length===0};var c=function(e){return e.some(function(e){return t[e]&&t[e].exists===true})};var o=function(){if(!i){i=new Promise(function(e){var r=n.getService("CrossApplicationNavigation");if(!r){a.error("FlpLinkDelegate: Service 'CrossApplicationNavigation' could not be obtained");e({});return}r.getDistinctSemanticObjects().then(function(n){n.forEach(function(e){t[e]={exists:true}});i=null;return e(t)},function(){a.error("FlpLinkDelegate: getDistinctSemanticObjects() of service 'CrossApplicationNavigation' failed");return e({})})})}return i};var u=function(e){if(r(e)){return Promise.resolve(c(e))}return o().then(function(){return c(e)})};if(e&&e.semanticObjects){return u(e.semanticObjects).then(function(e){return Promise.resolve({type:e?2:0,directLink:undefined})})}else{throw new Error("no payload or semanticObjects found")}};s._calculateSemanticAttributes=function(e,t,n){var i=s._getSemanticObjects(t);var c=s._convertSemanticObjectMapping(s._getSemanticObjectMappings(t));if(!i.length){i.push("")}var o={};i.forEach(function(t){if(n){n.addContextObject(t,e)}o[t]={};for(var i in e){var u=null,s=null;if(n){u=n.getSemanticObjectAttribute(t,i);if(!u){u=n.createAttributeStructure();n.addSemanticObjectAttribute(t,i,u)}}if(e[i]===undefined||e[i]===null){if(u){u.transformations.push({value:undefined,description:"ℹ Undefined and null values have been removed in FlpLinkDelegate."})}continue}if(r(e[i])){if(u){u.transformations.push({value:undefined,description:"ℹ Plain objects has been removed in FlpLinkDelegate."})}continue}var l=c&&c[t]&&c[t][i]?c[t][i]:i;if(u&&i!==l){s={value:undefined,description:"ℹ The attribute "+i+" has been renamed to "+l+" in FlpLinkDelegate.",reason:"🔴 A com.sap.vocabularies.Common.v1.SemanticObjectMapping annotation is defined for semantic object "+t+" with source attribute "+i+" and target attribute "+l+". You can modify the annotation if the mapping result is not what you expected."}}if(o[t][l]){a.error("FlpLinkDelegate: The attribute "+i+" can not be renamed to the attribute "+l+" due to a clash situation. This can lead to wrong navigation later on.")}o[t][l]=e[i];if(u){if(s){u.transformations.push(s);var f=n.createAttributeStructure();f.transformations.push({value:e[i],description:"ℹ The attribute "+l+" with the value "+e[i]+" has been added due to a mapping rule regarding the attribute "+i+" in FlpLinkDelegate."});n.addSemanticObjectAttribute(t,l,f)}}}});return o};s._retrieveNavigationTargets=function(e,i,r,c){if(!r.semanticObjects){return new Promise(function(e){e([])})}var o=r.semanticObjects;var u=r.sourceControl;var l={ownNavigation:undefined,availableActions:[]};return sap.ui.getCore().loadLibrary("sap.ui.fl",{async:true}).then(function(){return new Promise(function(f){sap.ui.require(["sap/ui/fl/Utils"],function(v){var b=n.getService("CrossApplicationNavigation");var g=n.getService("URLParsing");if(!b||!g){a.error("FlpLinkDelegate: Service 'CrossApplicationNavigation' or 'URLParsing' could not be obtained");return f(l.availableActions,l.ownNavigation)}var m=sap.ui.getCore().byId(u);var p=v.getAppComponentForControl(m);var d=o.map(function(t){return[{semanticObject:t,params:i?i[t]:undefined,appStateKey:e,ui5Component:p,sortResultsBy:"text"}]});return new Promise(function(){b.getLinks(d).then(function(e){if(!e||!e.length){return f(l.availableActions,l.ownNavigation)}var n=s._getSemanticObjectUnavailableActions(r);var i=s._convertSemanticObjectUnavailableAction(n);var a=b.hrefForExternal();if(a&&a.indexOf("?")!==-1){a=a.split("?")[0]}if(a){a+="?"}var u=function(e,t){return!!i&&!!i[e]&&i[e].indexOf(t)>-1};var v=function(e){var n=g.parseShellHash(e.intent);if(u(n.semanticObject,n.action)){return}var i=b.hrefForExternal({target:{shellHash:e.intent}},p);if(e.intent&&e.intent.indexOf(a)===0){l.ownNavigation=new t({href:i,text:e.text,internalHref:e.intent});return}var r=new t({key:n.semanticObject&&n.action?n.semanticObject+"-"+n.action:undefined,text:e.text,description:undefined,href:i,internalHref:e.intent,icon:undefined,initiallyVisible:e.tags&&e.tags.indexOf("superiorAction")>-1});l.availableActions.push(r);if(c){c.addSemanticObjectIntent(n.semanticObject,{intent:r.getHref(),text:r.getText()})}};for(var m=0;m<o.length;m++){e[m][0].forEach(v)}return f(l.availableActions,l.ownNavigation)},function(){a.error("FlpLinkDelegate: '_retrieveNavigationTargets' failed executing getLinks method");return f(l.availableActions,l.ownNavigation)})})})})})};s._getSemanticObjects=function(e){return e.semanticObjects?e.semanticObjects:[]};s._getSemanticObjectUnavailableActions=function(e){var t=[];if(e.semanticObjectUnavailableActions){e.semanticObjectUnavailableActions.forEach(function(e){t.push(new u({semanticObject:e.semanticObject,actions:e.actions}))})}return t};s._getSemanticObjectMappings=function(e){var t=[];var n=[];if(e.semanticObjectMappings){e.semanticObjectMappings.forEach(function(e){n=[];if(e.items){e.items.forEach(function(e){n.push(new o({key:e.key,value:e.value}))})}t.push(new c({semanticObject:e.semanticObject,items:n}))})}return t};s._convertSemanticObjectMapping=function(e){if(!e.length){return undefined}var t={};e.forEach(function(e){if(!e.getSemanticObject()){throw Error("FlpLinkDelegate: 'semanticObject' property with value '"+e.getSemanticObject()+"' is not valid")}t[e.getSemanticObject()]=e.getItems().reduce(function(e,t){e[t.getKey()]=t.getValue();return e},{})});return t};s._convertSemanticObjectUnavailableAction=function(e){if(!e.length){return undefined}var t={};e.forEach(function(e){if(!e.getSemanticObject()){throw Error("FlpLinkDelegate: 'semanticObject' property with value '"+e.getSemanticObject()+"' is not valid")}t[e.getSemanticObject()]=e.getActions()});return t};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/library", ["sap/ui/core/Core","sap/ui/core/library","sap/m/library"],function(){"use strict";var e=sap.ui.getCore().initLibrary({version:"1.113.0",name:"sap.ui.mdc",dependencies:["sap.ui.core","sap.m"],designtime:"sap/ui/mdc/designtime/library.designtime",types:["sap.ui.mdc.TableType","sap.ui.mdc.TableP13Mode","sap.ui.mdc.GrowingMode","sap.ui.mdc.RowAction","sap.ui.mdc.RowCountMode","sap.ui.mdc.SelectionMode","sap.ui.mdc.FilterExpression","sap.ui.mdc.MultiSelectMode"],interfaces:["sap.ui.mdc.IFilterSource","sap.ui.mdc.IFilter","sap.ui.mdc.IxState","sap.ui.mdc.valuehelp.ITypeaheadContent","sap.ui.mdc.valuehelp.IDialogContent","sap.ui.mdc.valuehelp.ITypeaheadContainer","sap.ui.mdc.valuehelp.IDialogContainer"],controls:["sap.ui.mdc.Table","sap.ui.mdc.FilterBar","sap.ui.mdc.field.FieldBase","sap.ui.mdc.field.FieldInput","sap.ui.mdc.field.FieldMultiInput","sap.ui.mdc.field.DefineConditionPanel","sap.ui.mdc.Field","sap.ui.mdc.FilterField","sap.ui.mdc.MultiValueField","sap.ui.mdc.link.Panel","sap.ui.mdc.link.ContactDetails","sap.ui.mdc.Chart","sap.ui.mdc.p13n.PersistenceProvider"],elements:["sap.ui.mdc.table.Column","sap.ui.mdc.table.CreationRow","sap.ui.mdc.table.TableTypeBase","sap.ui.mdc.table.GridTableType","sap.ui.mdc.table.ResponsiveTableType","sap.ui.mdc.table.RowSettings","sap.ui.mdc.chart.Item","sap.ui.mdc.chart.ChartSelectionDetails","sap.ui.mdc.chart.ChartToolbar","sap.ui.mdc.chart.ChartTypeButton","sap.ui.mdc.chart.DrillBreadcrumbs","sap.ui.mdc.chart.SelectionDetailsActions","sap.ui.mdc.field.CustomFieldInfo","sap.ui.mdc.field.FieldInfoBase","sap.ui.mdc.field.ListFieldHelpItem","sap.ui.mdc.filterbar.aligned.FilterItemLayout","sap.ui.mdc.Link","sap.ui.mdc.link.ContactDetailsAddressItem","sap.ui.mdc.link.ContactDetailsEmailItem","sap.ui.mdc.link.ContactDetailsItem","sap.ui.mdc.link.ContactDetailsPhoneItem","sap.ui.mdc.link.LinkItem","sap.ui.mdc.link.PanelItem","sap.ui.mdc.link.SemanticObjectUnavailableAction","sap.ui.mdc.link.SemanticObjectMapping","sap.ui.mdc.link.SemanticObjectMappingItem","sap.ui.mdc.field.MultiValueFieldItem","sap.ui.mdc.ValueHelp","sap.ui.mdc.valuehelp.Popover","sap.ui.mdc.valuehelp.Dialog","sap.ui.mdc.valuehelp.content.Bool","sap.ui.mdc.valuehelp.content.Conditions","sap.ui.mdc.valuehelp.content.FixedList","sap.ui.mdc.valuehelp.content.MDCTable","sap.ui.mdc.valuehelp.content.MTable"],extensions:{flChangeHandlers:{"sap.ui.mdc.Table":"sap/ui/mdc/flexibility/Table","sap.ui.mdc.Chart":"sap/ui/mdc/flexibility/Chart","sap.ui.mdc.FilterBar":"sap/ui/mdc/flexibility/FilterBar","sap.ui.mdc.filterbar.p13n.AdaptationFilterBar":"sap/ui/mdc/flexibility/FilterBar","sap.ui.mdc.filterbar.vh.FilterBar":"sap/ui/mdc/flexibility/FilterBar","sap.ui.mdc.link.PanelItem":"sap/ui/mdc/flexibility/PanelItem","sap.ui.mdc.link.Panel":"sap/ui/mdc/flexibility/Panel","sap.ui.mdc.ActionToolbar":"sap/ui/mdc/flexibility/ActionToolbar","sap.ui.mdc.actiontoolbar.ActionToolbarAction":"sap/ui/mdc/flexibility/ActionToolbarAction","sap.ui.mdc.chart.ChartToolbar":"sap/ui/mdc/flexibility/ActionToolbar"}},noLibraryCSS:false});e.FilterBarP13nMode={Item:"Item",Value:"Value"};e.TableType={Table:"Table",TreeTable:"TreeTable",ResponsiveTable:"ResponsiveTable"};e.TableP13nMode={Column:"Column",Sort:"Sort",Filter:"Filter",Group:"Group",Aggregate:"Aggregate"};e.GrowingMode={None:"None",Basic:"Basic",Scroll:"Scroll"};e.RowCountMode={Auto:"Auto",Fixed:"Fixed"};e.ChartToolbarActionType={ZoomInOut:"ZoomInOut",DrillDownUp:"DrillDownUp",Legend:"Legend",FullScreen:"FullScreen"};e.ChartP13nMode={Item:"Item",Sort:"Sort",Type:"Type",Filter:"Filter"};e.SelectionMode={None:"None",Single:"Single",SingleMaster:"SingleMaster",Multi:"Multi"};e.RowAction={Navigation:"Navigation"};e.FilterExpression={Interval:"Interval",Single:"Single",Multi:"Multi"};e.ChartItemType={Dimension:"Dimension",Measure:"Measure"};e.ChartItemRoleType={category:"category",series:"series",category2:"category2",axis1:"axis1",axis2:"axis2",axis3:"axis3"};e.ContactDetailsAddressType={work:"work",home:"home",preferred:"preferred"};e.ContactDetailsEmailType={work:"work",home:"home",preferred:"preferred"};e.ContactDetailsPhoneType={work:"work",home:"home",cell:"cell",fax:"fax",preferred:"preferred"};e.MultiSelectMode={Default:"Default",ClearAll:"ClearAll"};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetails", ["sap/ui/core/Control","./ContactDetailsRenderer","sap/ui/core/Title","sap/m/VBox","sap/m/Text","sap/m/Link","sap/m/Label","sap/m/Image","sap/ui/layout/form/SimpleForm"],function(e,t,i,r,n,o,s,a,d){"use strict";var g=e.extend("sap.ui.mdc.link.ContactDetails",{metadata:{library:"sap.ui.mdc",defaultAggregation:"items",aggregations:{items:{type:"sap.ui.mdc.link.ContactDetailsItem",multiple:true,singularName:"item"},_content:{type:"sap.m.VBox",visibility:"hidden",multiple:false}}},renderer:t});var p=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");g.prototype.applySettings=function(){e.prototype.applySettings.apply(this,arguments);this._createContent()};g.prototype._createContent=function(){var e=[];this.getItems().forEach(function(t){var r=new i({text:t.getSectionTitle()});var o=new a({src:t.getPhoto(),visible:!!t.getPhoto(),decorative:false,width:"5rem",height:"5rem"});var g=new s({text:"",labelFor:o,visible:!!t.getPhoto()});var f=new n({text:t.getFormattedName(),visible:!!t.getFormattedName()});var l=new s({text:p.getText("info.POPOVER_CONTACT_SECTION_NAME"),labelFor:f,visible:!!t.getFormattedName()});var u=new n({text:t.getRole(),visible:!!t.getRole()});var T=new s({text:p.getText("info.POPOVER_CONTACT_SECTION_ROLE"),labelFor:u,visible:!!t.getRole()});var c=new n({text:t.getTitle(),visible:!!t.getTitle()});var h=new s({text:p.getText("info.POPOVER_CONTACT_SECTION_JOBTITLE"),labelFor:c,visible:!!t.getTitle()});var O=new n({text:t.getOrg(),visible:!!t.getOrg()});var y=new s({text:p.getText("info.POPOVER_CONTACT_SECTION_DEPARTMENT"),labelFor:O,visible:!!t.getOrg()});var x=new d({editable:false,layout:"ColumnLayout",content:[r,g,o,l,f,T,u,h,c,y,O]});this._addEmailsToSimpleForm(t,x,p);this._addPhonesToSimpleForm(t,x,p);this._addAddressesToSimpleForm(t,x,p);e.push(x)}.bind(this));this.setAggregation("_content",new r({items:e}))};g.prototype._addEmailsToSimpleForm=function(e,t,i){e.getEmails().filter(function(e){return!e.processed&&!!e.getTypes()&&(e.getTypes().indexOf("preferred")>-1||e.getTypes().indexOf("work")>-1)}).sort(function(e,t){if(e.getTypes().indexOf("preferred")>-1&&t.getTypes().indexOf("preferred")<0){return-1}if(t.getTypes().indexOf("preferred")>-1&&e.getTypes().indexOf("preferred")<0){return 1}return 0}).forEach(function(e){this._addLabeledLink("email",i.getText("info.POPOVER_CONTACT_SECTION_EMAIL"),e,t);e.processed=true},this)};g.prototype._addPhonesToSimpleForm=function(e,t,i){e.getPhones().filter(function(e){return!e.processed&&!!e.getTypes()&&e.getTypes().indexOf("work")>-1}).sort(function(e,t){if(e.getTypes().indexOf("preferred")>-1){return-1}if(t.getTypes().indexOf("preferred")>-1){return 1}return 0}).forEach(function(e){this._addLabeledLink("phone",i.getText("info.POPOVER_CONTACT_SECTION_PHONE"),e,t);e.processed=true},this);e.getPhones().filter(function(e){return!e.processed&&!!e.getTypes()&&e.getTypes().indexOf("cell")>-1}).sort(function(e,t){if(e.getTypes().indexOf("preferred")>-1){return-1}if(t.getTypes().indexOf("preferred")>-1){return 1}return 0}).forEach(function(e){this._addLabeledLink("phone",i.getText("info.POPOVER_CONTACT_SECTION_MOBILE"),e,t);e.processed=true},this);e.getPhones().filter(function(e){return!e.processed&&!!e.getTypes()&&e.getTypes().indexOf("fax")>-1}).sort(function(e,t){if(e.getTypes().indexOf("preferred")>-1){return-1}if(t.getTypes().indexOf("preferred")>-1){return 1}return 0}).forEach(function(e){this._addLabeledLink("phone",i.getText("info.POPOVER_CONTACT_SECTION_FAX"),e,t);e.processed=true},this);e.getPhones().filter(function(e){return!e.processed&&!!e.getTypes()&&e.getTypes().indexOf("preferred")>-1}).forEach(function(e){this._addLabeledLink("phone",i.getText("info.POPOVER_CONTACT_SECTION_PHONE"),e,t);e.processed=true},this)};g.prototype._addAddressesToSimpleForm=function(e,t,i){e.getAddresses().filter(function(e){return!e.processed&&!!e.getTypes()&&(e.getTypes().indexOf("preferred")>-1||e.getTypes().indexOf("work")>-1)}).sort(function(e,t){if(e.getTypes().indexOf("preferred")>-1&&t.getTypes().indexOf("preferred")<0){return-1}if(t.getTypes().indexOf("preferred")>-1&&e.getTypes().indexOf("preferred")<0){return 1}return 0}).forEach(function(e){this._addLabeledAddress(e,t,i);e.processed=true},this)};g.prototype._addLabeledAddress=function(e,t,i){var r=function(e,t,i,r,n){var o=[];if(e){o.push(e)}if(t&&i){o.push(t+" "+i)}else{if(t){o.push(t)}if(i){o.push(i)}}if(r){o.push(r)}if(n){o.push(n)}return o.join(", ")};var o=function(e,t,i,r,n){return!!(e||t||i||r||n)};var a;var d;if(e.getBindingPath("street")&&e.getBindingPath("code")&&e.getBindingPath("locality")&&e.getBindingPath("region")&&e.getBindingPath("country")){a=[{path:e.getBindingPath("street")?e.getBindingPath("street"):"$notExisting"},{path:e.getBindingPath("code")?e.getBindingPath("code"):"$notExisting"},{path:e.getBindingPath("locality")?e.getBindingPath("locality"):"$notExisting"},{path:e.getBindingPath("region")?e.getBindingPath("region"):"$notExisting"},{path:e.getBindingPath("country")?e.getBindingPath("country"):"$notExisting"}];d=new n;d.bindProperty("text",{parts:a,formatter:r});d.bindProperty("visible",{parts:a,formatter:o})}else{d=new n({text:r(e.getStreet(),e.getCode(),e.getLocality(),e.getRegion(),e.getCountry()),visible:o(e.getStreet(),e.getCode(),e.getLocality(),e.getRegion(),e.getCountry())})}var g=new s({text:i.getText("info.POPOVER_CONTACT_SECTION_ADR"),labelFor:d.getId()});t.addContent(g);t.addContent(d)};g.prototype._addLabeledLink=function(e,t,i,r){var n;if(i.getBindingPath("uri")){n=new o;n.bindProperty("href",{path:i.getBindingPath("uri"),formatter:function(t){return(e==="email"?"mailto:":"tel:")+t}});n.bindProperty("text",{path:i.getBindingPath("uri")});n.bindProperty("visible",{path:i.getBindingPath("uri"),formatter:function(e){return!!e}})}else{n=new o({href:e==="email"?"mailto:":"tel:"+i.getUri(),text:i.getUri(),visible:!!i.getUri()})}var a=new s({text:t,labelFor:n.getId()});r.addContent(a);r.addContent(n)};return g});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetailsAddressItem", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.ui.mdc.link.ContactDetailsAddressItem",{metadata:{library:"sap.ui.mdc",properties:{street:{type:"string"},code:{type:"string"},locality:{type:"string"},region:{type:"string"},country:{type:"string"},types:{type:"sap.ui.mdc.ContactDetailsAddressType[]",defaultValue:[]}}}});return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetailsEmailItem", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.ContactDetailsEmailItem",{metadata:{library:"sap.ui.mdc",properties:{uri:{type:"string"},types:{type:"sap.ui.mdc.ContactDetailsEmailType[]",defaultValue:[]}}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetailsItem", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.ContactDetailsItem",{metadata:{library:"sap.ui.mdc",properties:{sectionTitle:{type:"string",defaultValue:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("info.POPOVER_CONTACT_SECTION_TITLE")},photo:{type:"string"},formattedName:{type:"string"},role:{type:"string"},title:{type:"string"},org:{type:"string"},parameters:{type:"object"}},defaultAggregation:"emails",aggregations:{emails:{type:"sap.ui.mdc.link.ContactDetailsEmailItem",multiple:true,singularName:"email"},phones:{type:"sap.ui.mdc.link.ContactDetailsPhoneItem",multiple:true,singularName:"phone"},addresses:{type:"sap.ui.mdc.link.ContactDetailsAddressItem",multiple:true,singularName:"address"}}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetailsPhoneItem", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.ContactDetailsPhoneItem",{metadata:{library:"sap.ui.mdc",properties:{uri:{type:"string"},types:{type:"sap.ui.mdc.ContactDetailsPhoneType[]",defaultValue:[]}}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetailsRenderer", [],function(){"use strict";var n={apiVersion:2};n.render=function(n,e){var r=e.getAggregation("_content");n.openStart("div",e);n.openEnd();n.renderControl(r);n.close("div")};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/Factory", [],function(){"use strict";return{getService:function(e){switch(e){case"CrossApplicationNavigation":return sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");case"URLParsing":return sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("URLParsing");default:return null}}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/FakeFlpConnector", ["sap/ui/thirdparty/jquery","sap/ui/mdc/link/Factory"],function(jQuery,e){"use strict";function r(){}r.enableFakeConnector=function(t){if(r.getServiceReal){return}r.getServiceReal=e.getService;e.getService=r._createFakeService(t)};r.enableFakeConnectorForTesting=function(t,n){if(r.getServiceReal){return}r.getServiceReal=e.getService;e.getService=r._createFakeService(t,n)};r._createFakeService=function(e,t){return function(n){switch(n){case"CrossApplicationNavigation":return{hrefForExternal:function(e,r){if(t){t.hrefForExternal=t.hrefForExternal||{calls:[]};t.hrefForExternal.calls.push({target:e,comp:r})}if(!e){return null}return e.target.shellHash},getDistinctSemanticObjects:function(){var r=[];for(var t in e){r.push(t)}var n=jQuery.Deferred();setTimeout(function(){n.resolve(r)},0);return n.promise()},getLinks:function(r){var t=[];if(!Array.isArray(r)){e[r.semanticObject]?t=e[r.semanticObject].links:t=[]}else{r.forEach(function(r){e[r[0].semanticObject]?t.push([e[r[0].semanticObject].links]):t.push([[]])})}var n=jQuery.Deferred();setTimeout(function(){n.resolve(t)},0);return n.promise()}};case"URLParsing":return{parseShellHash:function(r){var t=function(e){var t=e.filter(function(e){return e.intent===r});return t[0]};for(var n in e){var i=t(e[n].links);if(i){return{semanticObject:n,action:i.action}}}return{semanticObject:null,action:null}}};default:return r.getServiceReal(n)}}};r.disableFakeConnector=function(){if(r.getServiceReal){e.getService=r.getServiceReal;r.getServiceReal=undefined}};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/LinkItem", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.LinkItem",{metadata:{library:"sap.ui.mdc",properties:{key:{type:"string"},text:{type:"string"},description:{type:"string"},href:{type:"string"},internalHref:{type:"string",defaultValue:null},target:{type:"string",defaultValue:"_self"},icon:{type:"string"},initiallyVisible:{type:"boolean",defaultValue:false}}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/Log", ["sap/ui/base/Object","sap/base/util/isEmptyObject","sap/ui/core/Configuration"],function(t,e,n){"use strict";var i=t.extend("sap.ui.mdc.link.Log",{constructor:function(){this.reset()}});i.prototype.reset=function(){this._oLog={semanticObjects:{},intents:{api:[],breakout:[]}};return this};i.prototype.isEmpty=function(){return!(!e(this._oLog.semanticObjects)||this._oLog.intents.breakout.length||this._oLog.intents.api.length)};i.prototype.initialize=function(t){this.reset();t.forEach(function(t){this.createSemanticObjectStructure(t)}.bind(this))};i.prototype.addContextObject=function(t,e){for(var n in e){var i=this.createAttributeStructure();this.addSemanticObjectAttribute(t,n,i);i.transformations.push({value:e[n],description:"ℹ The attribute "+n+" with the value "+e[n]+" is initially taken from the binding context."})}};i.prototype.createSemanticObjectStructure=function(t){this._oLog.semanticObjects[t]={attributes:{},intents:[]}};i.prototype.createAttributeStructure=function(){return{transformations:[]}};i.prototype.addSemanticObjectIntent=function(t,e){if(!this._oLog.semanticObjects[t]){this.createSemanticObjectStructure(t)}this._oLog.semanticObjects[t].intents.push(e);return this};i.prototype.addSemanticObjectAttribute=function(t,e,n){if(!this._oLog.semanticObjects[t]){this.createSemanticObjectStructure(t)}this._oLog.semanticObjects[t].attributes[e]=n;return this};i.prototype.getSemanticObjectAttribute=function(t,e){return this._oLog.semanticObjects[t]&&this._oLog.semanticObjects[t].attributes[e]?this._oLog.semanticObjects[t].attributes[e]:undefined};i.prototype.addIntent=function(t,e){switch(t){case i.IntentType.API:this._oLog.intents.api.push(e);break;case i.IntentType.BREAKOUT:this._oLog.intents.breakout.push(e);break;default:throw"Intent type "+t+" is not supported yet."}return this};i.prototype.getFormattedText=function(){var t=function(t){return typeof t==="string"?"'"+t+"'":t};var i=function(e,n){var i={value:"• "+n+" : ",description:""};e.forEach(function(e,n){i.value=i.value+(n>0?"  ➜  ":"")+t(e["value"]);i.description=i.description+"…   "+e["description"]+"\n";if(e["reason"]){i.description=i.description+"…   "+e["reason"]+"\n"}});return i};var o=function(t){var e="";t.forEach(function(t){e+="• '"+t.text+"' : "+t.intent+"\n"});return e};var r=function(t){try{var e=n.getLocale().toString();if(typeof window.Intl!=="undefined"){var i=window.Intl.Collator(e,{numeric:true});t.sort(function(t,e){return i.compare(t,e)})}else{t.sort(function(t,n){return t.localeCompare(n,e,{numeric:true})})}}catch(t){}};var a="";for(var s in this._oLog.semanticObjects){a=a+"\n⬤"+" "+s+"\n";if(e(this._oLog.semanticObjects[s].attributes)){a+="……  🔴 No semantic attributes available for semantic object "+s+". Please be aware "+"that without semantic attributes no URL parameters can be created.\n"}else{var c=Object.keys(this._oLog.semanticObjects[s].attributes);r(c);for(var u=0;u<c.length;u++){var b=c[u];var h=i(this._oLog.semanticObjects[s].attributes[b].transformations,b);a+=h.value+"\n";a+=h.description}}if(this._oLog.semanticObjects[s].intents.length){a+="\nIntents returned by FLP for semantic object "+s+":\n";a+=o(this._oLog.semanticObjects[s].intents)}}if(this._oLog.intents.api.length){a+="\nIntents defined in items aggregation:\n";a+=o(this._oLog.intents.api)}if(this._oLog.intents.breakout.length){a+="\nIntents returned by modifyItemsCallback callback:\n";a+=o(this._oLog.intents.breakout)}return a};i.prototype._getLogFormattedText=function(){return!this.isEmpty()?"---------------------------------------------\nsap.ui.mdc.Link:\nBelow you can see detailed information regarding semantic attributes which have been calculated for one or more semantic objects defined in a Link control. Semantic attributes are used to create the URL parameters. Additionally you can see all links containing the URL parameters.\n"+this.getFormattedText():"No logging data available"};i.IntentType={BREAKOUT:"Breakout",API:"Api"};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/Panel", ["sap/ui/core/Control","./PanelRenderer","sap/ui/layout/VerticalLayout","sap/base/Log","sap/ui/layout/HorizontalLayout","sap/m/HBox","sap/m/VBox","sap/m/ImageContent","sap/m/Link","sap/m/Label","sap/m/Text","sap/m/Button","sap/m/FlexItemData","sap/ui/model/json/JSONModel","sap/ui/model/BindingMode","sap/ui/base/ManagedObjectObserver","sap/ui/mdc/p13n/subcontroller/LinkPanelController","sap/m/p13n/Engine","sap/ui/mdc/mixin/AdaptationMixin","sap/ui/mdc/link/PanelItem","sap/ui/core/CustomData"],function(t,e,n,i,a,r,o,s,l,u,c,p,d,m,g,h,f,I,v,P,y){"use strict";var b=t.extend("sap.ui.mdc.link.Panel",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/link/Panel.designtime",defaultAggregation:"items",properties:{enablePersonalization:{type:"boolean",defaultValue:true,invalidate:true},metadataHelperPath:{type:"string"},beforeNavigationCallback:{type:"function"}},aggregations:{items:{type:"sap.ui.mdc.link.PanelItem",multiple:true,singularName:"item"},additionalContent:{type:"sap.ui.core.Control",multiple:true},_content:{type:"sap.ui.layout.VerticalLayout",visibility:"hidden",multiple:false}},events:{beforeSelectionDialogOpen:{},afterSelectionDialogClose:{}}},renderer:e});b.prototype.init=function(){t.prototype.init.call(this);I.getInstance().register(this,{controller:{LinkItems:new f({control:this})}});v.call(b.prototype);I.getInstance().defaultProviderRegistry.attach(this,"Global");sap.ui.require([this.getMetadataHelperPath()||"sap/ui/mdc/Link"],function(t){this._oMetadataHelper=t}.bind(this));var e=new m({countAdditionalContent:0,countItemsWithIcon:0,countItemsWithoutIcon:0,showResetEnabled:false,runtimeItems:[],contentTitle:""});e.setDefaultBindingMode(g.TwoWay);e.setSizeLimit(1e3);this.setModel(e,"$sapuimdclinkPanel");this._oObserver=new h(k.bind(this));this._oObserver.observe(this,{properties:["enablePersonalization"],aggregations:["items","additionalContent"]})};var _=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");b.prototype.applySettings=function(){this._createContent();t.prototype.applySettings.apply(this,arguments)};b.prototype.exit=function(t){if(this._oObserver){this._oObserver.disconnect();this._oObserver=null}if(this._oMetadataHelper){this._oMetadataHelper=null}};b.prototype._createContent=function(){var t=new n({width:"100%",content:[this._createAdditionalContentArea(),this._createSeparator(),this._createLinkArea(),this._createFooterArea()]});this.setAggregation("_content",t)};b.prototype._createAdditionalContentArea=function(){var t=new o({fitContainer:false,items:this.getAdditionalContent()});return t};b.prototype._createSeparator=function(){var t=new o({fitContainer:false,visible:{parts:[{path:"$sapuimdclinkPanel>/countAdditionalContent"},{path:"$sapuimdcLink>/metadata"}],formatter:function(t,e){return t>0&&e.length>0}}});t.addStyleClass("mdcbaseinfoPanelSeparator");t.setModel(this._getInternalModel(),"$sapuimdclinkPanel");t.setModel(this.getModel("$sapuimdcLink"),"$sapuimdcLink");return t};b.prototype._createLinkArea=function(){var t=new o({fitContainer:false,items:{path:"$sapuimdclinkPanel>/runtimeItems",templateShareable:false,factory:this._fnLinkItemFactory.bind(this)}});t.addStyleClass("mdcbaseinfoPanelSectionLinks");t.setModel(this._getInternalModel(),"$sapuimdclinkPanel");return t};b.prototype._fnLinkItemFactory=function(t,e){var n=new s({src:"{$sapuimdclinkPanel>icon}",visible:{path:"$sapuimdclinkPanel>icon",formatter:function(t){return!!t}}});var i=new l({text:"{$sapuimdclinkPanel>text}",href:"{$sapuimdclinkPanel>href}",target:"{$sapuimdclinkPanel>target}",visible:{path:"$sapuimdclinkPanel>href",formatter:function(t){return!!t}},press:this.onPressLink.bind(this),wrapping:true,customData:new y({key:"internalHref",value:"{$sapuimdclinkPanel>internalHref}"})});var p=new u({text:"{$sapuimdclinkPanel>text}",visible:{path:"$sapuimdclinkPanel>href",formatter:function(t){return!t}},wrapping:true});var m=new c({text:"{$sapuimdclinkPanel>description}",visible:{path:"$sapuimdclinkPanel>description",formatter:function(t){return!!t}},wrapping:true});var g=new o({items:[i,p,m]});var h=new r({layoutData:new d({styleClass:e.getProperty("description")?"mdcbaseinfoPanelItemsGroup":"mdcbaseinfoPanelItemsWithoutGroup"}),items:[n,g]});var f=new a({visible:"{$sapuimdclinkPanel>visible}",content:[h]});f.addStyleClass("mdcbaseinfoPanelListItem");return f};b.prototype._createFooterArea=function(){var t=new p(this.getId()+"--idSectionPersonalizationButton",{type:"Transparent",text:_.getText("info.POPOVER_DEFINE_LINKS"),press:this.onPressLinkPersonalization.bind(this)});var e=new r({visible:{path:"$sapuimdcLink>/metadata",formatter:function(t){return t.length>0}},justifyContent:"End",items:[t]});e.addStyleClass("mdcbaseinfoPanelPersonalizationButton");return e};b.prototype.onPressLink=function(t){var e=t.getSource();var n=t.getParameters().ctrlKey||t.getParameters().metaKey;if(this.getBeforeNavigationCallback()&&e&&e.getTarget()!=="_blank"&&!n){var i=e&&e.getCustomData()&&e.getCustomData()[0]&&e.getCustomData()[0].getValue();var a=i?e.getCustomData()[0].getValue():e.getHref();t.preventDefault();this.getBeforeNavigationCallback()(t).then(function(t){if(t){b.navigate(a)}})}};b.oNavigationPromise=undefined;b.navigate=function(t){if(t.indexOf("#")===0&&sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getServiceAsync){if(!b.oNavigationPromise){b.oNavigationPromise=sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{shellHash:t.substring(1)}});b.oNavigationPromise=undefined})}}else{window.location.href=t}};b.prototype.onPressLinkPersonalization=function(){this._openPersonalizationDialog()};b.prototype._openPersonalizationDialog=function(){return new Promise(function(t,e){sap.ui.require([this.getMetadataHelperPath()||"sap/ui/mdc/Link"],function(e){var n=this._getInternalModel();var i=e.retrieveBaseline(this);var a=i;var r=function(t){var e=t._oListControl.getItems().filter(function(t){return t.getSelected()});e=e.map(function(e){var n=t._getP13nModel().getProperty(e.getBindingContext(t.P13N_MODEL).sPath);return{id:n.name,description:n.description,href:n.href,internalHref:n.internalHref,target:n.target,text:n.text,visible:n.visible}});var n=b._showResetButtonEnabled(a,e);this._getInternalModel().setProperty("/showResetEnabled",n)};var o=this.getParent();if(o.isA("sap.m.Popover")){o.setModal(true)}I.getInstance().uimanager.show(this,"LinkItems",{contentWidth:"28rem",contentHeight:"35rem",close:function(){if(o.isA("sap.m.Popover")){o.setModal(false)}}}).then(function(e){var i=e.getCustomHeader().getContentRight()[0];var a=e.getContent()[0];i.setModel(n,"$sapuimdclinkPanel");i.bindProperty("enabled",{path:"$sapuimdclinkPanel>/showResetEnabled"});r.call(this,a);a.attachChange(function(t){r.call(this,a);a.attachChange(function(t){r.call(this,a)}.bind(this));e.attachAfterClose(function(){if(o.isA("sap.m.Popover")){o.setModal(false)}})}.bind(this));t(e)}.bind(this))}.bind(this))}.bind(this))};b._showResetButtonEnabled=function(t,e){var n=false;var i=b._getVisibleItems(e);var a=b._getVisibleItems(t);if(e.length!==t.length){n=true}else if(a.length&&i.length){var r=b._allItemsIncludedInArray(a,i);var o=b._allItemsIncludedInArray(i,a);n=!r||!o}return n};b._allItemsIncludedInArray=function(t,e){var n=true;t.forEach(function(t){var i=b._getItemsById(t.id,e);if(i.length===0){n=false}});return n};b._getItemsById=function(t,e){return e.filter(function(e){return e.id===t})};b._getItemById=function(t,e){return b._getItemsById(t,e)[0]};b._getVisibleItems=function(t){return t.filter(function(t){return t.id!==undefined&&t.visible})};b.prototype._getInternalModel=function(){return this.getModel("$sapuimdclinkPanel")};b.prototype._propagateDefaultIcon=function(t){if(!t){return}var e=this._getInternalModel();e.getProperty("/runtimeItems").forEach(function(t,n){if(t.icon){return}e.setProperty("/runtimeItems/"+n+"/icon","sap-icon://chain-link")})};function k(t){var e=this._getInternalModel();if(t.object.isA("sap.ui.mdc.link.Panel")){switch(t.name){case"additionalContent":var n=t.child?[t.child]:t.children;n.forEach(function(e){switch(t.mutation){case"insert":this.getAggregation("_content").getContent()[0].addItem(e);break;case"remove":break;default:i.error("Mutation '"+t.mutation+"' is not supported yet.")}}.bind(this));e.setProperty("/countAdditionalContent",n.length);break;case"items":var a=t.child?[t.child]:t.children;a.forEach(function(n){var a=e.getProperty("/runtimeItems/");switch(t.mutation){case"insert":e.setProperty("/countItemsWithIcon",n.getIcon()?e.getProperty("/countItemsWithIcon")+1:e.getProperty("/countItemsWithIcon"));e.setProperty("/countItemsWithoutIcon",n.getIcon()?e.getProperty("/countItemsWithoutIcon"):e.getProperty("/countItemsWithoutIcon")+1);a.splice(this.indexOfItem(n),0,n.getJson());e.setProperty("/runtimeItems",a);this._propagateDefaultIcon(e.getProperty("/countItemsWithIcon")>0&&e.getProperty("/countItemsWithoutIcon")>0);this._oObserver.observe(n,{properties:["visible"]});break;case"remove":e.setProperty("/countItemsWithIcon",n.getIcon()?e.getProperty("/countItemsWithIcon")-1:e.getProperty("/countItemsWithIcon"));e.setProperty("/countItemsWithoutIcon",n.getIcon()?e.getProperty("/countItemsWithoutIcon"):e.getProperty("/countItemsWithoutIcon")-1);var r=a.find(function(t){return t.id===n.getId()});a.splice(a.indexOf(r),1);e.setProperty("/runtimeItems",a);this._propagateDefaultIcon(e.getProperty("/countItemsWithIcon")>0&&e.getProperty("/countItemsWithoutIcon")>0);this._oObserver.unobserve(n);n.destroy();this.invalidate();break;default:i.error("Mutation '"+t.mutation+"' is not supported yet.")}},this);break;case"enablePersonalization":this._getPersonalizationButton().setVisible(t.current);break;default:i.error("The property or aggregation '"+t.name+"' has not been registered.")}}else if(t.object.isA("sap.ui.mdc.link.PanelItem")){switch(t.name){case"visible":var r=t.object;var o=this.indexOfItem(r);if(r.getVisibleChangedByUser()){e.setProperty("/runtimeItems/"+o+"/visible",r.getVisible())}else{e.setProperty("/baselineItems/"+o+"/visible",r.getVisible());e.setProperty("/runtimeItems/"+o+"/visible",r.getVisible())}break;default:i.error("The '"+t.name+"' of PanelItem is not supported yet.")}}this._updateContentTitle()}b.prototype.getContentTitle=function(){var t=this._getInternalModel();return t.getProperty("/contentTitle")};b.prototype.getCurrentState=function(){var t=[],e;this.getItems().forEach(function(n,i){e=n&&n.getId();if(n.getVisible()){t.push({name:e})}});return{items:t}};b.prototype.initPropertyHelper=function(){var t=this._oMetadataHelper.retrieveAllMetadata(this);return Promise.resolve({getProperties:function(){var e=[];t.forEach(function(t){e.push({name:t.id,getName:function(){return t.id},getLabel:function(){return t.text},text:t.text,href:t.href,internalHref:t.internalHref,description:t.description,target:t.target,visible:t.visible})});return e}})};b.prototype._updateContentTitle=function(){var t=this._getInternalModel();var e=this.getAggregation("_content").getContent()[0].getItems();var n=this._getPersonalizationButton().getId();if(e.length>0){n=e[0]}else{var i=this.getItems();if(i.length>0){n=i[0]}}t.setProperty("/contentTitle",n)};b.prototype._getPersonalizationButton=function(){return this.getAggregation("_content").getContent()[3].getItems()[0]};return b});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/PanelItem", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.PanelItem",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/link/PanelItem.designtime",properties:{text:{type:"string"},description:{type:"string"},href:{type:"string"},internalHref:{type:"string",defaultValue:null},target:{type:"string",defaultValue:undefined},icon:{type:"string"},visible:{type:"boolean",defaultValue:true},visibleChangedByUser:{type:"boolean"}}}});t.prototype.getJson=function(){return{id:this.getId(),text:this.getText(),description:this.getDescription(),href:this.getHref(),internalHref:this.getInternalHref(),icon:this.getIcon(),target:this.getTarget(),visible:this.getVisible(),visibleChangedByUser:this.getVisibleChangedByUser()}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/PanelRenderer", [],function(){"use strict";var n={apiVersion:2};n.render=function(n,e){var r=e.getAggregation("_content");n.openStart("div",e);n.class("mdcbaseinfoPanel");n.openEnd();n.renderControl(r);n.close("div")};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/SemanticObjectMapping", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.SemanticObjectMapping",{metadata:{library:"sap.ui.mdc",properties:{semanticObject:{type:"string"}},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.mdc.link.SemanticObjectMappingItem",multiple:true,singularName:"item"}}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/SemanticObjectMappingItem", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.SemanticObjectMappingItem",{metadata:{library:"sap.ui.mdc",properties:{key:{type:"string"},value:{type:"any"}}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/SemanticObjectUnavailableAction", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.SemanticObjectUnavailableAction",{metadata:{library:"sap.ui.mdc",properties:{semanticObject:{type:"string"},actions:{type:"string[]",defaultValue:[]}}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/mixin/AdaptationMixin", ["sap/m/p13n/Engine"],function(t){"use strict";var i={};i.getEngine=function(){return t.getInstance()};i._onModifications=function(){};i.awaitPendingModification=function(){var i=this._pPendingModification||Promise.resolve();var e=t.getInstance().getTrace(this);return i.then(function(){return e})};i.retrieveInbuiltFilter=function(){if(!this._oInbuiltFilterPromise){this._oInbuiltFilterPromise=new Promise(function(t,i){sap.ui.require(["sap/ui/mdc/filterbar/p13n/AdaptationFilterBar"],function(e){if(this.bIsDestroyed){i("exit");return}if(!this._oP13nFilter){this._oP13nFilter=new e(this.getId()+"-p13nFilter",{adaptationControl:this,filterConditions:this.getFilterConditions()});if(this._registerInnerFilter){this._registerInnerFilter.call(this,this._oP13nFilter)}this.addDependent(this._oP13nFilter);t(this._oP13nFilter)}else{t(this._oP13nFilter)}}.bind(this))}.bind(this))}return this._oInbuiltFilterPromise};i.validateState=function(t,i){if(this.getControlDelegate().validateState instanceof Function){return this.getControlDelegate().validateState(this,t,i)}};i.getInbuiltFilter=function(){return this._oP13nFilter};i.exit=function(t){return function(){if(this._oP13nFilter){this._oP13nFilter.destroy();this._oP13nFilter=null}if(this._oInbuiltFilterPromise){this._oInbuiltFilterPromise=null}if(t){t.apply(this,arguments)}}};i._getWaitForChangesPromise=function(){var t=this.getEngine&&this.getEngine();if(!t){throw"Engine instance not found."}return t.waitForChanges(this)};return function(){this.retrieveInbuiltFilter=i.retrieveInbuiltFilter;this.getInbuiltFilter=i.getInbuiltFilter;this.validateState=i.validateState;this._onModifications=i._onModifications;this.awaitPendingModification=i.awaitPendingModification;this._getWaitForChangesPromise=i._getWaitForChangesPromise;this.getEngine=i.getEngine;this.exit=i.exit(this.exit)}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/mixin/DelegateMixin", ["sap/ui/mdc/util/loadModules","sap/base/Log"],function(e,t){"use strict";var i=function(e){if(!e||!e.name){throw new Error("Delegate configuration '"+(e&&JSON.stringify(e))+"' invalid")}};var l=function(e){if(!this.bIsDestroyed){if(e instanceof Error){this.fnRejectDelegate(e)}else{this._oDelegate=e[0];this.fnResolveDelegate(this._oDelegate);this.bDelegateInitialized=true}}this.bDelegateLoading=false;delete this.fnResolveDelegate;delete this.fnRejectDelegate};var a={};a.init=function(e){return function(){this.bDelegateInitialized=false;this.bDelegateLoading=false;this._oDelegateInitialized=new Promise(function(e,t){this.fnResolveDelegate=e;this.fnRejectDelegate=t}.bind(this));if(e){e.apply(this,arguments)}}};a.applySettings=function(e){return function(t){e.apply(this,arguments);this._bDelegateLocked=true;return this}};a.setDelegate=function(e){return function(t){if(this._bDelegateLocked){throw new Error("Runtime delegate configuration is not permitted.")}i(t);e.call(this,t);this._oPayload=t&&t.payload;return this}};a.initControlDelegate=function(a){if(this.bIsDestroyed){t.warning("Delegate module initialization omitted as control is being destroyed.")}else if(!this._oDelegate&&!this.bDelegateLoading){if(a){l.call(this,[a])}else{var n=this.getDelegate();i(n);this.bDelegateLoading=true;e(n.name).then(l.bind(this)).catch(l.bind(this))}}return this._oDelegateInitialized};a.isControlDelegateInitialized=function(){return this.bDelegateInitialized};a.getPayload=function(){if(!this._oPayload){var e=this.getDelegate();this._oPayload=e&&e.payload}return this._oPayload};a.getTypeUtil=function(){if(!this._oTypeUtil){if(!this._oDelegate){throw new Error("A delegate instance providing typeUtil is not (yet) available.")}this._oTypeUtil=this._oDelegate.getTypeUtil&&this._oDelegate.getTypeUtil(this._oPayload)}return this._oTypeUtil};a.getControlDelegate=function(){if(!this._oDelegate){throw new Error("A delegate instance is not (yet) available. You must call initControlDelegate before calling getControlDelegate.")}return this._oDelegate};a.awaitControlDelegate=function(){return this._oDelegateInitialized};a.exit=function(e){return function(){this.fnResolveDelegate=null;this.fnRejectDelegate=null;this.bDelegateInitialized=false;this.bDelegateLoading=false;this._oDelegateInitialized=null;this._oDelegate=null;this._oPayload=null;this._oTypeUtil=null;if(e){e.apply(this,arguments)}}};return function(){this.applySettings=a.applySettings(this.applySettings);this.exit=a.exit(this.exit);this.init=a.init(this.init);this.setDelegate=a.setDelegate(this.setDelegate);this.awaitControlDelegate=a.awaitControlDelegate;this.isControlDelegateInitialized=a.isControlDelegateInitialized;this.getControlDelegate=a.getControlDelegate;this.getPayload=a.getPayload;this.getTypeUtil=a.getTypeUtil;this.initControlDelegate=a.initControlDelegate}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/mixin/FilterIntegrationMixin", ["sap/ui/core/Core","sap/base/Log"],function(t,e){"use strict";var i={};var r="sap.ui.mdc.IFilter";i.setFilter=function(e){var i=typeof e==="object"?e.getId():e;var r=this.getFilter();if(r!==i){this._validateFilter(e);var n=t.byId(this.getFilter());if(n){s(this,n)}this.setAssociation("filter",e,true);var o=t.byId(this.getFilter());if(o){a(this,o)}}return this};function n(t){this._rebind();if(this._onFilterSearch){this._onFilterSearch(t)}}function o(t){if(this._onFiltersChanged){this._onFiltersChanged(t)}}function a(t,e){e.attachSearch(n,t);if(e.attachFiltersChanged instanceof Function){e.attachFiltersChanged(o,t)}if(t._onFilterProvided instanceof Function){t._onFilterProvided(e)}}function s(t,e){e.detachSearch(n,t);if(e.detachFiltersChanged instanceof Function){e.detachFiltersChanged(o,t)}if(t._onFilterRemoved instanceof Function){t._onFilterRemoved(e)}}function l(t){if(!(t&&t.getMetadata()&&t.getMetadata().hasAssociation("filter"))){throw new Error("Please add the 'filter' association to your control metadata"+t)}if(!(t.rebind instanceof Function)){throw new Error("Please implement the method 'rebind' for the control "+t)}if(!(t.isFilteringEnabled instanceof Function)){throw new Error("Please implement the method isFilteringEnabled for the control "+t)}}i._validateFilter=function(e){l(this);var i=typeof e==="object"?e:t.byId(e);if(i&&!i.isA(r)){throw new Error('"'+e+'" is not valid for association "filter".'+' Please use an object that implements the "'+r+'" interface')}};i.rebind=function(){if(this.bIsDestroyed){return}var e;var i;var r=t.byId(this.getFilter()),n=this.isFilteringEnabled();if(n||r){if(r){e=r.validate(true)}if(n){i=this.retrieveInbuiltFilter().then(function(t){return t.validate(true)})}Promise.all([e,i]).then(function(){this._rebind()}.bind(this),function(){})}else{this._rebind()}};i._getLabelsFromFilterConditions=function(){var t=[];if(this.getFilterConditions){var i=this.getFilterConditions();Object.keys(i).forEach(function(r){if(!i[r]||i[r].length<1){return}var n=this.getPropertyHelper().getProperty(r)?this.getPropertyHelper().getProperty(r).label:r;if(n){t.push(n)}if(!n||n===r){e.error("No valid property found for filter with key "+r+". Check your metadata.")}}.bind(this))}return t};return function(){this.setFilter=i.setFilter;this._validateFilter=i._validateFilter;this.rebind=i.rebind;this._getLabelsFromFilterConditions=i._getLabelsFromFilterConditions}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/mixin/PromiseMixin", ["sap/ui/mdc/util/PromiseCache"],function(e){"use strict";var i={};i.addPromise=function(e,i){return this.promiseCache.add(e,i)};i.cancelPromise=function(e,i){return this.promiseCache.cancel(e,i)};i.retrievePromise=function(e,i){return this.promiseCache.retrieve(e,i)};i.retrievePromises=function(){return this.promiseCache.retrieveMany.apply(this.promiseCache,arguments)};i.removePromise=function(e){return this.promiseCache.remove(e)};i.resolvePromise=function(e,i){return this.promiseCache.resolve(e,i)};i.rejectPromise=function(e,i){return this.promiseCache.reject(e,i)};i.exit=function(e){return function(){if(this.promiseCache){this.promiseCache.destroy();this.promiseCache=null}if(e){e.apply(this,arguments)}}};return function(){var r=function(i){return function(){if(this.bIsDestroyed){return undefined}if(!this.promiseCache){this.promiseCache=new e}return i.apply(this,arguments)}};this._addPromise=r(i.addPromise);this._cancelPromise=r(i.cancelPromise);this._removePromise=r(i.removePromise);this._resolvePromise=r(i.resolvePromise);this._rejectPromise=r(i.rejectPromise);this._retrievePromise=r(i.retrievePromise);this._retrievePromises=r(i.retrievePromises);this.exit=i.exit(this.exit)}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/mixin/PropertyHelperMixin", ["sap/base/util/Deferred","sap/ui/mdc/util/loadModules","sap/base/Log"],function(e,r,t){"use strict";var i={};i.init=function(r){return function(){this._oPropertyHelper=null;this._oPropertyHelperDeferred=new e;this._oApplySettingsDeferred=new e;this._bPropertyHelperFinal=false;this._oPropertiesFinalizedDeferred=new e;this._bPropertyHelperInitializing=false;this._sPropertyInfoStore=null;if(r){r.apply(this,arguments)}}};i.applySettings=function(e){return function(){if(e){e.apply(this,arguments)}if(this._sPropertyInfoStore&&(!arguments[0]||!arguments[0].hasOwnProperty(this._sPropertyInfoStore))){o.call(this,[],false)}this._oApplySettingsDeferred.resolve(this);return this}};i.initPropertyHelper=function(e,r,t){if(e){this._setPropertyHelperClass(e)}return o.call(this,r,t)};i.updatePropertyHelper=function(e,r){return o.call(this,e,r)};i.finalizePropertyHelper=function(){this._pHelperFinalizationPromise=this._pHelperFinalizationPromise||p(this).then(function(e){return o.call(this,e,true)}.bind(this));return this._pHelperFinalizationPromise};i.propertiesFinalized=function(){return this._oPropertiesFinalizedDeferred.promise};i.isPropertyHelperFinal=function(){return this._bPropertyHelperFinal};i.awaitPropertyHelper=function(){if(this._oPropertyHelperDeferred){return this._oPropertyHelperDeferred.promise}else{return Promise.resolve()}};i.getPropertyHelper=function(){return this._oPropertyHelper};i.exit=function(e){return function(){this._oPropertyHelper=null;this._oPropertyHelperDeferred=null;this._oApplySettingsDeferred=null;this._bPropertyHelperFinal=null;this._bPropertyHelperInitializing=null;this._pHelperFinalizationPromise=null;this._oPropertyHelperClass=null;this._sPropertyInfoStore=null;if(this._oPropertyInfoStoreMutatorOverride){this[this._oPropertyInfoStoreMutatorOverride.key]=this._oPropertyInfoStoreMutatorOverride.mutator;this._oPropertyInfoStoreMutatorOverride=null}if(e){e.apply(this,arguments)}}};i._setupPropertyInfoStore=function(e){var r=this.getMetadata().getAllProperties();var t=r&&r[e];if(!t){throw new Error("PropertyHelperMixin: Property '"+e+"' not found.")}var i=this.getMetadata().getJSONKeys()[e];this._oPropertyInfoStoreMutatorOverride={key:i._sMutator,mutator:this[i._sMutator]};this[i._sMutator]=function(){this._oPropertyInfoStoreMutatorOverride.mutator.apply(this,arguments);if(!this._bPropertyHelperFinal){o.call(this,this[i._sGetter](),false)}return this};this._sPropertyInfoStore=e};i._setPropertyHelperClass=function(e){if(this._oPropertyHelper||this._bPropertyHelperInitializing){throw new Error("PropertyHelper already initializing/ed.")}if(e&&(!e.getMetadata||!e.getMetadata().isA("sap.ui.mdc.util.PropertyHelper"))){throw new Error("The custom property helper class must be sap.ui.mdc.util.PropertyHelper or a subclass of it.")}this._oPropertyHelperClass=e};i._getPropertyByName=function(e){return this._oPropertyHelper&&this._oPropertyHelper.getProperty(e)};i._getPropertyByNameAsync=function(e){var r=this._getPropertyByName(e);if(!r){return this.finalizePropertyHelper().then(function(r){return this._getPropertyByName(e)}.bind(this))}return Promise.resolve(r)};function o(e,r){if(!this.bIsDestroyed){if(this._bPropertyHelperInitializing&&typeof e!=="undefined"){return this._oPropertyHelperDeferred.promise.then(function(){return n.call(this,e,r)}.bind(this))}if(this._oPropertyHelper&&typeof e!=="undefined"){n.call(this,e,r)}if(!this._oPropertyHelper){s.call(this,e,r)}}return this._oPropertyHelperDeferred&&this._oPropertyHelperDeferred.promise}function s(e,r){this._bPropertyHelperInitializing=true;if(r||!e){r=true;this._pHelperFinalizationPromise=this._oPropertyHelperDeferred.promise}var t;return this._oApplySettingsDeferred.promise.then(function(){return this.initControlDelegate()}.bind(this)).then(function(i){t=i;return r?p(this):e}.bind(this)).then(function(e){if(this.bIsDestroyed){return[]}return l(this,t).then(function(r){return[e,r]})}.bind(this)).then(function(e){if(this.bIsDestroyed){return undefined}var t=e[0];var i=e[1];this._oPropertyHelper=new i(t,this);this._bPropertyHelperInitializing=false;if(r){this._bPropertyHelperFinal=true;this._oPropertiesFinalizedDeferred.resolve()}return this._oPropertyHelperDeferred.resolve(this._oPropertyHelper)}.bind(this)).catch(function(e){return this._oPropertyHelperDeferred&&this._oPropertyHelperDeferred.reject(e)}.bind(this))}function n(e,r){if(this._bPropertyHelperFinal){throw new Error("This property helper is already final and cannot be updated further.")}this._oPropertyHelper.setProperties(e);this._bPropertyHelperFinal=r||this._bPropertyHelperFinal;if(this._bPropertyHelperFinal){this._oPropertiesFinalizedDeferred.resolve()}return this._oPropertyHelper}function p(e){return e.initControlDelegate().then(function(){var r=e.getControlDelegate(e);return r.fetchProperties(e).then(function(r){if(e.isDestroyed()){return[]}return r})})}function l(e,t){if(t&&typeof t.getPropertyHelperClass==="function"){var i=t.getPropertyHelperClass();var o=e._oPropertyHelperClass?e._oPropertyHelperClass.getMetadata().getName():"sap.ui.mdc.util.PropertyHelper";if(!i||!i.getMetadata||!i.getMetadata().isA(o)){throw new Error("The property helper class must be "+o+" or a subclass of it.")}return Promise.resolve(i)}if(e._oPropertyHelperClass){return Promise.resolve(e._oPropertyHelperClass)}return r("sap/ui/mdc/util/PropertyHelper").then(function(e){return e[0]})}return function(){this.init=i.init(this.init);this.exit=i.exit(this.exit);this.applySettings=i.applySettings(this.applySettings);this.initPropertyHelper=i.initPropertyHelper;this.awaitPropertyHelper=i.awaitPropertyHelper;this.getPropertyHelper=i.getPropertyHelper;this.finalizePropertyHelper=i.finalizePropertyHelper;this.isPropertyHelperFinal=i.isPropertyHelperFinal;this.propertiesFinalized=i.propertiesFinalized;this._getPropertyByName=i._getPropertyByName;this._getPropertyByNameAsync=i._getPropertyByNameAsync;this._setPropertyHelperClass=i._setPropertyHelperClass;this._setupPropertyInfoStore=i._setupPropertyInfoStore}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/TypeUtil", ["sap/ui/mdc/util/TypeUtil","sap/ui/mdc/enum/BaseType","sap/base/util/ObjectPath"],function(e,a,t){"use strict";var i=Object.assign({},e,{getPrimitiveType:function(e){var a={"Edm.Binary":"boolean","Edm.Boolean":"boolean","Edm.Byte":"boolean","Edm.Date":"date","Edm.DateTimeOffset":"dateTime","Edm.Decimal":"int","Edm.Double":"boolean","Edm.Duration":"float","Edm.Guid":"string","Edm.Int16":"int","Edm.Int32":"int","Edm.Int64":"int","Edm.SByte":"boolean","Edm.Single":"float","Edm.String":"string","Edm.TimeOfDay":"time"};return a[e]||"object"},getDataTypeClassName:function(a){var t={"Edm.Boolean":"sap.ui.model.odata.type.Boolean","Edm.Byte":"sap.ui.model.odata.type.Byte","Edm.DateTime":"sap.ui.model.odata.type.DateTime","Edm.DateTimeOffset":"sap.ui.model.odata.type.DateTimeOffset","Edm.Decimal":"sap.ui.model.odata.type.Decimal","Edm.Double":"sap.ui.model.odata.type.Double","Edm.Float":"sap.ui.model.odata.type.Single","Edm.Guid":"sap.ui.model.odata.type.Guid","Edm.Int16":"sap.ui.model.odata.type.Int16","Edm.Int32":"sap.ui.model.odata.type.Int32","Edm.Int64":"sap.ui.model.odata.type.Int64","Edm.SByte":"sap.ui.model.odata.type.SByte","Edm.Single":"sap.ui.model.odata.type.Single","Edm.String":"sap.ui.model.odata.type.String","Edm.Time":"sap.ui.model.odata.type.Time"};if(t[a]){a=t[a]}else if(a&&a.startsWith("Edm.")){throw new Error("Invalid data type "+a)}else{a=e.getDataTypeClassName.call(this,a)}return a},getBaseType:function(t,i,d){switch(t){case"sap.ui.model.odata.type.DateTime":if(d&&d.displayFormat==="Date"){return a.Date}else{return a.DateTime}case"sap.ui.model.odata.type.DateTimeOffset":case"sap.ui.model.odata.type.DateTimeWithTimezone":return a.DateTime;case"sap.ui.model.odata.type.Time":return a.Time;case"sap.ui.model.odata.type.Boolean":return a.Boolean;case"sap.ui.model.odata.type.Byte":case"sap.ui.model.odata.type.SByte":case"sap.ui.model.odata.type.Decimal":case"sap.ui.model.odata.type.Int16":case"sap.ui.model.odata.type.Int32":case"sap.ui.model.odata.type.Int64":case"sap.ui.model.odata.type.Single":case"sap.ui.model.odata.type.Double":return a.Numeric;default:return e.getBaseType.call(this,t,i,d)}},internalizeValue:function(t,i,d,o){var m=this._normalizeType(i,d,o);if(this.getBaseTypeForType(m)===a.Numeric){if(typeof t!=="string"&&(m.getMetadata().getName()==="sap.ui.model.odata.type.Int64"||m.getMetadata().getName()==="sap.ui.model.odata.type.Decimal")){return t.toString()}}return e.internalizeValue.call(this,t,i,d,o)},externalizeValue:function(t,i,d,o){var m=this._normalizeType(i,d,o);if(this.getBaseTypeForType(m)===a.Numeric){if(typeof t!=="string"&&(m.getMetadata().getName()==="sap.ui.model.odata.type.Int64"||m.getMetadata().getName()==="sap.ui.model.odata.type.Decimal")){return t.toString()}}return e.externalizeValue.call(this,t,i,d,o)}});return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/ChartDelegate", ["../../ChartDelegate"],function(e){"use strict";var t=Object.assign({},e);return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/FieldBaseDelegate", ["sap/ui/mdc/field/FieldBaseDelegate","sap/ui/mdc/odata/v4/TypeUtil"],function(e,i){"use strict";var t=Object.assign({},e);t.initializeTypeFromBinding=function(e,i,t){var n={};if(i&&(i.isA("sap.ui.model.odata.type.Unit")||i.isA("sap.ui.model.odata.type.Currency"))&&Array.isArray(t)&&t.length>2&&t[2]!==undefined){i.formatValue(t,"string");n.bTypeInitialized=true;n.mCustomUnits=t[2]}return n};t.initializeInternalUnitType=function(e,i,t){if(t&&t.mCustomUnits!==undefined){i.formatValue([null,null,t.mCustomUnits],"string")}};t.enhanceValueForUnit=function(e,i,t){if(t&&t.bTypeInitialized&&i.length===2){i.push(t.mCustomUnits);return i}};t.getDefaultValueHelpDelegate=function(e){return{name:"sap/ui/mdc/odata/v4/ValueHelpDelegate",payload:{}}};t.getTypeUtil=function(e){return i};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/ODataMetaModelUtil", ["sap/ui/mdc/util/TypeUtil"],function(e){"use strict";var r=function(){};r.fetchAllAnnotations=function(e,r){var t=e.getMetaContext(r);return e.requestObject("@",t).then(function(e){return e})};r.getAllCustomAggregates=function(e){var r={},t;for(var a in e){if(a.startsWith("@Org.OData.Aggregation.V1.CustomAggregate")){t=a.replace("@Org.OData.Aggregation.V1.CustomAggregate#","");var i=t.split("@");if(i.length==2){if(i[1]=="Org.OData.Aggregation.V1.ContextDefiningProperties"){r[i[0]].contextDefiningProperties=e[a]}if(i[1]=="com.sap.vocabularies.Common.v1.Label"){r[i[0]].label=e[a]}}else if(i.length==1){r[i[0]]={name:i[0],propertyPath:i[0],label:"Custom Aggregate ("+t+")",sortable:true,sortOrder:"both",custom:true}}}}return r};r.getAllAggregatableProperties=function(e){var r={},t,a;if(e["@com.sap.vocabularies.Analytics.v1.AggregatedProperties"]){t=e["@com.sap.vocabularies.Analytics.v1.AggregatedProperties"];for(var i=0;i<t.length;i++){a=t[i];r[a.Value]={name:a.Value,propertyPath:a.AggregatableProperty.$PropertyPath,aggregationMethod:a.AggregationMethod,label:a["@com.sap.vocabularies.Common.v1.Label"]||"Aggregatable property ("+a.Value+")",sortable:true,sortOrder:"both",custom:false}}}return r};r.getAllDataPoints=function(e){var t={};for(var a in e){if(a.startsWith("@com.sap.vocabularies.UI.v1.DataPoint")){var i=a.replace("@com.sap.vocabularies.UI.v1.DataPoint#","");var n=e[a].Value.$Path;t[n]=t[n]||{};t[n][i]=r.createDataPointProperty(e[a])}}return t};r.createDataPointProperty=function(e){var t={};if(e.TargetValue){t.targetValue=e.TargetValue.$Path}if(e.ForeCastValue){t.foreCastValue=e.ForeCastValue.$Path}var a=null;if(e.Criticality){if(e.Criticality.$Path){a={Calculated:e.Criticality.$Path}}else{a={Static:e.Criticality.$EnumMember.replace("com.sap.vocabularies.UI.v1.CriticalityType/","")}}}else if(e.CriticalityCalculation){var i={};var n=r._buildThresholds(i,e.CriticalityCalculation);if(n){a={ConstantThresholds:i}}else{a={DynamicThresholds:i}}}if(a){t.criticality=a}return t};r._buildThresholds=function(e,r){var t=["AcceptanceRangeLowValue","AcceptanceRangeHighValue","ToleranceRangeLowValue","ToleranceRangeHighValue","DeviationRangeLowValue","DeviationRangeHighValue"];var a=true,i;e.ImprovementDirection=r.ImprovementDirection.$EnumMember.replace("com.sap.vocabularies.UI.v1.ImprovementDirectionType/","");var n={oneSupplied:false,usedMeasures:[]};var l={oneSupplied:false};for(var s=0;s<t.length;s++){i=t[s];n[i]=r[i]?r[i].$Path:undefined;n.oneSupplied=n.oneSupplied||n[i];if(!n.oneSupplied){l[i]=r[i];l.oneSupplied=l.oneSupplied||l[i]}else if(n[i]){n.usedMeasures.push(n[i])}}if(n.oneSupplied){a=false;for(var s=0;s<t.length;s++){if(n[t[s]]){e[t[s]]=n[t[s]]}}e.usedMeasures=n.usedMeasures}else{var o;e.AggregationLevels=[];if(l.oneSupplied){o={VisibleDimensions:null};for(var s=0;s<t.length;s++){if(l[t[s]]){o[t[s]]=l[t[s]]}}e.AggregationLevels.push(o)}if(r.ConstantThresholds&&r.ConstantThresholds.length>0){for(var s=0;s<r.ConstantThresholds.length;s++){var u=r.ConstantThresholds[s];var c=u.AggregationLevel?[]:null;if(u.AggregationLevel&&u.AggregationLevel.length>0){for(var f=0;f<u.AggregationLevel.length;f++){c.push(u.AggregationLevel[f].$PropertyPath)}}o={VisibleDimensions:c};for(var f=0;f<t.length;f++){var g=u[t[f]];if(g){o[t[f]]=g}}e.AggregationLevels.push(o)}}}return a};r.getSortRestrictionsInfo=function(e){var r,t,a={sortable:true,propertyInfo:{}};if(e){a.sortable=e.Sortable!=null?e.Sortable:true;if(e.NonSortableProperties){for(r=0;r<e.NonSortableProperties.length;r++){t=e.NonSortableProperties[r].$PropertyPath;a[t]={sortable:false}}}if(e.AscendingOnlyProperties){for(r=0;r<e.AscendingOnlyProperties;r++){t=e.AscendingOnlyProperties[r].$PropertyPath;a[t]={sortable:true,sortDirection:"asc"}}}if(e.DescendingOnlyProperties){for(r=0;r<e.DescendingOnlyProperties;r++){t=e.DescendingOnlyProperties[r].$PropertyPath;a[t]={sortable:true,sortDirection:"desc"}}}}return a};r.addSortInfoForProperty=function(e,r){var t=r[e.name];e.sortable=r.sortable&&t?t.sortable:true;if(e.sortable){e.sortDirection=t?t.sortDirection:"both"}};r.getFilterRestrictionsInfo=function(e){var r,t,a={filterable:true,propertyInfo:{}};if(e){a.filterable=e.Filterable!=null?e.Filterable:true;a.requiresFilter=e.RequiresFilter!=null?e.RequiresFilter:false;a.requiredProperties=[];if(a.RequiredProperties){for(r=0;r<e.NonFilterableProperties;r++){t=e.NonFilterableProperties[r].$PropertyPath;a.requiredProperties.push(t)}}if(e.NonFilterableProperties){for(r=0;r<e.NonFilterableProperties.length;r++){t=e.NonFilterableProperties[r].$PropertyPath;a[t]={filterable:false}}}if(e.FilterExpressionRestrictions){for(r=0;r<e.FilterExpressionRestrictions;r++){t=e.FilterExpressionRestrictions[r].$PropertyPath;a[t]={filterable:true,allowedExpressions:e.FilterExpressionRestrictions[r].AllowedExpressions}}}}return a};r.isMultiValueFilterExpression=function(e){var r=true;switch(e){case"SearchExpression":case"SingleRange":case"SingleValue":r=false;break;default:break}return r};r.addFilterInfoForProperty=function(e,r){var t=r[e.name];e.filterable=r.filterable&&t?t.filterable:true;if(e.filterable){e.allowedExpressions=t?t.allowedExpressions:null}};r.fetchCalendarTag=function(e,r){var t="@com.sap.vocabularies.Common.v1.";return Promise.all([e.requestObject(t+"IsCalendarYear",r),e.requestObject(t+"IsCalendarHalfyear",r),e.requestObject(t+"IsCalendarQuarter",r),e.requestObject(t+"IsCalendarMonth",r),e.requestObject(t+"IsCalendarWeek",r),e.requestObject(t+"IsDayOfCalendarMonth",r),e.requestObject(t+"IsDayOfCalendarYear",r),e.requestObject(t+"IsCalendarYearHalfyear",r),e.requestObject(t+"IsCalendarYearQuarter",r),e.requestObject(t+"IsCalendarYearMonth",r),e.requestObject(t+"IsCalendarYearWeek",r),e.requestObject(t+"IsCalendarDate",r)]).then(function(e){if(e[0]){return"year"}if(e[1]){return"halfYear"}if(e[2]){return"quarter"}if(e[3]){return"month"}if(e[4]){return"week"}if(e[5]){return"dayOfMonth"}if(e[6]){return"dayOfYear"}if(e[7]){return"yearHalfYear"}if(e[8]){return"yearQuarter"}if(e[9]){return"yearMonth"}if(e[10]){return"yearWeek"}if(e[11]){return"date"}return undefined})};r.fetchFiscalTag=function(e,r){var t="@com.sap.vocabularies.Common.v1.";return Promise.all([e.requestObject(t+"IsFiscalYear",r),e.requestObject(t+"IsFiscalPeriod",r),e.requestObject(t+"IsFiscalYearPeriod",r),e.requestObject(t+"IsFiscalQuarter",r),e.requestObject(t+"IsFiscalYearQuarter",r),e.requestObject(t+"IsFiscalWeek",r),e.requestObject(t+"IsFiscalYearWeek",r),e.requestObject(t+"IsDayOfFiscalYear",r),e.requestObject(t+"IsFiscalYearVariant",r)]).then(function(e){if(e[0]){return"year"}if(e[1]){return"period"}if(e[2]){return"yearPeriod"}if(e[3]){return"quarter"}if(e[4]){return"yearQuarter"}if(e[5]){return"week"}if(e[6]){return"yearWeek"}if(e[7]){return"dayOfYear"}if(e[8]){return"yearVariant"}return undefined})};r.fetchCriticality=function(e,r){var t="@com.sap.vocabularies.UI.v1";return e.requestObject(t+".ValueCriticality",r).then(function(e){var r,t;if(e){r={VeryPositive:[],Positive:[],Critical:[],VeryNegative:[],Negative:[],Neutral:[]};for(var a=0;a<e.length;a++){t=e[a];if(t.Criticality.$EnumMember.endsWith("VeryPositive")){r.VeryPositive.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("Positive")){r.Positive.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("Critical")){r.Critical.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("VeryNegative")){r.VeryNegative.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("Negative")){r.Negative.push(t.Value)}else{r.Neutral.push(t.Value)}}for(var i in r){if(r[i].length==0){delete r[i]}}}return r})};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/TableDelegate", ["../../TableDelegate","../../table/V4AnalyticsPropertyHelper","../../util/loadModules","../../library","sap/m/ColumnPopoverSelectListItem","sap/m/MessageBox","sap/ui/core/Item","sap/ui/core/Core","sap/ui/core/library","sap/ui/core/format/ListFormat","sap/ui/base/ManagedObjectObserver"],function(e,t,r,n,a,i,o,s,u,g,l){"use strict";var p=n.TableType;var f=n.TableP13nMode;var c=new window.WeakMap;var T=Object.assign({},e);T.getPropertyHelperClass=function(){return t};T.preInit=function(e){if(!c.has(e)){c.set(e,{})}return h(e).then(function(){I(e)})};T.validateState=function(t,r,n){var a=e.validateState.apply(this,arguments);var i;var o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");if(n=="Sort"&&r.sorters){if(E(t)&&!G(t,r.items,r.sorters)){i={validation:u.MessageType.Information,message:o.getText("table.PERSONALIZATION_DIALOG_SORT_RESTRICTION")}}}else if(n=="Group"){if(r.aggregations){var s=Object.keys(r.aggregations);var l=[];var f=g.getInstance();s.forEach(function(e){var r=t.getPropertyHelper().getProperty(e);if(r&&r.groupable){l.push(e)}});if(l.length){i={validation:u.MessageType.Information,message:o.getText("table.PERSONALIZATION_DIALOG_GROUP_RESTRICTION_TOTALS",[f.format(l)])}}}else if(t._isOfType(p.ResponsiveTable)){if(!G(t,r.items,r.groupLevels)){i={validation:u.MessageType.Information,message:o.getText("table.PERSONALIZATION_DIALOG_GROUP_RESTRICTION_VISIBLE")}}}}else if(n=="Column"){var c;var s=r.aggregations&&Object.keys(r.aggregations);if(!G(t,r.items,s)){c=o.getText("table.PERSONALIZATION_DIALOG_TOTAL_RESTRICTION")}if(E(t)&&!G(t,r.items,r.sorters)){c=c?c+"\n"+o.getText("table.PERSONALIZATION_DIALOG_SORT_RESTRICTION"):o.getText("table.PERSONALIZATION_DIALOG_SORT_RESTRICTION")}if(c){i={validation:u.MessageType.Information,message:c}}}return N(a,i)};T.updateBinding=function(e,t,r){if(!r||r.getPath()!=t.path){this.rebind(e,t);return}var n=r.getRootBinding();var a=n&&!n.isSuspended();try{if(a){n.suspend()}I(e,t);r.changeParameters(t.parameters);r.filter(t.filters,"Application");r.sort(t.sorter)}catch(i){this.rebind(e,t);if(n==r){a=false}}finally{if(a&&n.isSuspended()){n.resume()}}if(e._isOfType(p.Table)){e.clearSelection()}};T.rebind=function(t,r){I(t,r);e.rebind(t,r)};T.addColumnMenuItems=function(e,t){var r=e.getPropertyHelper();var n=r.getProperty(t.getDataProperty());var a=[];if(!n){return[]}if(e.isGroupingEnabled()){var i=n.getGroupableProperties();if(i.length>0){a.push(d(i,t))}}if(e.isAggregationEnabled()){var o=n.getAggregatableProperties().filter(function(e){return e.extension.customAggregate!=null});if(o.length>0){a.push(m(o,t))}}var u=e._oPopover;if(u){u.getItems().forEach(function(e,t,r){var n=e.getLabel();var a=s.getLibraryResourceBundle("sap.ui.mdc");if(n===a.getText("table.SETTINGS_GROUP")||n===a.getText("table.SETTINGS_TOTALS")){r[t].destroy()}if(r.length==0){u.destroy()}})}return a};T.getSupportedP13nModes=function(t){var r=e.getSupportedP13nModes(t);if(t._isOfType(p.Table)){if(!r.includes(f.Group)){r.push(f.Group)}if(!r.includes(f.Aggregate)){r.push(f.Aggregate)}}return r};T.getGroupSorter=function(t,r){var n=t.getPropertyHelper();var a=t._getVisibleProperties().find(function(e){var t=n.getProperty(e.name);return t.getSimpleProperties().find(function(e){return e.name===r})});if(!a){return undefined}return e.getGroupSorter.apply(this,arguments)};T.getSupportedFeatures=function(t){var r=e.getSupportedFeatures(t),n=t._isOfType(p.TreeTable);return Object.assign(r,{expandAll:n,collapseAll:n})};T.expandAll=function(e){if(!e._isOfType(p.TreeTable)){return}var t=e.getRowBinding();if(t){t.setAggregation(Object.assign(t.getAggregation(),{expandTo:999}))}};T.collapseAll=function(e){if(!e._isOfType(p.TreeTable)){return}var t=e.getRowBinding();if(t){t.setAggregation(Object.assign(t.getAggregation(),{expandTo:1}))}};function d(e,t){var r=e.map(function(e){return new o({text:e.label,key:e.name})});if(r.length>0){return new a({items:r,label:s.getLibraryResourceBundle("sap.ui.mdc").getText("table.SETTINGS_GROUP"),icon:"sap-icon://group-2",action:[{sName:"Group",oMDCColumn:t},v,this]})}}function m(e,t){var r=e.map(function(e){return new o({text:e.label,key:e.name})});if(r.length>0){return new a({items:r,label:s.getLibraryResourceBundle("sap.ui.mdc").getText("table.SETTINGS_TOTALS"),icon:"sap-icon://sum",action:[{sName:"Aggregate",oMDCColumn:t},v,this]})}}function v(e,t){var r=t.sName,n=t.oMDCColumn.getParent(),a=n.getCurrentState().groupLevels||[],o=n.getCurrentState().aggregations||{},u=Object.keys(o),g=false,l=e.getParameter("property"),p=r==="Aggregate"?a:u,f=p.filter(function(e){return r==="Aggregate"?e.name===l:e===l}).length>0;if(f){var c=s.getLibraryResourceBundle("sap.ui.mdc");var T;var d;var m;if(r==="Aggregate"){T=c.getText("table.SETTINGS_WARNING_TITLE_TOTALS");d=c.getText("table.SETTINGS_MESSAGE2");m=c.getText("table.SETTINGS_WARNING_BUTTON_TOTALS")}else{T=c.getText("table.SETTINGS_WARNING_TITLE_GROUPS");d=c.getText("table.SETTINGS_MESSAGE1");m=c.getText("table.SETTINGS_WARNING_BUTTON_GROUP")}g=true;i.warning(d,{id:n.getId()+"-messageBox",title:T,actions:[m,c.getText("table.SETTINGS_WARNING_BUTTON_CANCEL")],onClose:function(e){if(e===m){S(r,n,l)}}})}if(r==="Aggregate"&&!g){b(r,n,l)}else if(r==="Group"&&!g){b(r,n,l)}}function b(e,t,r){if(e==="Group"){t._onCustomGroup(r)}else{t._onCustomAggregate(r)}}function S(e,t,r){if(e==="Aggregate"){t._onCustomGroup(r);t._onCustomAggregate(r)}else if(e==="Group"){t._onCustomAggregate(r);t._onCustomGroup(r)}}function I(e,t){var r=c.get(e).plugin;if(!r||r.isDestroyed()){return}var n=e._getGroupedProperties().map(function(e){return e.name});var a=Object.keys(e._getAggregatedProperties());var i=t?t.parameters["$search"]:undefined;if(i){delete t.parameters["$search"]}var o={visible:y(e),groupLevels:n,grandTotal:a,subtotals:a,columnState:P(e,a),search:i};r.setAggregationInfo(o)}function y(e){var t=new Set;e.getColumns().forEach(function(r){var n=e.getPropertyHelper().getProperty(r.getDataProperty());if(!n){return}n.getSimpleProperties().forEach(function(e){t.add(e.name)})});return Array.from(t)}function P(e,t){var r={};e.getColumns().forEach(function(n){var a=n.getId()+"-innerColumn";var i=O(e,n,t);var o=i.length>0;if(a in r){r[a].subtotals=o||r[a].subtotals;r[a].grandTotal=o||r[a].grandTotal;return}r[a]={subtotals:o,grandTotal:o};_(e,i).forEach(function(e){a=e.getId()+"-innerColumn";if(a in r){r[a].subtotals=o||r[a].subtotals;r[a].grandTotal=o||r[a].grandTotal}else{r[a]={subtotals:o,grandTotal:o}}})});return r}function A(e,t){var r=e.getPropertyHelper().getProperty(t.getDataProperty());if(!r){return[]}else{return r.getSimpleProperties()}}function O(e,t,r){return A(e,t).filter(function(e){return r.includes(e.name)})}function _(e,t){var r=[];t.forEach(function(e){if(e.unitProperty){r.push(e.unitProperty)}});return e.getColumns().filter(function(t){return A(e,t).some(function(e){return r.includes(e)})})}function G(e,t,r){var n=[];if(t){t.forEach(function(t){e.getPropertyHelper().getProperty(t.name).getSimpleProperties().forEach(function(e){n.push(e.name)})})}var a=r?r.every(function(e){return n.find(function(t){return e.name?e.name===t:e===t})}):true;return a}function N(e,t){var r={Error:1,Warning:2,Information:3,None:4};if(!t||r[t.validation]-r[e.validation]>0){return e}else{return t}}function E(e){return(e.isGroupingEnabled()||e.isAggregationEnabled())&&e._isOfType(p.Table)}function h(e){if(e._isOfType(p.Table)){return(E(e)?R(e):C(e)).then(function(){return L(e)})}return Promise.resolve()}function R(e){var t=c.get(e);var n=t.plugin;if(n&&!n.isDestroyed()){n.activate();return Promise.resolve()}return Promise.all([e.awaitPropertyHelper(),r("sap/ui/table/plugins/V4Aggregation")]).then(function(r){var a=r[1][0];var i=e.getControlDelegate();n=new a({groupHeaderFormatter:function(t,r){return i.formatGroupHeader(e,t,r)}});n.setPropertyInfos(e.getPropertyHelper().getPropertiesForPlugin());e.propertiesFinalized().then(function(){n.setPropertyInfos(e.getPropertyHelper().getPropertiesForPlugin())});e._oTable.addDependent(n);t.plugin=n})}function C(e){var t=c.get(e);if(t.plugin){t.plugin.deactivate()}return Promise.resolve()}function L(e){var t=c.get(e);if(!t.observer){t.observer=new l(function(t){h(e)});t.observer.observe(e,{properties:["p13nMode"]})}}return T});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/TypeUtil", ["sap/ui/mdc/odata/TypeUtil","sap/ui/mdc/enum/BaseType","sap/base/util/merge"],function(e,a,t){"use strict";var s=Object.assign({},e);s.getBaseType=function(t,s,i){switch(t){case"sap.ui.model.odata.type.Date":return a.Date;case"sap.ui.model.odata.type.TimeOfDay":return a.Time;case"sap.ui.model.odata.type.Unit":case"sap.ui.model.odata.type.Currency":if(!s||(!s.hasOwnProperty("showMeasure")||s.showMeasure)&&(!s.hasOwnProperty("showNumber")||s.showNumber)){return a.Unit}else if(!s.hasOwnProperty("showNumber")||s.showNumber){return a.Numeric}else{return a.String}default:return e.getBaseType.call(this,t,s,i)}};s.getDataTypeClassName=function(a){var t={"Edm.Date":"sap.ui.model.odata.type.Date","Edm.TimeOfDay":"sap.ui.model.odata.type.TimeOfDay"};if(t[a]){a=t[a]}else{a=e.getDataTypeClassName.call(this,a)}return a};s.getDataTypeInstance=function(e,a,s){switch(e){case"sap.ui.model.odata.type.DateTimeOffset":case"Edm.DateTimeOffset":s=t({},s);s.V4=true;break;default:}var i=this.getDataTypeClass(e);return new i(a,s)};s._adjustUnitFormatOptions=function(a,t,s){e._adjustUnitFormatOptions.call(this,a,t,s);if(a.hasOwnProperty("unitOptional")){delete a.unitOptional}};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/ValueHelpDelegate", ["../../ValueHelpDelegate","sap/ui/mdc/odata/v4/TypeUtil","sap/base/Log","sap/ui/model/FilterType","sap/base/util/deepEqual"],function(e,t,i,n,r){"use strict";var a=Object.assign({},e);a.isSearchSupported=function(e,t,i){return!!i.changeParameters};a.updateBindingInfo=function(t,i,n){e.updateBindingInfo(t,i,n);if(i.getFilterFields()==="$search"){var r=i._getPriorityFilterBar();var a=i.isTypeahead()?i._getPriorityFilterValue():r&&r.getSearch();if(this.adjustSearch){a=this.adjustSearch(t,i.isTypeahead(),a)}n.parameters.$search=a||undefined}};a.updateBinding=function(e,t,i){var r=t.getRootBinding()||t;if(!r.isSuspended()){r.suspend()}t.changeParameters(i.parameters);t.filter(i.filters,n.Application);if(r.isSuspended()){r.resume()}};a.executeFilter=function(e,t,i){t.getContexts(0,i);return Promise.resolve(this.checkListBindingPending(e,t,i)).then(function(){return t})};a.checkListBindingPending=function(e,t,i){if(!t||t.isSuspended()){return false}return t.requestContexts(0,i).then(function(e){return e.length===0})};a.getTypeUtil=function(e){return t};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/util/DelegateUtil", ["sap/ui/mdc/util/FilterUtil","sap/ui/mdc/condition/ConditionConverter","sap/base/Log","sap/base/util/merge","sap/ui/model/FilterOperator","sap/ui/model/odata/v4/ODataUtils"],function(e,t,a,r,n,i){"use strict";var o={_getParameters:function(e){var t=null;if(e&&e.getDelegate()&&e.getDelegate().payload&&e.getDelegate().payload.collectionName){var a=e.getDelegate().payload.collectionName;if(window[e.getId()+"->"+a+"-Parameters"]){t=window[e.getId()+"->"+a+"-Parameters"]}}return t},getParametersInfo:function(e){var t=o._getParameters(e);return o._getParameterPath(e,t)},_getParametersListUrl:function(t,a){var r=[];var o=e.getConditionsMap(t,a);var l=t.getPropertyInfoSet();a.forEach(function(t){var a=e.getPropertyByKey(l,t);if(a&&a.maxConditions===1){o[t].forEach(function(e){if(e.operator===n.EQ){r.push(t+"="+encodeURIComponent(i.formatLiteral(e.values[0],a.typeConfig.className)))}})}});return r},_getParameterPath:function(e,t){if(!e||!e.isA("sap.ui.mdc.FilterBar")){return null}if(!t||t.parameters.length<=0){return null}var a=e.getDelegate().payload.collectionName;var r=o._getParametersListUrl(e,t.parameters);return"/"+a+"("+r.toString()+")/"+t.parameterNavigationName},getParameterNames:function(e){var t=null,a=o._getParameters(e);if(a){t=a.parameters}return t}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/vizChart/ChartDelegate", ["sap/ui/mdc/odata/v4/ChartDelegate","sap/ui/core/Core","sap/m/Text","sap/ui/mdc/library","sap/base/Log","sap/ui/mdc/util/FilterUtil","sap/ui/mdc/odata/v4/util/DelegateUtil","sap/ui/mdc/chart/ChartTypeButton","sap/ui/mdc/chart/Item","sap/ui/model/Sorter","sap/ui/mdc/chart/ChartImplementationContainer","sap/ui/base/ManagedObjectObserver","sap/ui/mdc/p13n/panels/ChartItemPanel","sap/m/MessageStrip","sap/ui/mdc/odata/v4/TypeUtil","sap/ui/mdc/FilterBarDelegate","sap/ui/model/Filter","sap/ui/mdc/chart/PropertyHelper","sap/ui/thirdparty/jquery","sap/m/IllustratedMessage"],function(e,t,a,r,i,n,o,s,l,u,g,h,d,c,p,f,m,y,jQuery,C){"use strict";var _=Object.assign({},e);var b=new window.WeakMap;var I;var v;var S;var T;_._getState=function(e){if(b.has(e)){return b.get(e)}if(e){i.info("Couldn't get state for "+e.getId())}};_._setState=function(e,t){b.set(e,t)};_.getTypeUtil=function(){return p};_.getFilterDelegate=function(){return f};_.addCondition=function(e,t,a){return Promise.resolve()};_.removeCondition=function(e,t,a){return Promise.resolve()};_._deleteState=function(e){if(this._getState(e)){if(this._getState(e).vizTooltip){this._getState(e).vizTooltip.destroy()}if(this._getState(e).observer){this._getState(e).observer.disconnect();this._getState(e).observer=null}}return b.delete(e)};_._getChart=function(e){if(b.has(e)){return b.get(e).innerChart}if(e){i.info("Couldn't get state for "+e.getId())}return undefined};_._setChart=function(e,t){if(b.has(e)){b.get(e).innerChart=t}else{b.set(e,{innerChart:t})}};_._getInnerStructure=function(e){if(b.has(e)){return b.get(e).innerStructure}if(e){i.info("Couldn't get state for "+e.getId())}return undefined};_._setInnerStructure=function(e,t){if(b.has(e)){b.get(e).innerStructure=t}else{b.set(e,{innerStructure:t})}};_._getBindingInfoFromState=function(e){if(b.has(e)){return b.get(e).bindingInfo}if(e){i.info("Couldn't get state for "+e.getId())}return undefined};_._setBindingInfoForState=function(e,t){if(b.has(e)){b.get(e).bindingInfo=t}else{b.set(e,{bindingInfo:t})}};_._setUpChartObserver=function(e){var t=this._getState(e);if(!t.observer){t.observer=new h(function(e){if(e.type==="destroy"){this.exit(e.object)}}.bind(this))}t.observer.observe(e,{destroy:true})};_.exit=function(e){if(this._getInnerStructure(e)){this._getInnerStructure(e).destroy()}this._deleteState(e)};_.zoomIn=function(e,t){var a=this._getChart(e);if(a){a.zoom({direction:"in"})}};_.zoomOut=function(e,t){var a=this._getChart(e);if(a){a.zoom({direction:"out"})}};_.getZoomState=function(e){if(this._getChart(e)){return this._getChart(e).getZoomInfo(this)}};_.getInnerChartSelectionHandler=function(e){return{eventId:"_selectionDetails",listener:this._getChart(e)}};_.getChartTypeLayoutConfig=function(){if(this._aChartTypeLayout){return this._aChartTypeLayout}var e=[r.ChartItemRoleType.axis1,r.ChartItemRoleType.category,r.ChartItemRoleType.series];var t=[r.ChartItemRoleType.axis1,r.ChartItemRoleType.axis2,r.ChartItemRoleType.category,r.ChartItemRoleType.series];var a=[r.ChartItemRoleType.axis1,r.ChartItemRoleType.category,r.ChartItemRoleType.category2];var i=[r.ChartItemRoleType.axis1,r.ChartItemRoleType.axis2,r.ChartItemRoleType.axis3,r.ChartItemRoleType.category,r.ChartItemRoleType.series];this._aChartTypeLayout=[{key:"column",allowedLayoutOptions:e},{key:"bar",allowedLayoutOptions:e},{key:"line",allowedLayoutOptions:e},{key:"combination",allowedLayoutOptions:e},{key:"pie",allowedLayoutOptions:e},{key:"donut",allowedLayoutOptions:e},{key:"dual_column",allowedLayoutOptions:t},{key:"dual_bar",allowedLayoutOptions:t},{key:"dual_line",allowedLayoutOptions:t},{key:"stacked_bar",allowedLayoutOptions:e},{key:"scatter",allowedLayoutOptions:t},{key:"bubble",allowedLayoutOptions:i},{key:"heatmap",allowedLayoutOptions:a},{key:"bullet",allowedLayoutOptions:e},{key:"vertical_bullet",allowedLayoutOptions:e},{key:"dual_stacked_bar",allowedLayoutOptions:t},{key:"100_stacked_bar",allowedLayoutOptions:e},{key:"stacked_column",allowedLayoutOptions:e},{key:"dual_stacked_column",allowedLayoutOptions:t},{key:"100_stacked_column",allowedLayoutOptions:e},{key:"dual_combination",allowedLayoutOptions:t},{key:"dual_horizontal_combination",allowedLayoutOptions:t},{key:"dual_horizontal_combination",allowedLayoutOptions:t},{key:"dual_stacked_combination",allowedLayoutOptions:t},{key:"dual_horizontal_stacked_combination",allowedLayoutOptions:t},{key:"stacked_combination",allowedLayoutOptions:e},{key:"100_dual_stacked_bar",allowedLayoutOptions:e},{key:"100_dual_stacked_column",allowedLayoutOptions:e},{key:"horizontal_stacked_combination",allowedLayoutOptions:e},{key:"waterfall",allowedLayoutOptions:a},{key:"horizontal_waterfall",allowedLayoutOptions:a}];return this._aChartTypeLayout};_.getAdaptionUI=function(e){return Promise.resolve(this._setupAdaptionUI(e))};_._setupAdaptionUI=function(e){var t=this.getChartTypeLayoutConfig().find(function(t){return t.key===e.getChartType()});if(!t){var a=[r.ChartItemRoleType.axis1,r.ChartItemRoleType.axis2,r.ChartItemRoleType.axis3,r.ChartItemRoleType.category,r.ChartItemRoleType.category2,r.ChartItemRoleType.series];t={key:e.getChartType(),allowedLayoutOptions:a}}var i=[{kind:"Groupable"},{kind:"Aggregatable"}];t.templateConfig=i;var n={panelConfig:t};var o=new d(n);if(e.getChartType()==="heatmap"){var s=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");o.setMessageStrip(new c({text:s.getText("chart.PERSONALIZATION_DIALOG_MEASURE_WARNING"),type:"Warning"}))}return o};_.setLegendVisible=function(e,t){if(this._getChart(e)){this._getChart(e).setVizProperties({legend:{visible:t},sizeLegend:{visible:t}})}else{i.error("Could not set legend visibility since inner chart is not yet initialized!")}};_._getSorterForItem=function(e,t){if(e.getType()==="aggregatable"){return new u(this._getAggregatedMeasureNameForMDCItem(e),t.descending)}else if(e.getType()==="groupable"){return new u(this.getInternalChartNameFromPropertyNameAndKind(t.name,"groupable",e.getParent()),t.descending)}};_.insertItemToInnerChart=function(e,t,a){if(t.getType()==="groupable"){var r=this.getInternalChartNameFromPropertyNameAndKind(t.getName(),"groupable",e);var i=this._getChart(e).getDimensionByName(r);if(!i){this.createInnerDimension(e,t)}else{i.setLabel(t.getLabel());i.setRole(t.getRole()?t.getRole():"category")}var n=this._getChart(e).getVisibleDimensions();n.splice(a,0,r);this._getChart(e).setVisibleDimensions(n)}else if(t.getType()==="aggregatable"){this.createInnerMeasure(e,t);var o=this._getChart(e).getVisibleMeasures();o.splice(a,0,this._getAggregatedMeasureNameForMDCItem(t));this._getChart(e).setVisibleMeasures(o)}this._prepareColoringForItem(t).then(function(){this._updateColoring(e,this._getChart(e).getVisibleDimensions(),this._getChart(e).getVisibleMeasures())}.bind(this));this._updateSemanticalPattern(e)};_.removeItemFromInnerChart=function(e,t){if(t.getType()==="groupable"&&this._getChart(e).getVisibleDimensions().includes(this.getInternalChartNameFromPropertyNameAndKind(t.getName(),"groupable",e))){var a=this.getInternalChartNameFromPropertyNameAndKind(t.getName(),"groupable",e);var r=this._getChart(e).getVisibleDimensions().filter(function(e){return e!==a});if(this._getState(e).inResultDimensions.length>0){this._getChart(e).setInResultDimensions(this._getState(e).inResultDimensions)}this._getChart(e).setVisibleDimensions(r)}else if(t.getType()==="aggregatable"&&this._getChart(e).getVisibleMeasures().includes(this._getAggregatedMeasureNameForMDCItem(t))){var i=[];e.getItems().filter(function(e){return e.getType()==="aggregatable"}).filter(function(e){return e!==t}).forEach(function(e){i.push(this._getAggregatedMeasureNameForMDCItem(e))}.bind(this));this._getChart(e).setVisibleMeasures(i);this._getChart(e).removeMeasure(this._getChart(e).getMeasureByName(this._getAggregatedMeasureNameForMDCItem(t)))}this._updateColoring(e,this._getChart(e).getVisibleDimensions(),this._getChart(e).getVisibleMeasures());this._updateSemanticalPattern(e)};_.addItem=function(e,t,a,r){if(t.getModel){return Promise.resolve(this._createMDCChartItem(e,t,r))}};_.removeItem=function(e,t){return Promise.resolve(true)};_.checkAndUpdateMDCItems=function(e){return new Promise(function(t,a){var r=[];e.getItems().forEach(function(t){var a=t.getName()&&t.getLabel()&&t.getType()&&t.getRole();if(!a){r.push(this._getPropertyInfosByName(t.getName(),e).then(function(e){t.setLabel(e.label);if(e.groupable){t.setType("groupable");t.setRole(t.getRole()?t.getRole():"category")}else if(e.aggregatable){t.setType("aggregatable");t.setRole(t.getRole()?t.getRole():"axis1")}}))}}.bind(this));Promise.all(r).then(function(){t()})}.bind(this))};_._createMDCChartItem=function(e,t,a){return this._getPropertyInfosByName(e,t).then(function(e){if(!e){return null}return this._createMDCItemFromProperty(e,t.getId(),a)}.bind(this))};_._createMDCItemFromProperty=function(e,t,a){if(e.groupable){return new l(t+"--GroupableItem--"+e.name,{name:e.name,label:e.label,type:"groupable",role:a?a:"category"})}if(e.aggregatable){return new l(t+"--AggregatableItem--"+e.name,{name:e.name,label:e.label,type:"aggregatable",role:a?a:"axis1"})}return null};_.initializeInnerChart=function(e){return new Promise(function(t,r){this._loadChart().then(function(r){var i;this._setInnerStructure(e,new g(e.getId()+"--implementationContainer",{}));e.addStyleClass("sapUiMDCChartTempTextOuter");if(e.getNoData()){this._getInnerStructure(e).setChartNoDataContent(e.getNoData())}else{i=new a({text:e.getNoDataText()});this._getInnerStructure(e).addStyleClass("sapUiMDCChartTempText");this._getInnerStructure(e).setNoDataContent(i)}this._setUpChartObserver(e);t(this._getInnerStructure(e))}.bind(this))}.bind(this))};_.changedNoDataStruct=function(e){if(this._getInnerStructure(e)){this._getInnerStructure(e).setChartNoDataContent(e.getNoData());this._getInnerStructure(e).invalidate()}};_._createContentFromItems=function(e){return new Promise(function(t,a){var r=[];var n=[];var o=[];var s=[];e.getItems().forEach(function(t,a){n.push(this._getPropertyInfosByName(t.getName(),e).then(function(a){if(!a){i.error("sap.ui.mdc.Chart: Item "+t.getName()+" has no property info representing it in the metadata. Make sure the name is correct and the metadata is defined correctly. Skipping the item!");return}switch(t.getType()){case"groupable":o.push(this.getInternalChartNameFromPropertyNameAndKind(t.getName(),"groupable",e));this._addInnerDimension(e,t,a);break;case"aggregatable":s.push(this._getAggregatedMeasureNameForMDCItem(t));this._addInnerMeasure(e,t,a);break;default:i.error("MDC Chart Item "+t.getId()+" with label "+t.getLabel()+' has no known type. Supported typed are: "groupable" & "aggregatable"')}r.push(this._prepareColoringForItem(t))}.bind(this)))}.bind(this));Promise.all(n).then(function(){this._getState(e).aColMeasures.forEach(function(t){if(this._getState(e).aInSettings.indexOf(t)==-1){r.push(new Promise(function(a,r){e._getPropertyByNameAsync(t).then(function(r){var i=r.aggregationMethod;var n=r.propertyPath;var o=this.getInternalChartNameFromPropertyNameAndKind(t,"aggregatable",e);var l={name:o,label:r.label,role:"axis1"};if(i&&n){l.analyticalInfo={propertyPath:n,with:i}}var u=new S(l);s.push(u);this._getChart(e).addMeasure(u);a()})}))}}.bind(this));Promise.all(r).then(function(){this._getChart(e).setVisibleDimensions(o);this._getChart(e).setVisibleMeasures(s);var a=e.getDelegate().inResultDimensions;if(a&&a instanceof Array&&a.length!=0){var r=[];a.forEach(function(t){r.push(this._getPropertyInfosByName(t,e).then(function(t){var a=this.getInternalChartNameFromPropertyNameAndKind(t.name,"groupable",e);var r=new v({name:a,label:t.label});this._getState(e).inResultDimensions.push(a);this._getChart(e).addDimension(r)}.bind(this)))}.bind(this));Promise.all(r).then(function(){this._getChart(e).setInResultDimensions(this._getState(e).inResultDimensions)}.bind(this))}this._updateColoring(e,o,s);this._updateSemanticalPattern(e);t()}.bind(this))}.bind(this))}.bind(this))};_.getInnerChart=function(e){return this._getChart(e)};_._prepareColoringForItem=function(e){return this._addCriticality(e).then(function(){this._getState(e.getParent()).aInSettings.push(e.getName());if(e.getType()==="aggregatable"){this._getPropertyInfosByName(e.getName(),e.getParent()).then(function(t){this._getAdditionalColoringMeasuresForItem(t).forEach(function(t){if(this._getState(e.getParent()).aColMeasures&&this._getState(e.getParent()).aColMeasures.indexOf(t)==-1){this._getState(e.getParent()).aColMeasures.push(t)}}.bind(this))}.bind(this))}}.bind(this))};_._getAdditionalColoringMeasuresForItem=function(e){var t=[];var a=e.datapoint?e.datapoint.criticality:null;if(a&&a.DynamicThresholds){t=a.DynamicThresholds.usedMeasures}return t};_._addCriticality=function(e){return this._getPropertyInfosByName(e.getName(),e.getParent()).then(function(t){if(t.criticality||t.datapoint&&t.datapoint.criticality){var a=this._getState(e.getParent()).oColorings||{Criticality:{DimensionValues:{},MeasureValues:{}}};var r={};if(e.getType()=="groupable"){var i=t.criticality?t.criticality:[];for(var n in i){r[n]={Values:i[n]}}var o=this.getInternalChartNameFromPropertyNameAndKind(e.getName(),"groupable",e.getParent());a.Criticality.DimensionValues[o]=r}else{var i=t.datapoint&&t.datapoint.criticality?t.datapoint.criticality:[];for(var n in i){r[n]=i[n]}var s=this.getInternalChartNameFromPropertyNameAndKind(e.getName(),"aggregatable",e.getParent());a.Criticality.MeasureValues[s]=r}var l=this._getState(e.getParent());l.oColorings=a;this._setState(e.getParent(),l)}}.bind(this))};_._updateColoring=function(e,t,a){var r=jQuery.extend(true,{},this._getState(e).oColorings),i;if(r&&r.Criticality){var n;for(i=0;i<t.length;i++){if(this._getState(e).oColorings.Criticality.DimensionValues[t[i]]){n={coloring:"Criticality",parameters:{dimension:t[i]}};delete r.Criticality.MeasureValues;break}}if(!n){delete r.Criticality.DimensionValues;for(var o in r.Criticality.MeasureValues){if(a.indexOf(o)==-1){delete r.Criticality.MeasureValues[o]}}n={coloring:"Criticality",parameters:{measure:a}}}if(n){this._getChart(e).setColorings(r);this._getChart(e).setActiveColoring(n)}}};_._updateSemanticalPattern=function(e){var t=this._getChart(e).getVisibleMeasures();t.forEach(function(t){var a=this.getPropertyFromNameAndKind(t,"aggregatable",e);if(!a){return}var r=a.datapoint;if(r){if(r.targetValue||r.foreCastValue){var n=this._getChart(e).getMeasureByName(t);n.setSemantics("actual");if(r.targetValue!=null){var o=this._getChart(e).getMeasureByName(r.targetValue);if(o){o.setSemantics("reference")}else{i.error("sap.ui.mdc.Chart: "+r.targetValue+" is not a valid measure")}}if(r.foreCastValue){var s=this._getChart(e).getMeasureByName(r.foreCastValue);if(s){s.setSemantics("projected")}else{i.error("sap.ui.comp.SmartChart: "+r.ForecastValue.Path+" is not a valid measure")}}n.setSemanticallyRelatedMeasures({referenceValueMeasure:r.targetValue,projectedValueMeasure:r.foreCastValue})}}}.bind(this))};_.getChartTypeInfo=function(e){if(!this._getChart(e)){throw"inner chart is not bound"}var a=e.getChartType(),r=t.getLibraryResourceBundle("sap.ui.mdc"),i=t.getLibraryResourceBundle("sap.chart.messages");var n={icon:s.mMatchingIcon[a],text:r.getText("chart.CHART_TYPE_TOOLTIP",[i.getText("info/"+a)])};return n};_.getAvailableChartTypes=function(e){var a=[];if(this._getChart(e)){var r=this._getChart(e).getAvailableChartTypes().available;if(a){var i=t.getLibraryResourceBundle("sap.chart.messages");for(var n=0;n<r.length;n++){var o=r[n].chart;a.push({key:o,icon:s.mMatchingIcon[o],text:i.getText("info/"+o),selected:o==e.getChartType()})}}}return a};_.getDrillStack=function(e){var t=Object.assign([],this._getChart(e).getDrillStack());t.forEach(function(t){t.dimension=t.dimension.map(function(t){var a=this.getPropertyFromNameAndKind(t,"groupable",e);if(a){return a.name}else{i.error("MDC Chart Delegate: Couldn't map chart dimension to groupable property: "+t);return t}}.bind(this))}.bind(this));return t};_.getSortedDimensions=function(e){return new Promise(function(t,a){if(e.isPropertyHelperFinal()){t(this._sortPropertyDimensions(e.getPropertyHelper().getProperties()))}else{e.finalizePropertyHelper().then(function(){t(this._sortPropertyDimensions(e.getPropertyHelper().getProperties()))}.bind(this))}}.bind(this))};_._sortPropertyDimensions=function(e){var t=e.filter(function(e){return e.groupable});if(t){t.sort(function(e,t){if(e.label&&t.label){return e.label.localeCompare(t.label)}})}return t};_.getDrillableItems=function(e){var t=e.getItems().filter(function(e){return e.getType()==="groupable"});return t};_.setChartType=function(e,t){this._getChart(e).setChartType(t)};_.createInnerChartContent=function(e,t){return new Promise(function(a,r){this._setChart(e,new I({id:e.getId()+"--innerChart",chartType:"column",height:"100%",width:"100%",isAnalytical:true}));this._getChart(e).setCustomMessages({NO_DATA:e.getNoDataText()});this._getState(e).inResultDimensions=[];this._getInnerStructure(e).removeStyleClass("sapUiMDCChartTempText");e.removeStyleClass("sapUiMDCChartTempTextOuter");e.addStyleClass("sapUiMDCChartGrid");var i=this._getState(e);i.aColMeasures=[];i.aInSettings=[];this._setState(e,i);this._createContentFromItems(e).then(function(){this._getChart(e).attachRenderComplete(function(){if(this._getState(e).toolbarUpdateRequested){e._updateToolbar();this._getState(e).toolbarUpdateRequested=false}}.bind(this));this._getInnerStructure(e).setContent(this._getChart(e));this._getInnerStructure(e).setShowNoDataStruct(false);i.dataLoadedCallback=t;this._setState(e,i);var r=this._getBindingInfo(e);this.updateBindingInfo(e,r);this._performInitialBind(e,r);a()}.bind(this))}.bind(this))};_._performInitialBind=function(e,t){if(e&&t&&this._getChart(e)){this._addBindingListener(t,"dataReceived",this._onDataLoadComplete.bind(e));this._getChart(e).bindData(t);this._setBindingInfoForState(e,t);var a=this._getState(e);a.innerChartBound=true;this._checkForMeasureWarning(e)}};_.requestToolbarUpdate=function(e){if(e.getItems().length===0){e._updateToolbar();return}this._getState(e).toolbarUpdateRequested=true};_.createInnerDimension=function(e,t){this._getPropertyInfosByName(t.getName(),e).then(function(a){this._addInnerDimension(e,t,a)}.bind(this))};_.createInnerMeasure=function(e,t){this._getPropertyInfosByName(t.getName(),e).then(function(a){this._addInnerMeasure(e,t,a)}.bind(this))};_._addInnerDimension=function(e,t,a){var r=this.innerDimensionFactory(e,t,a);this._getChart(e).addDimension(r)};_.innerDimensionFactory=function(e,t,a){var r=new v({name:this.getInternalChartNameFromPropertyNameAndKind(t.getName(),"groupable",e),role:t.getRole()?t.getRole():"category",label:t.getLabel()});if(a.textProperty){r.setTextProperty(a.textProperty);r.setDisplayText(true)}if(a.textFormatter){r.setTextFormatter(this.formatText.bind(a))}return r};_._addInnerMeasure=function(e,t,a){var r=this.innerMeasureFactory(e,t,a);this._getChart(e).addMeasure(r)};_.innerMeasureFactory=function(e,t,a){var r=a.aggregationMethod;var i=a.propertyPath;var n={name:this._getAggregatedMeasureNameForMDCItem(t),label:t.getLabel(),role:t.getRole()?t.getRole():"axis1"};if(r&&i){n.analyticalInfo={propertyPath:i,with:r}}return new S(n)};_._getAggregatedMeasureNameForProperty=function(e){return e.aggregationMethod+e.name};_.rebindChart=function(e,t){this.rebind(e,t)};_.rebind=function(e,t){if(e&&t&&this._getChart(e)){this._addBindingListener(t,"dataReceived",this._onDataLoadComplete.bind(e));this._getInnerStructure(e).setShowNoDataStruct(false);if(t.binding){t.binding.bHasAnalyticalInfo=true}this._getChart(e).bindData(t);this._setBindingInfoForState(e,t);var a=this._getState(e);a.innerChartBound=true}};_._checkForMeasureWarning=function(e){if(!e.getNoData()){return}var t=e.getItems().filter(function(e){return e.getType()==="aggregatable"});if(t.length===0){this._getInnerStructure(e).setShowNoDataStruct(true);e.setBusy(false)}else{this._getInnerStructure(e).setShowNoDataStruct(false)}};_._getBindingInfo=function(e){if(this._getBindingInfoFromState(e)){return this._getBindingInfoFromState(e)}var t=e.getDelegate().payload;var a="/"+t.collectionName;var r={path:a};return r};_.getInnerChartBound=function(e){var t=this._getState(e);if(!t){return false}return t.innerChartBound?true:false};_.updateBindingInfo=function(e,t){var a=D.call(this,e).concat(N.call(this,e));P(e,t);t.filters=new m(a,true);t.sorter=this.getSorters(e)};function D(e){var t=e.getP13nMode().indexOf("Filter")>-1;var a=[];if(t){var r=e.getPropertyHelper().getProperties();var i=n.getFilterInfo(this.getTypeUtil(),e.getConditions(),r);if(i.filters){a.push(i.filters)}}return a}function N(e){var a=t.byId(e.getFilter());var r=[];if(!a){return r}var i=a.getConditions();if(i){var s=a.getPropertyInfoSet?a.getPropertyInfoSet():null;var l=o.getParameterNames(a);var u=n.getFilterInfo(this.getTypeUtil(),i,s,l);if(u.filters){r.push(u.filters)}}return r}function P(e,a){var r=t.byId(e.getFilter());if(!r){return}var i=r.getConditions();var n=r.getSearch instanceof Function?r.getSearch():"";if(i){var s=o.getParametersInfo(r,i);if(s){a.path=s}}if(!a.parameters){a.parameters={}}a.parameters["$search"]=n||undefined}_.getSorters=function(e){var t;var a=e.getSortConditions()?e.getSortConditions().sorters:[];a.forEach(function(a){var r=e.getItems().find(function(e){return e.getName()===a.name});if(!r){return}var i=this._getSorterForItem(r,a);if(t){t.push(i)}else{t=[i]}}.bind(this));return t};_._getAggregatedMeasureNameForMDCItem=function(e){return this.getInternalChartNameFromPropertyNameAndKind(e.getName(),"aggregatable",e.getParent())};_.getInternalChartNameFromPropertyNameAndKind=function(e,t,a){return e};_.getPropertyFromNameAndKind=function(e,t,a){return a.getPropertyHelper().getProperty(e)};_.setChartTooltipVisibility=function(e,t){if(this._getChart(e)){if(t){if(!this._getState(e).vizTooltip){var a=this._getState(e);a.vizTooltip=new T;this._setState(e,a)}this._getState(e).vizTooltip.connect(this._getChart(e).getVizUid())}else if(this._getState(e).vizTooltip){this._getState(e).vizTooltip.destroy()}}else{i.error("Trying to set chart tooltip while inner chart was not yet initialized")}};_._loadChart=function(){return new Promise(function(e){var a=["sap/chart/library","sap/chart/Chart","sap/chart/data/Dimension","sap/chart/data/Measure","sap/viz/ui5/controls/VizTooltip"];function r(t,a,r,i,n){I=a;v=r;S=i;T=n;e()}t.loadLibrary("sap.viz",{async:true}).then(function(){sap.ui.require(a,r)})})};_.getPropertyHelperClass=function(){return y};_.formatText=function(e,t){return e};_.setNoDataText=function(e,t){this._getChart(e).setCustomMessages({NO_DATA:t})};_.showOverlay=function(e,t){if(this._getInnerStructure(e)){this._getInnerStructure(e).showOverlay(t)}};_._getPropertyInfosByName=function(e,t){return t._getPropertyByNameAsync(e)};_._getModel=function(e){var t=e.getDelegate().payload;return e.getModel(t.model)};_._addBindingListener=function(e,t,a){if(!e.events){e.events={}}if(!e.events[t]){e.events[t]=a}else{var r=e.events[t];e.events[t]=function(){a.apply(this,arguments);r.apply(this,arguments)}}};_._onDataLoadComplete=function(e){var t=this.getControlDelegate()._getInnerStructure(this);if(this.getNoData()){if(e.getSource()&&e.getSource().getCurrentContexts().length===0){t.setShowNoDataStruct(true)}else{t.setShowNoDataStruct(false)}}this._innerChartDataLoadComplete(e)};return _});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/P13nBuilder", ["./PropertyHelper","sap/m/Button","sap/m/Bar","sap/m/Title","sap/base/util/merge","sap/m/MessageBox","sap/ui/Device","sap/ui/fl/write/api/FieldExtensibility","sap/ui/core/Configuration","sap/ui/core/library"],function(e,t,n,r,i,o,a,s,u,l){"use strict";var c=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var p=l.TitleLevel;var g={createP13nPopover:function(e,t){return new Promise(function(n,r){sap.ui.require(["sap/m/ResponsivePopover"],function(i){g["_checkSettings"](e,t,r);var o=new i({title:t.title,horizontalScrolling:t.hasOwnProperty("horizontalScrolling")?t.horizontalScrolling:false,verticalScrolling:t.hasOwnProperty("verticalScrolling")?t.verticalScrolling:false,contentWidth:t.contentWidth?t.contentWidth:"24rem",resizable:t.hasOwnProperty("resizable")?t.resizable:true,contentHeight:t.contentHeight?t.contentHeight:"35rem",placement:t.placement?t.placement:"Bottom",content:e,afterClose:t.afterClose?t.afterClose:function(){}});if(t.reset){var a=g._createResetHeader({title:t.title,reset:t.reset.onExecute,idResetButton:t.reset.idButton,warningText:t.reset.warningText});o.setCustomHeader(a)}n(o)},r)})},createP13nDialog:function(e,t){return new Promise(function(n,r){g["_checkSettings"](e,t,r);var i=t.id;sap.ui.require(["sap/m/Dialog","sap/m/Button"],function(o,s){var u=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var l=new o(i,{title:t.title,horizontalScrolling:t.hasOwnProperty("horizontalScrolling")?t.horizontalScrolling:false,verticalScrolling:t.hasOwnProperty("verticalScrolling")?t.verticalScrolling:true,contentWidth:t.contentWidth?t.contentWidth:"40rem",contentHeight:t.contentHeight?t.contentHeight:"55rem",draggable:true,resizable:true,stretch:a.system.phone,content:e,afterClose:t.afterClose?t.afterClose:function(){},buttons:[new s(i?i+"-confirmBtn":undefined,{text:t.confirm&&t.confirm.text?t.confirm.text:u.getText("p13nDialog.OK"),type:"Emphasized",press:function(){if(t.confirm&&t.confirm.handler){t.confirm.handler.apply(l,arguments)}}}),new s(i?i+"-cancelBtn":undefined,{text:u.getText("p13nDialog.CANCEL"),press:function(){t.cancel.apply(l,arguments)}})]});if(t.reset){var c=g._createResetHeader({title:t.title,idResetButton:t.reset.idButton,reset:t.reset.onExecute,warningText:t.reset.warningText});l.setCustomHeader(c)}var p=t.additionalButtons;if(p instanceof Array){p.forEach(function(e){if(!e.isA("sap.m.Button")){r("Please only provide sap.m.Button instances as 'additionalButtons'")}l.addButton(e)})}n(l)},r)})},_createResetHeader:function(e){var i=new n({contentLeft:[new r({text:e.title,level:p.H1})]});if(e.reset){var a=e.idResetButton;i.addContentRight(new t(a,{text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.RESET"),press:function(t){var n=t.getSource().getParent().getParent();var r=n.getParent();var i=e.warningText?e.warningText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("filterbar.ADAPT_RESET_WARNING");o.warning(i,{actions:[o.Action.OK,o.Action.CANCEL],emphasizedAction:o.Action.OK,onClose:function(t){if(t===o.Action.OK){n.getButtons()[0].focus();e.reset(r)}}})}}))}return i},prepareAdaptationData:function(t,n,r){var i=t&&t.getProperties instanceof Function?t:new e(t);var o=[];var a=r?{}:null;var s=n instanceof Function;i.getProperties().forEach(function(e){var t={};t.name=e.name;if(s){var r=n(t,e);if(!r){return}}t.label=e.label||e.name;t.tooltip=e.tooltip;if(a){t.group=e.group?e.group:"BASIC";t.groupLabel=e.groupLabel;a[t.group]=a[t.group]?a[t.group]:[];a[t.group].push(t)}o.push(t)});var u={items:o};if(a){u.itemsGrouped=this._buildGroupStructure(a)}return u},sortP13nData:function(e,t){var n=e;var r=n.position;var i=n.visible;var o=u.getLocale().toString();var a=window.Intl.Collator(o,{});t.sort(function(e,t){if(e[i]&&t[i]){return(e[r]||0)-(t[r]||0)}else if(e[i]){return-1}else if(t[i]){return 1}else if(!e[i]&&!t[i]){return a.compare(e.label,t.label)}})},_buildGroupStructure:function(e){var t=[];Object.keys(e).forEach(function(n){this.sortP13nData("generic",e[n]);t.push({group:n,groupLabel:e[n][0].groupLabel||c.getText("p13nDialog.FILTER_DEFAULT_GROUP"),groupVisible:true,items:e[n]})}.bind(this));return t},_isExcludeProperty:function(e,t){return t.some(function(t){var n=t.ignoreKey;var r=t.ignoreValue;return e[n]===r})},_checkSettings:function(e,t,n){if(!t){n("Please provide a settings object for p13n creation")}if(!t.title&&!t.customHeader){n("Please provide a title or customHeader in the settings object for p13n creation")}},arrayToMap:function(e){return e.reduce(function(e,t,n){e[t.name]=t;e[t.name].position=n;return e},{})},addRTACustomFieldButton:function(e,i){var o=false,a=e.getParent();if(i&&i.isA("sap.ui.comp.smarttable.SmartTable")){a=i}return sap.ui.getCore().loadLibrary("sap.ui.rta",{async:true}).then(function(){return new Promise(function(u){sap.ui.require(["sap/ui/rta/Utils"],function(l){var c=Promise.all([l.isServiceUpToDate(a),s.isExtensibilityEnabled(a)]);return c.then(function(e){o=!!e[1]}).then(function(){var c=e.getCustomHeader(),g=a&&a.getId?a.getId():undefined,f=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");if(!c){var d=new n({contentLeft:[new r({text:e.getTitle(),level:p.H1})]});e.setCustomHeader(d);c=e.getCustomHeader()}if(o){c.addContentRight(new t(g+"-addCustomField",{icon:"sap-icon://add",enabled:o,tooltip:f.getText("p13nDialog.rtaAddTooltip"),press:function(e){var t=l.getRtaStyleClassName(),n=e.getSource().getParent().getParent(),r=n.getParent();if(i&&i.isA("sap.ui.comp.smarttable.SmartTable")){r=i}s.onControlSelected(r).then(function(e){s.getExtensionData().then(function(e){s.onTriggerCreateExtensionData(e,t);n.close()})})}}));e.setCustomHeader(c);u(e)}})})})})}};return g});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/PersistenceProvider", ["sap/m/p13n/PersistenceProvider"],function(e){"use strict";return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/PropertyHelper", ["../util/PropertyHelper"],function(e){"use strict";var r=e.extend("sap.ui.mdc.p13n.PropertyHelper",{constructor:function(r,t){e.call(this,r,t,{filterable:true,sortable:true})}});r.prototype.validateProperties=function(){};r.prototype.prepareProperty=function(r){e.prototype.prepareProperty.apply(this,arguments);r.label=r.label||r.name};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/StateUtil", ["sap/m/p13n/Engine"],function(e){"use strict";var t={applyExternalState:function(t,n){var a=e.getInstance().internalizeKeys(t,n);return e.getInstance().applyState(t,a,false)},retrieveExternalState:function(t){return e.getInstance().retrieveState(t).then(function(n){return e.getInstance().externalizeKeys(t,n)})},resetState:function(t){var n=e.getInstance().getRegisteredControllers(t);return e.getInstance().reset(t,n)},diffState:function(t,n,a){return e.getInstance().diffState(t,e.getInstance().internalizeKeys(t,n),e.getInstance().internalizeKeys(t,a)).then(function(n){return e.getInstance().externalizeKeys(t,n)})},attachStateChange:function(t){e.getInstance().stateHandlerRegistry.attachChange(t)},detachStateChange:function(t){e.getInstance().stateHandlerRegistry.detachChange(t)}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/UIManager", ["sap/ui/base/Object","sap/ui/mdc/p13n/P13nBuilder","sap/m/p13n/Container","sap/m/p13n/AbstractContainerItem","sap/base/util/UriParameters","sap/base/Log","sap/ui/thirdparty/jquery"],function(t,e,n,i,r,o,jQuery){"use strict";var a="UIManager: This class is a singleton and should not be used without an AdaptationProvider. Please use 'sap.ui.mdc.p13n.Engine.getInstance().uimanager' instead";var s;var c=r.fromQuery(window.location.search);var u=t.extend("sap.ui.mdc.p13n.UIManager",{constructor:function(e){if(s){throw Error(a)}this.oAdaptationProvider=e;t.call(this)}});u.prototype.show=function(t,e,n){this.bLiveMode=false;if(c.get("sap-ui-xx-p13nLiveMode")==="true"){this.bLiveMode=true;o.warning("Please note that the p13n liveMode is experimental")}if(!this.hasActiveP13n(t)){this.setActiveP13n(t,e);return this.create(t,e).then(function(i){this._openP13nControl(t,e,i,n);return i}.bind(this),function(e){this.setActiveP13n(t,null);o.error("Engine UI failure:"+e.stack)}.bind(this))}else{return Promise.resolve()}};u.prototype.create=function(t,e,n){var i=e instanceof Array?e:[e];var r=typeof t=="string"?sap.ui.getCore().byId(t):t;return this.oAdaptationProvider.initAdaptation(t,i,n).then(function(){return this._retrieveP13nContainer(r,i).then(function(t){r.addDependent(t);return t})}.bind(this))};u.prototype._openP13nControl=function(t,e,n,i){var r=e instanceof Array?e:[e];if(this.bLiveMode){n.openBy(i);delete this.bLiveMode}else{n.open()}if(this.oAdaptationProvider&&this.oAdaptationProvider.validateP13n instanceof Function){r.forEach(function(e){var i=r.length>1;var o;var a=n.getContent()[0];if(i&&a.isA("sap.m.p13n.Container")&&a.getView(e)){o=a.getView(e).getContent()}else{o=a}this.oAdaptationProvider.validateP13n(t,e,o)}.bind(this))}};u.prototype._retrieveP13nContainer=function(t,e){var r=[];var o=e instanceof Array&&e.length>1;var a=this.oAdaptationProvider.getUISettings(t,e);e.forEach(function(t){if(!a[t]){e.splice(e.indexOf(t),1);return}});e.forEach(function(n){var i=a[n].adaptationUI;i._key=n;var o=i.then(function(n){if(this.bLiveMode&&n&&n.attachChange){n.attachChange(function(){this.oAdaptationProvider.handleP13n(t,e)}.bind(this))}if(n&&n.attachChange){n.attachChange(function(e){this.oAdaptationProvider.validateP13n(t,i._key,n)}.bind(this))}var r=a[i._key];return{key:i._key,tab:r.containerSettings&&r.containerSettings.tabText?r.containerSettings.tabText:i._key,panel:n}}.bind(this));r.push(o)}.bind(this));return Promise.all(r).then(function(r){var s=o?new n({afterViewSwitch:function(e){this.oAdaptationProvider.validateP13n(t,e.getParameter("target"),e.getSource().getCurrentViewContent())}.bind(this)}):r[0].panel;if(o){r.forEach(function(t){if(t.panel){s.addView(new i({key:t.key,text:t.tab,content:t.panel}))}});s.switchView(r[0].key)}return this._createUIContainer(t,e,s,a).then(function(t){return t})}.bind(this))};u.prototype._createUIContainer=function(t,e,n,i){var r;var o=e.length>1?this._getDefaultContainerConfig(i):i[e[0]];if(this.bLiveMode){r=this._createPopover(t,e,n,o)}else{r=this._createModalDialog(t,e,n,o)}return r.then(function(n){n.addStyleClass("sapUiMdcPersonalizationDialog");n.isPopupAdaptationAllowed=function(){return false};if(this.bLiveMode===false){n.setEscapeHandler(function(r){this.setActiveP13n(t,null);e.forEach(function(t){if(i[t].containerSettings&&i[t].containerSettings.afterClose instanceof Function){i[t].containerSettings.afterClose({getSource:function(){return n}})}});n.close();n.destroy();r.resolve()}.bind(this))}n.toggleStyleClass("sapUiSizeCompact",!!jQuery(t).closest(".sapUiSizeCompact").length);return n}.bind(this))};u.prototype._createPopover=function(t,n,i,r){var o=function(e){var n=e.getSource();this.setActiveP13n(t,null);n.destroy()}.bind(this);var a=Object.assign({verticalScrolling:true,reset:r.reset,afterClose:o},r.containerSettings);if(r.resetEnabled){a.reset={onExecute:function(){n.forEach(function(e){this.oAdaptationProvider.reset(t,e)}.bind(this))}}}return e.createP13nPopover(i,a)};u.prototype._createModalDialog=function(t,n,i,r){var o=function(e){var r=e.getSource().getParent();var o=this._confirmContainer(t,n,i);o.then(function(){this.setActiveP13n(t,null);r.close()}.bind(this))}.bind(this);var a=function(e){var n=e.getSource().getParent();this.setActiveP13n(t,null);n.close()}.bind(this);var s=Object.assign({verticalScrolling:true,reset:r.reset||{},afterClose:function(t){var e=t.getSource();if(e){e.destroy()}},cancel:a},r.containerSettings);if(r.resetEnabled){s.reset.onExecute=function(){this.oAdaptationProvider.reset(t,n)}.bind(this)}s.confirm={handler:function(t){o(t)}};return e.createP13nDialog(i,s)};u.prototype.setActiveP13n=function(t,e){if(this.oAdaptationProvider.setActiveP13n instanceof Function){this.oAdaptationProvider.setActiveP13n(t,e)}};u.prototype.hasActiveP13n=function(t){var e=false;if(this.oAdaptationProvider.hasActiveP13n instanceof Function){e=this.oAdaptationProvider.hasActiveP13n(t)}return e};u.prototype._getDefaultContainerConfig=function(t){var e=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var n=Object.keys(t);var i={containerSettings:{title:e.getText("p13nDialog.VIEW_SETTINGS"),verticalScrolling:false,contentHeight:t.contentHeight,contentWidth:t.contentWidth,afterClose:function(e){n.forEach(function(n){if(t[n]&&t[n].containerSettings&&t[n].containerSettings.afterClose instanceof Function){t[n].containerSettings.afterClose(e)}});e.getSource().destroy()}}};if(t.resetEnabled!==false){i.reset={onExecute:function(t){this.oAdaptationProvider.reset(t,n)}.bind(this),warningText:e.getText("p13nDialog.RESET_WARNING_TEXT")}}return i};u.prototype._confirmContainer=function(t,e){return this.oAdaptationProvider.handleP13n(t,e)};u._checkValidInterface=function(t){if(!t||!(t.isA("sap.ui.mdc.p13n.AdaptationProvider")||t.isA("sap.m.p13n.modules.AdaptationProvider"))){throw Error("The UIManager singleton must not be accessed without an AdaptationProvider interface!")}};u.getInstance=function(t){if(!s){this._checkValidInterface(t);s=new u(t)}return s};u.prototype.destroy=function(){t.prototype.destroy.apply(this,arguments);s=null};return u});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/panels/ActionToolbarPanel", ["sap/m/p13n/SelectionPanel","sap/ui/model/Sorter"],function(t,e){"use strict";var o=t.extend("sap.ui.mdc.p13n.panels.ActionToolbarPanel",{metadata:{library:"sap.ui.mdc"},renderer:{apiVersion:2}});o.prototype._bindListItems=function(t){var o=this.getAggregation("_template");if(o){var i=function(t){return t.getProperty("alignment")};var s=new e({path:"alignment",descending:false,group:i});this._oListControl.bindItems(Object.assign({path:this.P13N_MODEL+">/items",sorter:s,key:"name",templateShareable:false,template:this.getAggregation("_template").clone()},t))}};o.prototype._removeFactoryControl=function(){this._oListControl.getItems().filter(function(t){return!t._bGroupHeader}).forEach(function(t){var e=t.getCells()[0];if(e.getItems().length>1){e.removeItem(e.getItems()[1])}});this.removeStyleClass("sapUiMDCAFLabelMarkingList");return this._aInitializedFields};o.prototype._moveTableItem=function(t,e){var o=this._oListControl.getItems();var i=this._getP13nModel().getProperty("/items");var s=i.indexOf(this._getModelEntry(t));e=e<=0?0:Math.min(e,o.length-1);var r=i.indexOf(o[e].getBindingContext(this.P13N_MODEL).getObject());if(r==s){return}i.splice(r,0,i.splice(s,1)[0]);this._getP13nModel().setProperty("/items",i);this._oSelectedItem=this._oListControl.getItems()[e];this._updateEnableOfMoveButtons(this._oSelectedItem,true);this._handleActivated(this._oSelectedItem);this.fireChange({reason:"Move",item:this._getModelEntry(this._oSelectedItem)})};o.prototype._onPressButtonMoveToTop=function(){var t=this._oListControl.getItems().indexOf(this._oHoveredItem);while(!this._oListControl.getItems()[t-1]._bGroupHeader){t--}this._moveSelectedItem(t)};o.prototype._onPressButtonMoveToBottom=function(){var t=this._oListControl.getItems().indexOf(this._oHoveredItem);while(t<this._oListControl.getItems().length-1&&!this._oListControl.getItems()[t+1]._bGroupHeader){t++}this._moveSelectedItem(t)};o.prototype._onItemPressed=function(t){var e=t.getParameter("srcControl");if(!this._isControlPartOfMoveButtons(e)){var o=t.getParameter("listItem");this._oSelectedItem=o;var i=o.getBindingContext(this.P13N_MODEL);if(this.getEnableReorder()&&i&&i.getProperty(this.PRESENCE_ATTRIBUTE)){this._handleActivated(o);this._updateEnableOfMoveButtons(o,true)}}};o.prototype._isControlPartOfMoveButtons=function(t){var e=this._oSelectedItem?this._oSelectedItem.getCells()[1].getItems():[];var o=false;if(e.length>2){for(var i=2;i<e.length;i++){if(e[i]==t||e[i]==t.getParent()){o=true}}}return o};o.prototype._updateEnableOfMoveButtons=function(t,e){var o=this._oListControl.getItems().indexOf(t);var i=this._oListControl.getItems().length-1;var s=true,r=true;if(o==0){s=false}if(o==i){r=false}var n=this._oListControl.getItems().some(function(t){return t._bGroupHeader});if(n){if(o>0&&this._oListControl.getItems()[o-1]._bGroupHeader){s=false}if(o<i&&this._oListControl.getItems()[o+1]._bGroupHeader){r=false}}this._getMoveTopButton().setEnabled(s);this._getMoveUpButton().setEnabled(s);this._getMoveDownButton().setEnabled(r);this._getMoveBottomButton().setEnabled(r);if(e){t.focus()}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/panels/AdaptFiltersPanel", ["sap/m/p13n/AbstractContainer","sap/m/p13n/AbstractContainerItem","sap/m/p13n/SelectionPanel","./GroupView","sap/ui/model/Filter","sap/m/Button","sap/m/Bar","sap/m/ToolbarSpacer","sap/m/Select","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/SearchField","sap/m/OverflowToolbarLayoutData","sap/ui/core/Item","sap/m/library","sap/ui/model/json/JSONModel"],function(e,t,i,s,n,o,r,a,h,c,u,l,p,g,d,_){"use strict";var w=d.BarDesign;var y=e.extend("sap.ui.mdc.p13n.panels.AdaptFiltersPanel",{metadata:{library:"sap.ui.mdc",properties:{itemFactory:{type:"function"},enableReorder:{type:"boolean",defaultValue:true}}},renderer:{apiVersion:2}});y.prototype.GROUP_KEY="group";y.prototype.LIST_KEY="list";y.prototype.P13N_MODEL="$p13n";y.prototype.applySettings=function(n){this.addView(new t({key:this.LIST_KEY,content:new i(this.getId()+"-listView",{activeColumn:this._getResourceText("p13nDialog.LIST_VIEW_ACTIVE"),change:function(e){this.getP13nModel().setProperty("/items",e.getSource().getP13nData())}.bind(this)})}));this.addView(new t({key:this.GROUP_KEY,content:new s(this.getId()+"-groupView",{change:function(e){this.getP13nModel().setProperty("/itemsGrouped",e.getSource().getP13nData())}.bind(this)})}));e.prototype.applySettings.apply(this,arguments);this.getView(this.LIST_KEY).getContent().setEnableReorder(this.getEnableReorder());var o=this._getQuickFilter();var h=this._getViewSwitch();var c=this._getShowHideBtn();var u=new r({contentMiddle:[o,new a,c,h]});u.setDesign(w.SubHeader);this.setHeader(u);var l=new r({contentMiddle:[this._getSearchField()]});l.addStyleClass("sapUiMDCAdaptFiltersSearchBar");l.setDesign(w.SubHeader);this.setSubHeader(l);this.addStyleClass("sapUiMDCAdaptFiltersPanel")};y.prototype.setItemFactory=function(e){this.setProperty("itemFactory",e);this.getViews().forEach(function(t){var i=t.getContent();i.setItemFactory(e)});return this};y.prototype.switchView=function(t){var i=t;e.prototype.switchView.call(this,i);this._getShowHideBtn().setVisible(!this._isCustomView());this._getViewSwitch().setSelectedKey(this.getCurrentViewKey());if(!this._isCustomView(t)){this.showFactory(this.getCurrentViewContent()._getShowFactory())}this._filterByModeAndSearch()};y.prototype.addCustomView=function(e){var i=e.item;var s=i.getKey();var n=e.content;var o=e.search;var r=e.selectionChange;var a=e.filterSelect;if(!s){throw new Error("Please provide an item of type sap.m.SegmentedButtonItem with a key")}if(this._oViewSwitch){this._oViewSwitch.attachSelectionChange(function(e){if(r){r(e.getParameter("item").getKey())}if(this._isCustomView()){if(o instanceof Function){o(this._getSearchField().getValue())}if(a instanceof Function){a(this._getQuickFilter().getSelectedKey())}}}.bind(this))}if(o instanceof Function){this._getSearchField().attachLiveChange(function(e){if(this._isCustomView()){o(this._getSearchField().getValue())}}.bind(this))}if(a instanceof Function){this._getQuickFilter().attachChange(function(e){if(this._isCustomView()){a(this._getQuickFilter().getSelectedKey())}}.bind(this))}this.addView(new t({key:s,content:n.addStyleClass("sapUiMDCPanelPadding")}));var h=this._getViewSwitch();h.addItem(i)};y.prototype.showFactory=function(e){if(this.getCurrentViewContent().showFactory){this.getCurrentViewContent().showFactory(e)}};y.prototype.getSelectedFields=function(){return this.getCurrentViewContent().getSelectedFields()};y.prototype.setGroupExpanded=function(e,t){this.getView(this.GROUP_KEY).getContent().setGroupExpanded(e,t)};y.prototype.setP13nModel=function(e){this.setModel(e,this.P13N_MODEL);this.getView(this.LIST_KEY).getContent().setP13nData(e.getProperty("/items"));this.getView(this.GROUP_KEY).getContent().setP13nData(e.getProperty("/itemsGrouped"));this._filterByModeAndSearch()};y.prototype.setP13nData=function(e){var t=this.getP13nModel();if(!t){this.setP13nModel(new _(e))}else{t.setData(e);this.getView(this.LIST_KEY).getContent().setP13nData(t.getProperty("/items"));this.getView(this.GROUP_KEY).getContent().setP13nData(t.getProperty("/itemsGrouped"))}};y.prototype.restoreDefaults=function(){this._getSearchField().setValue("");this._filterByModeAndSearch()};y.prototype.getP13nModel=function(){return this.getModel(this.P13N_MODEL)};y.prototype._getShowHideBtn=function(){var e=this._getResourceText("filterbar.ADAPT_SHOW_VALUE");var t=this._getResourceText("filterbar.ADAPT_HIDE_VALUE");if(!this._oShowHideBtn){this._oShowHideBtn=new o({press:function(i){this.showFactory(!this.getCurrentViewContent()._getShowFactory());var s=i.oSource;var n=s.getText()===e?t:e;s.setText(n)}.bind(this)})}this._oShowHideBtn.setText(!this._isCustomView()&&this.getCurrentViewContent()._getShowFactory()?t:e);return this._oShowHideBtn};y.prototype._getQuickFilter=function(){if(!this._oGroupModeSelect){this._oGroupModeSelect=new h({items:[new g({key:"all",text:this._getResourceText("p13nDialog.GROUPMODE_ALL")}),new g({key:"visible",text:this._getResourceText("p13nDialog.GROUPMODE_VISIBLE")}),new g({key:"active",text:this._getResourceText("p13nDialog.GROUPMODE_ACTIVE")}),new g({key:"visibleactive",text:this._getResourceText("p13nDialog.GROUPMODE_VISIBLE_ACTIVE")}),new g({key:"mandatory",text:this._getResourceText("p13nDialog.GROUPMODE_MANDATORY")})],tooltip:this._getResourceText("p13nDialog.QUICK_FILTER"),change:this._onGroupModeChange.bind(this)})}return this._oGroupModeSelect};y.prototype._getSearchField=function(){if(!this._oSearchField){this._oSearchField=new l(this.getId()+"-searchField",{liveChange:[this._filterByModeAndSearch,this],width:"100%"});this._oSearchField.setPlaceholder(this._getResourceText("p13nDialog.ADAPT_FILTER_SEARCH"))}return this._oSearchField};y.prototype.getInitialFocusedControl=function(){return this._getSearchField()};y.prototype._onGroupModeChange=function(e){this._sModeKey=e.getParameters().selectedItem.getKey();this._filterByModeAndSearch()};y.prototype._getViewSwitch=function(){if(!this._oViewSwitch){this._oViewSwitch=new c({items:[new u({tooltip:this._getResourceText("filterbar.ADAPT_LIST_VIEW"),icon:"sap-icon://list",key:this.LIST_KEY}),new u({tooltip:this._getResourceText("filterbar.ADAPT_GROUP_VIEW"),icon:"sap-icon://group-2",key:this.GROUP_KEY})],selectionChange:function(e){if(this.getCurrentViewKey()===this.LIST_KEY){this.getCurrentViewContent()._removeMoveButtons()}var t=e.getParameter("item").getKey();this.switchView(t)}.bind(this)})}return this._oViewSwitch};y.prototype._isCustomView=function(){return this._sCurrentView!=this.GROUP_KEY&&this._sCurrentView!=this.LIST_KEY};y.prototype._filterByModeAndSearch=function(){if(this._isCustomView(this.getCurrentViewKey())){return}this._sSearchString=this._getSearchField().getValue();var e=this._createFilterQuery();this._getSearchField().setValue(this._sSearchString);this.getCurrentViewContent().filterContent(e);return e};y.prototype._getResourceText=function(e){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText(e)};y.prototype._createFilterQuery=function(){var e=[],t=[],i=[];if(this._sSearchString){e=[new n("label","Contains",this._sSearchString),new n("tooltip","Contains",this._sSearchString)];i=new n(e,false)}switch(this._sModeKey){case"visible":t=new n("visible","EQ",true);break;case"active":t=new n("active","EQ",true);break;case"mandatory":t=new n("required","EQ",true);break;case"visibleactive":t=new n([new n("active","EQ",true),new n("visible","EQ",true)],true);break;default:}var s=new n("visibleInDialog","EQ",true);return new n([].concat(i,t,s),true)};y.prototype.exit=function(){e.prototype.exit.apply(this,arguments);this._sModeKey=null;this._sSearchString=null};return y});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/panels/ChartItemPanel", ["sap/m/p13n/BasePanel","sap/m/Label","sap/m/ColumnListItem","sap/m/Select","sap/m/Text","sap/ui/core/Item","sap/ui/mdc/library","sap/m/Button","sap/m/Column","sap/m/Table","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/VBox","sap/m/HBox","sap/m/ComboBox","sap/ui/model/Sorter","sap/base/Log","sap/m/library","sap/ui/Device","sap/ui/core/ResizeHandler","sap/ui/core/CustomData","sap/ui/thirdparty/jquery","sap/ui/core/library","sap/ui/events/KeyCodes"],function(e,t,i,o,n,r,s,a,l,h,p,u,g,d,m,_,f,c,v,I,y,jQuery,M,b){"use strict";var P=M.ValueState;var C=c.FlexJustifyContent;var O=sap.ui.getCore();var B=e.extend("sap.ui.mdc.p13n.panels.ChartItemPanel",{metadata:{library:"sap.ui.mdc",properties:{panelConfig:{type:"object"}},events:{changeItems:{}}},init:function(){this._bMobileMode=v.system.phone;e.prototype.init.apply(this,arguments);this._bindListItems()},renderer:{apiVersion:2}});B.prototype._setInnerLayout=function(){this._oInnerControl=new g({items:[this._oListControl]});this.setAggregation("_content",this._oInnerControl);this._fnHandleResize=function(){if(this.getParent){var e=null;var t=this.getParent();if(t&&t.$){e=t.$("cont");if(e.children().length>0){var i=this._oInnerControl.$()[0].clientWidth;var o=570;if(!this._bMobileMode&&i<=o){this._switchMobileMode(true)}else if(this._bMobileMode&&i>o){this._switchMobileMode(false)}}}}};if(v.system.desktop){this._sContainerResizeListener=I.register(this._oInnerControl,this._fnHandleResize.bind(this))}};B.prototype._switchMobileMode=function(e){if(this._bMobileMode==e){return}this._bMobileMode=e;if(this._sContainerResizeListener){I.deregister(this._sContainerResizeListener);this._sContainerResizeListener=null}this._oListControl.destroy();this._oDragDropInfo=null;this._oListControl=this._createInnerListControl();this._oListControl.setMultiSelectMode("ClearAll");this._setInnerLayout();this._bindListItems()};B.prototype._createInnerListControl=function(){var e=this._bMobileMode?this.getId()+"-innerP13nListMobile":this.getId()+"-innerP13nList";var t=new h(e,Object.assign(this._getListControlConfig(),{}));this.setEnableReorder(true);t.addEventDelegate({onAfterRendering:this._onAfterTableRender.bind(this)});return t};B.prototype._onAfterTableRender=function(){if(this._oFocusInfo&&this._oFocusInfo.tableItem){this._oFocusInfo.tableItem.focus()}this._mInvalidMap.forEach(function(e,t){if(this._mNamesMap.has(t)){this._mNamesMap.get(t).setValueState(P.Error);this._mNamesMap.get(t).setValue(e)}}.bind(this));this._oFocusInfo=null};B.prototype._bindListItems=function(e){var t;var i=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");if(this.getPanelConfig()&&this.getPanelConfig().sorter){t=this.getPanelConfig().sorter}else{var o={text:i.getText("chart.PERSONALIZATION_DIALOG_MEASURE_GROUP_HEADER")};var n={text:i.getText("chart.PERSONALIZATION_DIALOG_DIMENSION_GROUP_HEADER")};var r={Aggregatable:o,Groupable:n,Measure:o,Dimension:n};var s=function(e){var t=e.getProperty("kind");return{key:t,text:r[t].text}};var a=function(e,t){if(e===t){return 0}if(e==="MEASURE"||e==="AGGREGATABLE"){return 1}return-1};t=new _("kind",false,s,a)}var l;this._mTemplatesMap=new Map;this._mNamesMap=new Map;this._mInvalidMap=new Map;if(this._bMobileMode){l=this._createListItemMobile}else{l=this._createListItem}this._oListControl.bindItems(Object.assign({path:this.P13N_MODEL+">/items",key:"name",filters:[new p({filters:[new p("visible",u.EQ,true),new p("template",u.EQ,true)],and:false})],factory:l.bind(this),sorter:t},e))};B.prototype._getTemplateComboBox=function(e){var t=new p("visible",u.EQ,false);var i=new window.Intl.Collator;var o=function(e,t){return i.compare(e,t)};var n=new _("label",false,false,o);var s=new m({id:"p13nPanel-templateComboBox-"+e,width:"100%",placeholder:this._getPlaceholderTextForTemplate(e),items:{path:this.P13N_MODEL+">/items",template:new r({key:"{"+this.P13N_MODEL+">name}",text:"{"+this.P13N_MODEL+">label}"}),templateShareable:false,filters:[t,new p("kind",u.EQ,e)],sorter:n},change:[this.onChangeOfTemplateName,this]});this._mTemplatesMap.set(e,s);return s};B.prototype._getPlaceholderTextForTemplate=function(e){var t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");return t.getText("chart.PERSONALIZATION_DIALOG_TEMPLATE_PLACEHOLDER")};B.prototype._getRoleSelect=function(){return new o({width:"100%",selectedKey:"{"+this.P13N_MODEL+">role}",change:[this.onChangeOfRole,this],forceSelection:false,items:{path:this.P13N_MODEL+">availableRoles",templateShareable:false,template:new r({key:"{"+this.P13N_MODEL+">key}",text:"{"+this.P13N_MODEL+">text}"})},visible:{path:this.P13N_MODEL+">availableRoles",formatter:function(e){if(!e){return false}return e.length>1}}})};B.prototype._getNameComboBox=function(e,t){var i=new window.Intl.Collator;var o=function(e,t){return i.compare(e,t)};var n=new _("label",false,false,o);var s=new p({filters:[new p("visible",u.EQ,false),new p("name",u.EQ,t)],and:false});return new m({width:"100%",items:{path:this.P13N_MODEL+">/items",factory:function(e,t){return new r({key:t.getObject().name,text:t.getObject().label})},templateShareable:false,filters:[s,new p("kind",u.EQ,e)],sorter:n},change:[this.onChangeOfItemName,this],selectedKey:"{"+this.P13N_MODEL+">tempName}",customData:[new y({key:"prevName",value:t}),new y({key:"prevKind",value:e})]})};B.prototype._createListItem=function(e,t){var o,n=[];if(t.getObject()&&t.getObject().template){n.push(this._getTemplateComboBox(t.getObject().kind))}else{var r;if(t.getObject().name!=t.getObject().tempName){t.getObject().tempName=t.getObject().name}r=this._getNameComboBox(t.getObject().kind,t.getObject().name);n.push(r);n.push(this._getRoleSelect());o=this.getId()+t.getObject().kind+"-RemoveBtn-"+t.getObject().name;n.push(new d({justifyContent:C.End,items:[new a({id:o,press:[this._onPressHide,this],type:"Transparent",icon:"sap-icon://decline",tooltip:this._getResourceTextMDC("chart.PERSONALIZATION_DIALOG_REMOVE_ENTRY"),customData:[new y({key:"propertyName",value:"{"+this.P13N_MODEL+">name}"}),new y({key:"propertyKind",value:"{"+this.P13N_MODEL+">kind}"})]})]}));this._mNamesMap.set(t.getObject().name,r)}var s;if(t.getObject()&&t.getObject().template){var l=t.getObject().kind;s=new i({cells:n,visible:{path:this.P13N_MODEL+">/items",formatter:function(e){e=e.filter(function(e){return e.visible===false&&e.template===false&&e.kind===l});return e.length!=0}}})}else{s=new i({cells:n})}s.addEventDelegate({onmouseover:this._hoverHandler.bind(this),onfocusin:this._focusHandler.bind(this),onkeydown:this._keydownHandler.bind(this)});return s};B.prototype._createListItemMobile=function(e,t){var o,n=[];if(t.getObject()&&t.getObject().template){n.push(this._getTemplateComboBox(t.getObject().kind))}else{var r=new g({items:[this._getNameComboBox(t.getObject().kind,t.getObject().name),this._getRoleSelect()]});o=t.getObject().kind+"-RemoveBtn-"+t.getObject().name;n.push(r)}var s=new d({justifyContent:C.End,items:[new a({id:o,press:[this._onPressHide,this],type:"Transparent",icon:"sap-icon://decline",visible:{path:this.P13N_MODEL+">template",formatter:function(e){return!e}},customData:[new y({key:"propertyName",value:"{"+this.P13N_MODEL+">name}"}),new y({key:"propertyKind",value:"{"+this.P13N_MODEL+">kind}"})]})]});n.push(s);var l;if(t.getObject()&&t.getObject().template){var h=t.getObject().kind;l=new i({cells:n,visible:{path:this.P13N_MODEL+">/items",formatter:function(e){e=e.filter(function(e){return e.visible===false&&e.template===false&&e.kind===h});return e.length!=0}}})}else{l=new i({cells:n})}l.addEventDelegate({onmouseover:this._hoverHandler.bind(this),onfocusin:this._focusHandler.bind(this),onkeydown:this._keydownHandler.bind(this)});return l};B.prototype._keydownHandler=function(t){if((t.metaKey||t.ctrlKey)&&t.keyCode===b.D){var i,o=O.byId(t.currentTarget.id);if(this._bMobileMode){i=o.getCells()[1].getItems()[o.getCells()[1].getItems().length-1]}else{i=o.getCells()[2].getItems()[o.getCells()[2].getItems().length-1]}if(i){this._onPressHide(t,i);t.preventDefault()}}else{e.prototype._keydownHandler.apply(this,arguments)}};B.prototype._focusHandler=function(t){var i=O.byId(t.target.id);if(i instanceof a){return}e.prototype._focusHandler.apply(this,arguments)};B.prototype._handleActivated=function(e){var t=this._getModelItemByTableItem(e);if(t&&t.template){this.removeMoveButtons()}this._oHoveredItem=e;this._updateEnableOfMoveButtons(e,false);this._addMoveButtons(e);this._setMoveButtonVisibility(true)};B.prototype.onChangeOfItemName=function(e){var t=e.getSource().data().prevName;var i=e.getSource().data().prevKind;var o=e.getSource().getSelectedKey();var n=this._getP13nModel().getProperty("/items").find(function(e){return e.name===t&&e.kind===i});var r=this._getP13nModel().getProperty("/items").find(function(e){return e.name===o&&e.kind===i});this.removeMoveButtons();if(n&&r){n.visible=false;r.visible=true;n.tempName=n.name;r.role=n.role;this._moveItemsByIndex(this._getItemIndex(r),this._getItemIndex(n));this._refreshP13nModel();this._fireChangeItems();this._updateVisibleIndexes();this._mInvalidMap.delete(t);this._mInvalidMap.delete(o)}else if(e.getSource()&&e.getSource()instanceof m){this._mInvalidMap.set(e.getSource().data("prevName"),e.getSource().getValue());e.getSource().setValueState(P.Error)}};B.prototype._getItemIndexByNameAndKind=function(e,t){var i=this._getP13nModel().getProperty("/items");var o=i.find(function(i){return i.name===e&&i.kind===t&&!i.template});return this._getItemIndex(o)};B.prototype._getItemIndex=function(e){return this._getP13nModel().getProperty("/items").indexOf(e)};B.prototype.removeMoveButtons=function(){var e=this._getMoveButtonContainer();if(e){e.removeItem(this._getMoveBottomButton());e.removeItem(this._getMoveDownButton());e.removeItem(this._getMoveUpButton());e.removeItem(this._getMoveTopButton())}};B.prototype.getP13nData=function(){var e=this._getCleanP13nItems();this._getP13nModel().setProperty("/items",e);return e};B.prototype._getMoveButtonContainer=function(){if(this._oMoveUpButton&&this._oMoveUpButton.getParent()&&this._oMoveUpButton.getParent().isA("sap.m.FlexBox")){return this._oMoveUpButton.getParent()}return undefined};B.prototype._addMoveButtons=function(e){var t=e;if(!t){return}var i=this._getP13nModel().getProperty(t.getBindingContextPath())?this._getP13nModel().getProperty(t.getBindingContextPath()).template:true;if(t.getCells()&&(t.getCells().length===2||t.getCells().length===3)&&!i){if(this._bMobileMode){t.getCells()[1].insertItem(this._getMoveDownButton(),0);t.getCells()[1].insertItem(this._getMoveUpButton(),0)}else{t.getCells()[2].insertItem(this._getMoveBottomButton(),0);t.getCells()[2].insertItem(this._getMoveDownButton(),0);t.getCells()[2].insertItem(this._getMoveUpButton(),0);t.getCells()[2].insertItem(this._getMoveTopButton(),0)}}};B.prototype._moveSelectedItem=function(){this._oSelectedItem=this._getMoveButtonContainer().getParent();e.prototype._moveSelectedItem.apply(this,arguments)};B.prototype._updateAvailableRolesForItems=function(){var e=this._getP13nModel().getProperty("/items");var t=[];if(this.getPanelConfig()&&this.getPanelConfig().allowedLayoutOptions){t=this.getPanelConfig().allowedLayoutOptions}else{f.warning("No allowedLayoutOptions configured for chart type. This will not show any p13n options!")}e.forEach(function(e){if(!e.availableRoles){return}e.availableRoles=e.availableRoles.filter(function(e){return t.indexOf(e.key)!=-1})});this._getP13nModel().setProperty("/items",e);this._refreshP13nModel()};B.prototype._onPressHide=function(e,t){var i;if(t){i=t.data().propertyName}else{i=e.getSource().data().propertyName}var o=jQuery.extend([],this._getP13nModel().getProperty("/items"),true);o.filter(function(e){return e.name===i}).forEach(function(e){e.visible=false;if(this._mTemplatesMap.has(e.kind)&&this._mTemplatesMap.get(e.kind).getVisible()){this._mTemplatesMap.get(e.kind).focus()}}.bind(this));this._getP13nModel().setProperty("/items",o);this._refreshP13nModel();this._fireChangeItems();this._updateVisibleIndexes()};B.prototype.setP13nData=function(t){t=t.filter(function(e){return!e.template});e.prototype.setP13nData.apply(this,arguments);var i=[];var o=[];this.getP13nData().forEach(function(e,t){if(!e.availableRoles){e.availableRoles=this._getChartItemTextByKey(e.kind)}if(this.getPanelConfig()&&this.getPanelConfig().allowedLayoutOptions){var n=this.getPanelConfig().allowedLayoutOptions;if(n&&n.length>=1){e.availableRoles=e.availableRoles.filter(function(e){return n.indexOf(e.key)!=-1});if(n.indexOf(e.role)===-1){e.role=n[0]}}}e.template=false;e.tempName=e.name;if(!e.visible){o.push(e)}if(!e.index){e.index=t}i.push(e)}.bind(this));i=i.concat(this._getTemplateItems());this._getP13nModel().setProperty("/items",i);this._updateVisibleIndexes()};B.prototype._updateVisibleIndexes=function(){this._mVisibleIndexes=new Map;this._getP13nModel().getProperty("/items").forEach(function(e,t){if(e.template||!e.visible){return}if(this._mVisibleIndexes.has(e.kind)){this._mVisibleIndexes.get(e.kind).push(t)}else{var i=[t];this._mVisibleIndexes.set(e.kind,i)}}.bind(this))};B.prototype.onChangeOfTemplateName=function(e){var t=e.getSource().getSelectedKey();var i=this._getCleanP13nItems().find(function(e){return e.name===t});if(i){i.visible=true;e.getSource().setSelectedKey(undefined);this._refreshP13nModel();var o=this._mVisibleIndexes.has(i.kind)?this._mVisibleIndexes.get(i.kind):[];var n=this._getItemIndexByNameAndKind(i.name,i.kind);var r=o[o.length-1];if(n>r){r+=1}if(r&&n!=r){this._moveItemsByIndex(n,r,true)}else{this._fireChangeItems()}this._mInvalidMap.delete(e.getSource().getValue());this._updateVisibleIndexes()}else if(e.getSource()&&e.getSource()instanceof m){if(e.getSource().getValue()!=""){e.getSource().setValueState(P.Error)}else{e.getSource().setValueState(P.None)}}};B.prototype._refreshP13nModel=function(){this._getP13nModel().refresh(true)};B.prototype._getTemplateItems=function(){var e=[];if(!this.getPanelConfig()||!this.getPanelConfig().templateConfig){return[]}this.getPanelConfig().templateConfig.forEach(function(t){var i={template:true,kind:t.kind};e.push(i)});return e};B.prototype._getListControlConfig=function(){var t=e.prototype._getListControlConfig.apply(this,arguments);if(this._bMobileMode){t.columns=[new l({header:new n({text:this._getResourceTextMDC("chart.PERSONALIZATION_DIALOG_COLUMN_DESCRIPTION")+" / "+this._getResourceTextMDC("chart.PERSONALIZATION_DIALOG_COLUMN_ROLE")})}),new l]}else{var i=new l({header:new n({text:this._getResourceTextMDC("chart.PERSONALIZATION_DIALOG_COLUMN_DESCRIPTION")})});var o=new l({header:new n({text:this._getResourceTextMDC("chart.PERSONALIZATION_DIALOG_COLUMN_ROLE")})});t.columns=[i,o,new l]}t.mode="None";return t};B.prototype._getCleanP13nItems=function(){return this._getP13nModel().getProperty("/items").filter(function(e){return!e.template})};B.prototype._fireChangeItems=function(){this.fireChangeItems({items:this._getCleanP13nItems().map(function(e){return{columnKey:e.name,visible:e.visible,index:e.index,role:e.role}})})};B.prototype.onChangeOfRole=function(e){var t=e.getParameter("selectedItem");if(t){var i;if(this._bMobileMode){i=e.getSource().getParent().getParent()}else{i=e.getSource().getParent()}this.fireChange();this._updateEnableOfMoveButtons(i)}this._fireChangeItems()};B.prototype._updateEnableOfMoveButtons=function(e,t){if(!e){return}var i,o=this._getModelItemByTableItem(e);var n=this._getP13nModel().getProperty("/items").indexOf(o);var r=true,s=true;if(!o||o.template){return}i=this._mVisibleIndexes.has(o.kind)?this._mVisibleIndexes.get(o.kind):[];if(n==0||i.indexOf(n)===0){r=false}if(i.indexOf(n)===i.length-1){s=false}this._getMoveTopButton().setEnabled(r);this._getMoveUpButton().setEnabled(r);this._getMoveDownButton().setEnabled(s);this._getMoveBottomButton().setEnabled(s);if(t){this._oFocusInfo={tableItem:e}}};B.prototype._getListItemFromMoveButton=function(e){if(e&&e.getParent()&&e.getParent().getParent()){return e.getParent().getParent()}return undefined};B.prototype._onPressButtonMoveToTop=function(e){var t=this._getListItemFromMoveButton(e.getSource());if(!t){return}var i=this._getP13nModel().getProperty(t.getBindingContextPath());var o=this._mVisibleIndexes.get(i.kind)[0];this._oSelectedItem=t;this._moveSelectedItem(o)};B.prototype._onPressButtonMoveUp=function(e,t){if(!t){t=this._getListItemFromMoveButton(e.getSource())}if(!t){return}var i=this._getP13nModel().getProperty(t.getBindingContextPath());var o=this._mVisibleIndexes.get(i.kind);var n=this._getP13nModel().getProperty("/items").indexOf(i);this._oSelectedItem=t;var r=o[o.indexOf(n)-1];this._moveSelectedItem(r)};B.prototype._onPressButtonMoveDown=function(e,t){if(!t){t=this._getListItemFromMoveButton(e.getSource())}if(!t){return}var i=this._getP13nModel().getProperty(t.getBindingContextPath());var o=this._mVisibleIndexes.get(i.kind);var n=this._getP13nModel().getProperty("/items").indexOf(i);this._oSelectedItem=t;var r=o[o.indexOf(n)+1];this._moveSelectedItem(r)};B.prototype._onPressButtonMoveToBottom=function(e){var t=this._getListItemFromMoveButton(e.getSource());if(!t){return}var i=this._getP13nModel().getProperty(t.getBindingContextPath());var o=this._mVisibleIndexes.get(i.kind)[this._mVisibleIndexes.get(i.kind).length-1];this._oSelectedItem=t;this._moveSelectedItem(o)};B.prototype._moveTableItem=function(e,t){var i=this._getP13nModel().getProperty("/items");var o=i.indexOf(e.getBindingContext(this.P13N_MODEL).getObject());this._moveItemsByIndex(o,t)};B.prototype._moveItemsByIndex=function(e,t,i){var o=this._getP13nModel().getProperty("/items");t=t<=0?0:Math.min(t,o.length-1);if(t==e){return}o.splice(t,0,o.splice(e,1)[0]);o.forEach(function(e,t){if(!e.template){e.index=t}});this._getP13nModel().setProperty("/items",o);if(!i){this._oSelectedItem=this._oListControl.getItems().find(function(e){var i=this._getModelItemByTableItem(e);return i&&i===o[t]}.bind(this));this._updateEnableOfMoveButtons(this._oSelectedItem,!i);this._handleActivated(this._oSelectedItem)}this._fireChangeItems()};B.prototype._getModelItemByTableItem=function(e){return this._getP13nModel().getProperty(e.getBindingContextPath())};B.prototype._getMoveConfigForTableItem=function(e){var t=this._getModelItemByTableItem(e);if(!t){return undefined}return{currentIndex:this._getP13nModel().getProperty("/items").indexOf(t),aggregationRole:t.kind,template:t.template}};B.prototype._getDragDropConfig=function(){if(!this._oDragDropInfo){var t=e.prototype._getDragDropConfig.apply(this,arguments);t.attachDragStart(this._checkDragStart.bind(this));t.attachDragEnter(this._checkDrag.bind(this));t.attachDragEnd(function(){this._oDraggedItem=null}.bind(this));return t}return this._oDragDropInfo};B.prototype._checkDrag=function(e){var t=e.getParameter("target");var i=this._getMoveConfigForTableItem(t);var o=this._getMoveConfigForTableItem(this._oDraggedItem);if(!i||i.template||o.aggregationRole!=i.aggregationRole){e.preventDefault();return}};B.prototype._checkDragStart=function(e){this._oDraggedItem=e.getParameter("target");this._checkDrag(e)};B.prototype._onRearrange=function(e){var t=e.getParameter("draggedControl");var i=e.getParameter("droppedControl");var o=e.getParameter("dropPosition");var n=this._getMoveConfigForTableItem(t);var r=this._getMoveConfigForTableItem(i);if(!n||n.template||!r){e.preventDefault();return}var s=n.currentIndex;var a=r.currentIndex;if(r.template&&o=="After"){e.preventDefault();return}if(!r.template&&(n.aggregationRole!=undefined&&n.aggregationRole!=r.aggregationRole)){e.preventDefault();return}if(s<a){if(o=="Before"&&a!=0){a-=1}}else if(o=="After"){a+=1}this._moveItemsByIndex(s,a);this._refreshP13nModel();this._updateVisibleIndexes()};B.prototype._getMoveTopButton=function(){if(this._oMoveTopButton&&this._oMoveTopButton.isDestroyed()){this._oMoveTopButton=null}return e.prototype._getMoveTopButton.apply(this,arguments)};B.prototype._getMoveUpButton=function(){if(this._oMoveUpButton&&this._oMoveUpButton.isDestroyed()){this._oMoveUpButton=null}return e.prototype._getMoveUpButton.apply(this,arguments)};B.prototype._getMoveDownButton=function(){if(this._oMoveDownButton&&this._oMoveDownButton.isDestroyed()){this._oMoveDownButton=null}return e.prototype._getMoveDownButton.apply(this,arguments)};B.prototype._getMoveBottomButton=function(){if(this._oMoveBottomButton&&this._oMoveBottomButton.isDestroyed()){this._oMoveBottomButton=null}return e.prototype._getMoveBottomButton.apply(this,arguments)};B.prototype._getChartItemTextByKey=function(e){var t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var i={Dimension:[{key:s.ChartItemRoleType.category,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_CATEGORY")},{key:s.ChartItemRoleType.category2,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_CATEGORY2")},{key:s.ChartItemRoleType.series,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_SERIES")}],Measure:[{key:s.ChartItemRoleType.axis1,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS1")},{key:s.ChartItemRoleType.axis2,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS2")},{key:s.ChartItemRoleType.axis3,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS3")}]};return i[e]};B.prototype._getResourceTextMDC=function(e,t){this.oResourceBundleMDC=this.oResourceBundleMDC?this.oResourceBundleMDC:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");return e?this.oResourceBundleMDC.getText(e,t):this.oResourceBundleMDC};B.prototype.exit=function(){this._fnSort=null;this.oResourceBundleMDC=null;this._bMobileMode=null;return e.prototype.exit.apply(this,arguments)};return B});
/*!
* OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/p13n/panels/FilterPanel", ["sap/m/p13n/QueryPanel","sap/m/VBox","sap/m/Text","sap/ui/layout/Grid","sap/ui/layout/GridData","sap/m/ComboBox","sap/ui/core/library","sap/m/library","sap/m/Label"],function(t,e,o,r,n,a,i,s,p){"use strict";var c=i.ValueState;var l=s.ListKeyboardMode;var u=s.FlexJustifyContent;var y=t.extend("sap.ui.mdc.p13n.panels.FilterPanel",{metadata:{library:"sap.ui.mdc",properties:{itemFactory:{type:"function"}}},renderer:{apiVersion:2}});y.prototype.PRESENCE_ATTRIBUTE="active";y.prototype._createInnerListControl=function(){var e=t.prototype._createInnerListControl.apply(this,arguments);e.setKeyboardMode(l.Edit);return e};y.prototype._createQueryRowGrid=function(t){var e=t.name?this._createRowContainer(t.label,t.key):this._createKeySelect(t.name);var o=[e];if(t.name){o.push(this._createFactoryControl(t))}return new r({containerQuery:true,defaultSpan:"XL4 L4 M4 S4",content:o}).addStyleClass("sapUiTinyMargin")};y.prototype._getPlaceholderText=function(){return this._getResourceText("p13n.FILTER_PLACEHOLDER")};y.prototype._getRemoveButtonTooltipText=function(){return this._getResourceText("p13n.FILTER_REMOVEICONTOOLTIP")};y.prototype._createKeySelect=function(t){var e=new a({width:"100%",items:this._getAvailableItems(),placeholder:this._getPlaceholderText(),selectionChange:function(t){var e=t.getSource();this._selectKey(e)}.bind(this),change:function(t){var e=t.getSource();var o=t.getParameter("newValue");e.setValueState(o&&!e.getSelectedItem()?c.Error:c.None);this._selectKey()}.bind(this)});return e};y.prototype._createRemoveButton=function(e){var o=t.prototype._createRemoveButton.apply(this,arguments);o.setJustifyContent(u.Start);o.setLayoutData(new n({span:"XL1 L1 M1 S1"}));return o};y.prototype._createRowContainer=function(t,o){var r=new p({text:t,showColon:true,wrapping:true});var n=new e({items:[r.addStyleClass("sapUiTinyMarginBegin")]});n._key=o;return n};y.prototype._setLabelForOnBox=function(t,e){e.getItems()[0].setLabelFor(t)};y.prototype._selectKey=function(e){var o,r;if(e){this._oComboBox=e;o=e.getParent();r=e.getSelectedKey()}else if(this._oComboBox){e=this._oComboBox;o=e.getParent();r=e.getSelectedKey();if(r){t.prototype._selectKey.call(this,e);var n=o.getContent()[0];o.removeContent(n);var a=r?e.getSelectedItem().getText():"";var i=this._createRowContainer(a,r);o.insertContent(i,0);var s=this._createFactoryControl({name:r});this._setLabelForOnBox(s,i);o.insertContent(s,1)}setTimeout(function(){if(this._oListControl&&!this._oListControl.bIsDestroyed){this._oListControl.setKeyboardMode(l.Edit)}}.bind(this),20);delete this._oComboBox}};y.prototype._getFactoryControlForRow=function(t){return t.getContent()[0].getContent()[1]};y.prototype._createFactoryControl=function(t){var e=this.getItemFactory().call(this,t);e.setLayoutData(new n({span:"XL7 L7 M7 S7"}));return e};return y});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/panels/GroupView", ["sap/m/p13n/BasePanel","sap/m/Label","sap/base/util/deepEqual","sap/m/CustomListItem","sap/m/List","sap/m/Panel","sap/m/Toolbar","sap/m/Text","sap/ui/core/Icon","sap/ui/core/library","sap/m/HBox","sap/m/library","sap/base/util/merge","sap/m/Title"],function(t,e,i,n,o,s,r,a,l,h,p,d,u,c){"use strict";var g=h.IconColor;var _=d.FlexJustifyContent;var f=d.ListKeyboardMode;var C=t.extend("sap.ui.mdc.p13n.panels.GroupView",{metadata:{library:"sap.ui.mdc",properties:{itemFactory:{type:"function"}}},renderer:{apiVersion:2}});C.prototype.init=function(){t.prototype.init.apply(this,arguments);this.addStyleClass("sapUiMDCGroupView");var e=new n({visible:"{"+this.P13N_MODEL+">groupVisible}",accDescription:{path:this.P13N_MODEL+">groupLabel",formatter:function(t){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.FILTER_GROUP_DESCRIPTION",t)}},content:[this._createGroupPanelTemplate()]});this._bShowFactory=true;this.displayColumns();this._aInitializedLists=[];this._setTemplate(e);e.setType("Inactive");this._setMoveButtonVisibility(true)};C.prototype._getShowFactory=function(){return this._bShowFactory};C.prototype.getPanels=function(){var t=[];this._oListControl.getItems().forEach(function(e){t.push(e.getContent()[0])});return t};C.prototype._createGroupPanelTemplate=function(){var t=this.P13N_MODEL;return new s({expandable:true,expanded:{path:this.P13N_MODEL+">group",formatter:function(){if(this.getBindingContext(t)){var e=this.getBindingContext(t).sPath.split("/")[2]==="0";return e}else{return false}}},expand:function(t){var e=t.getSource();var i=e.getContent()[0];this._addInitializedList(i);if(this._getShowFactory()){this._addFactoryControl(i);this.filterContent(this._aCurrentFilters)}}.bind(this),width:"100%",headerToolbar:[new r({content:[new c({wrapping:true,text:"{"+this.P13N_MODEL+">groupLabel}"})]})],content:[this._createGroupListTemplate()]})};C.prototype._createGroupListTemplate=function(){var t=new o({keyboardMode:f.Edit,selectionChange:function(t){var e=t.getParameter("listItem").getBindingContext(this.P13N_MODEL).sPath;var i=this._getP13nModel().getProperty(e);var n=this.getModel(this.P13N_MODEL);if(n&&i){n.setProperty(e+"/selected",i.visible)}var o=this._checkSpecialChangeReason(t.getParameter("selectAll"),t.getParameter("listItems"));this.fireChange({reason:o||(i.visible?this.CHANGE_REASON_ADD:this.CHANGE_REASON_REMOVE),item:i})}.bind(this),showSeparators:"None",mode:"MultiSelect"});t.bindItems(this._getItemsBinding());return t};C.prototype._addFactoryControl=function(t){if(t.getItems().length==0||t.getItems()[0].getContent().length<2){t.getItems().forEach(function(t){var e=t.getBindingContext(this.P13N_MODEL);var i=this.getItemFactory().call(this,e);if(i){t.addContent(i);var n=t.getContent()[0].getItems()[0];n.setLabelFor(i)}if(t.getContent()[0].getItems().length>1){t.getContent()[0].removeItem(1)}}.bind(this))}this.addStyleClass("sapUiMDCAFLabelMarking")};C.prototype._createInnerListControl=function(){var t=new o(this.getId()+"-innerGroupViewList",Object.assign(this._getListControlConfig(),{keyboardMode:f.Edit,mode:"None",infoToolbar:new r,updateStarted:function(t){this._checkAllPanels()}.bind(this)}));return t};C.prototype._getItemsBinding=function(){var t=function(){var t=[new p({width:"100%",justifyContent:_.SpaceBetween,items:[new e({required:"{"+this.P13N_MODEL+">required}",text:"{"+this.P13N_MODEL+">label}"})]})];return new n({selected:"{"+this.P13N_MODEL+">visible}",tooltip:"{"+this.P13N_MODEL+">tooltip}",accDescription:"{"+this.P13N_MODEL+">label}",content:t})}.bind(this);return{path:this.P13N_MODEL+">items",templateShareable:false,template:t()}};C.prototype._getIconTemplate=function(){return new p({width:"18.5%",justifyContent:_.Center,items:[new l({src:"sap-icon://circle-task-2",size:"0.5rem",color:g.Neutral,visible:{path:this.P13N_MODEL+">active",formatter:function(t){if(t){return true}else{return false}}}})]})};C.prototype._loopGroupList=function(t){this._oListControl.getItems().forEach(function(e){var i=e.getContent()[0];var n=i.getContent()[0];this._loopItems(n,function(e,i){t(e,i)})}.bind(this))};C.prototype._loopItems=function(t,e){t.getItems().forEach(function(t){var i=t.getBindingContextPath();var n=this._getP13nModel().getProperty(i).name;e.call(this,t,n)}.bind(this))};C.prototype._removeFactoryControl=function(){this._loopGroupList(function(t,e){if(t.getContent()[1]){t.removeContent(t.getContent()[1]);var i=t.getParent();this._addInitializedList(i);var n=this._getIconTemplate();t.getContent()[0].addItem(n)}}.bind(this));this.removeStyleClass("sapUiMDCAFLabelMarking");return this._aInitializedLists||[]};C.prototype._addInitializedList=function(t){var e=t.getId();if(this._aInitializedLists.indexOf(e)<0){this._aInitializedLists.push(e)}};C.prototype._getInitializedLists=function(){var t=[];this._aInitializedLists.forEach(function(e){var i=sap.ui.getCore().byId(e);if(i){t.push(i)}});return t};C.prototype.getSelectedFields=function(){var t=[];this._oListControl.getItems().forEach(function(e){var i=e.getContent()[0];var n=i.getContent()[0];this._loopItems(n,function(e,i){if(e.getSelected()){t.push(i)}})}.bind(this));return t};C.prototype.filterContent=function(t){if(!this._bInitialized||i(t,this._aCurrentFilters)){return}var e=this._removeFactoryControl();this._oListControl.getItems().forEach(function(i){var n=i.getContent()[0];var o=n.getContent()[0];if(o.getBinding("items")){o.getBinding("items").filter(t,true);this._togglePanelVisibility(n)}if(this._getShowFactory()&&e.indexOf(o.getId())>-1){this._addFactoryControl(o)}}.bind(this));this._aCurrentFilters=t};C.prototype.showFactory=function(t){this._bShowFactory=t;this.displayColumns();if(t){this._getInitializedLists().forEach(function(t){this._addFactoryControl(t)}.bind(this))}else{this._removeFactoryControl()}};C.prototype._checkAllPanels=function(){this._oListControl.getItems().forEach(function(t){var e=t.getContent()[0];this._togglePanelVisibility(e)}.bind(this))};C.prototype.setGroupExpanded=function(t,e){this._oListControl.getItems().forEach(function(i){var n=i.getContent()[0];var o=n.getBindingContext(this.P13N_MODEL).sPath;var s=this._getP13nModel().getProperty(o);if(s.group===t){n.setExpanded(e)}},this)};C.prototype._togglePanelVisibility=function(t){var e=t.getContent()[0];var i=t.getBindingContext(this.P13N_MODEL);if(i){var n=i.sPath;var o=this._getP13nModel().getProperty(n);o.groupVisible=e.getVisibleItems().length<1?false:true;this._getP13nModel().setProperty(n,o)}};C.prototype.getItems=function(){return this._oListControl.getItems()};C.prototype._checkFirstGroup=function(){if(!this._bInitialized&&this._oListControl&&this._oListControl.getItems().length>0){this._bInitialized=true;var t=this._oListControl.getItems()[0].getContent()[0].getContent()[0];this._addFactoryControl(t);this._addInitializedList(t)}};C.prototype.displayColumns=function(){var t=this._oListControl.getInfoToolbar().removeAllContent();t.forEach(function(t){t.destroy()});this._oListControl.getInfoToolbar().addContent(new a({width:"75%",text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.LIST_VIEW_COLUMN")}).addStyleClass("firstColumnPadding"));if(!this._bShowFactory){this._oListControl.getInfoToolbar().addContent(new a({textAlign:"Center",width:"25%",text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.LIST_VIEW_ACTIVE")}).addStyleClass("firstColumnPadding"))}};C.prototype.setP13nData=function(t){this._getP13nModel().setProperty("/itemsGrouped",t);if(!this._bInitialized){this._bindListItems()}this._checkFirstGroup();this._checkAllPanels()};C.prototype.getP13nData=function(t){var e=this._getP13nModel().getProperty("/itemsGrouped");if(t){e=e.filter(function(t){return t[this.PRESENCE_ATTRIBUTE]}.bind(this))}return e};C.prototype._bindListItems=function(){this._oListControl.bindItems(Object.assign({path:this.P13N_MODEL+">/itemsGrouped",templateShareable:false,key:"group",template:this.getAggregation("_template").clone()}))};C.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._aInitializedLists=null;this._bShowFactory=false;this._bInitialized=false};return C});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/panels/LinkSelectionPanel", ["sap/m/p13n/SelectionPanel","sap/m/ColumnListItem","sap/m/HBox","sap/m/VBox","sap/m/Link","sap/m/Text","sap/ui/core/Icon","sap/m/library","sap/m/OverflowToolbar","sap/ui/model/Filter","sap/ui/core/CustomData"],function(e,t,i,s,r,n,o,a,p,l,c){"use strict";var u=a.ListType;var h=e.extend("sap.ui.mdc.p13n.panels.LinkSelectionPanel",{metadata:{library:"sap.ui.mdc",events:{linkPressed:{}}},renderer:{apiVersion:2}});h.prototype._getListTemplate=function(){return new t({selected:"{"+this.P13N_MODEL+">"+this.PRESENCE_ATTRIBUTE+"}",type:u.Active,cells:[new i({items:[new s({items:[new r({tooltip:"{"+this.P13N_MODEL+">tooltip}",text:"{"+this.P13N_MODEL+">text}",href:"{"+this.P13N_MODEL+">href}",target:"{"+this.P13N_MODEL+">target}",press:this._onLinkPressed.bind(this),customData:new c({key:"internalHref",value:"{"+this.P13N_MODEL+">internalHref}"})}),new n({text:"{"+this.P13N_MODEL+">description}",visible:"{= ${"+this.P13N_MODEL+">description} ? true:false}"})]})]})]})};h.prototype.setShowHeader=function(e){if(e){this._oListControl.setHeaderToolbar(new p({content:[this._getSearchField()]}))}this.setProperty("showHeader",e);return this};h.prototype._getSearchField=function(){var t=e.prototype._getSearchField.apply(this,arguments);t.getLayoutData().setMaxWidth(undefined);return t};h.prototype._onLinkPressed=function(e){var t=e.getParameters().ctrlKey||e.getParameters().metaKey;if(e.getSource().getTarget()!=="_blank"&&!t){e.preventDefault();this.fireLinkPressed(e)}};h.prototype.setMultiSelectMode=function(e){this._oListControl.setMultiSelectMode(e)};h.prototype._filterList=function(e,t){var i=[],s=[];if(e){s=new l(this.PRESENCE_ATTRIBUTE,"EQ",true)}if(t){i=new l("text","Contains",t)}this._oListControl.getBinding("items").filter(new l([].concat(s,i),true))};return h});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/ActionToolbarController", ["./SelectionController","sap/ui/mdc/p13n/panels/ActionToolbarPanel","sap/m/Column","sap/ui/mdc/p13n/P13nBuilder"],function(t,e,n,o){"use strict";var i=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var a=t.extend("saps.ui.mdc.p13n.subcontroller.ActionToolbarController");a.prototype.initAdaptationUI=function(t){var n=new e({title:i.getText("actiontoolbar.RTA_TITLE"),showHeader:true});n.setFieldColumn(i.getText("actiontoolbar.RTA_COLUMN_HEADER"));var o=this.mixInfoAndState(t);n.setP13nData(o.items);this._oPanel=n;return Promise.resolve(n)};a.prototype.getDelta=function(e){var n=t.prototype.getDelta.apply(this,arguments);n.forEach(function(t){var e=t.changeSpecificData.changeType;if(e==="hideControl"||e==="unhideControl"){t.selectorElement=sap.ui.getCore().byId(t.changeSpecificData.content.name);delete t.changeSpecificData.content}});return n};a.prototype.mixInfoAndState=function(t){var e=this.getCurrentState();var n=this.arrayToMap(e);var o=this.prepareAdaptationData(t,function(t,e){var o=n[e.name];t.visible=!!o;t.position=o?o.position:-1;t.alignment=e.alignment;return e.visible});this.sortP13nData({visible:"visible",position:"position"},o.items);o.items.forEach(function(t){delete t.position});return o};a.prototype.getChangeOperations=function(){return{add:"unhideControl",remove:"hideControl",move:"moveAction"}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/AdaptFiltersController", ["./SelectionController","sap/ui/mdc/p13n/P13nBuilder","sap/base/util/merge"],function(t,e,r){"use strict";var i=t.extend("sap.ui.mdc.p13n.subcontroller.AdaptFiltersController",{constructor:function(){t.apply(this,arguments);this._bResetEnabled=true}});i.prototype.getUISettings=function(){return{verticalScrolling:false,title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("filterbar.ADAPT_TITLE"),afterClose:function(t){var e=t.getSource();if(e){e.getContent()[0].executeRemoves();e.removeAllContent();e.destroy()}}}};i.prototype.getBeforeApply=function(){var t=this.getAdaptationControl().getInbuiltFilter();var e=t?t.createConditionChanges():Promise.resolve([]);return e};i.prototype.getFilterControl=function(){return this.getAdaptationControl()};i.prototype.getChangeOperations=function(){return{add:"addFilter",remove:"removeFilter",move:"moveFilter"}};i.prototype.initAdaptationUI=function(t){return this.getAdaptationControl().retrieveInbuiltFilter().then(function(e){var r=this.mixInfoAndState(t);e.getTitle=function(){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("filterbar.ADAPT_TITLE")};this._oPanel=e;e.setP13nData(r);e.setLiveMode(false);return e.createFilterFields().then(function(){return e})}.bind(this))};i.prototype.getP13nData=function(){return this._oPanel.getP13nData().items};i.prototype.update=function(t){if(this._oPanel){var e=this.mixInfoAndState(t);this._oPanel.setP13nData(e);this.getAdaptationControl().getInbuiltFilter().createFilterFields()}};i.prototype.mixInfoAndState=function(t){var r=this.getAdaptationControl().getCurrentState().filter||{};var i=this.getCurrentState();var n=e.arrayToMap(i);var o=this.prepareAdaptationData(t,function(t,e){var i=n[e.name];var o=r[e.name];t.visible=i?true:false;t.visibleInDialog=true;t.position=i?i.position:-1;t.isFiltered=o&&o.length>0?true:false;t.required=e.required;return!(e.hiddenFilter===true||e.name=="$search")},true);this.sortP13nData({visible:"visible",position:"position"},o.items);return o};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/AggregateController", ["./SelectionController","sap/ui/mdc/p13n/P13nBuilder","sap/base/util/merge"],function(t,e,r){"use strict";var n=t.extend("sap.ui.mdc.p13n.subcontroller.AggregateController");n.prototype.getStateKey=function(){return"aggregations"};n.prototype.getCurrentState=function(){return this.getAdaptationControl().getAggregateConditions()};n.prototype.sanityCheck=function(t){var e=[];Object.keys(t).forEach(function(r){var n={name:r,key:r};if(t[r].hasOwnProperty("aggregated")){n["aggregated"]=t[r].aggregated}e.push(n)});return e};n.prototype.getDelta=function(e){e.existingState=this.sanityCheck(e.existingState);return t.prototype.getDelta.apply(this,arguments)};n.prototype.initAdaptationUI=function(t){return null};n.prototype.getChangeOperations=function(){return{add:"addAggregate",remove:"removeAggregate"}};n.prototype._getPresenceAttribute=function(){return"aggregated"};n.prototype.mixInfoAndState=function(t){var e=this.getCurrentState();var r=this.prepareAdaptationData(t,function(t,r){var n=e[r.name];t.aggregated=!!n;return r.aggregatable});return r};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/ChartItemController", ["./SelectionController"],function(t){"use strict";var e=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var i=t.extend("sap.ui.mdc.p13n.subcontroller.ChartItemController");i.prototype.initAdaptationUI=function(t){return this.getAdaptationControl().getAdaptationUI().then(function(i){this._oPanel=i;i.setTitle(e.getText("p13nDialog.TAB_Chart"));var o=this.mixInfoAndState(t);i.setP13nData(o.items);return i}.bind(this))};i.prototype.update=function(e){t.prototype.update.apply(this,arguments)};i.prototype.getDelta=function(e){e.deltaAttributes.push("role");return t.prototype.getDelta.apply(this,arguments)};i.prototype.mixInfoAndState=function(t){var e=this.getCurrentState();var i=this.arrayToMap(e);var o=this.prepareAdaptationData(t,function(t,e){var o=i[e.name];t.visible=!!o;t.position=o?o.position:-1;t.role=o?o.role:e.role;t.kind=e.kind;if(e.availableRoles){t.availableRoles=e.availableRoles}return e.visible});this.sortP13nData({visible:"visible",position:"position"},o.items);o.items.forEach(function(t){delete t.position});return o};i.prototype.getChangeOperations=function(){return{add:"addItem",remove:"removeItem",move:"moveItem"}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/ChartTypeController", ["./SelectionController"],function(t){"use strict";var e=t.extend("sap.ui.mdc.p13n.subcontroller.ChartTypeController",{constructor:function(){t.apply(this,arguments);this._bResetEnabled=true}});e.prototype.getCurrentState=function(){return{properties:{chartType:this.getAdaptationControl().getChartType()}}};e.prototype.getStateKey=function(){return"supplementaryConfig"};e.prototype.getDelta=function(t){var e;if(t.changedState&&t.changedState.properties){e=t.changedState.properties.chartType}var r=this.getAdaptationControl().getChartType();var n=[];if(e&&e!==r){n=[{selectorElement:t.control,changeSpecificData:{changeType:"setChartType",content:{chartType:e}}}]}return n};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/ColumnController", ["./SelectionController","sap/m/p13n/SelectionPanel"],function(e,t){"use strict";var n=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var o=e.extend("sap.ui.mdc.p13n.subcontroller.ColumnController");o.prototype.getUISettings=function(){return{title:n.getText("table.SETTINGS_COLUMN"),tabText:n.getText("p13nDialog.TAB_Column")}};o.prototype.model2State=function(){var e=[];this._oPanel.getP13nData(true).forEach(function(t){if(t.visible){e.push({name:t.name})}});return e};o.prototype.createUI=function(e){var o=new t({showHeader:true,enableCount:true,title:n.getText("fieldsui.COLUMNS"),fieldColumn:n.getText("fieldsui.COLUMNS")});o.setEnableReorder(this._bReorderingEnabled);return o.setP13nData(e.items)};o.prototype.getChangeOperations=function(){return{add:"addColumn",remove:"removeColumn",move:"moveColumn"}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/ColumnWidthController", ["./SelectionController","sap/m/p13n/FlexUtil","sap/m/p13n/modules/xConfigAPI","sap/base/util/merge"],function(t,e,n,a){"use strict";var r=t.extend("sap.ui.mdc.p13n.subcontroller.ColumnWidthController",{constructor:function(){t.apply(this,arguments);this._bXConfigEnabled=true;this._bResetEnabled=true}});r.prototype.sanityCheck=function(t){var e=[];if(t&&t.hasOwnProperty("aggregations")&&t.aggregations.hasOwnProperty("columns")){Object.keys(t.aggregations.columns).forEach(function(n){var a={name:n,width:t.aggregations.columns[n].width};e.push(a)})}return e};r.prototype.getCurrentState=function(){return this.getAdaptationControl().getCurrentState().xConfig};r.prototype.getStateKey=function(){return"supplementaryConfig"};r.prototype.changesToState=function(t){var e;var r=t.length&&t[0].selectorElement;t.forEach(function(t){var o=a({},t.changeSpecificData.content);var i={key:o.name,controlMeta:{aggregation:"columns"},property:"width",value:o.value};e=n.createAggregationConfig(r,i,e)});return e||{}};r.prototype.getDelta=function(t){t.deltaAttribute="width";t.operation="setColumnWidth";t.changedState=t.changedState instanceof Array?t.changedState:this.sanityCheck(t.changedState);t.existingState=this.sanityCheck(t.existingState);return e.getPropertySetterChanges(t)};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/FilterController", ["sap/ui/mdc/enum/ProcessingStrategy","sap/ui/mdc/condition/FilterOperatorUtil","./SelectionController","sap/ui/mdc/p13n/P13nBuilder","sap/base/Log","sap/base/util/merge","sap/base/util/deepEqual"],function(t,e,n,r,i,o,a){"use strict";var s=n.extend("sap.ui.mdc.p13n.subcontroller.FilterController",{constructor:function(){n.apply(this,arguments);this._bResetEnabled=true}});s.prototype.getStateKey=function(){return"filter"};s.prototype.getUISettings=function(){return{title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("filter.PERSONALIZATION_DIALOG_TITLE"),tabText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.TAB_Filter"),afterClose:function(t){var e=t.getSource();if(e){var n=e.getContent()[0];if(n.isA("sap.m.p13n.Container")){n.removeView("Filter")}else{e.removeAllContent()}}e.destroy()}}};s.prototype.getCurrentState=function(){return this.getAdaptationControl().getCurrentState()[this.getStateKey()]};s.prototype.getChangeOperations=function(){return{add:"addCondition",remove:"removeCondition"}};s.prototype.getBeforeApply=function(){var t=this.getAdaptationControl().getInbuiltFilter();var e=t?t.createConditionChanges():Promise.resolve([]);return e};s.prototype.getFilterControl=function(){return this.getAdaptationControl().isA("sap.ui.mdc.IFilter")?this.getAdaptationControl():this.getAdaptationControl()._oP13nFilter};s.prototype.sanityCheck=function(t){s.checkConditionOperatorSanity(t);return t};s.checkConditionOperatorSanity=function(t){for(var n in t){var r=t[n];for(var o=0;o<r.length;o++){var a=r[o];var s=a.operator;if(!e.getOperator(s)){r.splice(o,1);if(t[n].length==0){delete t[n]}i.warning("The provided conditions for field '"+n+"' contain unsupported operators - these conditions will be neglected.")}}}};s.prototype._getPresenceAttribute=function(t){return"active"};s.prototype.initAdaptationUI=function(t,e){var n=this.mixInfoAndState(t);return this.getAdaptationControl().retrieveInbuiltFilter().then(function(t){t.setP13nData(n);t.setLiveMode(false);t.setProperty("_useFixedWidth",false);t.getTitle=function(){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("filter.PERSONALIZATION_DIALOG_TITLE")};this._oAdaptationFB=t;return t.createFilterFields().then(function(){this._oPanel=t;return t}.bind(this))}.bind(this))};s.prototype.update=function(t){if(this._oPanel){var e=this.mixInfoAndState(t);this._oPanel.setP13nData(e);var n=this.getAdaptationControl();var r=n&&n.getInbuiltFilter();if(r){r.createFilterFields()}}};s.prototype.getDelta=function(e){if(e.applyAbsolute===t.FullReplace){Object.keys(e.existingState).forEach(function(t){if(!e.changedState.hasOwnProperty(t)){e.changedState[t]=[]}})}return u(e)};var u=function(t){var e=[];var n=t.changedState;var r=t.existingState;var o=t.control;var a=t.hasOwnProperty("applyAbsolute")?t.applyAbsolute:true;var s=t.propertyInfo;for(var u in n){var c=p(s,u);if(!c&&o.isA("sap.ui.mdc.Control")&&o.isPropertyHelperFinal()){i.warning("property '"+u+"' not supported");continue}var f=l(u,n[u],r[u],o,a);e=e.concat(f)}return e};var p=function(t,e){return t.some(function(t){var n=t.name===e||e=="$search";n=n?n:t.path===e;return n})};var c=function(t,e,n,r){delete r.filtered;var i={selectorElement:e,changeSpecificData:{changeType:t,content:{name:n,condition:r}}};return i};var l=function(t,n,r,i,s){var u,p=[];var l=o([],n);var f=r?o([],r):[];if(a(n,f)){return p}var d=function(t,n){var r;do{r=false;for(var i=0;i<t.length;i++){var o=t[i];var a=e.indexOfCondition(o,n);if(a>-1){t.splice(i,1);if(s){n.splice(a,1)}r=true;break}}}while(r)};d(n,f);if(n.length>0||f.length>0){f.forEach(function(n){var r=e.indexOfCondition(n,l);var o=r>-1&&l[r].filtered===false;if(s||o){u=c("removeCondition",i,t,n);p.push(u)}});n.forEach(function(e){if(s||(!e.hasOwnProperty("filtered")||e.filtered!==false)){u=c("addCondition",i,t,e);p.push(u)}})}return p};s.prototype.model2State=function(){var t={},e=this.getCurrentState();this.getP13nData().items.forEach(function(n){if(n.active&&Object.keys(e).includes(n.name)){t[n.name]=e[n.name]}});return t};s.prototype.mixInfoAndState=function(t){var e=this.getCurrentState()||{};var n=this.prepareAdaptationData(t,function(t,n){var r=e[t.name];t.active=r&&r.length>0?true:false;return!(n.filterable===false)});r.sortP13nData({visible:"active",position:undefined},n.items);return n};s.prototype.changesToState=function(t,e,n){var r={};t.forEach(function(t){var e=o({},t.changeSpecificData.content);var n=e.name;if(!r[n]){r[n]=[]}if(t.changeSpecificData.changeType===this.getChangeOperations()["remove"]){e.condition.filtered=false}r[n].push(e.condition)}.bind(this));return r};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/GroupController", ["./SelectionController","sap/ui/mdc/p13n/P13nBuilder","sap/m/p13n/GroupPanel"],function(t,e,r){"use strict";var o=t.extend("sap.ui.mdc.p13n.subcontroller.GroupController");o.prototype.getStateKey=function(){return"groupLevels"};o.prototype.getUISettings=function(){return{tabText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.TAB_Group"),title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("group.PERSONALIZATION_DIALOG_TITLE")}};o.prototype.getDelta=function(e){return t.prototype.getDelta.apply(this,arguments)};o.prototype.initAdaptationUI=function(t){var e=new r;var o=this.mixInfoAndState(t);var n=this.getAdaptationControl();if(n.isA("sap.ui.mdc.Table")&&n._isOfType("ResponsiveTable")){e.setQueryLimit(1)}e.setP13nData(o.items);this._oPanel=e;return Promise.resolve(e)};o.prototype.model2State=function(){var t=[];this._oPanel.getP13nData(true).forEach(function(e){if(e.grouped){t.push({name:e.name})}});return t};o.prototype.getChangeOperations=function(){return{add:"addGroup",remove:"removeGroup",move:"moveGroup"}};o.prototype._getPresenceAttribute=function(){return"grouped"};o.prototype.mixInfoAndState=function(t){var r=this.getCurrentState();var o=e.arrayToMap(r);var n=this.getAdaptationControl();var i=n.getAggregateConditions?n.getAggregateConditions()||{}:{};var a=this.prepareAdaptationData(t,function(t,e){var r=o[e.name];t.grouped=!!r;t.position=r?r.position:-1;return!(e.groupable===false||i[e.name])});e.sortP13nData({visible:"grouped",position:"position"},a.items);a.presenceAttribute=this._getPresenceAttribute();a.items.forEach(function(t){delete t.position});return a};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/LinkPanelController", ["sap/ui/mdc/p13n/P13nBuilder","./SelectionController","sap/ui/mdc/p13n/panels/LinkSelectionPanel","sap/m/library","sap/m/MessageBox"],function(e,t,n,a,i){"use strict";var o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var r=a.MultiSelectMode;var s=t.extend("sap.ui.mdc.p13n.subcontroller.LinkPanelController",{constructor:function(){t.apply(this,arguments);this._bResetEnabled=true}});s.prototype.getUISettings=function(){return{contentWidth:"28rem",contentHeight:"35rem",reset:{warningText:o.getText("info.SELECTION_DIALOG_RESET_WARNING")},title:o.getText("info.SELECTION_DIALOG_ALIGNEDTITLE")}};s.prototype.getSelectorForReset=function(){return this.getAdaptationControl().getItems().concat(this.getAdaptationControl())};s.prototype.initAdaptationUI=function(e){var t=new n({title:o.getText("info.SELECTION_DIALOG_ALIGNEDTITLE"),showHeader:true,fieldColumn:o.getText("info.SELECTION_DIALOG_COLUMNHEADER_WITHOUT_COUNT"),enableCount:true,enableReorder:false,linkPressed:this._onLinkPressed.bind(this)});var a=this.mixInfoAndState(e);t.setP13nData(a.items);t.setMultiSelectMode(r.Default);this._oPanel=t;return Promise.resolve(t)};s.prototype._onLinkPressed=function(e){var t=e.getParameter("oSource");var n=this.getAdaptationControl();var a=!!(t&&t.getCustomData()&&t.getCustomData()[0].getValue());var o=a?t.getCustomData()[0].getValue():t.getHref();if(n.getBeforeNavigationCallback){n.getBeforeNavigationCallback()(e).then(function(e){if(e){n.getMetadata()._oClass.navigate(o)}})}else{i.show(sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("info.SELECTION_DIALOG_LINK_VALIDATION_QUESTION"),{icon:i.Icon.WARNING,title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("info.SELECTION_DIALOG_LINK_VALIDATION_TITLE"),actions:[i.Action.YES,i.Action.NO],onClose:function(e){if(e===i.Action.YES){n.getMetadata()._oClass.navigate(o)}},styleClass:this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":""})}};s.prototype._createAddRemoveChange=function(e,t,n){var a=n.name;var i=sap.ui.getCore().byId(a);var o;if(!i){o={selectorElement:e,changeSpecificData:{changeType:"createItem",content:{selector:a}}}}else{o={selectorElement:i,changeSpecificData:{changeType:t==="hideItem"?"hideItem":"revealItem",content:{}}}}return o};s.prototype.mixInfoAndState=function(t){var n=this.getCurrentState();var a=e.arrayToMap(n);var i=this.prepareAdaptationData(t,function(e,t){var n=a[t.name];e.visible=n?true:false;e.position=n?n.position:-1;e.href=t.href;e.internalHref=t.internalHref;e.description=t.description;e.target=t.target;e.text=t.text;return true});this.sortP13nData({visible:"visible",position:"position"},i.items);i.presenceAttribute=this._getPresenceAttribute();i.items.forEach(function(e){delete e.position});return i};s.prototype._createMoveChange=function(e,t,n,a){return{selectorElement:a,changeSpecificData:{changeType:n,content:{index:t,name:e}}}};s.prototype.getChangeOperations=function(){return{add:["createItem","revealItem"],remove:"hideItem",move:"moveItem"}};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/SelectionController", ["sap/m/p13n/SelectionController","sap/base/util/merge"],function(e,t){"use strict";var n=e.extend("sap.ui.mdc.p13n.subcontroller.SelectionController");n.prototype._createAddRemoveChange=function(e,t,n){delete n.key;var a={selectorElement:e,changeSpecificData:{changeType:t,content:n}};return a};n.prototype.getCurrentState=function(e){var t=this.getAdaptationControl().getCurrentState()[this.getStateKey()];if(t instanceof Array&&!e){t=t.map(function(e){e.key=e.name;return e})}return t};n.prototype.getDelta=function(n){if(n.changedState instanceof Array){var a=t([],n.changedState);a.map(function(e){e.key=e.name;return e});n.changedState=a}if(n.existingState instanceof Array){var r=t([],n.existingState);r.map(function(e){e.key=e.name;return e});n.existingState=r}n.deltaAttributes.push("name");return e.prototype.getDelta.apply(this,arguments)};n.prototype._createMoveChange=function(e,t,n,a){var r={selectorElement:a,changeSpecificData:{changeType:n,content:{name:e,index:t}}};return r};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/SortController", ["./SelectionController","sap/ui/mdc/p13n/P13nBuilder","sap/m/p13n/SortPanel"],function(t,e,r){"use strict";var o=t.extend("sap.ui.mdc.p13n.subcontroller.SortController",{constructor:function(){t.apply(this,arguments);this._bResetEnabled=true}});o.prototype.getStateKey=function(){return"sorters"};o.prototype.getUISettings=function(){return{tabText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.TAB_Sort"),title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("sort.PERSONALIZATION_DIALOG_TITLE")}};o.prototype.getDelta=function(e){e.deltaAttributes.push("descending");return t.prototype.getDelta.apply(this,arguments)};o.prototype.initAdaptationUI=function(t){var e;e=new r;var o=this.mixInfoAndState(t);e.setP13nData(o.items);this._oPanel=e;return Promise.resolve(e)};o.prototype.model2State=function(){var t=[];if(this._oPanel){this._oPanel.getP13nData(true).forEach(function(e){if(e.sorted){t.push({name:e.name})}});return t}};o.prototype.getChangeOperations=function(){return{add:"addSort",remove:"removeSort",move:"moveSort"}};o.prototype._getPresenceAttribute=function(t){return"sorted"};o.prototype.mixInfoAndState=function(t){var r=this.getCurrentState();var o=e.arrayToMap(r);var n=this.prepareAdaptationData(t,function(t,e){var r=o[e.name];t.sorted=r?true:false;t.sortPosition=r?r.position:-1;t.descending=r?!!r.descending:false;return!(e.sortable===false)});this.sortP13nData({visible:"sorted",position:"sortPosition"},n.items);n.presenceAttribute=this._getPresenceAttribute();n.items.forEach(function(t){delete t.sortPosition});return n};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/Column", ["./GridTableType","./ResponsiveTableType","../library","sap/base/Log","sap/m/library","sap/m/Label","sap/ui/model/json/JSONModel","sap/ui/model/base/ManagedObjectModel","sap/ui/core/Control","sap/ui/core/Core"],function(e,t,i,n,a,o,l,s,r,p){"use strict";var u=i.TableType;var h=r.extend("sap.ui.mdc.table.Column",{metadata:{library:"sap.ui.mdc",defaultAggregation:"template",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},minWidth:{type:"float",group:"Behavior",defaultValue:8},header:{type:"string"},headerVisible:{type:"boolean",group:"Misc",defaultValue:true},hAlign:{type:"sap.ui.core.HorizontalAlign",defaultValue:"Begin"},importance:{type:"sap.ui.core.Priority",group:"Behavior",defaultValue:"None"},dataProperty:{type:"string"},required:{type:"boolean",defaultValue:false}},aggregations:{template:{type:"sap.ui.core.Control",multiple:false},creationTemplate:{type:"sap.ui.core.Control",multiple:false},extendedSettings:{type:"sap.ui.mdc.table.ColumnSettings",multiple:false}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.openEnd();if(t._oColumnHeaderLabel){e.renderControl(t._oColumnHeaderLabel.getLabel())}e.close("div")}}});h.prototype.init=function(){this.mSkipPropagation={template:true,creationTemplate:true};this._oManagedObjectModel=new s(this);this._oSettingsModel=new l({width:this.getWidth(),calculatedWidth:null,p13nWidth:null,resizable:false})};h.prototype.getInnerColumn=function(){var e=this.getTable();if(e&&(!this._oInnerColumn||this._oInnerColumn.isDestroyed())){this._oInnerColumn=this._createInnerColumn()}return this._oInnerColumn};h.prototype._createInnerColumn=function(){var i=this.getTable();var n;var o={parts:[{path:"$this>/width"},{path:"$columnSettings>/calculatedWidth"},{path:"$columnSettings>/p13nWidth"}],formatter:function(e,t,i){return i||t||e}};this._readP13nValues();if(i._isOfType(u.ResponsiveTable)){n=t.createColumn(this.getId()+"-innerColumn",{width:o,autoPopinWidth:"{$this>/minWidth}",hAlign:"{$this>/hAlign}",header:this._getColumnHeaderLabel(),importance:{parts:[{path:"$this>/importance"},{path:"$this>/extendedSettings/importance"},{path:"$this>/extendedSettings/@className"}],formatter:function(e,t,i){if(t&&i==="sap.ui.mdc.table.ResponsiveColumnSettings"){return t}else{return e}}},popinDisplay:"{= ${$this>/headerVisible} ? 'Inline' : 'WithoutHeader' }",tooltip:"{$this>/tooltip}",mergeDuplicates:{parts:[{path:"$this>/extendedSettings/mergeFunction"},{path:"$this>/extendedSettings/@className"}],formatter:function(e,t){return e&&t==="sap.ui.mdc.table.ResponsiveColumnSettings"}},mergeFunctionName:{parts:[{path:"$this>/extendedSettings/mergeFunction"},{path:"$this>/extendedSettings/@className"}],formatter:function(e,t){if(t==="sap.ui.mdc.table.ResponsiveColumnSettings"){return e}}}})}else{n=e.createColumn(this.getId()+"-innerColumn",{width:o,minWidth:{path:"$this>/minWidth",formatter:function(e){return Math.round(e*parseFloat(a.BaseFontSize))}},hAlign:"{$this>/hAlign}",label:this._getColumnHeaderLabel(),resizable:"{$columnSettings>/resizable}",autoResizable:"{$columnSettings>/resizable}",tooltip:"{$this>/tooltip}",template:this.getTemplateClone()});n.setCreationTemplate(this.getCreationTemplateClone())}n.setModel(this._oManagedObjectModel,"$this");n.setModel(this._oSettingsModel,"$columnSettings");n.setHeaderMenu(i.getId()+"-columnHeaderMenu");return n};var d=r.extend("sap.ui.mdc.table.ColumnHeaderLabel",{metadata:{final:true,aggregations:{label:{type:"sap.m.Label",multiple:false}},associations:{column:{type:"sap.ui.mdc.table.Column"}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.style("width","100%");e.openEnd();e.renderControl(p.byId(t.getColumn()));e.close("div")}},getText:function(){return this.getLabel().getText()},clone:function(){return this.getLabel().clone()}});h.prototype._getColumnHeaderLabel=function(){var e=this.getTable();if(e&&(!this._oColumnHeaderLabel||this._oColumnHeaderLabel.isDestroyed())){this._oColumnHeaderLabel=new d({column:this,label:new o({width:"{= ${$this>/headerVisible} ? null : '0px' }",text:"{$this>/header}",textAlign:"{$this>/hAlign}",tooltip:e._isOfType(u.ResponsiveTable)?"{$this>/tooltip}":"",wrapping:{parts:[{path:"$this>/headerVisible"},{path:"$columnSettings>/resizable"}],formatter:function(t,i){return e._isOfType(u.ResponsiveTable)&&t&&!i}},wrappingType:e._isOfType(u.ResponsiveTable)?"Hyphenated":null,required:"{$this>/required}"})})}return this._oColumnHeaderLabel};h.prototype.getTemplateClone=function(){var e=this.getTable();var t=this.getTemplate();if(e&&t&&(!this._oTemplateClone||this._oTemplateClone.isDestroyed())){this._oTemplateClone=t.clone();if(!e._isOfType(u.ResponsiveTable)){if(this._oTemplateClone.setWrapping){this._oTemplateClone.setWrapping(false)}if(this._oTemplateClone.setRenderWhitespace){this._oTemplateClone.setRenderWhitespace(false)}}}return this._oTemplateClone};h.prototype.getCreationTemplateClone=function(){var e=this.getTable();var t=this.getCreationTemplate();if(e&&t&&(!this._oCreationTemplateClone||this._oCreationTemplateClone.isDestroyed())){this._oCreationTemplateClone=t.clone();if(!e._isOfType(u.ResponsiveTable)){if(this._oCreationTemplateClone.setWrapping){this._oCreationTemplateClone.setWrapping(false)}if(this._oCreationTemplateClone.setRenderWhitespace){this._oCreationTemplateClone.setRenderWhitespace(false)}}}return this._oCreationTemplateClone};h.prototype.setHeader=function(e){this.setProperty("header",e,true);var t=this.getDomRef();if(t){t.textContent=this.getHeader()}return this};h.prototype.setTooltip=function(e){if(e&&e.isA&&e.isA("sap.ui.core.TooltipBase")){n.error("The control sap.ui.mdc.table.Column allows only strings as tooltip, but given is "+e);return this}return r.prototype.setTooltip.apply(this,arguments)};h.prototype._onTableChange=function(e){if(e.getParameter("name")==="enableColumnResize"){this._readTableSettings()}};h.prototype._readTableSettings=function(){var e=this.getTable();this._oSettingsModel.setProperty("/resizable",e.getEnableColumnResize())};h.prototype.setParent=function(e){var t=this.getTable();r.prototype.setParent.apply(this,arguments);if(this._bIsBeingMoved){return}this._disconnectFromTable(t);this._connectToTable()};h.prototype._connectToTable=function(){var e=this.getTable();if(!e){return}this._calculateColumnWidth();this._readP13nValues();this._readTableSettings();e.attachEvent("_change",this._onTableChange,this)};h.prototype._disconnectFromTable=function(e){e=e||this.getTable();if(!e){return}if(this._oInnerColumn){this._oInnerColumn.destroy("KeepDom");if(!e.isInvalidateSuppressed()){e.invalidate()}}};h.prototype._onModifications=function(){this._readP13nValues()};h.prototype._calculateColumnWidth=function(){var e=this.getTable();if(!e||!e.getEnableAutoColumnWidth()||!this.isPropertyInitial("width")){return}var t=e.getPropertyHelper();if(t){t.calculateColumnWidth(this).then(function(e){this._oSettingsModel.setProperty("/calculatedWidth",e)}.bind(this))}else{e._fullyInitialized().then(this._calculateColumnWidth.bind(this))}};h.prototype._readP13nValues=function(){var e=this.getTable();var t=e.getCurrentState().xConfig;var i=this.getDataProperty();if(t instanceof Promise){t.then(this._readP13nValues.bind(this));return}var n=t&&t.aggregations&&t.aggregations.columns&&t.aggregations.columns[i]&&t.aggregations.columns[i].width;this._oSettingsModel.setProperty("/p13nWidth",n)};h.prototype.getTable=function(){var e=this.getParent();return e&&e.isA("sap.ui.mdc.Table")?e:null};h.prototype.exit=function(){this._disconnectFromTable();["_oManagedObjectModel","_oSettingsModel","_oInnerColumn","_oTemplateClone","_oCreationTemplateClone","_oColumnHeaderLabel"].forEach(function(e){if(this[e]){this[e].destroy();delete this[e]}},this)};return h});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/ColumnSettings", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.ui.mdc.table.ColumnSettings",{metadata:{library:"sap.ui.mdc",abstract:true}});return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/CreationRow", ["../library","sap/ui/core/Element"],function(e,t){"use strict";var n=e.TableType;var o=t.extend("sap.ui.mdc.table.CreationRow",{metadata:{library:"sap.ui.mdc",properties:{applyEnabled:{type:"boolean",group:"Behavior",defaultValue:true},busy:{type:"boolean",group:"Behavior",defaultValue:false},visible:{type:"boolean",group:"Appearance",defaultValue:true}},events:{apply:{allowPreventDefault:true}}}});o.prototype.init=function(){this._oInnerCreationRow=null;this._mBindingContexts={}};o.prototype.exit=function(){if(this._oInnerCreationRow){this._oInnerCreationRow.destroy();this._oInnerCreationRow=null}this._mBindingContexts=null};o.prototype.setBusy=function(e){this.setProperty("busy",e,true);if(this._oInnerCreationRow){this._oInnerCreationRow.setBusy(e)}return this};o.prototype.setBindingContext=function(e,n){t.prototype.setBindingContext.call(this,e,n);this._mBindingContexts[n]={context:e,modelName:n};if(this._oInnerCreationRow){this._oInnerCreationRow.setBindingContext(e,n)}return this};o.prototype.setApplyEnabled=function(e){this.setProperty("applyEnabled",e,true);if(this._oInnerCreationRow){this._oInnerCreationRow.setApplyEnabled(e)}return this};o.prototype.setVisible=function(e){this.setProperty("visible",e,true);if(this._oInnerCreationRow){this._oInnerCreationRow.setVisible(e);this._getTable()._oTable.getRowMode().setHideEmptyRows(e)}return this};o.prototype._onInnerApply=function(e){if(!this.fireApply()){e.preventDefault()}};o.prototype.update=function(){return this._updateInnerCreationRow()};o.prototype._updateInnerCreationRow=function(){var e=this._getTable();var t;if(!e||!e._oTable){return Promise.resolve()}if(e._isOfType(n.Table,true)){if(!this._oInnerCreationRow||this._oInnerCreationRow.isDestroyed()){t=this._createGridTableCreationRow();e._oTable.getRowMode().setHideEmptyRows(this.getVisible())}else{t=Promise.resolve()}}else{t=this._createResponsiveTableCreationRow()}return t.then(function(t){r(e,t)})};function i(e){return new Promise(function(t,n){sap.ui.require([e],function(e){t(e)},function(e){n(e)})})}o.prototype._createGridTableCreationRow=function(){return i("sap/ui/table/CreationRow").then(function(e){s(this);this._oInnerCreationRow=new e(this.getId()+"-inner",{visible:this.getVisible(),applyEnabled:this.getApplyEnabled(),apply:[this._onInnerApply,this]});this._getTable()._oTable.getRowMode().setHideEmptyRows(this.getVisible());for(var t in this._mBindingContexts){var n=this._mBindingContexts[t];this._oInnerCreationRow.setBindingContext(n.context,n.modelName)}return this._oInnerCreationRow}.bind(this))};o.prototype._createResponsiveTableCreationRow=function(){s(this);return Promise.resolve()};function r(e,t){if(e&&e._oTable&&t){e._oTable.setCreationRow(t)}}function s(e){if(e&&e._oInnerCreationRow){e._oInnerCreationRow.destroy();e._oInnerCreationRow=null}}o.prototype._getTable=function(){var e=this.getParent();return e&&e.isA("sap.ui.mdc.Table")?e:null};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/GridTableType", ["./TableTypeBase","../library","sap/ui/core/library"],function(e,t,o){"use strict";var i,n,r,a,s,l,u,d;var c=t.RowCountMode;var g=o.SortOrder;var p=e.extend("sap.ui.mdc.table.GridTableType",{metadata:{library:"sap.ui.mdc",properties:{rowCountMode:{type:"sap.ui.mdc.RowCountMode",defaultValue:c.Auto},rowCount:{type:"int",defaultValue:10},selectionLimit:{type:"int",defaultValue:200},showHeaderSelector:{type:"boolean",defaultValue:true},fixedColumnCount:{type:"int",defaultValue:0}}}});p.prototype.exit=function(){e.prototype.exit.apply(this,arguments);this.disableColumnResize()};p.prototype.updateTableByProperty=function(e,t){var o=this.getInnerTable();var i=this._getMultiSelectionPlugin();if(!o){return}if(e==="rowCountMode"){var n=o.getRowMode();var r=false;if(n&&(t===c.Fixed&&!n.isA("sap.ui.table.rowmodes.FixedRowMode")||t===c.Auto&&!n.isA("sap.ui.table.rowmodes.AutoRowMode"))){r=n.getHideEmptyRows();n.destroy();n=null}if(!n){var a=t===c.Fixed?l:u;o.setRowMode(new a({hideEmptyRows:r}))}this._updateTableRowCount()}else if(e==="rowCount"){this._updateTableRowCount()}else if(e==="selectionLimit"){if(i){i.setLimit(t).setEnableNotification(t>0)}}else if(e==="showHeaderSelector"){if(i){i.setShowHeaderSelector(t)}}else if(e==="fixedColumnCount"){o.setFixedColumnCount(t)}};p.prototype._updateTableRowCount=function(){var e=this.getInnerTable();if(this.getRowCountMode()===c.Fixed){e.getRowMode().setRowCount(this.getRowCount())}else{e.getRowMode().setMinRowCount(this.getRowCount())}};p.prototype.loadUiTableLibrary=function(){if(!this._oGridTableLibLoaded){this._oGridTableLibLoaded=sap.ui.getCore().loadLibrary("sap.ui.table",true)}return this._oGridTableLibLoaded};p.prototype.loadModules=function(){if(i){return Promise.resolve()}return this.loadUiTableLibrary().then(function(){return new Promise(function(e,t){sap.ui.require(["sap/ui/table/Table","sap/ui/table/Column","sap/ui/table/RowAction","sap/ui/table/RowActionItem","sap/ui/table/plugins/MultiSelectionPlugin","sap/ui/table/rowmodes/FixedRowMode","sap/ui/table/rowmodes/AutoRowMode","sap/ui/table/RowSettings"],function(t,o,c,g,p,h,f,b){i=t;n=o;r=c;a=g;s=p;l=h;u=f;d=b;e()},function(){t("Failed to load some modules")})})})};p.prototype.createTable=function(e){var t=this.getTable();if(!t||!i){return null}return new i(e,this.getTableSettings())};p.prototype.getTableSettings=function(){var t=this.getTable();return Object.assign({},e.prototype.getTableSettings.apply(this,arguments),{enableBusyIndicator:true,enableColumnReordering:false,threshold:this.getThreshold(),cellClick:[this._onCellClick,this],noData:t._getNoDataText(),extension:[t._oToolbar],ariaLabelledBy:[t._oTitle],plugins:[this._createSelectionPlugin()],rowSettingsTemplate:this.getRowSettingsConfig(),selectionBehavior:this._getSelectionBehavior()})};p.prototype._onCellClick=function(e){this.callHook("RowPress",this.getTable(),{bindingContext:e.getParameter("rowBindingContext")})};p.prototype._onSelectionChange=function(e){this.callHook("SelectionChange",this.getTable(),{bindingContext:e.getParameter("rowContext"),selected:e.getSource().isIndexSelected(e.getParameter("rowIndex")),selectAll:e.getParameter("selectAll")})};p.createColumn=function(e,t){return new n(e,t)};p.prototype._createSelectionPlugin=function(){return new s({selectionMode:this._getSelectionMode(),selectionChange:[this._onSelectionChange,this]})};p.prototype._getMultiSelectionPlugin=function(){var e=this.getInnerTable();var t=e?e.getPlugins()[0]:undefined;return t&&t.isA("sap.ui.table.plugins.MultiSelectionPlugin")?t:null};p.prototype.enableColumnResize=function(){var e=this.getTable();var t=this.getInnerTable();if(!e||!t){return}t.getColumns().forEach(function(e){e.setResizable(true);e.setAutoResizable(true)});t.detachColumnResize(this._onColumnResize,this);t.attachColumnResize(this._onColumnResize,this)};p.prototype.disableColumnResize=function(){var e=this.getTable();var t=this.getInnerTable();if(!e||!t){return}t.getColumns().forEach(function(e){e.setResizable(false);e.setAutoResizable(false)});t.detachColumnResize(this._onColumnResize,this)};p.prototype._onColumnResize=function(e){var t=this.getTable();var o=this.getInnerTable();var i=e.getParameter("column");var n=e.getParameter("width");var r=o.indexOfColumn(i);var a=t.getColumns()[r];this.callHook("ColumnResize",t,{column:a,width:n})};p.prototype._getSelectionMode=function(){var e=this.getTable();var t=e?e.getSelectionMode():undefined;var o={Single:"Single",SingleMaster:"Single",Multi:"MultiToggle",None:"None",undefined:"None"};return o[t]};p.prototype._getSelectionBehavior=function(){var e=this.getTable();var t={SingleMaster:"RowOnly"};return t[e?e.getSelectionMode():undefined]};p.prototype.updateSelectionSettings=function(){var e=this.getTable();var t=this.getInnerTable();var o=this._getMultiSelectionPlugin();if(!e||!t){return}t.setSelectionBehavior(this._getSelectionBehavior());if(o){o.setSelectionMode(this._getSelectionMode())}};p.prototype.updateRowSettings=function(){var e=this.getInnerTable();if(!e){return}e.destroyRowSettingsTemplate();e.setRowSettingsTemplate(new d(this.getRowSettingsConfig()));this.updateRowActions()};p.prototype.updateRowActions=function(){var e=this.getInnerTable();if(!e){return}var t=this.getTable().getRowSettings();this._removeRowActions();if(!t||!t.isBound("rowActions")&&(!t.getRowActions()||t.getRowActions().length==0)){return}var o=t.getAllActions();if("templateInfo"in o){var i=o.templateInfo;o.items.template=new a({type:i.type,visible:i.visible,icon:i.icon,text:i.text,press:[this._onRowActionPress,this]});delete o.templateInfo}else{o.items=o.items.map(function(e){var t=new a({type:e.isBound("type")?e.getBindingInfo("type"):e.getType(),visible:e.isBound("visible")?e.getBindingInfo("visible"):e.getVisible(),icon:e.isBound("icon")?e.getBindingInfo("icon"):e._getIcon(),text:e.isBound("text")?e.getBindingInfo("text"):e._getText(),press:[this._onRowActionPress,this]});t.data("rowAction",e);return t},this)}e.setRowActionTemplate(new r(o));e.setRowActionCount(t.getRowActionCount())};p.prototype._removeRowActions=function(){var e=this.getInnerTable();var t=e.getRowActionTemplate();if(t){t.destroy()}e.setRowActionTemplate();e.setRowActionCount()};p.prototype._onRowActionPress=function(e){var t=this.getTable();var o=e.getParameter("item");var i=t.getRowSettings();var n=i.getAllActions();if(i.isBound("rowActions")){var r=n.items.model;var a=o.getBindingContext(r);if(!this._oRowActionItem){this._oRowActionItem=n.items.template.clone()}this._oRowActionItem.setBindingContext(a,n.items.model);this._oRowActionItem.setModel(this.getModel(r),r);i.addDependent(this._oRowActionItem)}else{this._oRowActionItem=o.data("rowAction")}this.callHook("Press",this._oRowActionItem,{bindingContext:e.getParameter("row").getBindingContext()})};p.prototype.removeToolbar=function(){var e=this.getInnerTable();if(e){e.removeExtension(this.getTable()._oToolbar)}};p.prototype.scrollToIndex=function(e){var t=this.getTable();var o=this.getInnerTable();if(!o){return Promise.reject()}return new Promise(function(i){if(e===-1){e=t._getRowCount(false)}if(o._setFirstVisibleRowIndex(e)){o.attachEventOnce("rowsUpdated",function(){i()})}else{i()}})};p.prototype.getRowBinding=function(){var e=this.getInnerTable();return e?e.getBinding():undefined};p.prototype.bindRows=function(e){var t=this.getInnerTable();if(t){t.bindRows(e)}};p.prototype.isTableBound=function(){var e=this.getInnerTable();return e?e.isBound("rows"):false};p.prototype.insertFilterInfoBar=function(e,t){var o=this.getInnerTable();if(o){o.insertExtension(e,1);if(!o.getAriaLabelledBy().includes(t)){o.addAriaLabelledBy(t)}}};p.prototype.updateSortIndicator=function(e,t){var o=e.getInnerColumn();o.setSorted(t!==g.None);o.setSortOrder(t===g.None?undefined:t)};p.prototype.getSelectedContexts=function(){var e=this.getInnerTable();var t=this._getMultiSelectionPlugin();if(!t){return[]}return t.getSelectedIndices().map(function(t){return e.getContextByIndex(t)},this)};p.prototype.clearSelection=function(){var e=this._getMultiSelectionPlugin();if(e){e.clearSelection()}};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/PropertyHelper", ["../util/PropertyHelper","sap/m/table/Util","sap/ui/base/Object"],function(e,t,r){"use strict";var l=e.extend("sap.ui.mdc.table.PropertyHelper",{constructor:function(t,r,l){e.call(this,t,r,Object.assign({filterable:true,sortable:true,propertyInfos:true,groupable:{type:"boolean",forComplexProperty:{valueIfNotAllowed:false}},key:{type:"boolean",forComplexProperty:{valueIfNotAllowed:false}},unit:{type:"PropertyReference"},text:{type:"PropertyReference"},exportSettings:{type:"object",default:{value:{},ignoreIfNull:true},forComplexProperty:{allowed:true}},visualSettings:{type:{widthCalculation:{type:{minWidth:{type:"int",default:{value:2}},maxWidth:{type:"int",default:{value:19}},defaultWidth:{type:"int",default:{value:8}},gap:{type:"float",default:{value:0}},includeLabel:{type:"boolean",default:{value:true}},truncateLabel:{type:"boolean",default:{value:true}},verticalArrangement:{type:"boolean",default:{value:false}},excludeProperties:{type:"PropertyReference[]"}},default:{value:{},ignoreIfNull:true}}},default:{value:{}},forComplexProperty:{allowed:true}}},l?{extension:{type:l,default:{value:{}},forComplexProperty:{allowed:true,propagateAllowance:false}}}:{},this._bEnableAggregatableAttribute?{aggregatable:{type:"boolean",forComplexProperty:{valueIfNotAllowed:false}}}:{}))}});l.prototype.prepareProperty=function(t){e.prototype.prepareProperty.apply(this,arguments);if(!t.isComplex()&&!t.typeConfig&&t.dataType&&this.getParent()){var r=this.getParent().getControlDelegate().getTypeUtil();t.typeConfig=r.getTypeConfig(t.dataType,t.formatOptions,t.constraints)}Object.defineProperty(t,"getGroupableProperties",{value:function(){return t.getSimpleProperties().filter(function(e){return e.groupable})}})};l.prototype.getGroupableProperties=function(){return this.getProperties().filter(function(e){return e.groupable})};l.prototype.getColumnExportSettings=function(e){var t=[];if(!r.isA(e,"sap.ui.mdc.table.Column")){return t}var l=this.getProperty(e.getDataProperty());if(!l){return t}var a=l.exportSettings;if(a===null){return t}var o=[];var i;var u;if(!l.isComplex()){i=n(e,l,a);i.property=l.path;t.push(i);return t}u=l.getSimpleProperties();if(Object.keys(a).length){i=n(e,l,a);u.forEach(function(e){o.push(e.path)});i.property=o;t.push(i)}else{u.forEach(function(r,l){if(!r.exportSettings){return}var a=n(e,r,r.exportSettings);a.property=r.path;if(l>0){a.columnId=e.getId()+"-additionalProperty"+l}if(r.exportSettings||a.property){t.push(a)}})}return t};function a(e){if(e.indexOf("em")>0){return Math.round(parseFloat(e))}if(e.indexOf("px")>0){return Math.round(parseInt(e)/16)}return""}function n(e,t,r){return Object.assign({columnId:e.getId(),label:t.label,width:a(e.getWidth()),textAlign:e.getHAlign(),type:"String"},r)}l.prototype.calculateColumnWidth=function(e){var t=e.getDataProperty();var r=e.getTable();return r._getPropertyByNameAsync(t).then(function(t){if(!t){return null}var r=t.visualSettings;if(r&&r.widthCalculation===null){return null}return this._calcColumnWidth(t,e)}.bind(this))};l.prototype._calcColumnWidth=function(e,r){var l=Object.assign({gap:0,includeLabel:true,truncateLabel:true,excludeProperties:[],required:r.getRequired()},e.visualSettings&&e.visualSettings.widthCalculation);var a=r.getParent();if(a&&a._isOfType("TreeTable")&&a.indexOfColumn(r)==0){l.treeColumn=true}var n=[];if(e.isComplex()){n=e.getSimpleProperties().flatMap(function(e){var t=e.visualSettings?e.visualSettings.widthCalculation:undefined;return t===null||l.excludeProperties.includes(e.name)?[]:[[e.typeConfig.typeInstance,t]]})}else{n.push(e.typeConfig.typeInstance)}if(e.unit){l.gap+=2.5}var o=l.includeLabel?r.getHeader()||e.label:"";return t.calcColumnWidth(n,o,l)};return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/ResponsiveColumnSettings", ["./ColumnSettings"],function(e){"use strict";var t=e.extend("sap.ui.mdc.table.ResponsiveColumnSettings",{metadata:{library:"sap.ui.mdc",final:true,properties:{importance:{type:"sap.ui.core.Priority",group:"Behavior",defaultValue:"None"},mergeFunction:{type:"string",group:"Misc"}}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/ResponsiveTableType", ["./TableTypeBase","./utils/Personalization","../library","sap/m/Button","sap/m/plugins/ColumnResizer","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/ui/Device","sap/ui/core/Core"],function(e,t,o,i,n,s,a,r,l){"use strict";var u,p,g;var h=o.GrowingMode;var d=o.RowAction;var c=e.extend("sap.ui.mdc.table.ResponsiveTableType",{metadata:{library:"sap.ui.mdc",properties:{growingMode:{type:"sap.ui.mdc.GrowingMode",defaultValue:h.Basic},showDetailsButton:{type:"boolean",group:"Misc",defaultValue:false},detailsButtonSetting:{type:"sap.ui.core.Priority[]",group:"Behavior"},popinLayout:{type:"sap.m.PopinLayout",group:"Appearance",defaultValue:"Block"}}}});c.prototype.setDetailsButtonSetting=function(e){return this.setProperty("detailsButtonSetting",e,true)};c.prototype.updateTableByProperty=function(e,t){var o=this.getInnerTable();if(!o){return}if(e==="growingMode"){o.setGrowingScrollToLoad(t===h.Scroll);o.setGrowing(t!==h.None)}else if(e==="showDetailsButton"){this._updateShowDetailsButton(o,t)}else if(e==="popinLayout"){o.setPopinLayout(t)}};c.prototype._updateShowDetailsButton=function(e,t){if(t&&!this._oShowDetailsButton){e.getHeaderToolbar().insertEnd(this._getShowDetailsButton(),0);e.attachEvent("popinChanged",this._onPopinChanged,this);e.setHiddenInPopin(this._getImportanceToHide())}else if(!t&&this._oShowDetailsButton){e.detachEvent("popinChanged",this._onPopinChanged,this);e.getHeaderToolbar().removeEnd(this._oShowDetailsButton);e.setHiddenInPopin([]);this._oShowDetailsButton.destroy();delete this._oShowDetailsButton}};c.prototype.loadModules=function(){if(!u){return new Promise(function(e,t){sap.ui.require(["sap/m/Table","sap/m/Column","sap/m/ColumnListItem"],function(t,o,i){u=t;p=o;g=i;e()},function(){t("Failed to load some modules")})})}else{return Promise.resolve()}};c.prototype.createTable=function(e){var t=this.getTable();if(!t||!u){return null}return new u(e,this.getTableSettings())};c.prototype.getTableSettings=function(){var t=this.getTable();return Object.assign({},e.prototype.getTableSettings.apply(this,arguments),{autoPopinMode:true,contextualWidth:"Auto",growing:true,sticky:["ColumnHeaders","HeaderToolbar","InfoToolbar"],itemPress:[this._onItemPress,this],selectionChange:[this._onSelectionChange,this],growingThreshold:this.getThreshold(),noData:t._getNoDataText(),headerToolbar:t._oToolbar,ariaLabelledBy:[t._oTitle],mode:this._getSelectionMode(),multiSelectMode:this._getMultiSelectMode()})};c.prototype._onItemPress=function(e){this.callHook("RowPress",this.getTable(),{bindingContext:e.getParameter("listItem").getBindingContext()});this._onRowActionPress(e)};c.prototype._onSelectionChange=function(e){var t=this.getTable();var o=e.getParameter("selectAll");this.callHook("SelectionChange",t,{bindingContext:e.getParameter("listItem").getBindingContext(),selected:e.getParameter("selected"),selectAll:o})};c.createColumn=function(e,t){return new p(e,t)};c.prototype.createRowTemplate=function(e){return new g(e,this.getRowSettingsConfig())};c.prototype._getSelectionMode=function(){var e=this.getTable();var t=e?e.getSelectionMode():undefined;var o={Single:"SingleSelectLeft",SingleMaster:"SingleSelectMaster",Multi:"MultiSelect",None:"None",undefined:"None"};return o[t]};c.prototype._getMultiSelectMode=function(){var e=this.getTable();var t=e?e.getMultiSelectMode():undefined;var o={Default:"SelectAll",ClearAll:"ClearAll"};return o[t]};c.prototype.updateSelectionSettings=function(){var e=this.getTable();var t=this.getInnerTable();if(!e||!t){return}t.setMode(this._getSelectionMode());t.setMultiSelectMode(this._getMultiSelectMode())};c.prototype.updateRowSettings=function(){var e=this.getTable();if(!e||!e._oRowTemplate){return}e._oRowTemplate.unbindProperty("navigated");e._oRowTemplate.unbindProperty("highlight");e._oRowTemplate.unbindProperty("highlightText");e._oRowTemplate.applySettings(this.getRowSettingsConfig());this.updateRowActions()};c.prototype.updateRowActions=function(){var e=this.getTable();var t=this.getRowActionsConfig();var o=e.hasListeners("rowPress")?"Active":"Inactive";e._oRowTemplate.unbindProperty("type");if(!e.getRowSettings()){e._oRowTemplate.setType(o);return}var i,n,s;if("templateInfo"in t){var a=t.templateInfo;s=a.visible.formatter;n=typeof a.visible=="object";i=a.visible}else if(t&&t.items){var r;if(t.items.length==0){e._oRowTemplate.setType(o);return}r=t.items.find(function(e){return e.getType()=="Navigation"});if(!r&&t.items.length>0){throw new Error("No RowAction of type 'Navigation' found. sap.m.Table only accepts RowAction of type 'Navigation'.")}e._oRowTemplate.data("rowAction",r);n=r.isBound("visible");i=n?r.getBindingInfo("visible"):r.getVisible();s=i.formatter}if(s){i.formatter=function(e){var t=s(e);return t?d.Navigation:o}}else{i=i?d.Navigation:o}if(n){e._oRowTemplate.bindProperty("type",i)}else{e._oRowTemplate.setProperty("type",i)}};c.prototype.enableColumnResize=function(){var e=this.getTable();var t=this.getInnerTable();if(!e||!t){return}var o=n.getPlugin(t);t.setFixedLayout("Strict");if(!o){o=new n;t.addDependent(o);o.attachColumnResize(this._onColumnResize,this)}else{o.setEnabled(true);o.detachColumnResize(this._onColumnResize,this);o.attachColumnResize(this._onColumnResize,this)}};c.prototype.disableColumnResize=function(){var e=this.getTable();var t=this.getInnerTable();if(!e||!t){return}var o=n.getPlugin(t);if(o){o.setEnabled(false);o.detachColumnResize(this._onColumnResize,this)}};c.prototype._onColumnResize=function(e){var t=this.getTable();var o=this.getInnerTable();var i=e.getParameter("column");var n=e.getParameter("width");var s=o.indexOfColumn(i);var a=t.getColumns()[s];this.callHook("ColumnResize",t,{column:a,width:n})};c.prototype.createColumnResizeMenuItem=function(e,t){var o=n.getPlugin(this.getInnerTable());if(!o){return}if(t.isA("sap.m.table.columnmenu.Menu")){return o.getColumnResizeQuickAction(e.getInnerColumn(),t)}else{return o.getColumnResizeButton(e.getInnerColumn())}};c.prototype._toggleShowDetails=function(e){if(!this._oShowDetailsButton||e===this.bHideDetails){return}var t=this.getInnerTable();this.bHideDetails=e;if(this.bHideDetails){t.setHiddenInPopin(this._getImportanceToHide());this._oShowDetailsButton.setSelectedKey("hideDetails")}else{t.setHiddenInPopin([]);this._oShowDetailsButton.setSelectedKey("showDetails")}};c.prototype._getShowDetailsButton=function(){if(!this._oShowDetailsButton){var e=l.getLibraryResourceBundle("sap.ui.mdc");var t=this.getTable().getId();this.bHideDetails=true;this._oShowDetailsButton=new s(t+"-showHideDetails",{visible:false,selectedKey:"hideDetails",items:[new a({id:t+"-showDetails",icon:"sap-icon://detail-more",key:"showDetails",tooltip:e.getText("table.SHOWDETAILS_TEXT"),press:[function(){this._toggleShowDetails(false)},this]}),new a({id:t+"-hideDetails",icon:"sap-icon://detail-less",key:"hideDetails",tooltip:e.getText("table.HIDEDETAILS_TEXT"),press:[function(){this._toggleShowDetails(true)},this]})]})}return this._oShowDetailsButton};c.prototype._getImportanceToHide=function(){var e=this.getDetailsButtonSetting()||[];if(e.length){return e}else{return r.system.phone?["Low","Medium"]:["Low"]}};c.prototype._onPopinChanged=function(e){var t=e.getParameter("hasPopin");var o=e.getParameter("hiddenInPopin");var i=e.getSource().getVisibleItems().length;if(i&&(o.length||t&&!this.bHideDetails)){this._oShowDetailsButton.setVisible(true)}else{this._oShowDetailsButton.setVisible(false)}};c.prototype._onRowActionPress=function(e){var t=this.getTable();var o=e.getParameter("listItem");if(o.getType()!=="Navigation"){return}var i=t.getRowSettings();var n=i.getAllActions();if(i.isBound("rowActions")){var s=n.items.model;if(!this._oRowActionItem){this._oRowActionItem=n.items.template.clone()}this._oRowActionItem.setModel(t.getModel(s),s);i.addDependent(this._oRowActionItem)}else{this._oRowActionItem=o.data("rowAction")}this._oRowActionItem.setType("Navigation");this.callHook("Press",this._oRowActionItem,{bindingContext:o.getBindingContext()})};c.prototype.removeToolbar=function(){var e=this.getInnerTable();if(e){e.setHeaderToolbar()}};c.prototype.scrollToIndex=function(e){var t=this.getInnerTable();if(t){return t.scrollToIndex(e)}else{return Promise.reject()}};c.prototype.getRowBinding=function(){var e=this.getInnerTable();return e?e.getBinding("items"):undefined};c.prototype.bindRows=function(e){var t=this.getInnerTable();if(t){t.bindItems(e)}};c.prototype.isTableBound=function(){var e=this.getInnerTable();if(e){return e.isBound("items")}else{return false}};c.prototype.insertFilterInfoBar=function(e,t){var o=this.getInnerTable();if(o){o.setInfoToolbar(e);if(!o.getAriaLabelledBy().includes(t)){o.addAriaLabelledBy(t)}}};c.prototype.updateSortIndicator=function(e,t){e.getInnerColumn().setSortIndicator(t)};c.prototype.getSelectedContexts=function(){var e=this.getInnerTable();if(!e){return[]}return e.getSelectedContexts()};c.prototype.clearSelection=function(){var e=this.getInnerTable();if(e){e.removeSelections(true)}};c.prototype._onColumnInsert=function(e){var o=this.getTable();var i=this.getInnerTable();if(t.isUserPersonalizationActive(o)&&i.getHiddenInPopin().includes(e.getImportance())&&o.getColumns().pop()===e){this._toggleShowDetails(false)}};return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/RowActionItem", ["sap/ui/core/Element","../library","sap/ui/core/IconPool","sap/ui/core/Core"],function(t,e,i,n){"use strict";var o=e.RowAction;var r=t.extend("sap.ui.mdc.table.RowActionItem",{metadata:{library:"sap.ui.mdc",properties:{type:{type:"sap.ui.mdc.RowAction"},text:{type:"string"},icon:{type:"sap.ui.core.URI"},visible:{type:"boolean",defaultValue:true}},events:{press:{parameters:{bindingContext:{type:"sap.ui.model.Context"}}}}}});var a={navigationIcon:"navigation-right-arrow"};r.prototype._getText=function(){var t;if(this.getText()){t=this.getText()}else{var e=n.getLibraryResourceBundle("sap.ui.mdc");if(this.getType()===o.Navigation){t=e.getText("table.ROW_ACTION_ITEM_NAVIGATE")}}return t};r.prototype._getIcon=function(){var t;if(this.getIcon()){t=this.getIcon()}else if(this.getType()===o.Navigation){t=i.getIconURI(a["navigationIcon"])}return t};r.prototype._onPress=function(t){this.firePress({bindingContext:t.bindingContext})};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/RowSettings", ["sap/ui/core/Element"],function(t){"use strict";var i=t.extend("sap.ui.mdc.table.RowSettings",{metadata:{library:"sap.ui.mdc",properties:{highlight:{type:"string",group:"Appearance",defaultValue:"None"},highlightText:{type:"string",group:"Misc",defaultValue:""},navigated:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{rowActions:{type:"sap.ui.mdc.table.RowActionItem",multiple:true}}}});i.prototype.getAllSettings=function(){var t={},i=this.clone();if(this.isBound("navigated")){t.navigated=i.getBindingInfo("navigated")}else{t.navigated=this.getNavigated()}if(this.isBound("highlight")){t.highlight=i.getBindingInfo("highlight")}else{t.highlight=this.getHighlight()}if(this.isBound("highlightText")){t.highlightText=i.getBindingInfo("highlightText")}else{t.highlightText=this.getHighlightText()}return t};i.prototype.getAllActions=function(){var t={},i=this.clone();if(this.isBound("rowActions")){t.items=i.getBindingInfo("rowActions");var e=t.items.template;t.templateInfo={type:e.isBound("type")?e.getBindingInfo("type"):e.getType(),text:e.isBound("text")?e.getBindingInfo("text"):e.getText(),icon:e.isBound("icon")?e.getBindingInfo("icon"):e.getIcon(),visible:e.isBound("visible")?e.getBindingInfo("visible"):e.getVisible()}}else{t.items=this.getRowActions()}return t};i.prototype.getRowActionCount=function(){var t=0;if(this.isBound("rowActions")){t=1}else{t=this.getRowActions().length}return t};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/TableSettings", ["sap/m/OverflowToolbarButton","sap/m/library","sap/m/OverflowToolbarMenuButton","sap/ui/core/library","sap/ui/Device","sap/ui/core/ShortcutHintsMixin","sap/ui/core/theming/Parameters"],function(e,t,a,n,o,i,r){"use strict";var s=n.aria.HasPopup;var u;var l={createSettingsButton:function(e,t){if(!u){this._loadResourceBundle()}var a=this._createButton(e+"-settings",{icon:"sap-icon://action-settings",text:u.getText("table.SETTINGS"),press:t,tooltip:u.getText("table.SETTINGS"),ariaHasPopup:s.Dialog});i.addConfig(a,{addAccessibilityLabel:true,messageBundleKey:o.os.macintosh?"mdc.PERSONALIZATION_SHORTCUT_MAC":"mdc.PERSONALIZATION_SHORTCUT"},t[1]);return a},createPasteButton:function(e){var t=this._createButton(e+"-paste");sap.ui.require(["sap/m/plugins/PasteProvider"],function(a){t.addDependent(new a({pasteFor:e+"-innerTable"}))});return t},createExportButton:function(e,n){if(!u){this._loadResourceBundle()}var s=r.get({name:"_sap_ui_mdc_Table_ExportButtonType"});var l=new a(e+"-export",{icon:"sap-icon://excel-attachment",text:u.getText("table.QUICK_EXPORT"),tooltip:u.getText("table.EXPORT_BUTTON_TEXT"),type:t.ButtonType[s],buttonMode:t.MenuButtonMode.Split,useDefaultActionOnly:true,defaultAction:n.default});sap.ui.getCore().loadLibrary("sap.ui.unified",{async:true}).then(function(){sap.ui.require(["sap/m/Menu","sap/m/MenuItem"],function(e,t){var a=new e({items:[new t({text:u.getText("table.QUICK_EXPORT"),press:n.default}),new t({text:u.getText("table.EXPORT_WITH_SETTINGS"),press:n.exportAs})]});l.setMenu(a)})});i.addConfig(l._getButtonControl(),{addAccessibilityLabel:true,messageBundleKey:o.os.macintosh?"table.SHORTCUT_EXPORT_TO_EXCEL_MAC":"table.SHORTCUT_EXPORT_TO_EXCEL"},n.exportAs[1]);return l},createExpandCollapseAllButton:function(e,t,a){if(!u){this._loadResourceBundle()}var n=a?e+"-expandAll":e+"-collapseAll",o=a?u.getText("table.EXPAND_ALL"):u.getText("table.COLLAPSE_ALL");var i=this._createButton(n,{icon:a?"sap-icon://expand-all":"sap-icon://collapse-all",text:o,press:t,tooltip:o});return i},_createButton:function(t,a){return new e(t,a)},_loadResourceBundle:function(){u=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")}};return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/TableTypeBase", ["../library","sap/ui/core/Element","sap/ui/core/dnd/DragDropInfo"],function(t,e,o){"use strict";var n=t.TableP13nMode;var r=e.extend("sap.ui.mdc.table.TableTypeBase",{metadata:{library:"sap.ui.mdc",properties:{}}});r.prototype.getSupportedP13nModes=function(){return Object.keys(n)};r.prototype.callHook=function(t,e,o){var n="_on"+t;if(!e||!(e[n]instanceof Function)){throw new Error(this+": Hook '"+t+"' does not exist on "+e)}e[n].call(e,o)};r.prototype.getTable=function(){var t=this.getParent();return t&&t.isA("sap.ui.mdc.Table")?t:null};r.prototype.getInnerTable=function(){var t=this.getTable();return t?t._oTable:null};r.prototype.setProperty=function(t,o){e.prototype.setProperty.apply(this,arguments);this.updateTableByProperty(t,o);return this};r.prototype.updateTable=function(){for(var t in this.getMetadata().getAllProperties()){this.updateTableByProperty(t,this.getProperty(t))}};r.prototype.getTableSettings=function(){var t=this.getTable();if(!t){return{}}var e=new o({sourceAggregation:"columns",targetAggregation:"columns",dropPosition:"Between",enabled:t.getActiveP13nModes().includes(n.Column),drop:[this._onColumnMove,this]});e.bIgnoreMetadataCheck=true;return{dragDropConfig:[e],busyIndicatorDelay:t.getBusyIndicatorDelay(),paste:[this._onPaste,this]}};r.prototype.getThreshold=function(){var t=this.getTable();var e=t?t.getThreshold():-1;return e>-1?e:undefined};r.prototype.getRowSettingsConfig=function(){var t=this.getTable();var e=t?t.getRowSettings():null;return e?e.getAllSettings():null};r.prototype.getRowActionsConfig=function(){var t=this.getTable();var e=t?t.getRowSettings():null;return e?e.getAllActions():null};r.prototype._onColumnMove=function(t){var e=this.getTable();var o=this.getInnerTable();var n=t.getParameter("draggedControl");var r=t.getParameter("droppedControl");if(n===r){return}var i=t.getParameter("dropPosition");var a=o.indexOfColumn(n);var p=o.indexOfColumn(r);var u=p+(i=="Before"?0:1)+(a<p?-1:0);this.callHook("ColumnMove",e,{column:e.getColumns()[a],newIndex:u})};r.prototype._onPaste=function(t){this.callHook("Paste",this.getTable(),{data:t.getParameter("data")})};r.prototype._onColumnInsert=function(t){};r.prototype.loadModules=function(){return Promise.reject()};r.prototype.updateTableByProperty=function(t,e){};r.prototype.removeToolbar=function(){};r.prototype.scrollToIndex=function(t){return Promise.reject()};r.prototype.updateRowSettings=function(){};r.prototype.createTable=function(t){};r.prototype.getRowBinding=function(){};r.prototype.bindRows=function(t){};r.prototype.isTableBound=function(){};r.prototype.createRowTemplate=function(t){};r.prototype.updateSelectionSettings=function(){};r.prototype.insertFilterInfoBar=function(t,e){};r.prototype.enableColumnResize=function(){};r.prototype.disableColumnResize=function(){};r.prototype.createColumnResizeMenuItem=function(){};r.prototype.updateRowActions=function(){};r.prototype.updateSortIndicator=function(t,e){};r.prototype.getSelectedContexts=function(){};r.prototype.clearSelection=function(){};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/TreeTableType", ["./GridTableType"],function(e){"use strict";var t;var r=e.extend("sap.ui.mdc.table.TreeTableType",{metadata:{library:"sap.ui.mdc"}});r.prototype.loadModules=function(){if(t){return Promise.resolve()}return Promise.all([e.prototype.loadModules.apply(this,arguments),this.loadUiTableLibrary().then(function(){return new Promise(function(e,r){sap.ui.require(["sap/ui/table/TreeTable"],function(r){t=r;e()},function(){r("Failed to load some modules")})})})])};r.prototype.createTable=function(e){var r=this.getTable();if(!r||!t){return null}var a=new t(e,this.getTableSettings());a._oProxy._bEnableV4=true;return a};r.prototype.getTableSettings=function(){var t=this.getTable();var r=t?t.bDelegateInitialized&&t.getControlDelegate().getSupportedFeatures(t)["selection"]:false;var a=e.prototype.getTableSettings.apply(this,arguments);if(!r){a.plugins[0].destroy();delete a.plugins;a.selectionMode="None"}return a};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/V4AnalyticsPropertyHelper", ["./PropertyHelper"],function(e){"use strict";var t=e.extend("sap.ui.mdc.table.V4AnalyticsPropertyHelper",{constructor:function(t,r){this._bEnableAggregatableAttribute=true;e.call(this,t,r,{technicallyGroupable:{type:"boolean",default:{value:"attribute:groupable"},forComplexProperty:{valueIfNotAllowed:false}},technicallyAggregatable:{type:"boolean",default:{value:"attribute:aggregatable"},forComplexProperty:{valueIfNotAllowed:false}},customAggregate:{type:{contextDefiningProperties:{type:"PropertyReference[]"}}}})}});t.prototype.validateProperty=function(t,r,a){e.prototype.validateProperty.apply(this,arguments);if(t.groupable&&t.extension&&t.extension.technicallyGroupable===false){throw new Error("Invalid property definition: A property cannot be groupable when not technically groupable.\n"+t)}if(t.aggregatable&&t.extension&&t.extension.technicallyAggregatable===false){throw new Error("Invalid property definition: A property cannot be aggregatable when not technically aggregatable.\n"+t)}};t.prototype.prepareProperty=function(t){e.prototype.prepareProperty.apply(this,arguments);Object.defineProperty(t,"getAggregatableProperties",{value:function(){return t.getSimpleProperties().filter(function(e){return e.aggregatable})}})};t.prototype.getAggregatableProperties=function(){return this.getProperties().filter(function(e){return e.aggregatable})};t.prototype.getPropertiesForPlugin=function(){return this.getProperties().reduce(function(e,t){if(t.isComplex()){return e}var r={name:t.name,path:t.path,key:t.key,text:t.text,unit:t.unit,groupable:t.extension.technicallyGroupable,aggregatable:t.extension.technicallyAggregatable};if(t.extension.customAggregate){r.aggregationDetails={customAggregate:{contextDefiningProperties:t.extension.customAggregate.contextDefiningProperties}}}e.push(r);return e},[])};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/menu/Item", ["sap/ui/core/Core","sap/ui/Device","sap/m/table/columnmenu/Item"],function(t,e,n){"use strict";var i=n.extend("sap.ui.mdc.table.menu.Item",{metadata:{library:"sap.ui.mdc",properties:{key:{type:"string"}}}});i.prototype.initializeContent=function(){var n=this.getTable();var i=t.byId(this.getParent().getAssociation("column"));var r=n.getEngine();var o=this.getKey();var a=r.getController(n,o);if(o==="Filter"){var s=n.getPropertyHelper().getProperty(i.getDataProperty()).getFilterableProperties();var g=s.map(function(t){return t.name});n.getInbuiltFilter().setVisibleFields(g)}return n.getEngine().uimanager.create(n,[o]).then(function(t){if(!e.system.phone){t[0].setProperty("_useFixedWidth",true)}this.setContent(t[0]);this.setLabel(a.getUISettings().title);a.update(n.getPropertyHelper());r.validateP13n(n,o,this.getContent());this.changeButtonSettings({reset:{visible:true}})}.bind(this))};i.prototype.onPress=function(){var t=this.getTable();t.getEngine().getController(t,this.getKey()).update(t.getPropertyHelper())};i.prototype.onConfirm=function(){var t=this.getTable();t.getEngine().handleP13n(t,[this.getKey()])};i.prototype.onReset=function(){var t=this.getTable();var e=this.getKey();t.getEngine().reset(t,[e]).then(function(){t._oQuickActionContainer.updateQuickActions([e])})};i.prototype.destroyContent=function(){if(this.getKey()==="Filter"){return this}return this.destroyAggregation("content")};i.prototype.getTable=function(){return this.getParent().getTable()};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/menu/ItemContainer", ["sap/m/table/columnmenu/ItemContainer","sap/ui/mdc/table/menu/Item","sap/ui/core/Core"],function(e,t,i){"use strict";var n=e.extend("sap.ui.mdc.table.menu.ItemContainer",{metadata:{library:"sap.ui.mdc",associations:{table:{type:"sap.ui.mdc.Table"},column:{type:"sap.ui.mdc.table.Column"}}}});n.prototype.initializeItems=function(){var e=this.getTable();this.removeAllItems();if(e._isP13nButtonHidden()){return Promise.resolve()}if(e.isSortingEnabled()){this.addItem(new t({key:"Sort",icon:"sap-icon://sort"}))}if(e.isFilteringEnabled()){this.addItem(new t({key:"Filter",icon:"sap-icon://filter"}))}if(e.isGroupingEnabled()){this.addItem(new t({key:"Group",icon:"sap-icon://group-2"}))}if(e.getActiveP13nModes().includes("Column")){this.addItem(new t({key:"Column",icon:"sap-icon://table-column"}))}return Promise.all(this.getItems().map(function(e){return e.initializeContent()}))};n.prototype.hasItems=function(){return this.getEffectiveItems().length>0};n.prototype.getTable=function(){return i.byId(this.getAssociation("table"))};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/menu/QuickActionContainer", ["../ResponsiveTableType","../utils/Personalization","sap/m/table/columnmenu/QuickActionContainer","sap/m/table/columnmenu/QuickAction","sap/m/table/columnmenu/QuickSort","sap/m/table/columnmenu/QuickSortItem","sap/m/table/columnmenu/QuickGroup","sap/m/table/columnmenu/QuickGroupItem","sap/m/table/columnmenu/QuickTotal","sap/m/table/columnmenu/QuickTotalItem","sap/m/Button","sap/ui/core/Core","sap/ui/core/library"],function(e,t,r,n,o,i,a,u,s,c,g,l,m){"use strict";var p=r.extend("sap.ui.mdc.table.menu.QuickActionContainer",{metadata:{library:"sap.ui.mdc",associations:{table:{type:"sap.ui.mdc.Table"},column:{type:"sap.ui.mdc.table.Column"}}}});p.prototype.initializeQuickActions=function(){var e=this.getTable();var r=this.getColumn();var n=e.getPropertyHelper();var g=Promise.resolve();this.destroyQuickActions();if(e.isSortingEnabled()){var l=n.getProperty(r.getDataProperty()).getSortableProperties();var p=e._getSortedProperties();if(l.length>0){this.addQuickAction(new o({items:l.map(function(e){var t=m.SortOrder.None;var r=p.find(function(t){return t.name===e.name});if(r){t=r.descending?m.SortOrder.Descending:m.SortOrder.Ascending}return new i({key:e.name,label:e.label,sortOrder:t})}),change:function(r){var n=r.getParameter("item");t.createSortChange(e,{property:n.getKey(),sortOrder:n.getSortOrder()})}}))}}if(e.isGroupingEnabled()){var d=n.getProperty(r.getDataProperty()).getGroupableProperties();var f=e._getGroupedProperties();if(d.length>0){this.addQuickAction(new a({items:d.map(function(e){var t=f.some(function(t){return t.name===e.name});return new u({key:e.name,label:e.label,grouped:t})}),change:function(r){t.createGroupChange(e,{property:r.getParameter("item").getKey()})}}))}}if(e.isAggregationEnabled()){var y=n.getProperty(r.getDataProperty()).getAggregatableProperties().filter(function(e){return e.extension&&e.extension.customAggregate});var b=e._getAggregatedProperties();if(y.length>0){this.addQuickAction(new s({items:y.map(function(e){return new c({key:e.name,label:e.label,totaled:b.hasOwnProperty(e.name)})}),change:function(r){t.createAggregateChange(e,{property:r.getParameter("item").getKey()})}}))}}if(e.getEnableColumnResize()){this.addQuickAction(e._getType().createColumnResizeMenuItem(r,this.getMenu()))}return g};p.prototype.updateQuickActions=function(e){var t=this.getTable();var r=t._getSortedProperties();var n=t._getGroupedProperties();var o=t._getAggregatedProperties();this.getQuickActions().forEach(function(t){if((!e||e.includes("Sort"))&&t.isA("sap.m.table.columnmenu.QuickSort")){t.getItems().forEach(function(e){var t=r.find(function(t){return t.name===e.getProperty("key")});if(t){e.setSortOrder(t.descending?m.SortOrder.Descending:m.SortOrder.Ascending)}else{e.setSortOrder(m.SortOrder.None)}})}else if((!e||e.includes("Group"))&&t.isA("sap.m.table.columnmenu.QuickGroup")){t.getItems().forEach(function(e){var t=n.some(function(t){return t.name===e.getProperty("key")});e.setGrouped(t)})}else if((!e||e.includes("Aggregate"))&&t.isA("sap.m.table.columnmenu.QuickTotal")){t.getItems().forEach(function(e){var t=o.hasOwnProperty(e.getProperty("key"));e.setTotaled(t)})}})};p.prototype.hasQuickActions=function(){return this.getEffectiveQuickActions().length>0};p.prototype.getTable=function(){return l.byId(this.getAssociation("table"))};p.prototype.getColumn=function(){return l.byId(this.getAssociation("column"))};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/utils/Personalization", ["sap/ui/core/library"],function(e){"use strict";var t={};t.isUserPersonalizationActive=function(e){return e._bUserPersonalizationActive===true};t.detectUserPersonalizationCompletion=function(e,t){if(!t.isOpen()){return}e._bUserPersonalizationActive=true;t.attachEventOnce("afterClose",function(){e.getEngine().waitForChanges(e).then(function(){delete e._bUserPersonalizationActive})})};t.openSettingsDialog=function(e){n(e,e.getActiveP13nModes())};t.openFilterDialog=function(e,t){return n(e,["Filter"],t)};function n(e,t,n){return e.finalizePropertyHelper().then(function(){var r=e.getEngine();if(e.getInbuiltFilter()){e.getInbuiltFilter().setVisibleFields(null)}return r.uimanager.show(e,t,{close:function(){if(n){n()}r.waitForChanges(e).then(function(){delete e._bUserPersonalizationActive})}}).then(function(t){if(t){e._bUserPersonalizationActive=true}return t})})}t.createSortChange=function(t,n){t.getEngine().createChanges({control:t,key:"Sort",state:[{name:n.property,descending:n.sortOrder===e.SortOrder.Descending,sorted:n.sortOrder!==e.SortOrder.None}],applyAbsolute:true})};t.createGroupChange=function(e,t){var n=(e.getCurrentState().groupLevels||[]).some(function(e){return e.name==t.property});e.getEngine().createChanges({control:e,key:"Group",state:[{grouped:!n,name:t.property}],applyAbsolute:e._isOfType("ResponsiveTable")})};t.createFilterChange=function(e,t){e.getEngine().createChanges({control:e,key:"Filter",state:t.conditions,applyAbsolute:t.strategy})};t.createAggregateChange=function(e,t){var n=t.property in(e.getCurrentState().aggregations||{});e.getEngine().createChanges({control:e,key:"Aggregate",state:[{name:t.property,aggregated:!n}],applyAbsolute:false})};t.createColumnWidthChange=function(e,t){e.getEngine().createChanges({control:e,key:"ColumnWidth",state:[{name:t.column.getDataProperty(),width:t.width}],applyAbsolute:false})};t.createColumnReorderChange=function(e,t){var n=e.indexOfColumn(t.column);if(n===t.index){return}e.getEngine().createChanges({control:e,key:"Column",state:[{name:t.column.getDataProperty(),position:t.index}]})};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/Common", [],function(){"use strict";var n={cleanup:function(n,e){e.forEach(function(e){var r=n[e];if(r){if(r.destroy&&!r.bIsDestroyed){r.destroy()}n[e]=null}})}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/DateUtil", ["sap/ui/core/library","sap/ui/core/date/UI5Date","sap/ui/mdc/enum/BaseType","sap/base/util/merge"],function(e,t,a,r){"use strict";var n=e.CalendarType;var o={createInternalType:function(e,t){var a=sap.ui.require(e.getMetadata().getName().replace(/\./g,"/"));var o=r({},e.getConstraints());var i=r({},e.getFormatOptions());if(i.style){delete i.style}i.pattern=t;i.calendarType=n.Gregorian;if(this.showTimezone(e)){i.showTimezone=false}return new a(i,o)},showTimezone:function(e){var t=e.getFormatOptions();var a=function(e,t){return!e.hasOwnProperty(t)||e[t]};return e.isA("sap.ui.model.odata.type.DateTimeWithTimezone")&&a(t,"showTimezone")&&(a(t,"showDate")||a(t,"showTime"))},typeToString:function(e,t,a){var r=this.createInternalType(t,a);var n=r.formatValue(e,"string");return n},stringToType:function(e,t,a){var r=this.createInternalType(t,a);var n=r.parseValue(e,"string");return n},typeToISO:function(e,t,a){var r=this.typeToDate(e,t,a);return r.toISOString()},ISOToType:function(e,a,r){var n=t.getInstance(e);if(a.getFormatOptions().UTC){n=t.getInstance(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds())}return this.dateToType(n,a,r)},dateToType:function(e,t,r){var n;if(t.getModelValue){n=t.getModelValue(e)}else{var o=t.getModelFormat();var i=t.getFormatOptions();var s=r===a.DateTime?!!i.UTC:false;n=o.format(e,s)}return n},typeToDate:function(e,r,n){var o;if(r.isA("sap.ui.model.odata.type.DateTime")&&r.getConstraints().displayFormat==="Date"){o=t.getInstance(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}else{var i=r.getModelFormat();var s=r.getFormatOptions();var T=n===a.DateTime?!!s.UTC:false;o=i.parse(e,T)}return o}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/FilterUtil", ["sap/ui/mdc/util/IdentifierUtil","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/condition/ConditionConverter","sap/ui/mdc/condition/FilterConverter","sap/base/Log","sap/base/util/merge"],function(e,t,i,r,n,o){"use strict";var a={getPropertyByKey:function(t,i){var r=null;t.some(function(t){if(e.getPropertyPath(t)===i){r=t}return r!=null});if(!r){t.some(function(t){if(e.getPropertyKey(t)===i){r=t}return r!=null})}return r},getConditionsMap:function(e,i){var r,o,a={};if(!e||!e.isA("sap.ui.mdc.FilterBar")){n.error("instance of sap.ui.mdc.FilterBar expected");return a}var s=e.getInternalConditions();for(var u in s){if(i.indexOf(u)>=0){r=[];if(s[u]){for(var l=0;l<s[u].length;l++){o={};o.operator=s[u][l].operator;if(o.operator==="EQ"&&s[u][l].validated===t.Validated){o.values=[s[u][l].values[0]]}else{o.values=s[u][l].values}r.push(o)}a[u]=r}}}return a},getFilterInfo:function(e,t,s,u){var l={};u=u?u:[];var f,p,d={},c;var g={};if(s&&s.length>0){for(p in t){if(u.indexOf(p)<0){var y=a.getPropertyByKey(s,p);if(y){g[p]={type:y.typeConfig.typeInstance,caseSensitive:y.caseSensitive,baseType:y.typeConfig.baseType};d[p]=[];for(f=0;f<t[p].length;f++){c=o({},t[p][f]);d[p].push(i.toType(c,y.typeConfig.typeInstance,e.getTypeUtil?e.getTypeUtil():e))}}else{n.error("sap.ui.mdc.util.FilterUitl.js :","could not find propertyMetadata of : "+p)}}}if(Object.keys(d).length>0){l.filters=r.createFilters(d,g)}}return l},getRequiredFieldNamesWithoutValues:function(e){var t=[];if(e&&e._getRequiredPropertyNames&&e._getConditionModel){e._getRequiredPropertyNames().forEach(function(i){var r=e._getConditionModel().getConditions(i);if(!r||r.length===0){t.push(i)}})}return t}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/FormatUtil", [],function(){"use strict";var e={getWidth:function(e,i,t){var f=e.precision||e.maxLength,n;if(!i){i=20}if(!t){t=3}if(e.type==="Edm.DateTime"&&e.type==="Edm.Date"){f="9em"}else if(f){if(f==="Max"){f=i+""}n=parseInt(f);if(!isNaN(n)){n+=.75;if(n>i){n=i}else if(n<t){n=t}f=n+"em"}else{f=null}}if(!f){if(e.type==="Edm.Boolean"){f=t+"em"}else{f=i+"em"}}return f}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/IdentifierUtil", ["sap/ui/base/DataType"],function(e){"use strict";var r={replace:function(r){var t=e.getType("sap.ui.core.ID");if(!t.isValid(r)){r=r.replace(/[^A-Za-z0-9_.:]+/g,"__mdc__");if(!t.isValid(r)){r="__mdc__"+r}}return r},getFilterFieldId:function(e,t){return e.getId()+"--filter--"+r.replace(t)},getPropertyKey:function(e){return e.name},getPropertyPath:function(e){return e.path},getView:function(e){var r=null;if(e){var t=e.getParent();while(t){if(t.isA("sap.ui.core.mvc.View")){r=t;break}t=t.getParent()}}return r}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/InfoBar", ["sap/ui/core/Control","sap/m/OverflowToolbar","sap/ui/mdc/util/InfoBarRenderer","sap/m/Text","sap/ui/core/InvisibleText","sap/m/Label","sap/m/Button","sap/m/library","sap/m/ToolbarSpacer"],function(t,e,i,s,o,n,r,l,a){"use strict";var p=t.extend("sap.ui.mdc.util.InfoBar",{metadata:{properties:{infoText:{type:"string"}},aggregations:{_toolbar:{type:"sap.m.Toolbar",multiple:false,visibility:"hidden"}},events:{press:{parameters:{srcControl:{type:"sap.ui.core.Control"}}},removeAllFilters:{parameters:{}}}},renderer:i});p.prototype.applySettings=function(){t.prototype.applySettings.apply(this,arguments);this.setInfoText(this.getInfoText())};p.prototype.init=function(){this.setVisible(false);this.oText=new s({wrapping:false});this.oInvisibleText=(new o).toStatic();this.oRemoveAllFiltersBtn=new r(this.getId()+"-RemoveAllFilters",{type:l.ButtonType.Transparent,press:function(t){this.fireRemoveAllFilters()}.bind(this),icon:"sap-icon://decline",tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("infobar.REMOVEALLFILTERS")});var t=new e(this.getId()+"--bar",{design:"Info",active:true,content:[this.oText,new a,this.oRemoveAllFiltersBtn]});t.attachPress(function(t){this.firePress({srcControl:t})}.bind(this));this.setAggregation("_toolbar",t)};p.prototype.setInfoText=function(t){this.setProperty("infoText",t);this.setVisible(!!t);if(this.oText&&this.oInvisibleText){this.oText.setText(t);this.oInvisibleText.setText(t)}return this};p.prototype.getACCTextId=function(){return this.oInvisibleText.getId()};p.prototype.exit=function(){if(this.oInvisibleText){this.oInvisibleText.destroy();this.oInvisibleText=null}if(this.oText){this.oText.destroy();this.oText=null}if(this.oRemoveAllFiltersBtn){this.oRemoveAllFiltersBtn.destroy();this.oRemoveAllFiltersBtn=null}};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/InfoBarRenderer", ["../library"],function(r){"use strict";var e={apiVersion:2};e.render=function(r,e){r.openStart("div",e);r.attr("id",e.getId());r.openEnd();r.renderControl(e.getAggregation("_toolbar"));r.close("div")};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/PromiseCache", ["sap/ui/base/Object"],function(e){"use strict";var t=function(e){if(!e){throw new Error("PromiseCache: Please provide an identifier!")}if(this._oCache&&this._oCache[e]){this.remove.call(this,e)}};var i=function(e){if(typeof e==="object"&&this._oCache){for(var t in this._oCache){if(this._oCache[t].promise===e){return t}}}};var r=function(e,t){var r=typeof e==="string"?e:i.call(this,e);var n=r&&this._oCache&&this._oCache[r];if(t&&!n){throw new Error("PromiseCache: Promise not found!")}return n};var n=e.extend("sap.ui.mdc.util.PromiseCache",{constructor:function(){this._oCache={}},add:function(e,i){t.call(this,e);var r={};this._oCache[e]=r;r.promise=new Promise(function(e,t){r.resolve=function(t){if(!r._isCanceled){r._isSettled=true;e(t)}};r.reject=function(e){if(!r._isCanceled){r._isSettled=true;t(e)}}});r.promise.isSettled=function(){return!!r._isSettled};r.promise.isPending=function(){return!r._isSettled&&!r._isCanceled};r.promise.isCanceled=function(){return!!r._isCanceled};r.promise.getInternalPromise=function(){return r._promise};if(i){var n=typeof i==="function";var o=!n&&typeof i.then==="function";if(!n&&!o){throw new Error("PromiseCache: fnCreate must be a promise or function")}var s=n?i():i;var c=s&&typeof s.then==="function";if(c){r._promise=s;r._promise.then(function(e){if(!r._isCanceled){r._isSettled=true;r.resolve(e)}return e},function(e){if(!r._isCanceled){r._isSettled=true;r.reject(e)}})}else{r.resolve(s)}}return this._oCache[e].promise},cancel:function(e){var t=r.call(this,e,true);if(!t._isSettled){t._isCanceled=true}return t.promise},retrieve:function(e,t){var i=this._oCache&&this._oCache[e];if(!i&&t){return this.add.apply(this,[e,t])}return i&&i.promise},retrieveMany:function(){var e=[];var t=arguments.length?[].slice.call(arguments):Object.keys(this._oCache);for(var i=0;i<t.length;i++){e.push(this.retrieve(t[i].toString()))}return e},remove:function(e){var t=typeof e==="string"?e:i.call(this,e);var r=t&&this._oCache&&this._oCache[t];if(r){r._isCanceled=true;delete this._oCache[t]}},resolve:function(e,t){var i=r.call(this,e,true);i.resolve(t);return i.promise},reject:function(e,t){var i=r.call(this,e,true);i.reject(t);return i.promise},clear:function(){Object.keys(this._oCache).forEach(function(e){this.remove(e)}.bind(this))},destroy:function(){this.clear();this._oCache=null}});return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/PropertyHelper", ["sap/ui/base/Object","sap/ui/base/DataType","sap/base/util/merge","sap/base/util/isPlainObject","sap/base/Log"],function(e,t,r,o,i){"use strict";var n={name:{type:"string",mandatory:true,forComplexProperty:{allowed:true}},label:{type:"string",mandatory:true,forComplexProperty:{allowed:true}},tooltip:{type:"string",forComplexProperty:{allowed:true}},visible:{type:"boolean",default:{value:true},forComplexProperty:{allowed:true}},path:{type:"string"},dataType:{type:"string",mandatory:true},formatOptions:{type:"object"},constraints:{type:"object"},maxConditions:{type:"int",default:{value:-1}},caseSensitive:{type:"boolean",default:{value:true}},group:{type:"string",forComplexProperty:{allowed:true}},groupLabel:{type:"string",forComplexProperty:{allowed:true}},filterable:{type:"boolean",default:{value:true},forComplexProperty:{valueIfNotAllowed:false}},sortable:{type:"boolean",default:{value:true},forComplexProperty:{valueIfNotAllowed:false}},propertyInfos:{type:"PropertyReference[]",forComplexProperty:{allowed:true}}};var a={isComplex:function(){return A.isPropertyComplex(this)},getSimpleProperties:function(){return this.propertyInfosProperties||[this]},getSortableProperties:function(){return this.getSimpleProperties().filter(function(e){return e.sortable})},getFilterableProperties:function(){return this.getSimpleProperties().filter(function(e){return e.filterable})},getVisibleProperties:function(){return this.getSimpleProperties().filter(function(e){return e.visible})}};var p=["name","label","tooltip","visible","path","dataType","formatOptions","constraints","maxConditions","group","groupLabel","caseSensitive"];var l=new WeakMap;function u(e){return JSON.stringify(e,function(e,t){return t===undefined?null:t})||""}function f(e,t){if(i.getLevel()<i.WARNING){return}var r=u(t);i.warning("Invalid property definition: "+e+(r?"\n"+r:""))}function s(e,t){var r=t?u(t):null;throw new Error("Invalid property definition: "+e+(r?"\n"+r:""))}function y(e,t){t.map(function(e){Object.keys(a).forEach(function(t){Object.defineProperty(e,t,{value:function(){return a[t].call(this)},writable:true})})})}function c(e){var t=Object.getOwnPropertyNames(e);Object.freeze(e);for(var r=0;r<t.length;r++){var i=e[t[r]];if(typeof i==="function"){Object.freeze(i)}else if(o(i)&&!Object.isFrozen(i)){c(i)}else if(Array.isArray(i)){c(i)}}}function v(e,t){if(!t){return e}return t.split(".").reduce(function(e,t){return e&&e[t]?e[t]:null},e)}function d(e){var r;if(typeof e==="object"){r="object"}else{r=e.replace("PropertyReference","string")}return t.getType(r)}function P(e){var t=d(e);if(t.isArrayType()){return t.getBaseType().getDefaultValue()}else{return t.getDefaultValue()}}function b(e,t){t.forEach(function(t){e.prepareProperty(t)});c(t)}function g(e,t,r,o,i,n){var a=o==null;var p=[];var u=A.isPropertyComplex(t);if(a){n=l.get(e).mAttributeMetadata;i=t}if(!i){return[]}for(var f in n){var s=n[f];var y=a?f:o+"."+f;var c=i[f];if(u&&!s.forComplexProperty.allowed){if("valueIfNotAllowed"in s.forComplexProperty){i[f]=s.forComplexProperty.valueIfNotAllowed}continue}if(c!=null&&typeof s.type==="string"&&s.type.startsWith("PropertyReference")||y==="propertyInfos"){if(u||y!=="propertyInfos"){m(i,f,r)}continue}if(c==null){h(i,s,o,f,p,c)}if(typeof s.type==="object"){p=p.concat(g(e,t,r,y,i[f],s.type))}}return p}function m(e,t,r){var o=e[t];var i;var n=t;if(Array.isArray(o)){i=o.map(function(e){return r[e]});n+="Properties"}else{i=r[o];n+="Property"}Object.defineProperty(e,n,{value:i})}function h(e,t,o,i,n,a){if("default"in t){var p=t.default;if(a===null&&p.ignoreIfNull&&"value"in p){return}if(p.value===undefined){e[i]=P(t.type)}else if(typeof p.value==="string"&&p.value.startsWith("attribute:")){n.push({source:p.value.substring(p.value.indexOf(":")+1),targetPath:o,targetAttribute:i,targetType:t.type})}else if(typeof p.value==="object"){e[i]=r({},p.value)}else{e[i]=p.value}}else{e[i]=P(t.type)}}function x(e){return Object.freeze(e.reduce(function(e,t){e[t.name]=t;return e},{}))}function w(e,t,r){for(var o in e){var i=e[o];var n=t==null?o:t+"."+o;var a=r?r.forComplexProperty:{};i.forComplexProperty=Object.assign({allowed:a.allowed&&a.propagateAllowance,propagateAllowance:true},i.forComplexProperty);if(typeof i.type==="object"){w(i.type,n,i)}}}function C(e,t){if(!Array.isArray(t)){s("Property infos must be an array.")}var o=l.get(e);var i=r([],t);e.validateProperties(i,o.aPreviousRawProperties);o.aProperties=i;o.mProperties=x(i);o.aPreviousRawProperties=r([],t);y(e,i);b(e,i)}var A=e.extend("sap.ui.mdc.util.PropertyHelper",{constructor:function(t,r,o){e.call(this);if(r&&!e.isA(r,"sap.ui.base.ManagedObject")){throw new Error("The type of the parent is invalid.")}Object.keys(o||{}).forEach(function(e){if(e in n&&o[e]!==true){throw new Error("The attribute '"+e+"' is reserved and cannot be overridden by additional attributes.")}});var i={};var a=Object.keys(o||{});i.mAttributeMetadata=p.concat(a).reduce(function(e,t){e[t]=t in n?n[t]:o[t];return e},{});w(i.mAttributeMetadata);i.aMandatoryAttributes=Object.keys(i.mAttributeMetadata).filter(function(e){return i.mAttributeMetadata[e].mandatory});i.oParent=r||null;l.set(this,i);C(this,t)}});A.prototype.validateProperties=function(e,t){var r=new Set;for(var o=0;o<e.length;o++){this.validateProperty(e[o],e,t);r.add(e[o].name)}if(r.size!==e.length){s("Properties do not have unique names.")}};A.prototype.validateProperty=function(e,t,r){if(!o(e)){s("Property info must be a plain object.",e)}j(this,e,t);if(A.isPropertyComplex(e)){if(e.propertyInfos.length===0){s("Complex property does not reference existing properties.",e)}}var i=l.get(this);i.aMandatoryAttributes.forEach(function(t){var r=i.mAttributeMetadata[t].forComplexProperty.allowed;if(e[t]==null&&A.isPropertyComplex(e)&&!r){return}if(!(t in e)){f("Property does not contain mandatory attribute '"+t+"'.",e)}else if(e[t]==null){s("Property does not contain mandatory attribute '"+t+"'.",e)}})};function j(e,t,r,o,i,n){var a=o==null;if(a){n=l.get(e).mAttributeMetadata;i=t}for(var p in i){var u=n[p];var y=a?p:o+"."+p;var c=i[p];if(!u){f("Property contains invalid attribute '"+y+"'.",t)}else if(A.isPropertyComplex(t)&&!u.forComplexProperty.allowed){f("Complex property contains invalid attribute '"+y+"'.",t)}else if(typeof u.type==="object"&&c&&typeof c==="object"){j(e,t,r,y,c,u.type)}else if(c!=null&&!d(u.type).isValid(c)){s("The value of '"+y+"' is invalid.",t)}else if(c&&typeof u.type==="string"&&u.type.startsWith("PropertyReference")){O(e,t,r,y,c,u)}}}function O(e,t,r,o,i,n){var a=n.type.endsWith("[]")?i:[i];var p=new Set(a);if(a.indexOf(t.name)>-1){s("Property references itself in the '"+o+"' attribute",t)}if(p.size!==a.length){s("Property contains duplicate names in the '"+o+"' attribute.",t)}for(var l=0;l<r.length;l++){if(p.has(r[l].name)){if(A.isPropertyComplex(r[l])){s("Property references complex properties in the '"+o+"' attribute.",t)}p.delete(r[l].name)}}if(p.size>0){s("Property references non-existing properties in the '"+o+"' attribute.",t)}}A.prototype.prepareProperty=function(e){var t=this.getPropertyMap();var r=g(this,e,t);r.forEach(function(r){var o=v(e,r.targetPath);if(o){var i=v(e,r.source);if(i==null){i=P(r.targetType)}o[r.targetAttribute]=i;if(typeof r.targetType==="string"&&r.targetType.startsWith("PropertyReference")){m(o,r.targetAttribute,t)}}})};A.prototype.getParent=function(){var e=l.get(this);return e?e.oParent:null};A.prototype.setProperties=function(e){C(this,e)};A.prototype.getProperties=function(){var e=l.get(this);return e?e.aProperties:[]};A.prototype.getPropertyMap=function(){var e=l.get(this);return e?e.mProperties:{}};A.prototype.getProperty=function(e){return this.getPropertyMap()[e]||null};A.prototype.hasProperty=function(e){return e in this.getPropertyMap()};A.isPropertyComplex=function(e){return e!=null&&typeof e==="object"?"propertyInfos"in e:false};A.prototype.getSortableProperties=function(){return this.getProperties().filter(function(e){return e.sortable})};A.prototype.getFilterableProperties=function(){return this.getProperties().filter(function(e){return e.filterable})};A.prototype.getVisibleProperties=function(){return this.getProperties().filter(function(e){return e.visible})};A.prototype.destroy=function(){e.prototype.destroy.apply(this,arguments);l.delete(this)};return A});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/TypeUtil", ["sap/ui/mdc/enum/BaseType","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/base/util/merge","sap/ui/model/SimpleType","sap/ui/mdc/util/DateUtil"],function(e,t,a,r,n,s){"use strict";var i="yyyy-MM-dd";var u="HH:mm:ss";var o={getDataTypeClassName:function(e){var t={Boolean:"sap.ui.model.type.Boolean",Currency:"sap.ui.model.type.Currency",Date:"sap.ui.model.type.Date",DateTime:"sap.ui.model.type.DateTime",Float:"sap.ui.model.type.Float",Integer:"sap.ui.model.type.Integer",String:"sap.ui.model.type.String",Time:"sap.ui.model.type.Time",Unit:"sap.ui.model.type.Unit"};if(t[e]){e=t[e]}return e},getBaseType:function(t,a,r){switch(t){case"sap.ui.model.type.Date":return e.Date;case"sap.ui.model.type.DateTime":return e.DateTime;case"sap.ui.model.type.Time":return e.Time;case"sap.ui.model.type.Boolean":return e.Boolean;case"sap.ui.model.type.Unit":case"sap.ui.model.type.Currency":if(!a||(!a.hasOwnProperty("showMeasure")||a.showMeasure)&&(!a.hasOwnProperty("showNumber")||a.showNumber)){return e.Unit}else if(!a.hasOwnProperty("showNumber")||a.showNumber){return e.Numeric}else{return e.String}case"sap.ui.model.type.Integer":case"sap.ui.model.type.Float":return e.Numeric;default:return e.String}},getBaseTypeForType:function(e){return this.getBaseType(e.getMetadata&&e.getMetadata().getName(),e.getFormatOptions(),e.getConstraints())},getDataTypeClass:function(e){var a=t.get(this.getDataTypeClassName(e)||"");if(!a){throw new Error("DataType '"+e+"' cannot be determined")}return a},getDataTypeInstance:function(e,t,a){var r=this.getDataTypeClass(e);return new r(t,a)},getTypeConfig:function(e,t,a){var r=this._normalizeType(e,t,a);return{className:r.getMetadata().getName(),typeInstance:r,baseType:this.getBaseTypeForType(r)}},internalizeValue:function(t,a,r,n){var o=this._normalizeType(a,r,n);var p=this.getBaseTypeForType(o);switch(p){case e.DateTime:return s.ISOToType(t,o,p);case e.Date:if(t.indexOf("T")>=0){t=t.substr(0,t.indexOf("T"))}return s.stringToType(t,o,i);case e.Time:return s.stringToType(t,o,u);case e.Boolean:return t;case e.Numeric:return t;default:return o.parseValue(t,"string")}},externalizeValue:function(t,a,r,n){var o=this._normalizeType(a,r,n);var p=this.getBaseTypeForType(o);switch(p){case e.DateTime:return s.typeToISO(t,o,p);case e.Date:return s.typeToString(t,o,i);case e.Time:return s.typeToString(t,o,u);case e.Boolean:return t;case e.Numeric:return t;default:return o.formatValue(t,"string")}},_normalizeType:function(e,t,a){if(e instanceof n){return e}return this.getDataTypeInstance(e,t,a)},getUnitTypeInstance:function(e,n,s){var i=e.getMetadata().getName();var u=r({},e.getFormatOptions());var o=a(e.getConstraints())?undefined:r({},e.getConstraints());var p=t.get(i);this._adjustUnitFormatOptions(u,n,s);return new p(u,o)},_adjustUnitFormatOptions:function(e,t,a){e.showNumber=t;e.showMeasure=a;e.strictParsing=true}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/loadModules", ["sap/ui/base/SyncPromise","sap/base/assert"],function(r,e){"use strict";return function a(n){e(typeof n==="string"||Array.isArray(n),"vModulePaths"+" param either must be a single string or an array of strings. - sap.ui.mdc.util.loadModules");var i;if(typeof n==="string"){i=[n]}else{i=n}var s=new Map;i.forEach(function(r){var e=sap.ui.require(r);s.set(r,e)});var t=i.filter(function(r){return s.get(r)===undefined});if(t.length===0){var u=Array.from(s.values());return r.resolve(u)}return new r(function(r,e){function a(){var e=Array.from(arguments);t.forEach(function(r,a){s.set(r,e[a])});var a=Array.from(s.values());r(a)}sap.ui.require(t,a,e)})}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/Dialog", ["sap/ui/mdc/valuehelp/base/Container","sap/ui/mdc/valuehelp/base/DialogTab","sap/ui/mdc/util/loadModules","sap/ui/Device","sap/m/VBox","sap/m/FlexItemData","sap/ui/model/resource/ResourceModel","sap/ui/mdc/util/Common","sap/ui/mdc/enum/SelectType","sap/base/strings/formatMessage","sap/ui/core/library","sap/ui/core/InvisibleMessage"],function(e,t,n,i,o,a,r,s,l,u,p,h){"use strict";var d=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.getCore().attachLocalizationChanged(function(){d=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")});var c,g,f,v,C,y;var _,m,b,I,T;var S=p.InvisibleMessageMode;var M=e.extend("sap.ui.mdc.valuehelp.Dialog",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.IDialogContainer","sap.ui.core.PopupInterface"],properties:{_selectedContentKey:{type:"string",visibility:"hidden"},_quickSelectEnabled:{type:"boolean",visibility:"hidden",defaultValue:false},_selectableContents:{type:"object[]",visibility:"hidden",defaultValue:[]},groupConfig:{type:"object",defaultValue:{}}},defaultAggregation:"content"}});function k(){if(i.system.desktop){return"700px"}if(i.system.tablet){return i.orientation.landscape?"600px":"600px"}}function P(){if(i.system.desktop){return"1080px"}if(i.system.tablet){return i.orientation.landscape?"920px":"600px"}}function B(e){var t=this.getContent();return t.filter(function(t){return!!t.getVisible()&&t.getGroup&&t.getGroup()===e}).length>1}M.prototype._handleContentSelectionChange=function(e){this.fireRequestDelegateContent({container:this.getId(),contentId:e});return this._getRetrieveDelegateContentPromise().then(function(){var t=this.getProperty("_selectedContentKey");var n=this.getContent();var i=t&&n&&n.find(function(e){return e.getId()===t});if(i){if(i.setCollectiveSearchSelect){i.setCollectiveSearchSelect(undefined)}i.onHide();this._unbindContent(i)}return this._renderSelectedContent(e)}.bind(this))};M.prototype._onTabBarSelect=function(e){var t=e&&e.getParameter("key");this._handleContentSelectionChange(t)};M.prototype.invalidate=function(t){if(t){var n=this.getContent();var i=n.indexOf(t);if(this._oIconTabBar&&i!==-1&&!this._bIsBeingDestroyed){var o=this._oIconTabBar.getItems();if(o[i]){o[i].invalidate(t)}}else{e.prototype.invalidate.apply(this,arguments)}}};M.prototype._getUIAreaForContent=function(){var t=this.getAggregation("_container");if(t){return t.getUIArea()}return e.prototype._getUIAreaForContent.apply(this,arguments)};M.prototype._handleConfirmed=function(e){this.fireConfirm({close:true})};M.prototype._handleClosed=function(t){var n=this.getSelectedContent();if(n){n.onHide()}this.getContent().forEach(function(e){e.onContainerClose()});this.setProperty("_selectedContentKey",this._sInitialContentKey);e.prototype._handleClosed.apply(this,arguments)};M.prototype._getContainer=function(){if(!this.getModel("$i18n")){this.setModel(new r({bundleName:"sap/ui/mdc/messagebundle",async:false}),"$i18n")}var e=this.getAggregation("_container");if(!e){return this._retrievePromise("dialog",function(){return n(["sap/m/Dialog","sap/m/Button","sap/ui/model/base/ManagedObjectModel","sap/m/library"]).then(function(e){c=e[0];f=e[1];v=e[2];g=e[3];var t=g.ButtonType;if(!this._oResourceBundle){this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")}this.oButtonOK=new f(this.getId()+"-ok",{text:this._oResourceBundle.getText("valuehelp.OK"),enabled:"{$valueHelp>/_valid}",type:t.Emphasized,press:this._handleConfirmed.bind(this),visible:{parts:["$valueHelp>/_config/maxConditions","$help>/_quickSelectEnabled"],formatter:function(e,t){return e!==1||!t}}});this.oButtonCancel=new f(this.getId()+"-cancel",{text:this._oResourceBundle.getText("valuehelp.CANCEL"),press:this._handleCanceled.bind(this)});this._oManagedObjectModel=new v(this);var n=new c(this.getId()+"-dialog",{contentHeight:k(),contentWidth:P(),horizontalScrolling:false,verticalScrolling:false,title:{parts:["$help>/title","$help>/_selectableContents"],formatter:function(e,t){if(t&&t.length==1){var n=t[0];var i=n.getFormattedShortTitle()?n.getFormattedShortTitle():n.getTitle();if(i){e=this._oResourceBundle.getText("valuehelp.DIALOGSHORTTITLECOLONTITLE",[i,e])}}return e}.bind(this)},stretch:i.system.phone,resizable:true,draggable:true,afterOpen:this._handleOpened.bind(this),afterClose:this._handleClosed.bind(this),buttons:[this.oButtonOK,this.oButtonCancel]});n.setModel(this._oManagedObjectModel,"$help");this.setAggregation("_container",n,true);n.isPopupAdaptationAllowed=function(){return false};n.addStyleClass("sapMdcValueHelp");n.addStyleClass("sapMdcValueHelpTitle");var a=new o(this.getId()+"-Content",{fitContainer:true});a.addStyleClass("sapMdcValueHelpPanel");n.addContent(a);return n}.bind(this))}.bind(this))}return e};M.prototype._placeContent=function(e){var n=e.getContent()[0];var i=this.getProperty("_selectableContents");if(!i.length){return Promise.resolve(e)}var o=i.length>1;var r=[];if(o){r.push(this._getIconTabBar(e))}else{if(!this._oStandaloneTab){this._oStandaloneTab=new t(this.getId()+"-Standalone-DT",{content:{path:"/_selectableContents/0/displayContent",model:"$help"},layoutData:new a({growFactor:1,minHeight:"0"})})}r.push(this._oStandaloneTab)}if(x(this.getMaxConditions(),this.getContent())){r.push(this._getTokenizerPanel())}return Promise.all(r).then(function(t){n.removeAllItems();t.forEach(function(e){n.addItem(e)});if(o){e.addStyleClass("sapMdcValueHelpTitleShadow")}else{e.removeStyleClass("sapMdcValueHelpTitleShadow")}return e})};M.prototype._handleSelect=function(t){e.prototype._handleSelect.apply(this,arguments);if(this.getProperty("_quickSelectEnabled")&&this._isSingleSelect()){if(t.getParameter("type")==="Add"){this.fireConfirm({close:true})}}};M.prototype._observeChanges=function(t){if(t.name==="content"){var n=this.getContent();this.setProperty("_quickSelectEnabled",n&&n.every(function(e){return e.isQuickSelectSupported()}));this._updateInitialContentKey();if(t.mutation==="insert"&&!this.getProperty("_selectedContentKey")){this.setProperty("_selectedContentKey",this._sInitialContentKey)}this.setProperty("_selectableContents",this._getSelectableContents());if(x(this.getMaxConditions(),this.getContent())){var i=this.getAggregation("_container");if(i&&i.getContent()[0].getItems().length===1){Promise.all([this._getTokenizerPanel()]).then(function(e){e.forEach(function(e){i.getContent()[0].addItem(e)})})}}}e.prototype._observeChanges.apply(this,arguments)};M.prototype._updateInitialContentKey=function(){var e=this.getContent().find(function(e){return!!e.getVisible()});this._sInitialContentKey=e&&e.getId()};M.prototype.getSelectedContent=function(){var e=this.getProperty("_selectedContentKey");return this.getContent().find(function(t){return t.getId()===e})};M.prototype._getSelectableContents=function(){var e=this.getSelectedContent();var t=e&&e.getGroup&&e.getGroup();var n=e?t:"";var i=[n];return this.getContent().filter(function(t){if(!t.getVisible()){return false}var n=t.getGroup&&t.getGroup();var o=n&&B.call(this,n);if(o&&t!==e){if(i.indexOf(n)>=0){return false}else{i.push(n)}}return true}.bind(this))};M.prototype._updateGroupSelectModel=function(){if(this._oGroupSelectModel){var e=this.getSelectedContent();var t=e&&e.getGroup&&e.getGroup();var n=t?this.getContent().filter(function(e){return!!e.getVisible()&&e.getGroup&&e.getGroup()===t}):[];this._oGroupSelectModel.setData(n.reduce(function(e,t){e.entries.push({key:t.getId(),text:t.getFormattedTitle()});return e},{entries:[]}));if(this._oGroupSelect){var i=this._oGroupSelect.getSelectedItemKey();var o=n.map(function(e){return e.getId()});var a=this.getProperty("_selectedContentKey");if(o.indexOf(i)==-1||i!==a){this._oGroupSelect.setSelectedItemKey(n[0].getId())}}}};M.prototype._retrieveGroupSelect=function(){return this._retrievePromise("collectiveSearchSelect",function(){return n(["sap/ui/mdc/filterbar/vh/CollectiveSearchSelect","sap/m/VariantItem","sap/ui/model/json/JSONModel"]).then(function(e){var t=e[0];var n=e[1];var o=e[2];if(!this._oGroupSelectModel){this._oGroupSelectModel=new o}if(!this._oGroupSelect){var a=new n(this.getId()+"-collSearchItem",{key:"{$select>key}",text:"{$select>text}"});this._oGroupSelect=new t(this.getId()+"--Select",{title:"{$i18n>COL_SEARCH_SEL_TITLE}",items:{path:"$select>/entries",template:a},select:function(e){this._handleContentSelectionChange(e.getParameter("key"))}.bind(this),selectedItemKey:this.getSelectedContent().getId(),maxWidth:i.system.phone?"5em":"25rem"});this._oGroupSelect.setModel(this._oGroupSelectModel,"$select")}return this._oGroupSelect}.bind(this))}.bind(this))};M.prototype._getIconTabBar=function(){if(!this._oIconTabBar){return this._retrievePromise("IconTabBar",function(){return n(["sap/m/IconTabBar","sap/m/IconTabFilter"]).then(function(e){C=e[0];y=e[1];var n=g.IconTabHeaderMode;this._oIconTabBar=new C(this.getId()+"-ITB",{expandable:false,upperCase:false,stretchContentHeight:true,headerMode:n.Inline,select:this._onTabBarSelect.bind(this),layoutData:new a({growFactor:1}),selectedKey:"{path: '$help>/_selectedContentKey', mode: 'OneWay'}"});this._oIconTabBar.addStyleClass("sapUiNoContentPadding");var i=new y(this.getId()+"-ITF",{key:{path:"$help>id"},content:new t(this.getId()+"-DT",{content:{path:"$help>displayContent"}}),text:{parts:["$help>","$valueHelp>/conditions"],formatter:function(e,t){var n="none";if(e){var i=e.getGroup&&e.getGroup();var o=e.getCount(t,i);n=i?this._getFormattedContentGroupLabel(i,o):e.getFormattedTitle(o)}return n}.bind(this)}});this._oIconTabBar.bindAggregation("items",{path:"/_selectableContents",model:"$help",templateShareable:false,template:i});return this._oIconTabBar}.bind(this))}.bind(this))}return this._oIconTabBar};M.prototype._getFormattedContentGroupLabel=function(e,t){var n=this.getGroupConfig();var i=n&&n[e];var o=i&&(t?i.label:i.nnLabel);o=o&&u(o,t?t:"");o=o||this._oResourceBundle.getText(t?"valuehelp.SELECTFROMLIST":"valuehelp.SELECTFROMLISTNONUMBER",t);return o};M.prototype._getTokenizerPanel=function(e){if(!this.oTokenizerPanel){return this._retrievePromise("TokenizerPanel",function(){return n(["sap/m/Panel","sap/m/HBox","sap/m/VBox","sap/ui/mdc/field/FieldMultiInput","sap/m/Token","sap/ui/model/Filter","sap/ui/mdc/field/ConditionType"]).then(function(e){_=e[0];m=e[1];o=e[2];b=e[3];I=e[4];T=e[5];var t=e[6];var n=g.BackgroundDesign;var i=g.ButtonType;this.oTokenizerPanel=new _(this.getId()+"-TokenPanel",{backgroundDesign:n.Transparent,expanded:true,visible:{parts:["$valueHelp>/_config/maxConditions","$help>/content"],formatter:x},headerText:{parts:["$valueHelp>/conditions","$help>/_selectableContents"],formatter:function(e,t){var n=0;for(var i=0;i<e.length;i++){var o=e[i];if(o.isEmpty!==true){n++}}var a;if(t&&t.length==1){a=t[0].getFormattedTokenizerTitle(n);return a}else{a=this._oResourceBundle.getText("valuehelp.TOKENIZERTITLE");if(n===0){a=this._oResourceBundle.getText("valuehelp.TOKENIZERTITLENONUMBER")}return u(a,n)}}.bind(this)}});this.oTokenizerPanel.addStyleClass("sapMdcTokenizerPanel");var r=new m(this.getId()+"-TokenBox",{fitContainer:true,width:"100%"});var s=E.call(this);this._oConditionType=new t(s);this._oConditionType._bVHTokenizer=true;this.oTokenMultiInput=new b(this.getId()+"-Tokenizer",{width:"100%",showValueHelp:false,editable:true,ariaAttributes:{role:"listbox",aria:{readonly:true,roledescription:this._oResourceBundle.getText("valuehelp.TOKENIZER_ARIA_ROLE_DESCRIPTION")}},tokenUpdate:function(e){if(e.getParameter("removedTokens")){var t=e.getParameter("removedTokens");var n=this.getModel("$valueHelp").getObject("/conditions");var i=[];t.forEach(function(e,t){var o=e.getBindingContext("$valueHelp").sPath;var a=parseInt(o.slice(o.lastIndexOf("/")+1));i.push(n[a])});this.fireSelect({type:l.Remove,conditions:i})}}.bind(this),layoutData:new a({growFactor:1,maxWidth:"calc(100% - 2rem)"})});this.oTokenMultiInput._setValueVisible=function(e){this.$("inner").css("opacity","0")};var p=this.oTokenMultiInput.onAfterRendering;this.oTokenMultiInput.onAfterRendering=function(){p.apply(this.oTokenMultiInput,arguments);this.oTokenMultiInput._setValueVisible();this.oTokenMultiInput.setValue("")}.bind(this);w.call(this,true);this.oRemoveAllBtn=new f(this.getId()+"-TokenRemoveAll",{press:function(e){this.fireSelect({type:l.Set,conditions:[]});this.oInvisibleMessage.announce(d.getText("valuehelp.REMOVEALLTOKEN_ANNOUNCE"),S.Polite)}.bind(this),type:i.Transparent,icon:"sap-icon://decline",tooltip:"{$i18n>valuehelp.REMOVEALLTOKEN}",layoutData:new a({growFactor:0,baseSize:"2rem"})});this.oRemoveAllBtn.addStyleClass("sapUiTinyMarginBegin");r.addItem(this.oTokenMultiInput);r.addItem(this.oRemoveAllBtn);this.oTokenizerPanel.addContent(r);return this.oTokenizerPanel}.bind(this))}.bind(this))}else{var t=E.call(this);this._oConditionType.setFormatOptions(t)}return this.oTokenizerPanel};function x(e,t){var n=e!==1;if(n&&t&&t.every(function(e){return!e.getRequiresTokenizer()})){n=false}return n}function E(){var e=this.getModel("$valueHelp");var t=e?e.getProperty("/_config"):{};var n=this.getParent();var i=this.getControl();return{maxConditions:-1,valueType:t.dataType,operators:t.operators,display:t.display,fieldHelpID:n&&n.getId(),control:i,delegate:i&&i.getControlDelegate&&i.getControlDelegate(),delegateName:i&&i.getDelegate&&i.getDelegate()&&i.getDelegate().name,payload:i&&i.getPayload&&i.getPayload(),convertWhitespaces:true}}function w(e){if(this.oTokenMultiInput){var t=this.oTokenMultiInput.getBindingInfo("tokens");if(e){if(!t){var n=new T({path:"isEmpty",operator:"NE",value1:true});this._oConditionType.setFormatOptions(E.call(this));var i=new I(this.getId()+"-Token",{text:{path:"$valueHelp>",type:this._oConditionType}});this.oTokenMultiInput.bindAggregation("tokens",{path:"/conditions",model:"$valueHelp",templateShareable:false,template:i,filters:n})}}else if(t){this.oTokenMultiInput.unbindAggregation("tokens")}}}M.prototype._open=function(e){this._mAlreadyShownContents={};if(e){this._updateInitialContentKey();var t=function(){this._renderSelectedContent(this._sInitialContentKey,function(){var t=this.getContent().find(function(e){return e.getId()===this.getProperty("_selectedContentKey")}.bind(this));var n=t.getInitialFocusedControl();if(n){e.setInitialFocus(n)}e.open();this.getContent().forEach(function(e){e.onContainerOpen()})}.bind(this))}.bind(this);if(x(this.getMaxConditions(),this.getContent())&&e.getContent()[0].getItems().length===1){Promise.all([this._getTokenizerPanel()]).then(function(n){n.forEach(function(t){e.getContent()[0].addItem(t)});t()})}else{if(this.oTokenMultiInput){w.call(this,true)}t()}}};M.prototype._renderSelectedContent=function(e,t){var n=this.getContent().find(function(t){return t.getId()===e});if(!n){throw new Error("sap.ui.mdc.ValueHelp: No content found.")}var i=[n.getContent()];var o=n.getGroup&&n.getGroup();var a;if(o&&B.call(this,o)){a=this._retrieveGroupSelect();i.push(a)}var r=!this._mAlreadyShownContents[e];return Promise.all(i).then(function(){this._bindContent(n)}.bind(this)).then(function(){return Promise.resolve(n.onBeforeShow(r))}).then(function(){this._mAlreadyShownContents[e]=true;this.setProperty("_selectedContentKey",e);this.setProperty("_selectableContents",this._getSelectableContents());this._oManagedObjectModel.checkUpdate(true,false,function(e){if(e.getPath().indexOf("displayContent")>=0){return true}});if(a){this._updateGroupSelectModel()}if(n.setCollectiveSearchSelect){n.setCollectiveSearchSelect(a?this._oGroupSelect:undefined)}if(t){t()}return this._retrievePromise("open").then(function(){n.onShow(r);return n})}.bind(this))};M.prototype._close=function(){var e=this.getAggregation("_container");if(e){e.close();if(this.oTokenMultiInput){w.call(this,false)}}};M.prototype.getValueHelpIcon=function(){return"sap-icon://value-help"};M.prototype.getAriaAttributes=function(e){return{contentId:null,ariaHasPopup:"dialog",role:null,roleDescription:null}};M.prototype.isMultiSelect=function(){return this.getMaxConditions()!==1};M.prototype.init=function(){e.prototype.init.apply(this,arguments);this.oInvisibleMessage=h.getInstance()};M.prototype.exit=function(){s.cleanup(this,["_oManagedObjectModel","_oResourceBundle","oButtonOK","oButtonCancel","oTokenizerPanel","oTokenMultiInput","_oIconTabBar","_oGroupSelect","_oGroupSelectModel","_sInitialContentKey","_mAlreadyShownContents","oInvisibleMessage","_oStandaloneTab"]);e.prototype.exit.apply(this,arguments)};return M});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/Popover", ["sap/ui/mdc/valuehelp/base/Container","sap/ui/mdc/util/loadModules","sap/ui/dom/units/Rem","sap/ui/thirdparty/jquery","sap/ui/core/library"],function(t,e,n,jQuery,o){"use strict";var i,r,a,s,p;var l=o.ValueState;var u=t.extend("sap.ui.mdc.valuehelp.Popover",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.ITypeaheadContainer","sap.ui.mdc.valuehelp.IDialogContainer","sap.ui.core.PopupInterface"],properties:{opensOnClick:{type:"boolean",defaultValue:false},opensOnFocus:{type:"boolean",defaultValue:false}},defaultAggregation:"content"}});u.prototype.invalidate=function(e){if(e){var n=this.getAggregation("_container");var o=this._oCurrentContent;if(n&&o&&e===o&&!this._bIsBeingDestroyed){n.invalidate(e)}else{t.prototype.invalidate.apply(this,arguments)}}};u.prototype._getUIAreaForContent=function(){var e=this.getAggregation("_container");if(e){return e.getUIArea()}return t.prototype._getUIAreaForContent.apply(this,arguments)};u.prototype._getContent=function(){var t=this.getContent();return t&&t[0]};u.prototype._getContainer=function(){var t=this.getAggregation("_container");var n=function(t,e){if(t&&t.getValueState&&t.getValueState()!==l.None){e.setText(t.getValueStateText());e.setValueState(t.getValueState());e.setVisible(true)}else{e.setVisible(false)}};if(!t){return e(["sap/m/Popover","sap/m/library","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/ValueStateHeader"]).then(function(e){i=e[0];r=e[1];a=e[2];s=e[3];p=e[4];var o=new p;n(this.getControl(),o);t=new i(this.getId()+"-pop",{contentHeight:"auto",placement:r.PlacementType.VerticalPreferredBottom,showHeader:false,showArrow:false,title:this.getTitle(),titleAlignment:r.TitleAlignment.Center,afterOpen:this._handleOpened.bind(this),afterClose:this._handleClosed.bind(this),customHeader:o}).addStyleClass("sapMdcValueHelpPopover").addStyleClass("sapMComboBoxBasePicker").addStyleClass("sapMComboBoxBasePicker-CTX");if(o){o.setPopup(t)}t.isPopupAdaptationAllowed=function(){return false};t.addStyleClass(this._isSingleSelect()?"sapMdcValueHelpSingleSelect":"sapMdcValueHelpMultiSelect");t.addDelegate({onsapshow:this._handleRequestSwitchToDialog.bind(this)});t._getAllContent=function(){var t=this.getParent();var e=[];if(t){if(this._oCurrentContent){e.push(this._oCurrentContent)}}return e}.bind(this);var l=this._getContent();var u=this._getContainerConfig(l);if(u){t.setShowArrow(!!u.showArrow);t.setShowHeader(!!u.showHeader);t.setResizable(!!u.resizable);if(u.getContentWidth){t.setContentWidth(u.getContentWidth())}}this.setAggregation("_container",t,true);return t}.bind(this))}n(this.getControl(),t.getCustomHeader());return t};var h=function(){var t=this.getAggregation("_container");var e=this._getContent();var o=e&&this._getContainerConfig(e);if(t&&o&&o.getContentHeight){var i=o.getContentHeight();var r=t.$().find(".sapMPopoverCont").height();var a=r<n.toPx("30rem");t.setContentHeight(!i||a||r>=i?"auto":"30rem");t.invalidate()}};u.prototype.providesScrolling=function(){return true};u.prototype._observeChanges=function(e){if(e.name==="content"){var n=e.child;if(e.mutation==="remove"){n.detachEvent("contentUpdated",h,this);n.detachNavigated(this._handleNavigated,this)}else{n.attachEvent("contentUpdated",h,this)}}t.prototype._observeChanges.apply(this,arguments)};u.prototype._placeContent=function(t){var e=this._getContent();var n=e&&e.getContent();var o=this._getContainerConfig(e);var i=o&&o.getFooter&&o.getFooter();return Promise.all([n,i]).then(function(e){this._oCurrentContent=e[0];var n=e[1];if(n&&t.getFooter()!=n&&n.isA&&n.isA("sap.m.Toolbar")){t.setFooter(n);return t}if(n){if(!t.getFooter()){var o=[new s(this.getId()+"-Spacer")].concat(n);var i=new a(this.getId()+"-TB",{content:o}).setModel(this._oManagedObjectModel,"$help");t.setFooter(i)}else{}}else if(t.getFooter()){t.setFooter()}return t}.bind(this))};u.prototype._open=function(e,n){if(e.isOpen()){return}t.prototype._open.apply(this,arguments);var o=this._getContent();Promise.resolve(o&&o.onBeforeShow(true)).then(function(){var t=this.getValueHelpDelegate();var e=this.getValueHelpDelegatePayload();return Promise.resolve(n?t.showTypeahead(e,o):true).then(function(t){return t?Promise.resolve(t):Promise.reject(t)})}.bind(this)).then(function(){var t=this.getControl();var n=t&&t.getFocusElementForValueHelp?t.getFocusElementForValueHelp(this.isTypeahead()):t;if(n&&n.getDomRef()){e.setContentMinWidth(jQuery(n.getDomRef()).outerWidth()+"px");if(!this.isFocusInHelp()){e.setInitialFocus(n)}e.openBy(n)}}.bind(this)).catch(function(t){this._cancelPromise("open");if(t&&t instanceof Error){throw t}}.bind(this))};u.prototype._close=function(){t.prototype._close.apply(this,arguments);var e=this.getAggregation("_container");if(e){e.close()}};u.prototype._handleOpened=function(){h.call(this);t.prototype._handleOpened.apply(this,arguments);var e=this._getContent();if(e){e.onContainerOpen();e.onShow(true)}};u.prototype._handleConfirmed=function(t){this.fireConfirm({close:t.getParameter("close")||this._isSingleSelect()})};u.prototype._handleClosed=function(e){var n=this._getContent();if(n){n.onHide();n.onContainerClose()}var o=this.getAggregation("_container");if(o){o._oPreviousFocus=null}t.prototype._handleClosed.apply(this,arguments)};u.prototype.removeFocus=function(){var t=this._getContent();if(t){t.removeFocus()}};u.prototype._navigate=function(t){var e=this._getContent();if(e){e.navigate(t)}};u.prototype.getItemForValue=function(t){var e=this._getContent();if(e){return e.getItemForValue(t)}};u.prototype.isValidationSupported=function(t){var e=this._getContent();if(e){return e.isValidationSupported()}};u.prototype.getUseAsValueHelp=function(){var t=this._getContent();return t&&t.getUseAsValueHelp&&t.getUseAsValueHelp()};u.prototype.getValueHelpIcon=function(){var t=this._getContent();return t&&t.getValueHelpIcon()};u.prototype.getAriaAttributes=function(e){var n=this._getContent();var o=n&&n.getAriaAttributes(e);if(o){return{contentId:o.contentId,ariaHasPopup:o.ariaHasPopup,role:this.isDialog()?"combobox":null,roleDescription:o.roleDescription}}return t.prototype.getAriaAttributes.apply(this,arguments)};u.prototype.shouldOpenOnFocus=function(){return this.getOpensOnFocus()};u.prototype.shouldOpenOnClick=function(){var t=this._getContent();return this.isPropertyInitial("opensOnClick")?!!t&&t.shouldOpenOnClick():this.getOpensOnClick()};u.prototype.shouldOpenOnNavigate=function(){var t=this._getContent();this._bindContent(t);return!!t&&t.shouldOpenOnNavigate()};u.prototype.isNavigationEnabled=function(t){if(this.isOpen()||this.getUseAsValueHelp()){var e=this._getContent();return!!e&&e.isNavigationEnabled(t)}return false};u.prototype.isFocusInHelp=function(){var t=this._getContent();return!!t&&t.isFocusInHelp()};u.prototype.isMultiSelect=function(){var t=this._getContent();return!!t&&t.isMultiSelect()};u.prototype.isTypeaheadSupported=function(){var t=this._getContent();return t&&t.isSearchSupported()};u.prototype.exit=function(){if(this._oCurrentContent){if(!this._oCurrentContent.bIsDestroyed){this._oCurrentContent.destroy()}this._oCurrentContent=null}t.prototype.exit.apply(this,arguments)};return u});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/base/Container", ["sap/ui/core/Element","sap/ui/mdc/mixin/PromiseMixin","sap/ui/model/BindingMode","sap/ui/base/ManagedObjectObserver"],function(t,e,n,o){"use strict";var i=t.extend("sap.ui.mdc.valuehelp.base.Container",{metadata:{library:"sap.ui.mdc",properties:{title:{type:"string",group:"Appearance",defaultValue:""},localFilterValue:{type:"string"}},aggregations:{_container:{type:"sap.ui.core.Element",multiple:false,visibility:"hidden"},content:{type:"sap.ui.mdc.valuehelp.base.Content",multiple:true}},events:{select:{parameters:{type:{type:"sap.ui.mdc.enum.SelectType"},conditions:{type:"object[]"}}},confirm:{parameters:{close:{type:"boolean"}}},opened:{},closed:{},cancel:{},requestDelegateContent:{parameters:{contentId:{type:"string"}}},requestSwitchToDialog:{},navigated:{parameters:{leaveFocus:{type:"boolean"},condition:{type:"object"},itemId:{type:"string"}}}}}});i.prototype.init=function(){this._oObserver=new o(this._observeChanges.bind(this));this._oObserver.observe(this,{aggregations:["content"]})};i.prototype._observeChanges=function(t){if(t.name==="content"){var e=t.child;if(t.mutation==="remove"){this._unbindContent(e)}}};i.prototype._bindContent=function(t){if(t&&!t._bContentBound){t.bindProperty("filterValue",{path:"/filterValue",model:"$valueHelp",mode:n.OneWay});var e={path:"/conditions",model:"$valueHelp",mode:n.OneWay};if(t._formatConditions){e.formatter=t._formatConditions.bind(t)}t.bindProperty("config",{path:"/_config",model:"$valueHelp",mode:n.OneWay});t.bindProperty("conditions",e);t.attachConfirm(this._handleConfirmed,this);t.attachCancel(this._handleCanceled,this);t.attachSelect(this._handleSelect,this);if(t.attachNavigated){t.attachNavigated(this._handleNavigated,this)}if(t.attachRequestSwitchToDialog){t.attachRequestSwitchToDialog(this._handleRequestSwitchToDialog,this)}t._bContentBound=true}};i.prototype._unbindContent=function(t){if(t._bContentBound){t.unbindProperty("filterValue",true);t.unbindProperty("config",true);t.unbindProperty("conditions",true);t.detachConfirm(this._handleConfirmed,this);t.detachCancel(this._handleCanceled,this);t.detachSelect(this._handleSelect,this);if(t.detachNavigated){t.detachNavigated(this._handleNavigated,this)}if(t.detachRequestSwitchToDialog){t.detachRequestSwitchToDialog(this._handleRequestSwitchToDialog,this)}t._bContentBound=false}};i.prototype._handleNavigated=function(t){this.fireNavigated(t.mParameters)};i.prototype._handleRequestSwitchToDialog=function(t){this.fireRequestSwitchToDialog({container:this})};i.prototype._getContainer=function(){};i.prototype.getControl=function(){var t=this.getParent();return t&&t.getControl()};i.prototype.getMaxConditions=function(){var t=this.getModel("$valueHelp");return t&&t.getObject("/_config/maxConditions")};i.prototype._isSingleSelect=function(){return this.getMaxConditions()===1};i.prototype.getDomRef=function(){var t=this.getAggregation("_container");return t&&t.getDomRef()};i.prototype.getUIArea=function(){return null};i.prototype._getUIAreaForContent=function(){return this.getUIArea()};i.prototype.open=function(t,e){if(!this.isOpening()){var n=this._addPromise("open");return Promise.all([this._getContainer(),t]).then(function(t){return this._placeContent(t[0])}.bind(this)).then(function(t){if(!n.isCanceled()){this._open(t,e)}return n}.bind(this))}return this._retrievePromise("open")};i.prototype.close=function(){var t=this._retrievePromise("open");if(t){if(t.isSettled()){this._close()}else{this._cancelPromise(t)}}};i.prototype._placeContent=function(t){return t};i.prototype._open=function(t,e){var n=this.getContent();for(var o=0;o<n.length;o++){this._bindContent(n[o])}};i.prototype._close=function(){};i.prototype._handleOpened=function(){this._resolvePromise("open");this.fireOpened()};i.prototype._handleClosed=function(t){this._removePromise("open");var e=this.getContent();for(var n=0;n<e.length;n++){this._unbindContent(e[n])}this.fireClosed()};i.prototype._handleConfirmed=function(t){this.fireConfirm()};i.prototype._handleCanceled=function(t){this.fireCancel()};i.prototype._handleSelect=function(t){this.fireSelect({type:t.getParameter("type"),conditions:t.getParameter("conditions")})};i.prototype.isOpen=function(){var t=this._retrievePromise("open");return t&&t.isSettled()};i.prototype.isOpening=function(){var t=this._retrievePromise("open");return t&&!t.isCanceled()&&!t.isSettled()};i.prototype.getItemForValue=function(t){return undefined};i.prototype.isValidationSupported=function(){return false};i.prototype.navigate=function(t){return Promise.all([this._getContainer()]).then(function(t){return this._placeContent(t[0])}.bind(this)).then(function(e){this._navigate(t)}.bind(this))};i.prototype._navigate=function(t){};i.prototype.removeFocus=function(){};i.prototype.isTypeahead=function(){var t=this.getParent();return t&&t.getTypeahead()===this};i.prototype.isTypeaheadSupported=function(){return false};i.prototype.isDialog=function(){var t=this.getParent();return t&&(t.getDialog()===this||this.isTypeahead()&&!t.getDialog()&&this.getUseAsValueHelp())};i.prototype.hasDialog=function(){var t=this.getParent();return!!(t&&t.getDialog())};i.prototype.providesScrolling=function(){return false};i.prototype.getValueHelpDelegate=function(){var t=this.getParent();return t&&t.getControlDelegate()};i.prototype.getValueHelpDelegatePayload=function(){var t=this.getParent();return t&&t.getPayload()};i.prototype.awaitValueHelpDelegate=function(){var t=this.getParent();return t&&t.awaitControlDelegate()};i.prototype.isValueHelpDelegateInitialized=function(){var t=this.getParent();return t&&t.bDelegateInitialized};i.prototype.getUseAsValueHelp=function(){return false};i.prototype.getValueHelpIcon=function(){};i.prototype.getAriaAttributes=function(t){return{contentId:null,ariaHasPopup:"listbox",role:"combobox",roleDescription:null}};i.prototype.getScrollDelegate=function(t){var e=this.getAggregation("_container");return e&&e.getScrollDelegate&&e.getScrollDelegate()};i.prototype.shouldOpenOnFocus=function(){return false};i.prototype.shouldOpenOnClick=function(){return false};i.prototype.shouldOpenOnNavigate=function(){return false};i.prototype.isNavigationEnabled=function(t){return false};i.prototype.isFocusInHelp=function(){return!this.isTypeahead()};i.prototype.isMultiSelect=function(){return false};i.prototype._getContainerConfig=function(t){var e=t&&t.getContainerConfig();var n=e&&e[this.getMetadata().getName()];if(!n&&e){var o=Object.keys(e);var i=o.find(function(t){return this.isA(t)}.bind(this));if(i){n=e[i]}}return n};i.prototype._getRetrieveDelegateContentPromise=function(){var t=this.getParent();return t&&t._retrievePromise("delegateContent")};i.prototype.getSelectedContent=function(){var t=this.getContent();return t&&t[0]};i.prototype.onConnectionChange=function(){var t=this.getContent();for(var e=0;e<t.length;e++){this._unbindContent(t[e]);t[e].onConnectionChange()}};i.prototype.exit=function(){this._oObserver.disconnect();this._oObserver=undefined};e.call(i.prototype);return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/base/Content", ["sap/ui/core/Element","sap/ui/mdc/mixin/PromiseMixin","sap/ui/base/ManagedObjectObserver","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/enum/ConditionValidated","sap/base/strings/formatMessage"],function(e,t,n,o,i,r,a,p){"use strict";var u=e.extend("sap.ui.mdc.valuehelp.base.Content",{metadata:{library:"sap.ui.mdc",properties:{title:{type:"string",group:"Appearance",defaultValue:""},shortTitle:{type:"string",group:"Appearance",defaultValue:""},tokenizerTitle:{type:"string",group:"Appearance",defaultValue:""},conditions:{type:"object[]",defaultValue:[],byValue:true},filterValue:{type:"string",defaultValue:""},config:{type:"object",defaultValue:{}},visible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{displayContent:{type:"sap.ui.core.Control",multiple:false}},events:{select:{parameters:{type:{type:"sap.ui.mdc.enum.SelectType"},conditions:{type:"object[]"}}},confirm:{parameters:{close:{type:"boolean"}}},cancel:{},requestSwitchToDialog:{},navigated:{parameters:{leaveFocus:{type:"boolean"},condition:{type:"object"},itemId:{type:"string"}}}}}});u.prototype.init=function(){this._oObserver=new n(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["filterValue","conditions","config"]});this._oOperator=i.getEQOperator()};u.prototype.exit=function(){this._oObserver.disconnect();this._oObserver=undefined};u.prototype.setProperty=function(t,n,o){if(t==="conditions"||t==="filterValue"||t==="config"){o=true}return e.prototype.setProperty.apply(this,[t,n,o])};u.prototype.getContent=function(){};u.prototype.getContainerConfig=function(){};u.prototype.onBeforeShow=function(e){};u.prototype.onShow=function(e){this._bVisible=true;this._handleConditionsUpdate()};u.prototype.getInitialFocusedControl=function(){return null};u.prototype.onHide=function(){this._bVisible=false};u.prototype.getItemForValue=function(e){return undefined};u.prototype.isValidationSupported=function(){return false};u.prototype.getScrollDelegate=function(){var e=this.getParent();return e&&e.getScrollDelegate()};u.prototype._observeChanges=function(e){if(e.name==="conditions"){this._handleConditionsUpdate(e)}if(e.name==="filterValue"){this._handleFilterValueUpdate(e)}if(e.name==="config"){l.call(this,e.current)}};u.prototype._handleFilterValueUpdate=function(e){if(this.isContainerOpen()&&this.isTypeahead()){var t=this._getValueHelpDelegate();var n=this._getValueHelpDelegatePayload();Promise.resolve(!!t&&t.showTypeahead(n,this)).then(function(e){if(!e){this.fireCancel()}}.bind(this))}};u.prototype._handleConditionsUpdate=function(e){};u.prototype._createCondition=function(e,t,n){var i=c.call(this);var p=[e];if(i.valueTypes.length>1&&i.valueTypes[1]!==r.ValueType.Static&&t!==null&&t!==undefined){p.push(t)}return o.createCondition(i.name,p,undefined,undefined,a.Validated,n)};u.prototype.removeFocus=function(){};u.prototype.navigate=function(e){};u.prototype.getUIArea=function(){var t=this.getParent();if(t&&t._getUIAreaForContent){return t._getUIAreaForContent()}return e.prototype.getUIArea.apply(this,arguments)};u.prototype.isTypeahead=function(){var e=this.getParent();return e&&e.isTypeahead()};u.prototype.isSearchSupported=function(){return false};u.prototype.provideScrolling=function(){var e=this.getParent();return!e||!e.providesScrolling()};u.prototype.isContainerOpen=function(){var e=this.getParent();return e&&e.isOpen()};u.prototype.isContainerOpening=function(){var e=this.getParent();return e&&e.isOpening()};u.prototype._getValueHelpDelegate=function(){var e=this.getParent();return e&&e.getValueHelpDelegate()};u.prototype._getValueHelpDelegatePayload=function(){var e=this.getParent();return e&&e.getValueHelpDelegatePayload()};u.prototype._awaitValueHelpDelegate=function(){var e=this.getParent();return e&&e.awaitValueHelpDelegate()};u.prototype._isValueHelpDelegateInitialized=function(){var e=this.getParent();return e&&e.isValueHelpDelegateInitialized()};u.prototype.getControl=function(){var e=this.getParent();return e&&e.getControl()};u.prototype.getCount=function(e){return 0};u.prototype.getValueHelpIcon=function(){};u.prototype.getAriaAttributes=function(e){return{contentId:null,ariaHasPopup:"listbox",roleDescription:null}};u.prototype._isSingleSelect=function(e){return this._getMaxConditions()===1};u.prototype.shouldOpenOnClick=function(){return false};u.prototype.shouldOpenOnNavigate=function(){return!this._isSingleSelect()};u.prototype.isNavigationEnabled=function(e){return false};u.prototype.isFocusInHelp=function(){return!this.isTypeahead()};u.prototype.isMultiSelect=function(){return!this._isSingleSelect()};u.prototype.isQuickSelectSupported=function(){return false};u.prototype.getRequiresTokenizer=function(){return true};function l(e){s.call(this,e.operators)}function s(e){this._oOperator=i.getEQOperator(e)}function c(){return this._oOperator}u.prototype.getFormattedTitle=function(e){var t=this.getTitle();if(t){t=p(t,e?e:"")}return t};u.prototype.getFormattedShortTitle=function(){return this.getShortTitle()};u.prototype.getFormattedTokenizerTitle=function(e){var t=this.getTokenizerTitle();if(t){t=p(t,e?e:"")}return t};u.prototype._getMaxConditions=function(){var e=this.getConfig();return e&&e.maxConditions};u.prototype.onContainerClose=function(){};u.prototype.onContainerOpen=function(){};u.prototype.onConnectionChange=function(){};t.call(u.prototype);return u});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/base/DialogTab", ["sap/ui/core/Control"],function(e){"use strict";var t=e.extend("sap.ui.mdc.valuehelp.base.DialogTab",{metadata:{library:"sap.ui.mdc",properties:{content:{type:"object"}},events:{select:{parameters:{type:{type:"sap.ui.mdc.enum.SelectType"},conditions:{type:"object[]"}}},confirm:{parameters:{close:{type:"boolean"}}},cancel:{}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.class("sapUiMdcDialogTab");e.openEnd();var n=t.getContent();if(n){e.renderControl(n)}e.close("div")}}});t.prototype.init=function(){e.prototype.init.apply(this,arguments)};t.prototype.exit=function(){if(this._displayContent){this._displayContent=null}return e.prototype.exit.apply(this,arguments)};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/base/FilterableListContent", ["sap/ui/mdc/util/loadModules","sap/ui/mdc/valuehelp/base/ListContent","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/util/Common","sap/ui/mdc/enum/PersistenceMode","sap/m/p13n/Engine","sap/base/util/merge","sap/ui/mdc/p13n/StateUtil"],function(e,t,i,r,a,l,n,o,s){"use strict";var h=t.extend("sap.ui.mdc.valuehelp.base.FilterableListContent",{metadata:{library:"sap.ui.mdc",properties:{filterFields:{type:"string",defaultValue:""},keyPath:{type:"string",defaultValue:""},descriptionPath:{type:"string",defaultValue:""},group:{type:"string",defaultValue:""}},aggregations:{filterBar:{type:"sap.ui.mdc.filterbar.vh.FilterBar",multiple:false},_defaultFilterBar:{type:"sap.ui.mdc.filterbar.vh.FilterBar",multiple:false,visibility:"hidden"}},associations:{filters:{type:"sap.ui.mdc.IFilter",multiple:true}},events:{}}});h.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._oObserver.observe(this,{properties:["filterFields"],aggregations:["_defaultFilterBar","filterBar"]});n.getInstance().defaultProviderRegistry.attach(this,l.Transient)};h.prototype._handleFilterValueUpdate=function(e){if(this.isContainerOpening()||this.isContainerOpen()){Promise.resolve(this.applyFilters()).finally(function(){t.prototype._handleFilterValueUpdate.apply(this,arguments)}.bind(this))}};h.prototype._reduceIFilterConditions=function(e){var t=this._getValueHelpDelegate();var i=this._getValueHelpDelegatePayload();return t?t.reduceIFilterConditions(i,this,e):e};h.prototype.applyFilters=function(){};h.prototype._prettyPrintFilters=function(e){var t;if(!e){return""}if(Array.isArray(e)){t="";e.forEach(function(e,i,r){t+=this._prettyPrintFilters(e);if(r.length-1!=i){t+=" or "}},this);return"("+t+")"}else if(e._bMultiFilter){t="";var i=e.bAnd;e.aFilters.forEach(function(e,r,a){t+=this._prettyPrintFilters(e);if(a.length-1!=r){t+=i?" and ":" or "}},this);return"("+t+")"}else{t=e.sPath+" "+e.sOperator+" '"+e.oValue1+"'";if(e.sOperator==="BT"){t+="...'"+e.oValue2+"'"}return t}};h.prototype._getItemFromContext=function(e,t){var i=t&&t.keyPath||this.getKeyPath();var r=t&&t.descriptionPath||this.getDescriptionPath();var a;var l;if(!i){throw new Error("KeyPath missing")}if(e){a=i?e.getProperty(i):undefined;l=r?e.getProperty(r):undefined}if(a===null||a===undefined){return false}var n=this._createConditionPayload([a,l],e);return{key:a,description:l,payload:n}};h.prototype._createConditionPayload=function(e,t){var i;var r=this._getValueHelpDelegate();if(r){var a=this._getValueHelpDelegatePayload();i={};i=r.createConditionPayload(a,this,e,t)}return i};h.prototype._isItemSelected=function(e,t){var i=this._isValueHelpDelegateInitialized()&&this._getValueHelpDelegate();return i?i.isFilterableListItemSelected(this._getValueHelpDelegatePayload(),this,e,t):false};h.prototype._createDefaultFilterBar=function(){return e(["sap/ui/mdc/filterbar/vh/FilterBar"]).then(function(e){var t=e[0];var i=new t(this.getId()+"-FB",{liveMode:false,showGoButton:true});u.call(this,i);this.setAggregation("_defaultFilterBar",i,true);return i}.bind(this))};h.prototype._handleSearch=function(e){var t=e.getSource();this._setLocalFilterValue(t.getSearch());this.applyFilters()};function u(t){var i=t.getBasicSearchField();var r=this.getFilterFields();if(!i&&r){if(!this._oSearchField){return e(["sap/ui/mdc/FilterField"]).then(function(e){if(!t.bIsDestroyed){var i=e[0];this._oSearchField=new i(this.getId()+"-search",{conditions:"{$filters>/conditions/"+r+"}",placeholder:"{$i18n>filterbar.SEARCH}",label:"{$i18n>filterbar.SEARCH}",maxConditions:1,width:"50%"});this._oSearchField._bCreatedByValueHelp=true;u.call(this,t)}}.bind(this))}t.setBasicSearchField(this._oSearchField)}else if(i){if(r){i.setConditions([])}else if(i._bCreatedByValueHelp){t.setBasicSearchField()}}}h.prototype.onContainerClose=function(){this._setLocalFilterValue(undefined)};h.prototype._getPriorityFilterBar=function(){return this.getFilterBar()||this.getAggregation("_defaultFilterBar")};h.prototype._observeChanges=function(e){if(e.object==this){var i;if(["_defaultFilterBar","filterBar"].indexOf(e.name)!==-1){i=e.child;var r;if(e.mutation==="insert"){u.call(this,i);this._assignCollectiveSearchSelect();if(e.name!=="_defaultFilterBar"||!this.getFilterBar()){i.attachSearch(this._handleSearch,this)}if(e.name==="filterBar"){r=this.getAggregation("_defaultFilterBar");if(r){r.detachSearch(this._handleSearch,this)}}}else{var a=i.getBasicSearchField();if(a&&a._bCreatedByValueHelp){i.setBasicSearchField()}i.detachSearch(this._handleSearch,this);if(e.name==="filterBar"){r=this.getAggregation("_defaultFilterBar");if(r){r.attachSearch(this._handleSearch,this)}else{this._createDefaultFilterBar()}}}}else if(e.name==="filterFields"){i=this._getPriorityFilterBar();if(i){u.call(this,i)}}}t.prototype._observeChanges.apply(this,arguments)};h.prototype.getCollectiveSearchKey=function(){return this._oCollectiveSearchSelect&&this._oCollectiveSearchSelect.getSelectedItemKey()};h.prototype._getListBindingInfo=function(){throw new Error("FilterableListContent: Every filterable listcontent must implement this method.")};h.prototype._getListItemBindingContext=function(e){var t=this._getListBindingInfo().model;return e&&e.getBindingContext(t)};h.prototype.getInitialFocusedControl=function(){return this._getPriorityFilterBar().getInitialFocusedControl()};h.prototype._getTypesForConditions=function(e){var t=this._getValueHelpDelegate();var i=this._getValueHelpDelegatePayload();return t?t.getTypesForConditions(i,this,e):{}};h.prototype.getFormattedTitle=function(e){var i=t.prototype.getFormattedTitle.apply(this,arguments);if(!i){i=this._oResourceBundle.getText(e?"valuehelp.SELECTFROMLIST":"valuehelp.SELECTFROMLISTNONUMBER",e)}return i};h.prototype.getFormattedShortTitle=function(){var e=this.getShortTitle();if(!e){e=this._oResourceBundle.getText("valuehelp.SELECTFROMLIST.Shorttitle")}return e};h.prototype.getFormattedTokenizerTitle=function(e){var t=this.getTokenizerTitle();if(!t){t=this._oResourceBundle.getText("valuehelp.SELECTFROMLIST.TokenizerTitle"+(e===0?"NoCount":""),e)}return t};h.prototype.isSearchSupported=function(){var e=this.getFilterFields();var t=!!e;if(e==="$search"){var i=this.getListBinding();var r=this._getValueHelpDelegate();var a=this._getValueHelpDelegatePayload();t=r&&r.isSearchSupported(a,this,i)}return t};h.prototype.setCollectiveSearchSelect=function(e){this._oCollectiveSearchSelect=e;this._assignCollectiveSearchSelect()};h.prototype._assignCollectiveSearchSelect=function(){var e=this._getPriorityFilterBar();if(e.setCollectiveSearch){e.setCollectiveSearch(this._oCollectiveSearchSelect)}};h.prototype._applyFiltersIfNecessary=function(){var e=this.getListBinding();var t=this._getListBindingInfo();var i=e&&e.isSuspended();var r=!e&&t&&t.suspended;if((i||r)&&!this.isTypeahead()){return undefined}return this.applyFilters()};h.prototype.onBeforeShow=function(e){if(e){var t=this._getValueHelpDelegate();return Promise.resolve(t&&t.getFilterConditions(this._getValueHelpDelegatePayload(),this)).then(function(t){this._oInitialFilterConditions=t;var i=this._getPriorityFilterBar();if(i){var r=this.getFilterFields();var a=o({},this._oInitialFilterConditions);return Promise.resolve(!a[r]&&s.retrieveExternalState(i).then(function(t){if(e){p(a,r,this._getPriorityFilterValue());return s.diffState(i,t,{filter:a})}}.bind(this))).then(function(e){return s.applyExternalState(i,e)}).then(this._applyFiltersIfNecessary.bind(this))}else{return this._applyFiltersIfNecessary()}}.bind(this))}return undefined};h.prototype._fireSelect=function(e){var t=this._getValueHelpDelegate();var i=this._getValueHelpDelegatePayload();var r=t&&t.modifySelectionBehaviour?t.modifySelectionBehaviour(i,this,e):e;if(r){this.fireSelect(r)}};h.prototype.exit=function(){n.getInstance().defaultProviderRegistry.detach(this);a.cleanup(this,["_oCollectiveSearchSelect","_oInitialFilterConditions"]);if(this._oSearchField&&!this._oSearchField.getParent()){this._oSearchField.destroy();delete this._oSearchField}t.prototype.exit.apply(this,arguments)};h.prototype.getCount=function(e,i){var r=this._isValueHelpDelegateInitialized()&&this._getValueHelpDelegate();var a=r&&this._getValueHelpDelegatePayload();return r&&r.getCount?r.getCount(a,this,e,i):t.prototype.getCount.apply(this,arguments)};h.prototype._getLocalFilterValue=function(){var e=this.getParent();return e&&e.getLocalFilterValue()};h.prototype._setLocalFilterValue=function(e){var t=this.getParent();return t&&t.setLocalFilterValue(e)};h.prototype._getPriorityFilterValue=function(){var e=this.getParent();var t=e&&e.getLocalFilterValue();if(typeof t!=="undefined"){return t}return this.getFilterValue()};function p(e,t,a){e[t]=a?[i.createCondition("Contains",[a],undefined,undefined,r.NotValidated)]:[];return}return h});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/base/ListContent", ["sap/ui/mdc/valuehelp/base/Content","sap/ui/mdc/enum/ConditionValidated"],function(e,t){"use strict";var i=e.extend("sap.ui.mdc.valuehelp.base.ListContent",{metadata:{library:"sap.ui.mdc",properties:{caseSensitive:{type:"boolean",defaultValue:false},useFirstMatch:{type:"boolean",group:"Behavior",defaultValue:true},useAsValueHelp:{type:"boolean",group:"Behavior",defaultValue:true}},aggregations:{},events:{}}});i.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["caseSensitive"]})};i.prototype._observeChanges=function(t){if(t.name==="caseSensitive"){this._handleFilterValueUpdate(t)}e.prototype._observeChanges.apply(this,arguments)};i.prototype.getCount=function(e){var i=0;for(var a=0;a<e.length;a++){var n=e[a];if(n.isEmpty!==true&&n.validated===t.Validated){i++}}return i};i.prototype.getListBinding=function(){throw new Error("ListContent: Every listcontent must implement this method.")};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/content/Bool", ["sap/ui/mdc/valuehelp/content/FixedList","sap/ui/mdc/util/loadModules","sap/ui/model/ParseException"],function(e,t,i){"use strict";var o=e.extend("sap.ui.mdc.valuehelp.content.Bool",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.ITypeaheadContent"]}});o.prototype.init=function(){e.prototype.init.apply(this,arguments);this.setUseFirstMatch(true);this.setUseAsValueHelp(true);this.setFilterList(false);this.setCaseSensitive(false);this._oObserver.observe(this,{properties:["config"]})};o.prototype.exit=function(){if(this._oModel){this._oModel.destroy();this._oModel=undefined}e.prototype.exit.apply(this,arguments)};o.prototype.getContent=function(){return this._retrievePromise("boolContent",function(){return t(["sap/ui/mdc/field/ListFieldHelpItem","sap/ui/model/json/JSONModel"]).then(function(t){var i=t[0];var o=t[1];this._oModel=new o({type:"",items:[{key:true,text:"true"},{key:false,text:"false"}]});r.call(this,this.getConfig());var s=new i(this.getId()+"-Item",{key:{path:"$Bool>key"},text:{path:"$Bool>text"}});this.bindAggregation("items",{path:"$Bool>/items",template:s});this.setModel(this._oModel,"$Bool");return e.prototype.getContent.apply(this,arguments)}.bind(this))}.bind(this))};o.prototype.getItemForValue=function(e){return Promise.resolve().then(function(){var t=this.getConfig();var o=e.dataType||t&&t.dataType;if(o){if(e.checkKey){if(e.parsedValue===true||e.parsedValue===false){return{key:e.parsedValue,description:o.formatValue(e.parsedValue,"string")}}else{e.checkDescription=true}}if(e.checkDescription&&e.value){var r=o.formatValue(true,"string");if(r.toLowerCase().startsWith(e.value.toLowerCase())){return{key:true,description:r}}var s=o.formatValue(false,"string");if(s.toLowerCase().startsWith(e.value.toLowerCase())){return{key:false,description:s}}}var a=this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[e.value]);var n=e.exception||i;throw new n(a)}else{throw new Error("Type missing")}}.bind(this))};o.prototype.shouldOpenOnClick=function(){return false};o.prototype.isNavigationEnabled=function(e){return true};o.prototype._observeChanges=function(t){if(t.type==="property"&&t.name==="config"){r.call(this,t.current)}e.prototype._observeChanges.apply(this,arguments)};function r(e){if(this._oModel&&e){var t=e.dataType;var i=this._oModel.getData();if(t&&i["type"]!==t.getMetadata().getName()){i["type"]=t.getMetadata().getName();var o=i["items"];for(var r=0;r<o.length;r++){var s=o[r];s["text"]=t.formatValue(s["key"],"string")}this._oModel.checkUpdate(true)}}}return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/content/Conditions", ["sap/ui/mdc/valuehelp/base/Content","sap/ui/mdc/util/loadModules","sap/ui/mdc/enum/SelectType","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/util/Common"],function(e,t,i,n,o){"use strict";var r=e.extend("sap.ui.mdc.valuehelp.content.Conditions",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.ITypeaheadContent","sap.ui.mdc.valuehelp.IDialogContent"],properties:{label:{type:"string"}},aggregations:{},associations:{fieldHelp:{type:"sap.ui.mdc.ValueHelp",multiple:false}},events:{}}});r.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")};r.prototype.exit=function(){o.cleanup(this,["_oScrollContainer","_oDefineConditionPanel"]);e.prototype.exit.apply(this,arguments)};r.prototype.getContent=function(){return this._retrievePromise("content",function(){var e=["sap/ui/mdc/field/DefineConditionPanel","sap/ui/model/base/ManagedObjectModel"];if(this.provideScrolling()){e.push("sap/m/ScrollContainer")}return t(e).then(function(e){var t=e[0];var i=e[1];var n=e.length>2&&e[2];this._oManagedObjectModel=new i(this);this._oDefineConditionPanel=new t(this.getId()+"-DCP",{label:"{$help>/label}",conditions:"{$help>/conditions}",inputOK:"{$valueHelp>/_valid}",formatOptions:{path:"$help>/config",formatter:s},conditionProcessed:l.bind(this),fieldHelp:this.getFieldHelp()}).setModel(this._oManagedObjectModel,"$help");if(n){this._oScrollContainer=new n(this.getId()+"-SC",{height:"100%",width:"100%",vertical:true,content:[this._oDefineConditionPanel]});this.setAggregation("displayContent",this._oScrollContainer);return this._oScrollContainer}else{this.setAggregation("displayContent",this._oDefineConditionPanel);return this._oDefineConditionPanel}}.bind(this))}.bind(this))};r.prototype.getCount=function(e){var t=0;for(var i=0;i<e.length;i++){var o=e[i];if(o.isEmpty!==true&&o.validated===n.NotValidated){t++}}return t};r.prototype.getUseAsValueHelp=function(){return false};r.prototype.getValueHelpIcon=function(){return"sap-icon://value-help"};r.prototype.isFocusInHelp=function(){return true};r.prototype.getInitialFocusedControl=function(){return this._oDefineConditionPanel.getInitialFocusedControl()};r.prototype.getRequiresTokenizer=function(){return true};r.prototype.getFormattedTitle=function(t){var i=e.prototype.getFormattedTitle.apply(this,arguments);if(!i){i=this._oResourceBundle.getText(t?"valuehelp.DEFINECONDITIONS":"valuehelp.DEFINECONDITIONSNONUMBER",t)}return i};r.prototype.getFormattedShortTitle=function(){var e=this.getShortTitle();if(!e){e=this._oResourceBundle.getText("valuehelp.DEFINECONDITIONS.Shorttitle")}return e};r.prototype.getFormattedTokenizerTitle=function(e){var t=this.getTokenizerTitle();if(!t){t=this._oResourceBundle.getText("valuehelp.DEFINECONDITIONS.TokenizerTitle"+(e===0?"NoCount":""),e)}return t};r.prototype.getAriaAttributes=function(e){return{contentId:this.getId()+"-DCP",ariaHasPopup:"dialog",roleDescription:null}};r.prototype.getContainerConfig=function(){return{"sap.ui.mdc.valuehelp.Popover":{showArrow:true,showHeader:true,getContentWidth:function(){return"500px"},getFooter:function(){return this._retrievePromise("footer",function(){return t(["sap/m/library","sap/m/Button"]).then(function(e){var t=e[0];var i=t.ButtonType;var n=e[1];var o=new n(this.getId()+"-ok",{text:this._oResourceBundle.getText("valuehelp.OK"),enabled:"{$valueHelp>/_valid}",type:i.Emphasized,press:a.bind(this)});var r=new n(this.getId()+"-cancel",{text:this._oResourceBundle.getText("valuehelp.CANCEL"),press:this.fireCancel.bind(this)});return[o,r]}.bind(this))}.bind(this))}.bind(this)}}};r.prototype.onContainerClose=function(){if(this._oDefineConditionPanel){this._oDefineConditionPanel.cleanUp()}};function a(e){this.fireConfirm({close:true})}function l(e){var t=this.getConditions();if(this._getMaxConditions()===1){t=t.filter(function(e){return e.validated==="NotValidated"})}this.fireSelect({type:i.Set,conditions:t})}function s(e){var t={};if(e){t.valueType=e.dataType;t.maxConditions=e.maxConditions;t.delegate=e.delegate;t.delegateName=e.delegateName;t.payload=e.payload;t.operators=e.operators;t.display=e.display;t.defaultOperatorName=e.defaultOperatorName}return t}return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/content/FixedList", ["sap/ui/mdc/valuehelp/base/ListContent","sap/ui/mdc/util/loadModules","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/enum/SelectType","sap/ui/model/ParseException"],function(e,t,i,a,s){"use strict";var r=e.extend("sap.ui.mdc.valuehelp.content.FixedList",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.ITypeaheadContent","sap.ui.mdc.valuehelp.IDialogContent"],properties:{groupable:{type:"boolean",group:"Appearance",defaultValue:false},filterList:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{items:{type:"sap.ui.mdc.field.ListFieldHelpItem",multiple:true,singularName:"item"}},defaultAggregation:"items",events:{}}});r.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._iNavigateIndex=-1};r.prototype.exit=function(){if(this._oManagedObjectModel){this._oManagedObjectModel.destroy();delete this._oManagedObjectModel}e.prototype.exit.apply(this,arguments)};r.prototype.getContent=function(){return this._retrievePromise("content",function(){return t(["sap/m/List","sap/m/DisplayListItem","sap/m/library","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/model/base/ManagedObjectModel","sap/base/strings/whitespaceReplacer"]).then(function(e){var t=e[0];var i=e[1];var a=e[2];var s=e[3];var r=e[4];var n=e[5];var o=e[6];this._oManagedObjectModel=new n(this);var p=new i(this.getId()+"-item",{type:a.ListType.Active,label:{path:"$help>text",formatter:o},value:{path:"$help>additionalText",formatter:o},valueTextDirection:"{$help>textDirection}"}).addStyleClass("sapMComboBoxNonInteractiveItem");var d=new s({path:"text",test:u.bind(this),caseSensitive:true});var g;if(this.getGroupable()){g=new r("groupKey",false,c.bind(this))}var f=new t(this.getId()+"-List",{width:"100%",showNoData:false,mode:a.ListMode.SingleSelectMaster,rememberSelections:false,items:{path:"$help>/items",template:p,filters:d,sorter:g,templateShareable:false},itemPress:l.bind(this)}).addStyleClass("sapMComboBoxBaseList").addStyleClass("sapMComboBoxList");f.applyAriaRole("listbox");f.setModel(this._oManagedObjectModel,"$help");this.setAggregation("displayContent",f,true);h.call(this);return f}.bind(this))}.bind(this))};function n(){return this.getAggregation("displayContent")}function l(e){var t=e.getParameter("listItem");var i=t.getSelected();if(i){var s=g.call(this,t);var r=f.call(this,s);o.call(this,r,t.getLabel());this.fireSelect({type:a.Set,conditions:this.getConditions()});this.fireConfirm()}}function o(e,t){var i=this._createCondition(e,t);this.setProperty("conditions",[i],true);return i}function u(e){var t=this.getFilterList();return!t||p.call(this,e,this.getFilterValue())}function p(e,t){return!t||typeof t==="string"&&(this.getCaseSensitive()?e.startsWith(t):e.toLowerCase().startsWith(t.toLowerCase()))}function d(){if(this._iNavigateIndex>=0){this.setProperty("conditions",[],true);this._iNavigateIndex=-1}var e=n.call(this);var t=this.getListBinding();if(e){t.update();e.updateItems();e.invalidate();h.call(this)}}function c(e){var t=e.getProperty("groupKey");var i=e.getProperty("groupText");return{key:t,text:i}}function h(){var e=n.call(this);if(e){var t=this.getConditions();var a;var s=this.getFilterValue();var r=this.getUseFirstMatch();var l=false;if(t.length>0&&(t[0].validated===i.Validated||t[0].operator==="EQ")){a=t[0].values[0]}var o=e.getItems();for(var u=0;u<o.length;u++){var d=o[u];if(u===this._iNavigateIndex){d.addStyleClass("sapMLIBFocused").addStyleClass("sapMListFocus")}else{d.removeStyleClass("sapMLIBFocused").removeStyleClass("sapMListFocus")}if(d.isA("sap.m.DisplayListItem")){var c=g.call(this,d);if(t.length>0&&f.call(this,c)===a){d.setSelected(true)}else if(t.length===0&&this._iNavigateIndex<0&&r&&s&&!l&&p.call(this,d.getLabel(),s)){d.setSelected(true);l=true}else{d.setSelected(false)}}}}}function g(e){var t=e.getBindingContextPath();return this._oManagedObjectModel.getProperty(t)}function f(e){var t=e.getBinding("key");if(t){return t.getInternalValue()}else{return e.getKey()}}r.prototype.getItemForValue=function(e){return Promise.resolve().then(function(){if(e.value===null||e.value===undefined){return null}else if(!e.value&&e.checkDescription){return null}var t=this.getItems();var i;var a=0;var r;var n;for(a=0;a<t.length;a++){i=t[a];r=f.call(this,i);n=i.getText();if(e.checkKey&&r===e.parsedValue||e.checkDescription&&(n===e.value||r==e.value)){return{key:r,description:i.getText()}}}if(e.checkKey&&e.value===""){return null}if(this.getUseFirstMatch()){for(a=0;a<t.length;a++){i=t[a];n=e.checkDescription?i.getText():i.getKey();if(p.call(this,n,e.value)){r=f.call(this,i);return{key:r,description:i.getText()}}}}var l=this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[e.value]);var o=e.exception||s;throw new o(l)}.bind(this))};r.prototype.isValidationSupported=function(e){return true};r.prototype.isSearchSupported=function(){return true};r.prototype._handleConditionsUpdate=function(e){h.call(this)};r.prototype._handleFilterValueUpdate=function(t){d.call(this);e.prototype._handleFilterValueUpdate.apply(this,arguments)};r.prototype.removeFocus=function(){var e=n.call(this);if(e){e.removeStyleClass("sapMListFocus")}};r.prototype.navigate=function(e){var t=n.call(this);if(!t){return}t.addStyleClass("sapMListFocus");var i=t.getItems();var a=i.length;var s=this._iNavigateIndex>=0?i[this._iNavigateIndex]:t.getSelectedItem();var r=0;var l=this.getFilterList();var u=this.getFilterValue();var d=false;var c=this.getParent().isOpen();if(!l&&!s){var h=0;if(e>=0){for(h=0;h<i.length;h++){if(!i[h].isA("sap.m.GroupHeaderListItem")&&p.call(this,i[h].getLabel(),u)){r=h;break}}}else{for(h=i.length-1;h>=0;h--){if(!i[h].isA("sap.m.GroupHeaderListItem")&&p.call(this,i[h].getLabel(),u)){r=h;break}}}}else if(s){r=t.indexOfItem(s);r=r+e}else if(e>=0){r=e-1}else{r=a+e}if(e===9999){r=a-1}if(e===-9999){r=0}var v;if(r<0){r=0;v=true;d=true}else if(r>=a-1){r=a-1;v=false}else{v=e>=0}var m=function(){while(i[r]&&i[r].isA("sap.m.GroupHeaderListItem")){if(v){r++}else{r--}}};if(!c){m();if(r<0||r>a-1){v=!v;d=r<0;r=r<0?0:a-1;m()}}var y=i[r];if(y){var I=this.getUseFirstMatch();if(y!==s||I&&!d){var b,x,L;this._iNavigateIndex=r;y.setSelected(true);if(c){t.scrollToIndex(r);y.$().trigger("focusin")}if(y.isA("sap.m.GroupHeaderListItem")){this.setProperty("conditions",[],true);this.fireNavigated({condition:undefined,itemId:y.getId(),leaveFocus:false})}else{b=g.call(this,y);x=f.call(this,b);L=b.getText();var S=o.call(this,x,L);this.fireNavigated({condition:S,itemId:y.getId(),leaveFocus:false})}}else if(d){this.fireNavigated({condition:undefined,itemId:undefined,leaveFocus:d})}}};r.prototype.onShow=function(){e.prototype.onShow.apply(this,arguments);var t=n.call(this);if(!t){return}var i=t.getSelectedItem();if(i){var a=t.indexOfItem(i);t.scrollToIndex(a)}};r.prototype.onHide=function(){this.removeFocus();this._iNavigateIndex=-1};r.prototype.getValueHelpIcon=function(){if(this.getUseAsValueHelp()){return"sap-icon://slim-arrow-down"}else{return null}};r.prototype.getAriaAttributes=function(e){return{contentId:this.getId()+"-List",ariaHasPopup:"listbox",roleDescription:null}};r.prototype.shouldOpenOnClick=function(){return!this.getFilterList()};r.prototype.isFocusInHelp=function(){return false};r.prototype._isSingleSelect=function(e){return true};r.prototype.shouldOpenOnNavigate=function(){return!e.prototype._isSingleSelect.apply(this)};r.prototype.isNavigationEnabled=function(e){return this.getItems().length>0};r.prototype.onConnectionChange=function(){this._iNavigateIndex=-1};r.prototype.getListBinding=function(){var e=n.call(this);return e&&e.getBinding("items")};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/content/MDCTable", ["sap/ui/mdc/valuehelp/base/FilterableListContent","sap/ui/mdc/util/loadModules","sap/base/util/deepEqual","sap/ui/mdc/enum/SelectType","sap/ui/mdc/library","sap/m/library","sap/ui/table/library","sap/ui/mdc/condition/FilterConverter","sap/base/util/restricted/_throttle","sap/ui/mdc/util/Common","sap/base/Log","sap/ui/core/Element"],function(e,t,i,n,o,s,l,a,r,h,c,d){"use strict";var u=s.ListMode;var g=s.Sticky;var p=o.SelectionMode;var f=l.VisibleRowCountMode;var _=l.SelectionMode;var b=l.SelectionBehavior;var v=function(e){var t,i=t=e&&e.getType();if(!i){t="Table"}else if(typeof i==="object"){if(i.isA("sap.ui.mdc.table.ResponsiveTableType")){t="ResponsiveTable"}else{t="Table"}}return t};var T=function(){var e=this._getTable();var t=e&&e._oTable;var i=e.getRowBinding();var o=function(){return this._oUITableSelectionPlugin||t}.bind(this);var s=function(e,t){var i=t?n.Add:n.Remove;this._fireSelect({type:i,conditions:e})};var l={ResponsiveTable:{getListBindingInfo:function(){return t&&t.getBindingInfo("items")},getItems:function(){return t.getItems()},getSelectedItems:function(){return t.getSelectedItems()},modifySelection:function(e,t){if(e.getSelected()!==t){e.setSelected(t)}},handleItemPress:function(e){var t=e.getParameter("listItem");if(!this.isTypeahead()||!this._isSingleSelect()){t.setSelected(!t.getSelected())}var i=this._getListItemBindingContext(t);var n=this._getItemFromContext(i);var o=n&&this._createCondition(n.key,n.description,n.payload);s.call(this,[o],t.getSelected())},handleSelectionChange:function(e){if(!this.isTypeahead()||!this._isSingleSelect()){var t=e.getParameters();var i=t.listItems||t.listItem&&[t.listItem];var n=i.map(function(e){var t=this._getListItemBindingContext(e);var i=this._getItemFromContext(t);return i&&this._createCondition(i.key,i.description,i.payload)}.bind(this));s.call(this,n,t.selected)}},adjustTable:function(){var e=t.getSticky();if(!e||e.length===0){t.setSticky([g.ColumnHeaders])}if(this._isSingleSelect()){t.setMode(u.SingleSelectLeft)}else{t.setMode(u.MultiSelect)}},handleScrolling:function(e){var i=this.getScrollDelegate();if(i){t.scrollToIndex(e).catch(function(e){});return true}},handleListBinding:function(){}},Table:{getListBindingInfo:function(){return t&&t.getBindingInfo("rows")},getItems:function(){return t.getRows().filter(function(e){var t=this._getListItemBindingContext(e);return t&&t.getObject()}.bind(this))}.bind(this),getSelectedItems:function(){var e=o().getSelectedIndices();var i=e.reduce(function(e,i){var n=t.getContextByIndex(i);return n?e.concat(n):e},[]);return l["Table"].getItems().filter(function(e){return i.indexOf(this._getListItemBindingContext(e))>=0}.bind(this))}.bind(this),modifySelection:function(e,t){var i=this._getListItemBindingContext(e);var n=l["Table"].getContexts().indexOf(i);var s=o().getSelectedIndices().indexOf(n)>=0;if(t&&!s){return this._isSingleSelect()?o().setSelectedIndex(n):o().addSelectionInterval(n,n)}else if(!t&&s){return o().removeSelectionInterval(n,n)}},handleItemPress:function(e){},handleSelectionChange:function(e){var i=e.getSource().isA("sap.ui.table.plugins.MultiSelectionPlugin");var n=e.getParameters();if(i?n._internalTrigger:!n.userInteraction){return}var o=e.getParameter("rowIndices");var a=o.map(function(e){return t.getContextByIndex(e)});var r=l["Table"].getItems().filter(function(e,t){return a.indexOf(this._getListItemBindingContext(e))>=0}.bind(this));var h=[],c=[];var d=l["Table"].getSelectedItems();var u=this.getConditions();r.forEach(function(e,t){var i=this._isItemSelected(e,u);var n=d.indexOf(e)!==-1;if(i!==n){var o=d.indexOf(e)!==-1?h:c;var s=this._getListItemBindingContext(e);var l=this._getItemFromContext(s);var a=l&&this._createCondition(l.key,l.description,l.payload);o.push(a)}}.bind(this));var g=this._isSingleSelect();if(h.length){s.call(this,h,true);if(g){return}}if(c.length){s.call(this,c,false)}},adjustTable:function(){var i=t.getRowMode();if(!i){t.setVisibleRowCountMode(f.Auto);t.setMinAutoRowCount(3)}else if(i.isA("sap.ui.table.rowmodes.AutoRowMode")){i.setMinRowCount(3)}var n=e.getSelectionMode();var s=this._isSingleSelect()?_.Single:_.MultiToggle;if(n!==p.SingleMaster){t.setSelectionBehavior(b.Row)}o().setSelectionMode(s)},handleScrolling:function(e){var i=t.getFirstVisibleRow();if(typeof e==="undefined"||e<0){e=i-1}if(e>=0&&e!=i){t.setFirstVisibleRow(e);return Promise.resolve()}return false},getContexts:function(){return i&&i.getAllCurrentContexts()},handleListBinding:function(){i.attachEvent("change",this._handleUpdateFinished.bind(this))}}};return l[this._sTableType]};function S(){if(this._oTableHelper&&!this._bSelectionIsUpdating){this._bSelectionIsUpdating=true;var e=this._oTableHelper.getItems();var t=this.getConditions();var i=[];for(var n in e){var o=e[n];var s=this._isItemSelected(o,t);i.push(this._oTableHelper.modifySelection.call(this,o,s))}Promise.all(i).then(function(){this._bSelectionIsUpdating=false}.bind(this))}}var m=r(S,100,{leading:true});var y=e.extend("sap.ui.mdc.valuehelp.content.MDCTable",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.IDialogContent"],properties:{forceBind:{type:"boolean",defaultValue:false}},aggregations:{table:{type:"sap.ui.mdc.Table",multiple:false}},events:{},defaultAggregation:"table"}});y.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver.observe(this,{aggregations:["table"]});this._addPromise("listBinding");this._bRebindTable=false};var C=function(){var e=this._getTable().getRowBinding();if(e){this._oTableHelper=T.call(this);this._oTableHelper.handleListBinding.call(this);P.call(this);this._resolvePromise("listBinding",e)}};var I=function(){if(this._oTable&&!this._oTable.getHeader()){this._oTable.setHeader(this._oResourceBundle.getText("valuehelp.TABLETITLENONUMBER"))}};y.prototype._handleConditionsUpdate=function(){m.call(this)};y.prototype._handleUpdateFinished=function(e){m.call(this)};y.prototype._handleFirstVisibleRowChanged=function(e){m.call(this)};var B=function(e,t){if(!e){return}if(t==="remove"){if(this._sTableType==="Table"){e.detachEvent("cellClick",this._handleItemPress,this);e.detachEvent("rowSelectionChange",this._handleSelectionChange,this);e.detachEvent("rowsUpdated",this._handleUpdateFinished,this);e.detachEvent("firstVisibleRowChanged",this._handleFirstVisibleRowChanged,this);if(this._oUITableSelectionPlugin){this._oUITableSelectionPlugin.detachEvent("selectionChange",this._handleSelectionChange,this)}this._oUITableSelectionPlugin=undefined}else if(this._sTableType==="ResponsiveTable"){e.detachEvent("itemPress",this._handleItemPress,this);e.detachEvent("selectionChange",this._handleSelectionChange,this);e.detachEvent("updateFinished",this._handleUpdateFinished,this)}this._oObserver.unobserve(e)}else{if(this._sTableType==="Table"){this._oObserver.observe(e,{bindings:["rows"],aggregations:["plugins"]});e.attachEvent("cellClick",this._handleItemPress,this);e.attachEvent("rowSelectionChange",this._handleSelectionChange,this);e.attachEvent("rowsUpdated",this._handleUpdateFinished,this);e.attachEvent("firstVisibleRowChanged",this._handleFirstVisibleRowChanged,this);this._oUITableSelectionPlugin=e.getPlugins().find(function(e){return e.isA("sap.ui.table.plugins.SelectionPlugin")});if(this._oUITableSelectionPlugin){this._oUITableSelectionPlugin.attachEvent("selectionChange",this._handleSelectionChange,this)}}else if(this._sTableType==="ResponsiveTable"){this._oObserver.observe(e,{bindings:["items"]});e.attachEvent("itemPress",this._handleItemPress,this);e.attachEvent("selectionChange",this._handleSelectionChange,this);e.attachEvent("updateFinished",this._handleUpdateFinished,this)}}};y.prototype._observeChanges=function(t){if(["_defaultFilterBar","filterBar"].indexOf(t.name)!==-1){x.call(this)}if(t.name==="table"){var i=t.child;if(t.mutation==="remove"){this._oObserver.unobserve(i);this._oTable=null;this._oTableHelper=null;this._addPromise("listBinding")}else{this._oTable=i;if(this._oTable.getAutoBindOnInit()){c.warning("Usage of autobound tables may lead to unnecessary requests.")}else if(this.getForceBind()){this._bRebindTable=true}this._oObserver.observe(i,{aggregations:["_content"]});this._sTableType=v(i);i.addDelegate({onmouseover:function(e){var t=d.closestTo(e.target);if(t&&t.isA("sap.m.ColumnListItem")){t.setType("Active")}}});B.call(this,this._oTable._oTable,"insert");C.call(this);I.call(this);x.call(this)}return}if(t.name==="_content"){B.call(this,t.child,t.mutation);return}if(["rows","items"].indexOf(t.name)!==-1&&t.mutation==="ready"){C.call(this);return}if(t.name==="config"){P.call(this)}if(t.name==="plugins"){this._oUITableSelectionPlugin=t.mutation==="remove"||!t.child.isA("sap.ui.table.plugins.SelectionPlugin")?undefined:t.child;if(this._oUITableSelectionPlugin){this._oUITableSelectionPlugin.attachEvent("selectionChange",this._handleSelectionChange,this)}}e.prototype._observeChanges.apply(this,arguments)};y.prototype._getTable=function(){return this._oTable};function x(){var e=this._getPriorityFilterBar();if(this._oTable&&e&&this._oTable.getFilter()!==e.getId()){this._oTable.setFilter(e)}}function P(){if(this._oTableHelper){this._oTableHelper.adjustTable.call(this)}}y.prototype.getContent=function(){return this._retrievePromise("wrappedContent",function(){return t(["sap/ui/layout/FixFlex","sap/m/VBox","sap/m/ScrollContainer"]).then(function(e){var t=e[0];var i=e[1];var n=e[2];if(!this._oContentLayout){this._oFilterBarVBox=new i(this.getId()+"-FilterBarBox",{visible:"{$this>/_filterBarVisible}"});this._oFilterBarVBox.addStyleClass("sapMdcValueHelpPanelFilterbar");this._oFilterBarVBox._oWrapper=this;this._oFilterBarVBox.getItems=function(){var e=this._oWrapper._getPriorityFilterBar.call(this._oWrapper);var t=e?[e]:[];return t};this._oTableBox=new i(this.getId()+"-TB",{height:"100%"});this._oTableBox.addStyleClass("sapMdcValueHelpPanelTableBox");this._oTableBox._oWrapper=this;this._oTableBox.getItems=function(){var e=this._oWrapper._sTableType==="ResponsiveTable"?this._oWrapper._oScrollContainer:this._oWrapper._oTable;var t=e?[e]:[];return t};this._oContentLayout=new t(this.getId()+"-FF",{minFlexSize:200,fixContent:this._oFilterBarVBox,flexContent:this._oTableBox});this._oScrollContainer=new n(this.getId()+"-SC",{height:"calc(100% - 0.5rem)",width:"100%",vertical:true});this._oScrollContainer._oWrapper=this;this._oScrollContainer.getContent=function(){var e=[];var t=this._oWrapper&&this._oWrapper._oTable;if(t){e.push(t)}return e}}this.setAggregation("displayContent",this._oContentLayout);if(!this._getPriorityFilterBar()){return this._createDefaultFilterBar().then(function(){this._oFilterBarVBox.invalidate();return this._oContentLayout}.bind(this))}return this._oContentLayout}.bind(this))}.bind(this))};y.prototype.getListBinding=function(){var e=this.getTable();return e&&e.getRowBinding()};y.prototype._getListBindingInfo=function(){return this._oTableHelper&&this._oTableHelper.getListBindingInfo()};y.prototype.onBeforeShow=function(t){return Promise.resolve(e.prototype.onBeforeShow.apply(this,arguments)).then(function(){var e=this.getTable();if(e){var i=e.isTableBound();var n=i&&e._oTable.getShowOverlay();if(this._bRebindTable||n){e.rebind();this._bRebindTable=false}else if(t){if(this._sTableType==="ResponsiveTable"){this._oScrollContainer.scrollTo(0,0)}else if(i){return e.scrollToIndex(0)}}}}.bind(this))};y.prototype.onShow=function(t){if(this._oTable){P.call(this);var i=e.prototype._isSingleSelect.apply(this)?p.SingleMaster:p.Multi;if(this._oTable.getSelectionMode()===p.None){this._oTable.setSelectionMode(i)}if(this._oTable.getSelectionMode()!==i){throw new Error("Table selectionMode needs to be "+i)}}e.prototype.onShow.apply(this,arguments)};y.prototype._handleScrolling=function(e){return this._oTableHelper&&this._oTableHelper.handleScrolling.call(this,e)};y.prototype.getScrollDelegate=function(){if(!this.isTypeahead()&&this._oScrollContainer){return this._oScrollContainer.getScrollDelegate()}return e.prototype.getScrollDelegate.apply(this,arguments)};y.prototype._handleItemPress=function(e){this._oTableHelper.handleItemPress.call(this,e)};y.prototype._handleSelectionChange=function(e){if(!this._bSelectionIsUpdating){this._oTableHelper.handleSelectionChange.call(this,e)}};y.prototype.isQuickSelectSupported=function(){return true};y.prototype.setParent=function(t){e.prototype.setParent.apply(this,arguments);P.call(this)};y.prototype._isSingleSelect=function(){if(this._oTable){if(this._oTable.getSelectionMode()===p.Multi){return false}else{return true}}else{return e.prototype._isSingleSelect.apply(this,arguments)}};y.prototype.exit=function t(i){h.cleanup(this,["_oContentLayout","_oFilterBarVBox","_oTableBox","_oResourceBundle","_oScrollContainer","_oTableHelper","_bSelectionIsUpdating","_sTableType","_oUITableSelectionPlugin","_oTable","_bRebindTable"]);e.prototype.exit.apply(this,arguments)};return y});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/content/MTable", ["sap/ui/mdc/valuehelp/base/FilterableListContent","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterConverter","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/util/loadModules","sap/m/library","sap/ui/model/FilterType","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterProcessor","sap/ui/mdc/util/Common","sap/base/strings/formatMessage","sap/base/util/merge","sap/ui/mdc/enum/SelectType","sap/base/Log","sap/ui/core/Element"],function(e,t,i,a,s,n,r,o,l,h,d,u,p,c,g,v){"use strict";var f=n.ListMode;var _=n.Sticky;var m=e.extend("sap.ui.mdc.valuehelp.content.MTable",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.ITypeaheadContent","sap.ui.mdc.valuehelp.IDialogContent"],properties:{},aggregations:{table:{type:"sap.m.Table",multiple:false}},events:{contentUpdated:{}},defaultAggregation:"table"}});m.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver.observe(this,{aggregations:["table"]});this._addPromise("listBinding");this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._oMResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.m");this._iNavigateIndex=-1};m.prototype.getValueHelpIcon=function(){if(this.getUseAsValueHelp()){return"sap-icon://slim-arrow-down"}else{return null}};function y(){if(this._oTable){var t=this._oTable.getItems();var i=this.getConditions();var a=this._isSingleSelect()&&!e.prototype._isSingleSelect.apply(this);t.forEach(function(e){var t=a?false:this._isItemSelected(e,i);e.setSelected(t);if(this._oTable.indexOfItem(e)===this._iNavigateIndex){e.addStyleClass("sapMLIBFocused").addStyleClass("sapMListFocus")}else{e.removeStyleClass("sapMLIBFocused").removeStyleClass("sapMListFocus")}}.bind(this))}}m.prototype.applyFilters=function(){if(this._iNavigateIndex>=0){this.setProperty("conditions",[],true);this._iNavigateIndex=-1}var e=function(){if(!this.bIsDestroyed){return this.applyFilters()}}.bind(this);var t=this.getListBinding();var i=this._isValueHelpDelegateInitialized();var a;if(!t||!i){a=Promise.all([this._retrievePromise("listBinding"),this._awaitValueHelpDelegate()]).then(e)}if(!i||!this.isTypeahead()&&!this.isContainerOpen()&&t.isSuspended()){return undefined}if(!a){var s=this._getValueHelpDelegate();var n=this._getValueHelpDelegatePayload();var r=this._getListBindingInfo();var o=r&&r.length;s.updateBindingInfo(n,this,r);s.updateBinding(n,t,r,this);a=Promise.resolve(s.checkListBindingPending(n,t,o))}this._addPromise("applyFilters",a);return a.catch(function(e){if(e.canceled){g.error("sap.ui.mdc.ValueHelp - Error during applyFilters:",e.message);return}throw e}).finally(function(){var e=this._retrievePromise("applyFilters");return e&&e.getInternalPromise()}.bind(this))};m.prototype._handleSelectionChange=function(e){var t=this.isTypeahead();if(!t||!this._isSingleSelect()){var i=e.getParameters();var a=i.listItems||i.listItem&&[i.listItem];var s=a.map(function(e){var t=this._getListItemBindingContext(e);var i=this._getItemFromContext(t);return i&&this._createCondition(i.key,i.description,i.payload)}.bind(this));this._fireSelect({type:i.selected?c.Add:c.Remove,conditions:s});if(t){this.fireConfirm()}}};m.prototype._handleItemPress=function(e){var t=e.getParameter("listItem");var i=this._getListItemBindingContext(t);var a=this._getItemFromContext(i);var s=this._getTable();var n=s.getMode()===f.SingleSelectMaster;var r=n?t.getSelected():!t.getSelected();t.setSelected(r);var o=r?c.Add:c.Remove;var l=this._createCondition(a.key,a.description,a.payload);this._fireSelect({type:o,conditions:[l]});if(this.isTypeahead()){this.fireConfirm({close:true})}};m.prototype._handleUpdateFinished=function(){y.apply(this);if(this._bScrollToSelectedItem){var e=this._getTable();if(e&&this.isTypeahead()&&this._isSingleSelect()){var t=this._iNavigateIndex>=0?e.getItems()[this._iNavigateIndex]:e.getSelectedItem();if(t){this._handleScrolling(t)}}this._bScrollToSelectedItem=false}this.fireContentUpdated()};m.prototype._getTable=function(){return this._oTable};m.prototype.onShow=function(t){var i=this._getTable();if(i){if(!i.hasStyleClass("sapMComboBoxList")){i.addStyleClass("sapMComboBoxList")}var a=this.isTypeahead()?f.SingleSelectMaster:f.SingleSelectLeft;if(!e.prototype._isSingleSelect.apply(this)&&i.getMode()!==a){a=f.MultiSelect}if(i.getMode()===f.None){i.setMode(a)}if(i.getMode()!==a){throw new Error("Table selection mode needs to be "+a)}}e.prototype.onShow.apply(this,arguments);if(i&&this.isTypeahead()&&this._isSingleSelect()){var s=this._iNavigateIndex>=0?i.getItems()[this._iNavigateIndex]:i.getSelectedItem();if(s){this._handleScrolling(s)}else{this._bScrollToSelectedItem=true}}};m.prototype.onHide=function(){e.prototype.onHide.apply(this,arguments);var t=this.getTable();if(t){this.removeFocus();if(t.hasStyleClass("sapMComboBoxList")){t.removeStyleClass("sapMComboBoxList")}}this._iNavigateIndex=-1;this._bScrollToSelectedItem=false};m.prototype._handleConditionsUpdate=function(e){y.call(this)};m.prototype.getContent=function(){if(!this.isTypeahead()){return this._retrievePromise("wrappedContent",function(){return s(["sap/ui/layout/FixFlex","sap/m/VBox","sap/m/Panel","sap/m/ScrollContainer","sap/ui/model/resource/ResourceModel"]).then(function(e){var t=e[0];var i=e[1];var a=e[2];var s=e[3];var n=e[4];if(!this._oContentLayout){this._oFilterBarVBox=new i(this.getId()+"-FilterBarBox");this._oFilterBarVBox.addStyleClass("sapMdcValueHelpPanelFilterbar");this._oFilterBarVBox._oWrapper=this;this._oFilterBarVBox.getItems=function(){return[this._oWrapper._getPriorityFilterBar.call(this._oWrapper)]};this.setModel(new n({bundleName:"sap/ui/mdc/messagebundle",async:false}),"$i18n");var r=function(e){var t=0;if(t===0){e=this.getModel("$i18n").getResourceBundle().getText("valuehelp.TABLETITLENONUMBER")}return u(e,t)};this._oTablePanel=new a(this.getId()+"-TablePanel",{expanded:true,height:"100%",headerText:{parts:["$i18n>valuehelp.TABLETITLE"],formatter:r}});this._oTablePanel.addStyleClass("sapMdcTablePanel");this._oContentLayout=new t(this.getId()+"-FF",{minFlexSize:200,fixContent:this._oFilterBarVBox,flexContent:this._oTablePanel});this._oScrollContainer=new s(this.getId()+"-SC",{height:"100%",width:"100%",vertical:true});this._oScrollContainer._oWrapper=this;this._oScrollContainer.getContent=function(){var e=[];var t=this._oWrapper&&this._oWrapper._oTable;if(t){e.push(t)}return e};this._oTablePanel.addContent(this._oScrollContainer)}this.setAggregation("displayContent",this._oContentLayout);var o=this._getPriorityFilterBar();if(!o){return this._createDefaultFilterBar().then(function(){return this._oContentLayout}.bind(this))}return this._oContentLayout}.bind(this))}.bind(this))}return this._oTable};m.prototype.getItemForValue=function(e){if(!e.checkKey&&e.parsedValue&&!e.checkDescription){return null}if(e.checkKey&&!this.getKeyPath()){throw new Error("MTable: KeyPath missing! "+this.getId())}if(e.checkDescription&&!this.getDescriptionPath()){throw new Error("MTable: DescriptionPath missing! "+this.getId())}e.caseSensitive=e.caseSensitive||this.getCaseSensitive();var t=I.call(this);var i=this._getValueHelpDelegate();var a=this._getValueHelpDelegatePayload();var s=i&&i.getFilterConditions(a,this,e);return Promise.all([t,s]).then(function(t){var i=t[0];var a=t[1];var s;if(!i){var n=this.getTable();s=b.call(this,e,n.getItems(),a)}if(!s){s=this._loadItemForValue(e,a)}return s}.bind(this))};function b(e,t,i){if(t.length===0){return}var a=function(e,t){var i=e.isA("sap.ui.model.Context")?e:this._getListItemBindingContext(e);return i.getProperty(t)}.bind(this);var s;var n;var r=S.call(this,e,i);var o=h.apply(t,r,a);if(o.length===1){var l=this._getListItemBindingContext(o[0]);var d=this._getItemFromContext(l,{inParameters:s,outParameters:n});return{key:d.key,description:d.description,payload:d.payload}}else if(o.length>1){if(!e.caseSensitive){var u=p({},e);u.caseSensitive=true;return b.call(this,u,t,i)}throw T.call(this,e.exception,true,e.parsedValue||e.value)}}function S(e,t){var a=e.caseSensitive;var s=this.getKeyPath();var n=this.getDescriptionPath();var r=[];if(e.checkKey&&e.hasOwnProperty("parsedValue")){r.push(new o({path:s,operator:l.EQ,value1:e.parsedValue,caseSensitive:a}))}if(e.checkDescription&&e.value){r.push(new o({path:n,operator:l.EQ,value1:e.value,caseSensitive:a}))}var h=r.length>1?new o({filters:r,and:false}):r[0];if(t){var d=this._getTypesForConditions(t);var u=i.createFilters(t,d,undefined,this.getCaseSensitive());if(u){h=new o({filters:[h,u],and:true})}}return h}function I(){return this._retrievePromise("listBinding").then(function(e){var t=this._getValueHelpDelegate();var i=this._getValueHelpDelegatePayload();var a=this._getListBindingInfo();var s=a&&a.length;if(e&&t){return t.checkListBindingPending(i,e,s)}else{return true}}.bind(this))}m.prototype.getListBinding=function(){var e=this._getTable();return e&&e.getBinding("items")};m.prototype._getListBindingInfo=function(){var e=this._getTable();return e&&e.getBindingInfo("items")};m.prototype._loadItemForValue=function(e,t){if(!e.checkKey&&e.parsedValue&&!e.checkDescription){return null}var i=this.getKeyPath();var a=this.getDescriptionPath();var s=this.getUseFirstMatch();var n=this._getTable();var r=n&&n.getBinding("items");var o=r&&r.getPath();var l=this._getValueHelpDelegate();var h=this._getValueHelpDelegatePayload();var d="loadItemForValue:"+JSON.stringify([o,i,e.parsedValue||e.value,e.context,e.bindingContext&&e.bindingContext.getPath(),t]);return this._retrievePromise(d,function(){var n=S.call(this,e,t);var d=r.getModel().bindList(o,r.getContext(),undefined,n);d.initialize();return l.executeFilter(h,d,2).then(function(t){var n=t.getContexts();setTimeout(function(){d.destroy()},0);if(n.length&&(n.length<2||s)){return this._getItemFromContext(n[0],{keyPath:i,descriptionPath:a,inParameters:undefined})}else if(e.checkKey&&e.parsedValue===""&&n.length===0){return null}else{var r=T.call(this,e.exception,n.length>1,e.value);throw r}}.bind(this))}.bind(this))};function T(e,t,i){var a;if(t){a=this._oResourceBundle.getText("valuehelp.VALUE_NOT_UNIQUE",[i])}else{a=this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[i])}var s=new e(a);s._bNotUnique=t;return s}m.prototype.isValidationSupported=function(e){return true};m.prototype.navigate=function(e){var t=this.getParent().isOpen();if(!t&&this._iNavigateIndex<0){this.onShow(true)}var i=this.getListBinding();if(!i||!i.getLength()){return I.call(this).then(function(t){if(!t&&i.getLength()!==0){return this.navigate(e)}return false}.bind(this))}var a=this._getTable();var s=a.getItems();var n=this._iNavigateIndex>=0?s[this._iNavigateIndex]:a.getSelectedItem();var r=s.length;var o=0;var l=false;if(n){o=s.indexOf(n);o=o+e}else if(e>=0){o=e-1}else{o=r+e}if(e===9999){o=r-1}if(e===-9999){o=0}if(this._getMaxConditions()!==1){if(this.getParent().isOpen()&&a.getMode()===f.MultiSelect){a.focus();return}}a.addStyleClass("sapMListFocus");var h;if(o<0){o=0;h=true;l=true}else if(o>=r-1){o=r-1;h=false}else{h=e>=0}var d=function(){while(s[o]&&s[o].isA("sap.m.GroupHeaderListItem")){if(h){o++}else{o--}}};if(!t){d();if(o<0||o>r-1){h=!h;l=o<0;o=o<0?0:r-1;d()}}var u=s[o];if(u){var p;if(u!==n){this._iNavigateIndex=o;u.setSelected(true);if(t){this._handleScrolling(u);u.$().trigger("focusin")}if(u.isA("sap.m.GroupHeaderListItem")){this.setProperty("conditions",[],true);this.fireNavigated({condition:undefined,itemId:u.getId(),leaveFocus:false})}else{var c=this._getListItemBindingContext(u);var g=this._getItemFromContext(c);p=g&&this._createCondition(g.key,g.description,g.payload);this.setProperty("conditions",[p],true);this.fireNavigated({condition:p,itemId:u.getId(),leaveFocus:false})}}else if(l){this.fireNavigated({condition:undefined,itemId:undefined,leaveFocus:l})}}};m.prototype.isNavigationEnabled=function(e){if(e===1||e===-1){return true}else{return false}};m.prototype._handleScrolling=function(e){var t=this.getScrollDelegate();if(t){var i=this._getTable();var a=!isNaN(e)?e:i.indexOfItem(e);i.scrollToIndex(a).catch(function(e){});return true}return false};m.prototype.getScrollDelegate=function(){if(this._oScrollContainer){return this._oScrollContainer.getScrollDelegate()}return e.prototype.getScrollDelegate.apply(this,arguments)};m.prototype.removeFocus=function(){var e=this.getTable();if(e){e.removeStyleClass("sapMListFocus")}};m.prototype.getAriaAttributes=function(e){var t=this.getTable();var i=this.isTypeahead();var a=this.getUseAsValueHelp();var s=null;if(e!==1&&(i&&a||!i)){var n=C.apply(this);s=n.getText("MULTICOMBOBOX_ARIA_ROLE_DESCRIPTION")}return{contentId:t&&t.getId(),ariaHasPopup:"listbox",roleDescription:s}};function C(){if(!this._oResourceBundleM){this._oResourceBundleM=sap.ui.getCore().getLibraryResourceBundle("sap.m")}return this._oResourceBundleM}m.prototype.getContainerConfig=function(){return{"sap.ui.mdc.valuehelp.Popover":{getContentHeight:function(){var e=this._getTable();var t=e&&e.getDomRef();return t&&Math.round(t.getBoundingClientRect().height)}.bind(this),getFooter:function(){return this._retrievePromise("footer",function(){return this._retrievePromise("listBinding").then(function(e){var t=this._getListBindingInfo();var i=this.getParent().hasDialog();if(i&&t&&t.length){return s(["sap/m/Button","sap/m/Toolbar","sap/m/ToolbarSpacer"]).then(function(e){var t=e[0];var i=e[1];var a=e[2];var s=new t(this.getId()+"-showAllItems",{text:this._oMResourceBundle.getText("INPUT_SUGGESTIONS_SHOW_ALL"),press:function(){this.fireRequestSwitchToDialog()}.bind(this)});var n=[new a(this.getId()+"-Spacer")].concat(s);var r=new i(this.getId()+"-TB",{content:n});return r}.bind(this))}}.bind(this))}.bind(this))}.bind(this)}}};function B(){if(this._oTable&&this.getParent()){var e=this._oTable.getSticky();if(!e||e.length===0){this._oTable.setSticky([_.ColumnHeaders])}}}m.prototype.setParent=function(t){e.prototype.setParent.apply(this,arguments);B.call(this)};m.prototype._observeChanges=function(t){if(t.name==="config"){B.call(this)}if(t.name==="items"&&t.mutation==="ready"){this._resolvePromise("listBinding",t.bindingInfo.binding)}if(t.name==="table"){var i=t.child;if(t.mutation==="remove"){this._oObserver.unobserve(i);i.removeDelegate(this._oTableDelegate);this._oTable.detachItemPress(this._handleItemPress,this);this._oTable.detachSelectionChange(this._handleSelectionChange,this);this._oTable.detachUpdateFinished(this._handleUpdateFinished,this);this._oTable=null;this._removePromise("footer");this._addPromise("listBinding")}else{this._oTable=i;B.call(this);this._oTable.attachItemPress(this._handleItemPress,this);this._oTable.attachSelectionChange(this._handleSelectionChange,this);this._oTable.attachUpdateFinished(this._handleUpdateFinished,this);this._oTableDelegate=this._oTableDelegate||{onsapprevious:this._handleTableEvent,onsapnext:this._handleTableEvent,cellClick:this._handleTableEvent};i.addDelegate(this._oTableDelegate,true,this);var a=i.getBinding("items");if(a){this._resolvePromise("listBinding",a)}else{this._oObserver.observe(t.child,{bindings:["items"]})}}}e.prototype._observeChanges.apply(this,arguments)};m.prototype._handleTableEvent=function(e){if(!this.isTypeahead()){return}var t=this._getTable();var i=v.closestTo(e.target);switch(e.type){case"sapprevious":if(i.isA("sap.m.ListItemBase")){if(t.indexOfItem(i)===0){this.fireNavigated({condition:undefined,itemId:undefined,leaveFocus:true});e.preventDefault();e.stopPropagation();e.stopImmediatePropagation(true)}}break;default:break}};m.prototype.isQuickSelectSupported=function(){return true};m.prototype._isSingleSelect=function(){var t=this._getTable();if(t&&t.getMode()!==f.None){if(t.getMode()===f.MultiSelect){return false}else{return true}}else{return e.prototype._isSingleSelect.apply(this,arguments)}};m.prototype.onConnectionChange=function(){this._iNavigateIndex=-1};m.prototype.exit=function(){d.cleanup(this,["_sTableWidth","_oTable","_oScrollContainer","_oContentLayout","_oTablePanel","_oFilterBarVBox","_oMResourceBundle","_oResourceBundle","_oTableDelegate"]);e.prototype.exit.apply(this,arguments)};return m});
sap.ui.require.preload({
	"sap/ui/mdc/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ui.mdc","type":"library","embeds":[],"applicationVersion":{"version":"1.113.0"},"title":"UI5 library: sap.ui.mdc","description":"UI5 library: sap.ui.mdc","ach":"CA-UI5-MDC","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.113","libs":{"sap.ui.core":{"minVersion":"1.113.0"},"sap.m":{"minVersion":"1.113.0"},"sap.ui.layout":{"minVersion":"1.113.0","lazy":true}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.ui.mdc.Table","sap.ui.mdc.FilterBar","sap.ui.mdc.field.FieldBase","sap.ui.mdc.field.FieldInput","sap.ui.mdc.field.FieldMultiInput","sap.ui.mdc.field.DefineConditionPanel","sap.ui.mdc.Field","sap.ui.mdc.FilterField","sap.ui.mdc.MultiValueField","sap.ui.mdc.link.Panel","sap.ui.mdc.link.ContactDetails","sap.ui.mdc.Chart","sap.ui.mdc.p13n.PersistenceProvider"],"elements":["sap.ui.mdc.table.Column","sap.ui.mdc.table.CreationRow","sap.ui.mdc.table.TableTypeBase","sap.ui.mdc.table.GridTableType","sap.ui.mdc.table.ResponsiveTableType","sap.ui.mdc.table.RowSettings","sap.ui.mdc.chart.Item","sap.ui.mdc.chart.ChartSelectionDetails","sap.ui.mdc.chart.ChartToolbar","sap.ui.mdc.chart.ChartTypeButton","sap.ui.mdc.chart.DrillBreadcrumbs","sap.ui.mdc.chart.SelectionDetailsActions","sap.ui.mdc.field.CustomFieldInfo","sap.ui.mdc.field.FieldInfoBase","sap.ui.mdc.field.ListFieldHelpItem","sap.ui.mdc.filterbar.aligned.FilterItemLayout","sap.ui.mdc.Link","sap.ui.mdc.link.ContactDetailsAddressItem","sap.ui.mdc.link.ContactDetailsEmailItem","sap.ui.mdc.link.ContactDetailsItem","sap.ui.mdc.link.ContactDetailsPhoneItem","sap.ui.mdc.link.LinkItem","sap.ui.mdc.link.PanelItem","sap.ui.mdc.link.SemanticObjectUnavailableAction","sap.ui.mdc.link.SemanticObjectMapping","sap.ui.mdc.link.SemanticObjectMappingItem","sap.ui.mdc.field.MultiValueFieldItem","sap.ui.mdc.ValueHelp","sap.ui.mdc.valuehelp.Popover","sap.ui.mdc.valuehelp.Dialog","sap.ui.mdc.valuehelp.content.Bool","sap.ui.mdc.valuehelp.content.Conditions","sap.ui.mdc.valuehelp.content.FixedList","sap.ui.mdc.valuehelp.content.MDCTable","sap.ui.mdc.valuehelp.content.MTable"],"types":["sap.ui.mdc.TableType","sap.ui.mdc.TableP13Mode","sap.ui.mdc.GrowingMode","sap.ui.mdc.RowAction","sap.ui.mdc.RowCountMode","sap.ui.mdc.SelectionMode","sap.ui.mdc.FilterExpression","sap.ui.mdc.MultiSelectMode"],"interfaces":["sap.ui.mdc.IFilterSource","sap.ui.mdc.IFilter","sap.ui.mdc.IxState","sap.ui.mdc.valuehelp.ITypeaheadContent","sap.ui.mdc.valuehelp.IDialogContent","sap.ui.mdc.valuehelp.ITypeaheadContainer","sap.ui.mdc.valuehelp.IDialogContainer"]}}}}',
	"sap/ui/mdc/ui/Container.js":function(){

}
});
//# sourceMappingURL=library-preload.js.map
