{"version":3,"file":"FlexState.js","names":["sap","ui","define","_omit","each","includes","merge","ObjectPath","Log","Component","FlexObjectFactory","prepareAppDescriptorMap","prepareChangesMap","prepareCompVariantsMap","prepareVariantsMap","DataSelector","InitialPrepareFunctions","Loader","ManifestUtils","StorageUtils","FlexInfoSession","LayerUtils","requireAsync","Utils","FlexState","_mInstances","_mNavigationHandlers","_mInitPromises","_oShellNavigationService","_oURLParsingService","_oChangePersistenceFactory","_mFlexObjectInfo","appDescriptorChanges","prepareFunction","pathInResponse","changes","initialPreparation","uiChanges","variants","compVariants","_mExternalData","enhancePropertyBag","mPropertyBag","oComponent","get","componentId","componentData","getComponentData","manifest","rawManifest","getManifestObject","reference","getFlexReference","createFlexObjects","oStorageResponse","aRuntimePersistence","sKey","vValue","Array","isArray","forEach","oChangeDef","push","createFromFileContent","initializeState","sMapName","sReference","fnPreparation","oUpdate","updateInstance","oFlexObjectDataSelector","id","parameterKey","executeFunction","oData","oPersistence","runtimePersistence","flexObjects","concat","runtimeOnlyData","getInstanceEntryOrThrowError","Error","preparedMaps","unfilteredStorageResponse","storageResponse","callPrepareFunction","checkUpdate","getAppDescriptorMap","getChangesMap","getVariantsMap","getCompVariantsMap","buildRuntimePersistence","aFlexObjects","initializeNewInstance","bDataUpdated","filterByMaxLayer","mResponse","mFilteredReturn","mFlexObjects","oURLParsingService","getUShellService","isLayerFilteringRequired","iIndex","mFlexObjectInfo","sPath","set","filterChangeDefinitionsByMaxLayer","loadFlexData","then","partialFlexState","registerMaxLayerHandler","storeAllContextsProvided","Object","freeze","oResponse","info","undefined","oFlexInfoSession","getByReference","allContextsProvided","setByReference","oShellNavigationService","handleMaxLayerChange","bind","registerNavigationFilter","deRegisterMaxLayerHandler","unregisterNavigationFilter","sNewHash","sOldHash","sCurrentMaxLayer","getMaxLayerTechnicalParameter","sPreviousMaxLayer","rebuildFilteredResponse","oError","error","message","NavigationFilterStatus","Continue","checkPartialFlexState","mInitProperties","oFlexInstance","partialFlexData","reInitialize","checkComponentId","sFlexInstanceComponentId","loadUShellServices","Promise","all","aServices","catch","sServiceName","getUshellContainer","lazyLoadModules","oModule","initialize","sFlexReference","mEvaluatedProperties","isInitialized","getFlexReferenceForControl","control","clearAndInitialize","clearState","normalizeReference","clearCachedResult","_instanceCache","hasOwnProperty","removeDirtyChanges","keys","setInitialNonFlCompVariantData","sPersistencyKey","oStandardVariant","aVariants","sSVMControlId","standardVariant","controlId","getInitialNonFlCompVariantData","setFakeStandardVariant","sComponentId","oVariantsMap","getVariantsState","resetFakedStandardVariants","addDirtyFlexObject","oFlexObject","removeDirtyFlexObject","indexOf","splice","getFlexObjectsSelector","getUIChanges","getAppDescriptorChanges","oContent","sVariantManagementReference","oVariants","getUI2Personalization","ui2personalization","getStorageResponse","resolve","getFlexObjectsFromStorageResponse"],"sources":["FlexState-dbg.js"],"mappings":"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"}