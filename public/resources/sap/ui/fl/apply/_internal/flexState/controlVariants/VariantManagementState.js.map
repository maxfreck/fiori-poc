{"version":3,"file":"VariantManagementState.js","names":["sap","ui","define","_omit","_pick","includes","isEmptyObject","ObjectPath","Log","JsControlTreeModifier","VariantsApplyUtil","States","FlexState","LayerUtils","Utils","VariantManagementState","mUpdateStateListeners","getReferencedChanges","mPropertyBag","aReferencedVariantChanges","variantData","instance","getVariantReference","getControlChangesForVariant","Object","assign","vReference","filter","oReferencedChange","compareAgainstCurrentLayer","getLayer","getVariants","oVariantsMap","getContent","reference","aVariants","get","vmReference","addChangeContentToVariantMap","oVariantObject","oChangeContent","bAdd","sChangeType","changeType","push","some","oExistingContent","iIndex","fileName","splice","addChange","oFlexObjects","sChangeCategory","getVariantChangeCategory","deleteChange","iChangeContentIndex","oExistingChangeContent","updateChange","map","oExistingFlexObject","fileType","addUpdateStateListener","sReference","fnListener","removeUpdateStateListener","getVariantsState","addFakeStandardVariant","sComponentId","oStandardVariant","setFakeStandardVariant","clearFakedStandardVariants","resetFakedStandardVariants","aResult","oVariant","getVariant","controlChanges","oChange","includeDirtyChanges","getState","LifecycleState","PERSISTED","getVariantChangesForVariant","variantChanges","defaultVariant","oCurrentVariant","getId","getCurrentVariantReference","oVariantManagementSection","currentVariant","getVariantManagementReferences","keys","addVariantToVariantManagement","variants","slice","getIndexToSortVariant","concat","removeVariantFromVariantManagement","bFound","oCurrentVariantContent","index","variant","setVariantData","oVariantData","previousIndex","iSortedIndex","addChangeToVariant","aExistingChanges","aChangeIds","change","removeChangeFromVariant","aControlChanges","bChangeFound","oCurrentChange","getInitialChanges","reduce","aInitialChanges","sVMReference","sCurrentVReference","mArguments","fillVariantModel","forEach","oVariantEntry","JSON","parse","stringify","key","title","getName","layer","favorite","getFavorite","executeOnSelect","getExecuteOnSelection","visible","getVisible","author","getSupportInformation","user","contexts","getContexts","updateChangesForVariantManagementInMap","oVariantManagement","changeContent","selector","id","add","variantManagementChanges","setCurrentVariant","newVReference","updateVariantsState","error","getFlexObjectsFromStorageResponse","changeToBeAddedOrDeleted","oFileContent","convertToFileContent","NEW","setState","DELETE","DIRTY","waitForInitialVariantChanges","aCurrentVariantChanges","aControls","aCurrentControls","oSelector","getSelector","oControl","bySelector","appComponent","indexOfObject","length","flexController","waitForChangesToBeApplied","Promise","resolve"],"sources":["VariantManagementState-dbg.js"],"mappings":";;;;;AAMAA,IAAIC,GAAGC,OAAO,CACb,iCACA,iCACA,yBACA,8BACA,2BACA,eACA,oDACA,kDACA,+CACA,gDACA,uBACA,mBACE,SACFC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,aAYA,IAAIC,EAAyB,CAAC,EAE9B,IAAIC,EAAwB,CAAC,EAE7B,SAASC,EAAqBC,GAC7B,IAAIC,EAA4B,GAChC,GAAID,EAAaE,YAAYC,SAASC,sBAAuB,CAC5DH,EAA4BJ,EAAuBQ,4BAA4BC,OAAOC,OACrFP,EAAc,CACbQ,WAAYR,EAAaE,YAAYC,SAASC,yBAEhD,OAAOH,EAA0BQ,OAAO,SAASC,GAChD,OAAOf,EAAWgB,2BAA2BD,EAAkBE,WAAYZ,EAAaE,YAAYC,SAASS,eAAiB,CAC/H,EACD,CACA,OAAOX,CACR,CAEA,SAASY,EAAYb,GACpB,IAAIc,EAAejB,EAAuBkB,WAAWf,EAAagB,WAClE,IAAIC,EAAY5B,EAAW6B,IAAI,CAAClB,EAAamB,YAAa,YAAaL,GACvE,OAAOG,GAAa,EACrB,CAEA,SAASG,EAA6BC,EAAgBC,EAAgBC,GACrE,IAAIC,EAAcF,EAAeG,WACjC,IAAKJ,EAAgB,CACpBA,EAAiB,CAAC,CACnB,CACA,IAAKA,EAAeG,GAAc,CACjCH,EAAeG,GAAe,EAC/B,CACA,GAAID,EAAM,CACTF,EAAeG,GAAaE,KAAKJ,GACjC,OAAO,IACR,CACA,OAAOD,EAAeG,GAAaG,KAAK,SAASC,EAAkBC,GAClE,GAAID,EAAiBE,WAAaR,EAAeQ,SAAU,CAC1DT,EAAeG,GAAaO,OAAOF,EAAQ,GAC3C,OAAO,IACR,CACD,EACD,CAEA,SAASG,EAAUV,EAAgBW,GAClC,IAAIC,EAAkBC,EAAyBb,GAC/CW,EAAaC,GAAiBR,KAAKJ,EACpC,CAEA,SAASc,EAAad,EAAgBW,GACrC,IAAIC,EAAkBC,EAAyBb,GAC/C,IAAIe,GAAuB,EAC3BJ,EAAaC,GAAiBP,KAAK,SAASW,EAAwBT,GACnE,GAAIS,EAAuBR,WAAaR,EAAeQ,SAAU,CAChEO,EAAsBR,EACtB,OAAO,IACR,CACD,GACA,GAAIQ,GAAuB,EAAG,CAC7BJ,EAAaC,GAAiBH,OAAOM,EAAqB,EAC3D,CACD,CAEA,SAASE,EAAajB,EAAgBW,GACrC,IAAIC,EAAkBC,EAAyBb,GAC/CW,EAAaC,GAAmBD,EAAaC,GAAiBM,IAAI,SAASC,GAC1E,OAAOnB,EAAeQ,WAAaW,EAAoBX,SACpDR,EACAmB,CACJ,EACD,CAEA,SAASN,EAAyBb,GACjC,OAAQA,EAAeoB,UACtB,IAAK,SACJ,MAAO,iCACR,IAAK,eACJ,MAAO,WACR,IAAK,sBACJ,MAAO,iBACR,IAAK,iCACJ,MAAO,2BACR,SAEF,CAUA7C,EAAuB8C,uBAAyB,SAASC,EAAYC,GACpE/C,EAAsB8C,GAAcC,CACrC,EAOAhD,EAAuBiD,0BAA4B,SAASF,UACpD9C,EAAsB8C,EAC9B,EAUA/C,EAAuBkB,WAAa,SAAS6B,GAC5C,OAAOlD,EAAUqD,iBAAiBH,EACnC,EAEA/C,EAAuBmD,uBAAyB,SAASJ,EAAYK,EAAcC,GAClFxD,EAAUyD,uBAAuBP,EAAYK,EAAcC,EAC5D,EAEArD,EAAuBuD,2BAA6B,SAASR,EAAYK,GACxEvD,EAAU2D,2BAA2BT,EAAYK,EAClD,EAeApD,EAAuBQ,4BAA8B,SAASL,GAC7D,IAAIsD,EAAU,GACd,IAAIC,EAAW1D,EAAuB2D,WAAWxD,GACjD,GAAIuD,EAAU,CACbD,EAAUC,EAASE,eAAehD,OAAO,SAASiD,GACjD,OACC1D,EAAa2D,sBAAwB,OAClCD,EAAQE,aAAenE,EAAOoE,eAAeC,SAElD,EACD,CACA,OAAOR,CACR,EAWAzD,EAAuBkE,4BAA8B,SAAS/D,GAC7D,IAAIuD,EAAW1D,EAAuB2D,WAAWxD,GACjD,OAAOuD,GAAYA,EAASS,gBAAkB,CAAC,CAChD,EAcAnE,EAAuB2D,WAAa,SAASxD,GAC5C,IAAIuD,EACJ,IAAIzC,EAAejB,EAAuBkB,WAAWf,EAAagB,WAClEhB,EAAaQ,WAAaR,EAAaQ,YAAcM,EAAad,EAAamB,aAAa8C,eAC5F,IAAIhD,EAAYJ,EAAYb,GAC5BiB,EAAUU,KAAK,SAASuC,GACvB,GAAIA,EAAgB/D,SAASgE,UAAYnE,EAAaQ,WAAY,CACjE+C,EAAWW,EACX,OAAO,IACR,CACD,GACA,OAAOX,CACR,EAUA1D,EAAuBuE,2BAA6B,SAASpE,GAC5D,IAAIc,EAAejB,EAAuBkB,WAAWf,EAAagB,WAClE,IAAIqD,EAA4BvD,EAAad,EAAamB,aAC1D,OAAOkD,EAA0BC,gBAAkBD,EAA0BJ,cAC9E,EAQApE,EAAuB0E,+BAAiC,SAAS3B,GAChE,IAAI9B,EAAejB,EAAuBkB,WAAW6B,GACrD,OAAOtC,OAAOkE,KAAK1D,EACpB,EAcAjB,EAAuB4E,8BAAgC,SAASzE,GAC/D,IAAIc,EAAejB,EAAuBkB,WAAWf,EAAagB,WAClE,IAAIC,EAAYH,EAAad,EAAamB,aAAauD,SAASC,QAAQ5C,OAAO,GAC/E,IAAIF,EAASrC,EAAkBoF,sBAAsB3D,EAAWjB,EAAaE,aAG7E,GAAIF,EAAaE,YAAYC,SAASC,sBAAuB,CAC5D,IAAIH,EAA4BF,EAAqBC,GACrDA,EAAaE,YAAYuD,eAAiBxD,EAA0B4E,OAAO7E,EAAaE,YAAYuD,eACrG,CAGA3C,EAAad,EAAamB,aAAauD,SAAS3C,OAAOF,EAAS,EAAG,EAAG7B,EAAaE,aACnF,OAAO2B,EAAS,CACjB,EAcAhC,EAAuBiF,mCAAqC,SAAS9E,GACpE,IAAI6B,EACJ,IAAIf,EAAejB,EAAuBkB,WAAWf,EAAagB,WAClE,IAAI+D,EAASjE,EAAad,EAAamB,aAAauD,SAAS/C,KAC5D,SAASqD,EAAwBC,GAChC,GAAID,EAAuB7E,SAASgE,UAAYnE,EAAakF,QAAQf,QAAS,CAC7EtC,EAASoD,EACT,OAAO,IACR,CACD,GACD,GAAIF,EAAQ,CACXjE,EAAad,EAAamB,aAAauD,SAAS3C,OAAOF,EAAQ,EAChE,CACA,OAAOA,CACR,EAcAhC,EAAuBsF,eAAiB,SAASnF,GAChD,IAAIc,EAAejB,EAAuBkB,WAAWf,EAAagB,WAClE,IAAIC,EAAYH,EAAad,EAAamB,aAAauD,SACvD,IAAIU,EAAenE,EAAUjB,EAAaqF,eAG1C,GAAID,EAAajF,SAASgE,UAAYnE,EAAamB,YAAa,CAE/DF,EAAUc,OAAO/B,EAAaqF,cAAe,GAG7C,IAAIC,EAAe9F,EAAkBoF,sBAAsB3D,EAAU0D,MAAM,GAAIS,GAG/EnE,EAAUc,OAAOuD,EAAe,EAAG,EAAGF,GAEtC,OAAOE,EAAe,CACvB,CAEArE,EAAUc,OAAO/B,EAAaqF,cAAe,EAAGD,GAChD,OAAOpF,EAAaqF,aACrB,EAeAxF,EAAuB0F,mBAAqB,SAASvF,GACpD,IAAIwF,EAAmB3F,EAAuBQ,4BAA4BL,GAC1E,IAAIyF,EAAaD,EAAiBhD,IAAI,SAASkB,GAC9C,OAAOA,EAAQS,OAChB,GAEA,IAAKhF,EAASsG,EAAYzF,EAAa0F,OAAOvB,SAAU,CACvD,IAAIZ,EAAW1D,EAAuB2D,WAAWxD,GACjDuD,EAASE,eAAiB+B,EAAiBX,OAAO,CAAC7E,EAAa0F,SAChE,OAAO,IACR,CACA,OAAO,KACR,EAeA7F,EAAuB8F,wBAA0B,SAAS3F,GACzD,IAAI4F,EAAkB/F,EAAuBQ,4BAA4BL,GACzE,IAAIuD,EAAW1D,EAAuB2D,WAAWxD,GACjD,IAAI6F,EAAe,MAEnB,GAAItC,EAAU,CACbA,EAASE,eAAiBmC,EAAgBnF,OAAO,SAASqF,GACzD,IAAKD,GAAgBC,EAAe3B,UAAYnE,EAAa0F,OAAOvB,QAAS,CAC5E0B,EAAe,KACf,OAAO,KACR,CACA,OAAO,IACR,EACD,CACA,OAAOA,CACR,EAgBAhG,EAAuBkG,kBAAoB,SAAS/F,GACnD,IAAIc,EAAejB,EAAuBkB,WAAWf,EAAagB,WAClE,OAAOV,OAAOkE,KAAK1D,GAAckF,OAAO,SAASC,EAAiBC,GACjE,GACElG,EAAamB,aAAenB,EAAamB,cAAgB+E,IACtDlG,EAAamB,YAChB,CACD,IAAIgF,EAAqBrF,EAAaoF,GAAc5B,eAAiB,iBAAmB,iBACxF,IAAI8B,EAAa9F,OAAOC,OAAO,CAAC,EAAGP,EAAc,CAChDmB,YAAa+E,EACb1F,WAAYM,EAAaoF,GAAcC,GACvCxC,oBAAqB,QAItB,OAAOsC,EAAgBpB,OAAOhF,EAAuBQ,4BAA4B+F,GAClF,CACA,OAAOH,CACR,EAAG,GACJ,EAYApG,EAAuBwG,iBAAmB,SAASrG,GAClD,IAAIc,EAAejB,EAAuBkB,WAAWf,EAAagB,WAClE,OAAOV,OAAOkE,KAAK1D,GAAckF,OAChC,SAASZ,EAAcc,GACtBd,EAAac,GAAgB,CAE5BjC,eAAgBnD,EAAaoF,GAAcjC,eAC3CS,SAAU,IAGX,GAAI5D,EAAaoF,GAAc5B,eAAgB,CAC9Cc,EAAac,GAAc5B,eAAiBxD,EAAaoF,GAAc5B,cACxE,CACAzD,EAAYP,OAAOC,OAAOP,EAAc,CAACmB,YAAa+E,KACpDI,QAAQ,SAASC,EAAetB,GAChC,IAAI1B,EAAWgD,EAAcpG,SAC7BiF,EAAac,GAAcxB,SAASO,GAEnCuB,KAAKC,MACJD,KAAKE,UAAU,CACdC,IAAKpD,EAASY,QACdyC,MAAOrD,EAASsD,UAChBC,MAAOvD,EAAS3C,WAChBmG,SAAUxD,EAASyD,cACnBC,gBAAiB1D,EAAS2D,wBAC1BC,QAAS5D,EAAS6D,aAClBC,OAAQ9D,EAAS+D,wBAAwBC,KACzCC,SAAUjE,EAASkE,gBAGvB,GACD,OAAOrC,CACR,EAAG,CAAC,EACN,EAcAvF,EAAuB6H,uCAAyC,SAAS1H,GACxE,IAAIc,EAAejB,EAAuBkB,WAAWf,EAAagB,WAClE,IAAI2G,EAAqB7G,EAAad,EAAamB,aACnD,GAAInB,EAAa4H,cAAclF,WAAa,sBAAuB,CAClEiF,EAAmBjD,SAAS/C,KAAK,SAASyD,GACzC,GAAIA,EAAajF,SAASgE,UAAYnE,EAAa4H,cAAcC,SAASC,GAAI,CAC7E1G,EAA6BgE,EAAapB,eAAgBhE,EAAa4H,cAAe5H,EAAa+H,IACpG,CACD,EACD,MAAO,GAAI/H,EAAa4H,cAAclF,WAAa,iCAAkC,CACpFtB,EAA6BuG,EAAmBK,yBAA0BhI,EAAa4H,cAAe5H,EAAa+H,IACpH,CACD,EAaAlI,EAAuBoI,kBAAoB,SAASjI,GACnD,IAAIc,EAAejB,EAAuBkB,WAAWf,EAAagB,WAClE,GAAI3B,EAAW6B,IAAI,CAAClB,EAAamB,aAAcL,GAAe,CAC7DA,EAAad,EAAamB,aAAamD,eAAiBtE,EAAakI,aACtE,CACD,EAaArI,EAAuBsI,oBAAsB,SAASnI,GACrD,IAAIc,EAAejB,EAAuBkB,WAAWf,EAAagB,WAElE,GAAI5B,EAAc0B,GAAe,CAIhCxB,EAAI8I,MAAM,wCACV,MACD,CAEA,IAAInG,EAAevC,EAAU2I,kCAAkCrI,EAAagB,WAE5E,GAAIhB,EAAasI,yBAA0B,CAC1C,IAAIC,EAAevI,EAAasI,yBAAyBE,uBACzD,OAAQxI,EAAasI,yBAAyB1E,YAC7C,KAAKnE,EAAOoE,eAAe4E,IAC1BzG,EAAUuG,EAActG,GACxBjC,EAAasI,yBAAyBI,SAASjJ,EAAOoE,eAAeC,WACrE,MACD,KAAKrE,EAAOoE,eAAe8E,OAC1BvG,EAAamG,EAActG,GAC3B,MACD,KAAKxC,EAAOoE,eAAe+E,MAC1BrG,EAAagG,EAActG,GAC3BjC,EAAasI,yBAAyBI,SAASjJ,EAAOoE,eAAeC,WACrE,MACD,SAED,GAAIhE,EAAsBE,EAAagB,WAAY,CAClDlB,EAAsBE,EAAagB,YACpC,CACD,CACD,EAYAnB,EAAuBgJ,6BAA+B,SAAS7I,GAC9D,IAAI8I,EAAyBjJ,EAAuBkG,kBAAkB,CACrE5E,YAAanB,EAAamB,YAC1BH,UAAWhB,EAAagB,YAEzB,IAAI+H,EAAYD,EAAuB9C,OAAO,SAASgD,EAAkBtF,GACxE,IAAIuF,EAAYvF,EAAQwF,cACxB,IAAIC,EAAW5J,EAAsB6J,WAAWH,EAAWjJ,EAAaqJ,cACxE,GAAIF,GAAYvJ,EAAM0J,cAAcN,EAAkB,CAACnB,SAAUsB,OAAgB,EAAG,CACnFH,EAAiBtH,KAAK,CAACmG,SAAUsB,GAClC,CACA,OAAOH,CACR,EAAG,IAEH,OAAOD,EAAUQ,OAASvJ,EAAawJ,eAAeC,0BAA0BV,GAAaW,QAAQC,SACtG,EAEA,OAAO9J,CACR"}