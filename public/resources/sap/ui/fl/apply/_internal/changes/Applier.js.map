{"version":3,"file":"Applier.js","names":["sap","ui","define","Log","Element","JsControlTreeModifier","FlexCustomData","Utils","DependencyHandler","FlUtils","oLastPromise","FakePromise","checkControlAndDependentSelectorControls","oChange","mPropertyBag","oSelector","getSelector","id","name","Promise","reject","Error","checkFailedSelectors","indexOfObject","failedSelectors","modifier","bySelectorTypeIndependent","appComponent","view","then","oControl","aDependentControlSelectorList","getDependentControlSelectorList","forEach","oDependentControlSelector","oDependentControl","bySelector","isXmlModifier","targets","checkAndAdjustChangeStatus","mChangesMap","oFlexController","mControl","getControlIfTemplateAffected","oModifier","bHasAppliedCustomData","getAppliedCustomDataValue","control","bIsCurrentlyAppliedOnControl","hasChangeApplyFinishedCustomData","bChangeStatusAppliedFinished","isApplyProcessFinished","oAppComponent","fnCheckFunction","checkIfDependencyIsStillValid","bind","_oChangePersistence","copyDependenciesFromInitialChangesMap","setInitialApplyState","setRevertData","getParsedRevertDataFromCustomData","markSuccessful","markFailed","checkPreconditions","sErrorMessage","getJsOnly","handleAfterApply","oInitializedControl","resolve","updateAggregation","originalControl","getContent","boundAggregation","undefined","addAppliedCustomData","oResult","success","handleAfterApplyError","oError","bXmlModifier","error","sChangeId","getId","sLogMessage","bErrorOccurred","sCustomDataIdentifier","getCustomDataIdentifier","notApplicableChangesCustomDataKey","formatAndLogMessage","message","failedChangesCustomDataKeyXml","stack","failedChangesCustomDataKeyJs","addFailedCustomData","logApplyChangeError","sChangeType","getChangeType","sTargetControlId","fullQualifiedName","getNamespace","getFileType","sWarningMessage","warning","adjustOriginalSelector","oPropertyBag","oCurrentOriginalControl","originalSelectorToBeAdjusted","oActualOriginalControl","getBindingInfo","template","getParent","aStack","oTempControl","push","aggregation","sParentAggregationName","index","getAggregation","indexOf","reverse","oInfo","addDependentControl","registerOnAfterXMLChangeProcessingHandler","aOnAfterXMLChangeProcessingHandlers","oChangeHandler","iChangeHandlerIndex","findIndex","mHandler","handler","length","controls","includes","Applier","addPreConditionForInitialChangeApplying","oPromise","applyChangeOnControl","pHandlerPromise","changeHandler","getChangeHandler","hasApplyProcessStarted","addPromiseForApplyProcessing","startApplying","applyChange","catch","applyAllChangesForControl","fnGetChangesMap","sControlId","aChangesForControl","mChanges","getViewForControl","_ignoreOnce","setQueuedForApply","aPromiseStack","bControlWithDependencies","mControlsWithDependencies","removeControlsDependencies","resolveDependenciesForChange","mDependencies","fnCallback","addChangeApplyCallbackToDependency","execPromiseQueueSequentially","processDependentQueue","applyAllChangesForXMLView","aChanges","Array","isArray","reduce","oPreviousPromise","oReturnedControl","onAfterXMLChangeProcessing","oReturn","getDependentSelectorList"],"sources":["Applier-dbg.js"],"mappings":"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"}