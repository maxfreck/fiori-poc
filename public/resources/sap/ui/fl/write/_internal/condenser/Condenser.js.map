{"version":3,"file":"Condenser.js","names":["sap","ui","define","each","isPlainObject","ObjectPath","Log","JsControlTreeModifier","Core","CondenserClassification","ChangesUtils","UIChange","States","LastOneWins","Reverse","Update","UIReconstruction","CondenserUtils","FlUtils","Measurement","_isEqual","Condenser","UNCLASSIFIED","NON_INDEX_RELEVANT","lastOneWins","reverse","update","PROPERTIES_WITH_SELECTORS","isCreateAfterMoveSubtype","mSubtypes","oCondenserInfo","aMoveSubType","Move","classification","Create","length","targetContainer","isMoveAfterDestroySubtype","Destroy","isCreateAfterDestroySubtype","mClassifications","addIndexRelatedChange","mUIReconstructions","oChange","sClassification","change","condenserState","updateChange","forEach","addChange","addNonIndexRelatedChange","mProperties","addToChangesMap","Promise","resolve","addClassifiedChange","mTypes","aIndexRelatedChanges","type","NOT_INDEX_RELEVANT","push","targetAggregation","addUnclassifiedChange","sKey","getCondenserInfoFromChangeHandler","oAppComponent","sControlId","getControlIdBySelector","getSelector","oControl","byId","mPropertyBag","modifier","appComponent","view","getViewForControl","mControl","getControlIfTemplateAffected","getChangeHandler","then","oChangeHandler","getCondenserInfo","undefined","bTemplateAffected","replaceTemplateSelector","catch","oOriginalSelector","getOriginalSelector","oTemplateSelector","sPropertyName","getTypesMap","mReducedChanges","sAffectedControlId","affectedControl","updateControl","sUpdateControlId","aPath","uniqueKey","oUpdateCondenserInfo","get","set","defineMaps","aChanges","reduce","oPromise","addChangeToMap","bind","this","changeSelectorsToIdsInCondenserInfo","addType","condenseUpdateChange","INDEX_RELEVANT","updateContent","isPersisted","getChanges","mObjects","vSubObjects","getChangesFromMap","Array","isArray","oObject","getAllReducedChanges","getCondenserInfos","aCondenserInfos","sortByInitialOrder","aReducedChanges","sort","a","b","indexOf","sortCondenserInfosByInitialOrder","addAllIndexRelatedChanges","aReducedChangeIds","map","getId","handleChangeUpdate","oUpdateChange","getContent","getState","LifecycleState","NEW","oCondensedChange","oNewContent","setContent","setState","DIRTY","condense","start","aAllIndexRelatedChanges","aNotCondensableChanges","aCondensableChanges","slice","DELETED","isSuccessfullyApplied","end","bUnclassifiedChanges","compareAndUpdate","concat","bSuccess","aReducedIndexRelatedChangesPerContainer","sortIndexRelatedChanges","oError","error","message","aReducedIndexRelatedChanges","swapChanges"],"sources":["Condenser-dbg.js"],"mappings":"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"}